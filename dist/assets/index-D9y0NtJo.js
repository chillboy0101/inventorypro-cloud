var zA=Object.defineProperty;var WA=(t,e,n)=>e in t?zA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xe=(t,e,n)=>WA(t,typeof e!="symbol"?e+"":e,n);function q1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function HA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var F_={exports:{}},If={},B_={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu=Symbol.for("react.element"),$A=Symbol.for("react.portal"),GA=Symbol.for("react.fragment"),qA=Symbol.for("react.strict_mode"),YA=Symbol.for("react.profiler"),XA=Symbol.for("react.provider"),KA=Symbol.for("react.context"),ZA=Symbol.for("react.forward_ref"),QA=Symbol.for("react.suspense"),JA=Symbol.for("react.memo"),ek=Symbol.for("react.lazy"),Ty=Symbol.iterator;function tk(t){return t===null||typeof t!="object"?null:(t=Ty&&t[Ty]||t["@@iterator"],typeof t=="function"?t:null)}var U_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V_=Object.assign,z_={};function vl(t,e,n){this.props=t,this.context=e,this.refs=z_,this.updater=n||U_}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W_(){}W_.prototype=vl.prototype;function Y1(t,e,n){this.props=t,this.context=e,this.refs=z_,this.updater=n||U_}var X1=Y1.prototype=new W_;X1.constructor=Y1;V_(X1,vl.prototype);X1.isPureReactComponent=!0;var Iy=Array.isArray,H_=Object.prototype.hasOwnProperty,K1={current:null},$_={key:!0,ref:!0,__self:!0,__source:!0};function G_(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)H_.call(e,r)&&!$_.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];s.children=d}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Lu,type:t,key:i,ref:a,props:s,_owner:K1.current}}function nk(t,e){return{$$typeof:Lu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Z1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lu}function rk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ry=/\/+/g;function I0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rk(""+t.key):e.toString(36)}function nh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Lu:case $A:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+I0(a,0):r,Iy(s)?(n="",t!=null&&(n=t.replace(Ry,"$&/")+"/"),nh(s,e,n,"",function(h){return h})):s!=null&&(Z1(s)&&(s=nk(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ry,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Iy(t))for(var u=0;u<t.length;u++){i=t[u];var d=r+I0(i,u);a+=nh(i,e,n,d,s)}else if(d=tk(t),typeof d=="function")for(t=d.call(t),u=0;!(i=t.next()).done;)i=i.value,d=r+I0(i,u++),a+=nh(i,e,n,d,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function cd(t,e,n){if(t==null)return t;var r=[],s=0;return nh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function sk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},rh={transition:null},ik={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:rh,ReactCurrentOwner:K1};function q_(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:cd,forEach:function(t,e,n){cd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cd(t,function(){e++}),e},toArray:function(t){return cd(t,function(e){return e})||[]},only:function(t){if(!Z1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=vl;ut.Fragment=GA;ut.Profiler=YA;ut.PureComponent=Y1;ut.StrictMode=qA;ut.Suspense=QA;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ik;ut.act=q_;ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=V_({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=K1.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)H_.call(e,d)&&!$_.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Lu,type:t.type,key:s,ref:i,props:r,_owner:a}};ut.createContext=function(t){return t={$$typeof:KA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XA,_context:t},t.Consumer=t};ut.createElement=G_;ut.createFactory=function(t){var e=G_.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:ZA,render:t}};ut.isValidElement=Z1;ut.lazy=function(t){return{$$typeof:ek,_payload:{_status:-1,_result:t},_init:sk}};ut.memo=function(t,e){return{$$typeof:JA,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=rh.transition;rh.transition={};try{t()}finally{rh.transition=e}};ut.unstable_act=q_;ut.useCallback=function(t,e){return hr.current.useCallback(t,e)};ut.useContext=function(t){return hr.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};ut.useEffect=function(t,e){return hr.current.useEffect(t,e)};ut.useId=function(){return hr.current.useId()};ut.useImperativeHandle=function(t,e,n){return hr.current.useImperativeHandle(t,e,n)};ut.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return hr.current.useMemo(t,e)};ut.useReducer=function(t,e,n){return hr.current.useReducer(t,e,n)};ut.useRef=function(t){return hr.current.useRef(t)};ut.useState=function(t){return hr.current.useState(t)};ut.useSyncExternalStore=function(t,e,n){return hr.current.useSyncExternalStore(t,e,n)};ut.useTransition=function(){return hr.current.useTransition()};ut.version="18.3.1";B_.exports=ut;var T=B_.exports;const _l=Tf(T),ok=q1({__proto__:null,default:_l},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ak=T,lk=Symbol.for("react.element"),ck=Symbol.for("react.fragment"),uk=Object.prototype.hasOwnProperty,dk=ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hk={key:!0,ref:!0,__self:!0,__source:!0};function Y_(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)uk.call(e,r)&&!hk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lk,type:t,key:i,ref:a,props:s,_owner:dk.current}}If.Fragment=ck;If.jsx=Y_;If.jsxs=Y_;F_.exports=If;var m=F_.exports,tg={},X_={exports:{}},Vr={},K_={exports:{}},Z_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ne){var J=Q.length;Q.push(ne);e:for(;0<J;){var oe=J-1>>>1,re=Q[oe];if(0<s(re,ne))Q[oe]=ne,Q[J]=re,J=oe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ne=Q[0],J=Q.pop();if(J!==ne){Q[0]=J;e:for(var oe=0,re=Q.length,ae=re>>>1;oe<ae;){var q=2*(oe+1)-1,le=Q[q],ue=q+1,Pe=Q[ue];if(0>s(le,J))ue<re&&0>s(Pe,le)?(Q[oe]=Pe,Q[ue]=J,oe=ue):(Q[oe]=le,Q[q]=J,oe=q);else if(ue<re&&0>s(Pe,J))Q[oe]=Pe,Q[ue]=J,oe=ue;else break e}}return ne}function s(Q,ne){var J=Q.sortIndex-ne.sortIndex;return J!==0?J:Q.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],h=[],x=1,y=null,b=3,_=!1,C=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Q){for(var ne=n(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=Q)r(h),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=n(h)}}function j(Q){if(N=!1,I(Q),!C)if(n(d)!==null)C=!0,be(F);else{var ne=n(h);ne!==null&&$(j,ne.startTime-Q)}}function F(Q,ne){C=!1,N&&(N=!1,E(R),R=-1),_=!0;var J=b;try{for(I(ne),y=n(d);y!==null&&(!(y.expirationTime>ne)||Q&&!X());){var oe=y.callback;if(typeof oe=="function"){y.callback=null,b=y.priorityLevel;var re=oe(y.expirationTime<=ne);ne=t.unstable_now(),typeof re=="function"?y.callback=re:y===n(d)&&r(d),I(ne)}else r(d);y=n(d)}if(y!==null)var ae=!0;else{var q=n(h);q!==null&&$(j,q.startTime-ne),ae=!1}return ae}finally{y=null,b=J,_=!1}}var z=!1,O=null,R=-1,M=5,U=-1;function X(){return!(t.unstable_now()-U<M)}function V(){if(O!==null){var Q=t.unstable_now();U=Q;var ne=!0;try{ne=O(!0,Q)}finally{ne?te():(z=!1,O=null)}}else z=!1}var te;if(typeof A=="function")te=function(){A(V)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,G=fe.port2;fe.port1.onmessage=V,te=function(){G.postMessage(null)}}else te=function(){k(V,0)};function be(Q){O=Q,z||(z=!0,te())}function $(Q,ne){R=k(function(){Q(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){C||_||(C=!0,be(F))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var J=b;b=ne;try{return Q()}finally{b=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ne){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var J=b;b=Q;try{return ne()}finally{b=J}},t.unstable_scheduleCallback=function(Q,ne,J){var oe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?oe+J:oe):J=oe,Q){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=J+re,Q={id:x++,callback:ne,priorityLevel:Q,startTime:J,expirationTime:re,sortIndex:-1},J>oe?(Q.sortIndex=J,e(h,Q),n(d)===null&&Q===n(h)&&(N?(E(R),R=-1):N=!0,$(j,J-oe))):(Q.sortIndex=re,e(d,Q),C||_||(C=!0,be(F))),Q},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(Q){var ne=b;return function(){var J=b;b=ne;try{return Q.apply(this,arguments)}finally{b=J}}}})(Z_);K_.exports=Z_;var fk=K_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk=T,Fr=fk;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q_=new Set,Jc={};function na(t,e){nl(t,e),nl(t+"Capture",e)}function nl(t,e){for(Jc[t]=e,t=0;t<e.length;t++)Q_.add(e[t])}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ng=Object.prototype.hasOwnProperty,gk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Py={},Oy={};function pk(t){return ng.call(Oy,t)?!0:ng.call(Py,t)?!1:gk.test(t)?Oy[t]=!0:(Py[t]=!0,!1)}function xk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yk(t,e,n,r){if(e===null||typeof e>"u"||xk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fr(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zn[t]=new fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zn[e]=new fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zn[t]=new fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zn[t]=new fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zn[t]=new fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zn[t]=new fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zn[t]=new fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zn[t]=new fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zn[t]=new fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q1=/[\-:]([a-z])/g;function J1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Q1,J1);Zn[e]=new fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Q1,J1);Zn[e]=new fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Q1,J1);Zn[e]=new fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zn[t]=new fr(t,1,!1,t.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zn[t]=new fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ep(t,e,n,r){var s=Zn.hasOwnProperty(e)?Zn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yk(e,n,s,r)&&(n=null),r||s===null?pk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mi=mk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ud=Symbol.for("react.element"),ka=Symbol.for("react.portal"),Na=Symbol.for("react.fragment"),tp=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),J_=Symbol.for("react.provider"),e3=Symbol.for("react.context"),np=Symbol.for("react.forward_ref"),sg=Symbol.for("react.suspense"),ig=Symbol.for("react.suspense_list"),rp=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),t3=Symbol.for("react.offscreen"),My=Symbol.iterator;function $l(t){return t===null||typeof t!="object"?null:(t=My&&t[My]||t["@@iterator"],typeof t=="function"?t:null)}var on=Object.assign,R0;function pc(t){if(R0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R0=e&&e[1]||""}return`
`+R0+t}var P0=!1;function O0(t,e){if(!t||P0)return"";P0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,u=i.length-1;1<=a&&0<=u&&s[a]!==i[u];)u--;for(;1<=a&&0<=u;a--,u--)if(s[a]!==i[u]){if(a!==1||u!==1)do if(a--,u--,0>u||s[a]!==i[u]){var d=`
`+s[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{P0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pc(t):""}function wk(t){switch(t.tag){case 5:return pc(t.type);case 16:return pc("Lazy");case 13:return pc("Suspense");case 19:return pc("SuspenseList");case 0:case 2:case 15:return t=O0(t.type,!1),t;case 11:return t=O0(t.type.render,!1),t;case 1:return t=O0(t.type,!0),t;default:return""}}function og(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Na:return"Fragment";case ka:return"Portal";case rg:return"Profiler";case tp:return"StrictMode";case sg:return"Suspense";case ig:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case e3:return(t.displayName||"Context")+".Consumer";case J_:return(t._context.displayName||"Context")+".Provider";case np:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rp:return e=t.displayName||null,e!==null?e:og(t.type)||"Memo";case Oi:e=t._payload,t=t._init;try{return og(t(e))}catch{}}return null}function bk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return og(e);case 8:return e===tp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function eo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n3(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vk(t){var e=n3(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dd(t){t._valueTracker||(t._valueTracker=vk(t))}function r3(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=n3(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ag(t,e){var n=e.checked;return on({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=eo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s3(t,e){e=e.checked,e!=null&&ep(t,"checked",e,!1)}function lg(t,e){s3(t,e);var n=eo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cg(t,e.type,n):e.hasOwnProperty("defaultValue")&&cg(t,e.type,eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cg(t,e,n){(e!=="number"||Ch(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xc=Array.isArray;function Ga(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+eo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ug(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return on({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ly(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(xc(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:eo(n)}}function i3(t,e){var n=eo(e.value),r=eo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function o3(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?o3(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hd,a3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hd=hd||document.createElement("div"),hd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_k=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(t){_k.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ic[e]=Ic[t]})});function l3(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ic.hasOwnProperty(t)&&Ic[t]?(""+e).trim():e+"px"}function c3(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=l3(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Sk=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hg(t,e){if(e){if(Sk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function fg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mg=null;function sp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gg=null,qa=null,Ya=null;function By(t){if(t=Uu(t)){if(typeof gg!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=jf(e),gg(t.stateNode,t.type,e))}}function u3(t){qa?Ya?Ya.push(t):Ya=[t]:qa=t}function d3(){if(qa){var t=qa,e=Ya;if(Ya=qa=null,By(t),e)for(t=0;t<e.length;t++)By(e[t])}}function h3(t,e){return t(e)}function f3(){}var M0=!1;function m3(t,e,n){if(M0)return t(e,n);M0=!0;try{return h3(t,e,n)}finally{M0=!1,(qa!==null||Ya!==null)&&(f3(),d3())}}function tu(t,e){var n=t.stateNode;if(n===null)return null;var r=jf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var pg=!1;if(li)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){pg=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{pg=!1}function Ek(t,e,n,r,s,i,a,u,d){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(x){this.onError(x)}}var Rc=!1,Ah=null,kh=!1,xg=null,Ck={onError:function(t){Rc=!0,Ah=t}};function Ak(t,e,n,r,s,i,a,u,d){Rc=!1,Ah=null,Ek.apply(Ck,arguments)}function kk(t,e,n,r,s,i,a,u,d){if(Ak.apply(this,arguments),Rc){if(Rc){var h=Ah;Rc=!1,Ah=null}else throw Error(Ae(198));kh||(kh=!0,xg=h)}}function ra(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function g3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uy(t){if(ra(t)!==t)throw Error(Ae(188))}function Nk(t){var e=t.alternate;if(!e){if(e=ra(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uy(s),t;if(i===r)return Uy(s),e;i=i.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a){for(u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function p3(t){return t=Nk(t),t!==null?x3(t):null}function x3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=x3(t);if(e!==null)return e;t=t.sibling}return null}var y3=Fr.unstable_scheduleCallback,Vy=Fr.unstable_cancelCallback,Tk=Fr.unstable_shouldYield,Ik=Fr.unstable_requestPaint,Sn=Fr.unstable_now,Rk=Fr.unstable_getCurrentPriorityLevel,ip=Fr.unstable_ImmediatePriority,w3=Fr.unstable_UserBlockingPriority,Nh=Fr.unstable_NormalPriority,Pk=Fr.unstable_LowPriority,b3=Fr.unstable_IdlePriority,Rf=null,Ds=null;function Ok(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Rf,t,void 0,(t.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:Dk,Mk=Math.log,jk=Math.LN2;function Dk(t){return t>>>=0,t===0?32:31-(Mk(t)/jk|0)|0}var fd=64,md=4194304;function yc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Th(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~s;u!==0?r=yc(u):(i&=a,i!==0&&(r=yc(i)))}else a=n&~s,a!==0?r=yc(a):i!==0&&(r=yc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ws(e),s=1<<n,r|=t[n],e&=~s;return r}function Lk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ws(i),u=1<<a,d=s[a];d===-1?(!(u&n)||u&r)&&(s[a]=Lk(u,e)):d<=e&&(t.expiredLanes|=u),i&=~u}}function yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v3(){var t=fd;return fd<<=1,!(fd&4194240)&&(fd=64),t}function j0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ws(e),t[e]=n}function Bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ws(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function op(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ws(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Rt=0;function _3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S3,ap,E3,C3,A3,wg=!1,gd=[],$i=null,Gi=null,qi=null,nu=new Map,ru=new Map,Di=[],Uk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zy(t,e){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":nu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(e.pointerId)}}function ql(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Uu(e),e!==null&&ap(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Vk(t,e,n,r,s){switch(e){case"focusin":return $i=ql($i,t,e,n,r,s),!0;case"dragenter":return Gi=ql(Gi,t,e,n,r,s),!0;case"mouseover":return qi=ql(qi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return nu.set(i,ql(nu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ru.set(i,ql(ru.get(i)||null,t,e,n,r,s)),!0}return!1}function k3(t){var e=jo(t.target);if(e!==null){var n=ra(e);if(n!==null){if(e=n.tag,e===13){if(e=g3(n),e!==null){t.blockedOn=e,A3(t.priority,function(){E3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mg=r,n.target.dispatchEvent(r),mg=null}else return e=Uu(n),e!==null&&ap(e),t.blockedOn=n,!1;e.shift()}return!0}function Wy(t,e,n){sh(t)&&n.delete(e)}function zk(){wg=!1,$i!==null&&sh($i)&&($i=null),Gi!==null&&sh(Gi)&&(Gi=null),qi!==null&&sh(qi)&&(qi=null),nu.forEach(Wy),ru.forEach(Wy)}function Yl(t,e){t.blockedOn===e&&(t.blockedOn=null,wg||(wg=!0,Fr.unstable_scheduleCallback(Fr.unstable_NormalPriority,zk)))}function su(t){function e(s){return Yl(s,t)}if(0<gd.length){Yl(gd[0],t);for(var n=1;n<gd.length;n++){var r=gd[n];r.blockedOn===t&&(r.blockedOn=null)}}for($i!==null&&Yl($i,t),Gi!==null&&Yl(Gi,t),qi!==null&&Yl(qi,t),nu.forEach(e),ru.forEach(e),n=0;n<Di.length;n++)r=Di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Di.length&&(n=Di[0],n.blockedOn===null);)k3(n),n.blockedOn===null&&Di.shift()}var Xa=mi.ReactCurrentBatchConfig,Ih=!0;function Wk(t,e,n,r){var s=Rt,i=Xa.transition;Xa.transition=null;try{Rt=1,lp(t,e,n,r)}finally{Rt=s,Xa.transition=i}}function Hk(t,e,n,r){var s=Rt,i=Xa.transition;Xa.transition=null;try{Rt=4,lp(t,e,n,r)}finally{Rt=s,Xa.transition=i}}function lp(t,e,n,r){if(Ih){var s=bg(t,e,n,r);if(s===null)$0(t,e,r,Rh,n),zy(t,r);else if(Vk(s,t,e,n,r))r.stopPropagation();else if(zy(t,r),e&4&&-1<Uk.indexOf(t)){for(;s!==null;){var i=Uu(s);if(i!==null&&S3(i),i=bg(t,e,n,r),i===null&&$0(t,e,r,Rh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $0(t,e,r,null,n)}}var Rh=null;function bg(t,e,n,r){if(Rh=null,t=sp(r),t=jo(t),t!==null)if(e=ra(t),e===null)t=null;else if(n=e.tag,n===13){if(t=g3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rh=t,null}function N3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rk()){case ip:return 1;case w3:return 4;case Nh:case Pk:return 16;case b3:return 536870912;default:return 16}default:return 16}}var Bi=null,cp=null,ih=null;function T3(){if(ih)return ih;var t,e=cp,n=e.length,r,s="value"in Bi?Bi.value:Bi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ih=s.slice(t,1<r?1-r:void 0)}function oh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pd(){return!0}function Hy(){return!1}function zr(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pd:Hy,this.isPropagationStopped=Hy,this}return on(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},up=zr(Sl),Bu=on({},Sl,{view:0,detail:0}),$k=zr(Bu),D0,L0,Xl,Pf=on({},Bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xl&&(Xl&&t.type==="mousemove"?(D0=t.screenX-Xl.screenX,L0=t.screenY-Xl.screenY):L0=D0=0,Xl=t),D0)},movementY:function(t){return"movementY"in t?t.movementY:L0}}),$y=zr(Pf),Gk=on({},Pf,{dataTransfer:0}),qk=zr(Gk),Yk=on({},Bu,{relatedTarget:0}),F0=zr(Yk),Xk=on({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),Kk=zr(Xk),Zk=on({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qk=zr(Zk),Jk=on({},Sl,{data:0}),Gy=zr(Jk),eN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nN[t])?!!e[t]:!1}function dp(){return rN}var sN=on({},Bu,{key:function(t){if(t.key){var e=eN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dp,charCode:function(t){return t.type==="keypress"?oh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iN=zr(sN),oN=on({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=zr(oN),aN=on({},Bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dp}),lN=zr(aN),cN=on({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),uN=zr(cN),dN=on({},Pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hN=zr(dN),fN=[9,13,27,32],hp=li&&"CompositionEvent"in window,Pc=null;li&&"documentMode"in document&&(Pc=document.documentMode);var mN=li&&"TextEvent"in window&&!Pc,I3=li&&(!hp||Pc&&8<Pc&&11>=Pc),Yy=" ",Xy=!1;function R3(t,e){switch(t){case"keyup":return fN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function gN(t,e){switch(t){case"compositionend":return P3(e);case"keypress":return e.which!==32?null:(Xy=!0,Yy);case"textInput":return t=e.data,t===Yy&&Xy?null:t;default:return null}}function pN(t,e){if(Ta)return t==="compositionend"||!hp&&R3(t,e)?(t=T3(),ih=cp=Bi=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I3&&e.locale!=="ko"?null:e.data;default:return null}}var xN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xN[t.type]:e==="textarea"}function O3(t,e,n,r){u3(r),e=Ph(e,"onChange"),0<e.length&&(n=new up("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oc=null,iu=null;function yN(t){H3(t,0)}function Of(t){var e=Pa(t);if(r3(e))return t}function wN(t,e){if(t==="change")return e}var M3=!1;if(li){var B0;if(li){var U0="oninput"in document;if(!U0){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),U0=typeof Zy.oninput=="function"}B0=U0}else B0=!1;M3=B0&&(!document.documentMode||9<document.documentMode)}function Qy(){Oc&&(Oc.detachEvent("onpropertychange",j3),iu=Oc=null)}function j3(t){if(t.propertyName==="value"&&Of(iu)){var e=[];O3(e,iu,t,sp(t)),m3(yN,e)}}function bN(t,e,n){t==="focusin"?(Qy(),Oc=e,iu=n,Oc.attachEvent("onpropertychange",j3)):t==="focusout"&&Qy()}function vN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Of(iu)}function _N(t,e){if(t==="click")return Of(e)}function SN(t,e){if(t==="input"||t==="change")return Of(e)}function EN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vs=typeof Object.is=="function"?Object.is:EN;function ou(t,e){if(vs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ng.call(e,s)||!vs(t[s],e[s]))return!1}return!0}function Jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ew(t,e){var n=Jy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jy(n)}}function D3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function L3(){for(var t=window,e=Ch();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ch(t.document)}return e}function fp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CN(t){var e=L3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D3(n.ownerDocument.documentElement,n)){if(r!==null&&fp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ew(n,i);var a=ew(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AN=li&&"documentMode"in document&&11>=document.documentMode,Ia=null,vg=null,Mc=null,_g=!1;function tw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_g||Ia==null||Ia!==Ch(r)||(r=Ia,"selectionStart"in r&&fp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mc&&ou(Mc,r)||(Mc=r,r=Ph(vg,"onSelect"),0<r.length&&(e=new up("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ia)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ra={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},V0={},F3={};li&&(F3=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Mf(t){if(V0[t])return V0[t];if(!Ra[t])return t;var e=Ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in F3)return V0[t]=e[n];return t}var B3=Mf("animationend"),U3=Mf("animationiteration"),V3=Mf("animationstart"),z3=Mf("transitionend"),W3=new Map,nw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oo(t,e){W3.set(t,e),na(e,[t])}for(var z0=0;z0<nw.length;z0++){var W0=nw[z0],kN=W0.toLowerCase(),NN=W0[0].toUpperCase()+W0.slice(1);oo(kN,"on"+NN)}oo(B3,"onAnimationEnd");oo(U3,"onAnimationIteration");oo(V3,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(z3,"onTransitionEnd");nl("onMouseEnter",["mouseout","mouseover"]);nl("onMouseLeave",["mouseout","mouseover"]);nl("onPointerEnter",["pointerout","pointerover"]);nl("onPointerLeave",["pointerout","pointerover"]);na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));na("onBeforeInput",["compositionend","keypress","textInput","paste"]);na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TN=new Set("cancel close invalid load scroll toggle".split(" ").concat(wc));function rw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kk(r,e,void 0,t),t.currentTarget=null}function H3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==i&&s.isPropagationStopped())break e;rw(s,u,h),i=d}else for(a=0;a<r.length;a++){if(u=r[a],d=u.instance,h=u.currentTarget,u=u.listener,d!==i&&s.isPropagationStopped())break e;rw(s,u,h),i=d}}}if(kh)throw t=xg,kh=!1,xg=null,t}function $t(t,e){var n=e[kg];n===void 0&&(n=e[kg]=new Set);var r=t+"__bubble";n.has(r)||($3(e,t,2,!1),n.add(r))}function H0(t,e,n){var r=0;e&&(r|=4),$3(n,t,r,e)}var yd="_reactListening"+Math.random().toString(36).slice(2);function au(t){if(!t[yd]){t[yd]=!0,Q_.forEach(function(n){n!=="selectionchange"&&(TN.has(n)||H0(n,!1,t),H0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yd]||(e[yd]=!0,H0("selectionchange",!1,e))}}function $3(t,e,n,r){switch(N3(e)){case 1:var s=Wk;break;case 4:s=Hk;break;default:s=lp}n=s.bind(null,e,n,t),s=void 0,!pg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $0(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;a=a.return}for(;u!==null;){if(a=jo(u),a===null)return;if(d=a.tag,d===5||d===6){r=i=a;continue e}u=u.parentNode}}r=r.return}m3(function(){var h=i,x=sp(n),y=[];e:{var b=W3.get(t);if(b!==void 0){var _=up,C=t;switch(t){case"keypress":if(oh(n)===0)break e;case"keydown":case"keyup":_=iN;break;case"focusin":C="focus",_=F0;break;case"focusout":C="blur",_=F0;break;case"beforeblur":case"afterblur":_=F0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=$y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=qk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=lN;break;case B3:case U3:case V3:_=Kk;break;case z3:_=uN;break;case"scroll":_=$k;break;case"wheel":_=hN;break;case"copy":case"cut":case"paste":_=Qk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=qy}var N=(e&4)!==0,k=!N&&t==="scroll",E=N?b!==null?b+"Capture":null:b;N=[];for(var A=h,I;A!==null;){I=A;var j=I.stateNode;if(I.tag===5&&j!==null&&(I=j,E!==null&&(j=tu(A,E),j!=null&&N.push(lu(A,j,I)))),k)break;A=A.return}0<N.length&&(b=new _(b,C,null,n,x),y.push({event:b,listeners:N}))}}if(!(e&7)){e:{if(b=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",b&&n!==mg&&(C=n.relatedTarget||n.fromElement)&&(jo(C)||C[ci]))break e;if((_||b)&&(b=x.window===x?x:(b=x.ownerDocument)?b.defaultView||b.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=h,C=C?jo(C):null,C!==null&&(k=ra(C),C!==k||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=h),_!==C)){if(N=$y,j="onMouseLeave",E="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(N=qy,j="onPointerLeave",E="onPointerEnter",A="pointer"),k=_==null?b:Pa(_),I=C==null?b:Pa(C),b=new N(j,A+"leave",_,n,x),b.target=k,b.relatedTarget=I,j=null,jo(x)===h&&(N=new N(E,A+"enter",C,n,x),N.target=I,N.relatedTarget=k,j=N),k=j,_&&C)t:{for(N=_,E=C,A=0,I=N;I;I=ya(I))A++;for(I=0,j=E;j;j=ya(j))I++;for(;0<A-I;)N=ya(N),A--;for(;0<I-A;)E=ya(E),I--;for(;A--;){if(N===E||E!==null&&N===E.alternate)break t;N=ya(N),E=ya(E)}N=null}else N=null;_!==null&&sw(y,b,_,N,!1),C!==null&&k!==null&&sw(y,k,C,N,!0)}}e:{if(b=h?Pa(h):window,_=b.nodeName&&b.nodeName.toLowerCase(),_==="select"||_==="input"&&b.type==="file")var F=wN;else if(Ky(b))if(M3)F=SN;else{F=vN;var z=bN}else(_=b.nodeName)&&_.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(F=_N);if(F&&(F=F(t,h))){O3(y,F,n,x);break e}z&&z(t,b,h),t==="focusout"&&(z=b._wrapperState)&&z.controlled&&b.type==="number"&&cg(b,"number",b.value)}switch(z=h?Pa(h):window,t){case"focusin":(Ky(z)||z.contentEditable==="true")&&(Ia=z,vg=h,Mc=null);break;case"focusout":Mc=vg=Ia=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,tw(y,n,x);break;case"selectionchange":if(AN)break;case"keydown":case"keyup":tw(y,n,x)}var O;if(hp)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ta?R3(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(I3&&n.locale!=="ko"&&(Ta||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ta&&(O=T3()):(Bi=x,cp="value"in Bi?Bi.value:Bi.textContent,Ta=!0)),z=Ph(h,R),0<z.length&&(R=new Gy(R,t,null,n,x),y.push({event:R,listeners:z}),O?R.data=O:(O=P3(n),O!==null&&(R.data=O)))),(O=mN?gN(t,n):pN(t,n))&&(h=Ph(h,"onBeforeInput"),0<h.length&&(x=new Gy("onBeforeInput","beforeinput",null,n,x),y.push({event:x,listeners:h}),x.data=O))}H3(y,e)})}function lu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ph(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=tu(t,n),i!=null&&r.unshift(lu(t,i,s)),i=tu(t,e),i!=null&&r.push(lu(t,i,s))),t=t.return}return r}function ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sw(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var u=n,d=u.alternate,h=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&h!==null&&(u=h,s?(d=tu(n,i),d!=null&&a.unshift(lu(n,d,u))):s||(d=tu(n,i),d!=null&&a.push(lu(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var IN=/\r\n?/g,RN=/\u0000|\uFFFD/g;function iw(t){return(typeof t=="string"?t:""+t).replace(IN,`
`).replace(RN,"")}function wd(t,e,n){if(e=iw(e),iw(t)!==e&&n)throw Error(Ae(425))}function Oh(){}var Sg=null,Eg=null;function Cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ag=typeof setTimeout=="function"?setTimeout:void 0,PN=typeof clearTimeout=="function"?clearTimeout:void 0,ow=typeof Promise=="function"?Promise:void 0,ON=typeof queueMicrotask=="function"?queueMicrotask:typeof ow<"u"?function(t){return ow.resolve(null).then(t).catch(MN)}:Ag;function MN(t){setTimeout(function(){throw t})}function G0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),su(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);su(e)}function Yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var El=Math.random().toString(36).slice(2),Os="__reactFiber$"+El,cu="__reactProps$"+El,ci="__reactContainer$"+El,kg="__reactEvents$"+El,jN="__reactListeners$"+El,DN="__reactHandles$"+El;function jo(t){var e=t[Os];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ci]||n[Os]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aw(t);t!==null;){if(n=t[Os])return n;t=aw(t)}return e}t=n,n=t.parentNode}return null}function Uu(t){return t=t[Os]||t[ci],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function jf(t){return t[cu]||null}var Ng=[],Oa=-1;function ao(t){return{current:t}}function Yt(t){0>Oa||(t.current=Ng[Oa],Ng[Oa]=null,Oa--)}function zt(t,e){Oa++,Ng[Oa]=t.current,t.current=e}var to={},ar=ao(to),Ar=ao(!1),Go=to;function rl(t,e){var n=t.type.contextTypes;if(!n)return to;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kr(t){return t=t.childContextTypes,t!=null}function Mh(){Yt(Ar),Yt(ar)}function lw(t,e,n){if(ar.current!==to)throw Error(Ae(168));zt(ar,e),zt(Ar,n)}function G3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ae(108,bk(t)||"Unknown",s));return on({},n,r)}function jh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||to,Go=ar.current,zt(ar,t),zt(Ar,Ar.current),!0}function cw(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=G3(t,e,Go),r.__reactInternalMemoizedMergedChildContext=t,Yt(Ar),Yt(ar),zt(ar,t)):Yt(Ar),zt(Ar,n)}var Qs=null,Df=!1,q0=!1;function q3(t){Qs===null?Qs=[t]:Qs.push(t)}function LN(t){Df=!0,q3(t)}function lo(){if(!q0&&Qs!==null){q0=!0;var t=0,e=Rt;try{var n=Qs;for(Rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qs=null,Df=!1}catch(s){throw Qs!==null&&(Qs=Qs.slice(t+1)),y3(ip,lo),s}finally{Rt=e,q0=!1}}return null}var Ma=[],ja=0,Dh=null,Lh=0,Zr=[],Qr=0,qo=null,ei=1,ti="";function Eo(t,e){Ma[ja++]=Lh,Ma[ja++]=Dh,Dh=t,Lh=e}function Y3(t,e,n){Zr[Qr++]=ei,Zr[Qr++]=ti,Zr[Qr++]=qo,qo=t;var r=ei;t=ti;var s=32-ws(r)-1;r&=~(1<<s),n+=1;var i=32-ws(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ei=1<<32-ws(e)+s|n<<s|r,ti=i+t}else ei=1<<i|n<<s|r,ti=t}function mp(t){t.return!==null&&(Eo(t,1),Y3(t,1,0))}function gp(t){for(;t===Dh;)Dh=Ma[--ja],Ma[ja]=null,Lh=Ma[--ja],Ma[ja]=null;for(;t===qo;)qo=Zr[--Qr],Zr[Qr]=null,ti=Zr[--Qr],Zr[Qr]=null,ei=Zr[--Qr],Zr[Qr]=null}var Dr=null,jr=null,Jt=!1,xs=null;function X3(t,e){var n=Jr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,jr=Yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,jr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qo!==null?{id:ei,overflow:ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,jr=null,!0):!1;default:return!1}}function Tg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ig(t){if(Jt){var e=jr;if(e){var n=e;if(!uw(t,e)){if(Tg(t))throw Error(Ae(418));e=Yi(n.nextSibling);var r=Dr;e&&uw(t,e)?X3(r,n):(t.flags=t.flags&-4097|2,Jt=!1,Dr=t)}}else{if(Tg(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Jt=!1,Dr=t}}}function dw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function bd(t){if(t!==Dr)return!1;if(!Jt)return dw(t),Jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cg(t.type,t.memoizedProps)),e&&(e=jr)){if(Tg(t))throw K3(),Error(Ae(418));for(;e;)X3(t,e),e=Yi(e.nextSibling)}if(dw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jr=Yi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jr=null}}else jr=Dr?Yi(t.stateNode.nextSibling):null;return!0}function K3(){for(var t=jr;t;)t=Yi(t.nextSibling)}function sl(){jr=Dr=null,Jt=!1}function pp(t){xs===null?xs=[t]:xs.push(t)}var FN=mi.ReactCurrentBatchConfig;function Kl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var u=s.refs;a===null?delete u[i]:u[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function vd(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hw(t){var e=t._init;return e(t._payload)}function Z3(t){function e(E,A){if(t){var I=E.deletions;I===null?(E.deletions=[A],E.flags|=16):I.push(A)}}function n(E,A){if(!t)return null;for(;A!==null;)e(E,A),A=A.sibling;return null}function r(E,A){for(E=new Map;A!==null;)A.key!==null?E.set(A.key,A):E.set(A.index,A),A=A.sibling;return E}function s(E,A){return E=Qi(E,A),E.index=0,E.sibling=null,E}function i(E,A,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<A?(E.flags|=2,A):I):(E.flags|=2,A)):(E.flags|=1048576,A)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function u(E,A,I,j){return A===null||A.tag!==6?(A=em(I,E.mode,j),A.return=E,A):(A=s(A,I),A.return=E,A)}function d(E,A,I,j){var F=I.type;return F===Na?x(E,A,I.props.children,j,I.key):A!==null&&(A.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Oi&&hw(F)===A.type)?(j=s(A,I.props),j.ref=Kl(E,A,I),j.return=E,j):(j=fh(I.type,I.key,I.props,null,E.mode,j),j.ref=Kl(E,A,I),j.return=E,j)}function h(E,A,I,j){return A===null||A.tag!==4||A.stateNode.containerInfo!==I.containerInfo||A.stateNode.implementation!==I.implementation?(A=tm(I,E.mode,j),A.return=E,A):(A=s(A,I.children||[]),A.return=E,A)}function x(E,A,I,j,F){return A===null||A.tag!==7?(A=zo(I,E.mode,j,F),A.return=E,A):(A=s(A,I),A.return=E,A)}function y(E,A,I){if(typeof A=="string"&&A!==""||typeof A=="number")return A=em(""+A,E.mode,I),A.return=E,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ud:return I=fh(A.type,A.key,A.props,null,E.mode,I),I.ref=Kl(E,null,A),I.return=E,I;case ka:return A=tm(A,E.mode,I),A.return=E,A;case Oi:var j=A._init;return y(E,j(A._payload),I)}if(xc(A)||$l(A))return A=zo(A,E.mode,I,null),A.return=E,A;vd(E,A)}return null}function b(E,A,I,j){var F=A!==null?A.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:u(E,A,""+I,j);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ud:return I.key===F?d(E,A,I,j):null;case ka:return I.key===F?h(E,A,I,j):null;case Oi:return F=I._init,b(E,A,F(I._payload),j)}if(xc(I)||$l(I))return F!==null?null:x(E,A,I,j,null);vd(E,I)}return null}function _(E,A,I,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return E=E.get(I)||null,u(A,E,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ud:return E=E.get(j.key===null?I:j.key)||null,d(A,E,j,F);case ka:return E=E.get(j.key===null?I:j.key)||null,h(A,E,j,F);case Oi:var z=j._init;return _(E,A,I,z(j._payload),F)}if(xc(j)||$l(j))return E=E.get(I)||null,x(A,E,j,F,null);vd(A,j)}return null}function C(E,A,I,j){for(var F=null,z=null,O=A,R=A=0,M=null;O!==null&&R<I.length;R++){O.index>R?(M=O,O=null):M=O.sibling;var U=b(E,O,I[R],j);if(U===null){O===null&&(O=M);break}t&&O&&U.alternate===null&&e(E,O),A=i(U,A,R),z===null?F=U:z.sibling=U,z=U,O=M}if(R===I.length)return n(E,O),Jt&&Eo(E,R),F;if(O===null){for(;R<I.length;R++)O=y(E,I[R],j),O!==null&&(A=i(O,A,R),z===null?F=O:z.sibling=O,z=O);return Jt&&Eo(E,R),F}for(O=r(E,O);R<I.length;R++)M=_(O,E,R,I[R],j),M!==null&&(t&&M.alternate!==null&&O.delete(M.key===null?R:M.key),A=i(M,A,R),z===null?F=M:z.sibling=M,z=M);return t&&O.forEach(function(X){return e(E,X)}),Jt&&Eo(E,R),F}function N(E,A,I,j){var F=$l(I);if(typeof F!="function")throw Error(Ae(150));if(I=F.call(I),I==null)throw Error(Ae(151));for(var z=F=null,O=A,R=A=0,M=null,U=I.next();O!==null&&!U.done;R++,U=I.next()){O.index>R?(M=O,O=null):M=O.sibling;var X=b(E,O,U.value,j);if(X===null){O===null&&(O=M);break}t&&O&&X.alternate===null&&e(E,O),A=i(X,A,R),z===null?F=X:z.sibling=X,z=X,O=M}if(U.done)return n(E,O),Jt&&Eo(E,R),F;if(O===null){for(;!U.done;R++,U=I.next())U=y(E,U.value,j),U!==null&&(A=i(U,A,R),z===null?F=U:z.sibling=U,z=U);return Jt&&Eo(E,R),F}for(O=r(E,O);!U.done;R++,U=I.next())U=_(O,E,R,U.value,j),U!==null&&(t&&U.alternate!==null&&O.delete(U.key===null?R:U.key),A=i(U,A,R),z===null?F=U:z.sibling=U,z=U);return t&&O.forEach(function(V){return e(E,V)}),Jt&&Eo(E,R),F}function k(E,A,I,j){if(typeof I=="object"&&I!==null&&I.type===Na&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ud:e:{for(var F=I.key,z=A;z!==null;){if(z.key===F){if(F=I.type,F===Na){if(z.tag===7){n(E,z.sibling),A=s(z,I.props.children),A.return=E,E=A;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Oi&&hw(F)===z.type){n(E,z.sibling),A=s(z,I.props),A.ref=Kl(E,z,I),A.return=E,E=A;break e}n(E,z);break}else e(E,z);z=z.sibling}I.type===Na?(A=zo(I.props.children,E.mode,j,I.key),A.return=E,E=A):(j=fh(I.type,I.key,I.props,null,E.mode,j),j.ref=Kl(E,A,I),j.return=E,E=j)}return a(E);case ka:e:{for(z=I.key;A!==null;){if(A.key===z)if(A.tag===4&&A.stateNode.containerInfo===I.containerInfo&&A.stateNode.implementation===I.implementation){n(E,A.sibling),A=s(A,I.children||[]),A.return=E,E=A;break e}else{n(E,A);break}else e(E,A);A=A.sibling}A=tm(I,E.mode,j),A.return=E,E=A}return a(E);case Oi:return z=I._init,k(E,A,z(I._payload),j)}if(xc(I))return C(E,A,I,j);if($l(I))return N(E,A,I,j);vd(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,A!==null&&A.tag===6?(n(E,A.sibling),A=s(A,I),A.return=E,E=A):(n(E,A),A=em(I,E.mode,j),A.return=E,E=A),a(E)):n(E,A)}return k}var il=Z3(!0),Q3=Z3(!1),Fh=ao(null),Bh=null,Da=null,xp=null;function yp(){xp=Da=Bh=null}function wp(t){var e=Fh.current;Yt(Fh),t._currentValue=e}function Rg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ka(t,e){Bh=t,xp=Da=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Er=!0),t.firstContext=null)}function rs(t){var e=t._currentValue;if(xp!==t)if(t={context:t,memoizedValue:e,next:null},Da===null){if(Bh===null)throw Error(Ae(308));Da=t,Bh.dependencies={lanes:0,firstContext:t}}else Da=Da.next=t;return e}var Do=null;function bp(t){Do===null?Do=[t]:Do.push(t)}function J3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bp(e)):(n.next=s.next,s.next=n),e.interleaved=n,ui(t,r)}function ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mi=!1;function vp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_t&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ui(t,n)}return s=r.interleaved,s===null?(e.next=e,bp(r)):(e.next=s.next,s.next=e),r.interleaved=e,ui(t,n)}function ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,op(t,n)}}function fw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uh(t,e,n,r){var s=t.updateQueue;Mi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var d=u,h=d.next;d.next=null,a===null?i=h:a.next=h,a=d;var x=t.alternate;x!==null&&(x=x.updateQueue,u=x.lastBaseUpdate,u!==a&&(u===null?x.firstBaseUpdate=h:u.next=h,x.lastBaseUpdate=d))}if(i!==null){var y=s.baseState;a=0,x=h=d=null,u=i;do{var b=u.lane,_=u.eventTime;if((r&b)===b){x!==null&&(x=x.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=t,N=u;switch(b=e,_=n,N.tag){case 1:if(C=N.payload,typeof C=="function"){y=C.call(_,y,b);break e}y=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,b=typeof C=="function"?C.call(_,y,b):C,b==null)break e;y=on({},y,b);break e;case 2:Mi=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,b=s.effects,b===null?s.effects=[u]:b.push(u))}else _={eventTime:_,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},x===null?(h=x=_,d=y):x=x.next=_,a|=b;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;b=u,u=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(x===null&&(d=y),s.baseState=d,s.firstBaseUpdate=h,s.lastBaseUpdate=x,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xo|=a,t.lanes=a,t.memoizedState=y}}function mw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ae(191,s));s.call(r)}}}var Vu={},Ls=ao(Vu),uu=ao(Vu),du=ao(Vu);function Lo(t){if(t===Vu)throw Error(Ae(174));return t}function _p(t,e){switch(zt(du,e),zt(uu,t),zt(Ls,Vu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dg(e,t)}Yt(Ls),zt(Ls,e)}function ol(){Yt(Ls),Yt(uu),Yt(du)}function tS(t){Lo(du.current);var e=Lo(Ls.current),n=dg(e,t.type);e!==n&&(zt(uu,t),zt(Ls,n))}function Sp(t){uu.current===t&&(Yt(Ls),Yt(uu))}var tn=ao(0);function Vh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Y0=[];function Ep(){for(var t=0;t<Y0.length;t++)Y0[t]._workInProgressVersionPrimary=null;Y0.length=0}var lh=mi.ReactCurrentDispatcher,X0=mi.ReactCurrentBatchConfig,Yo=0,sn=null,On=null,Un=null,zh=!1,jc=!1,hu=0,BN=0;function er(){throw Error(Ae(321))}function Cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vs(t[n],e[n]))return!1;return!0}function Ap(t,e,n,r,s,i){if(Yo=i,sn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lh.current=t===null||t.memoizedState===null?WN:HN,t=n(r,s),jc){i=0;do{if(jc=!1,hu=0,25<=i)throw Error(Ae(301));i+=1,Un=On=null,e.updateQueue=null,lh.current=$N,t=n(r,s)}while(jc)}if(lh.current=Wh,e=On!==null&&On.next!==null,Yo=0,Un=On=sn=null,zh=!1,e)throw Error(Ae(300));return t}function kp(){var t=hu!==0;return hu=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?sn.memoizedState=Un=t:Un=Un.next=t,Un}function ss(){if(On===null){var t=sn.alternate;t=t!==null?t.memoizedState:null}else t=On.next;var e=Un===null?sn.memoizedState:Un.next;if(e!==null)Un=e,On=t;else{if(t===null)throw Error(Ae(310));On=t,t={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Un===null?sn.memoizedState=Un=t:Un=Un.next=t}return Un}function fu(t,e){return typeof e=="function"?e(t):e}function K0(t){var e=ss(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=On,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=a=null,d=null,h=i;do{var x=h.lane;if((Yo&x)===x)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:x,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(u=d=y,a=r):d=d.next=y,sn.lanes|=x,Xo|=x}h=h.next}while(h!==null&&h!==i);d===null?a=r:d.next=u,vs(r,e.memoizedState)||(Er=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,sn.lanes|=i,Xo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Z0(t){var e=ss(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);vs(i,e.memoizedState)||(Er=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function nS(){}function rS(t,e){var n=sn,r=ss(),s=e(),i=!vs(r.memoizedState,s);if(i&&(r.memoizedState=s,Er=!0),r=r.queue,Np(oS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Un!==null&&Un.memoizedState.tag&1){if(n.flags|=2048,mu(9,iS.bind(null,n,r,s,e),void 0,null),zn===null)throw Error(Ae(349));Yo&30||sS(n,e,s)}return s}function sS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iS(t,e,n,r){e.value=n,e.getSnapshot=r,aS(e)&&lS(t)}function oS(t,e,n){return n(function(){aS(e)&&lS(t)})}function aS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vs(t,n)}catch{return!0}}function lS(t){var e=ui(t,1);e!==null&&bs(e,t,1,-1)}function gw(t){var e=Rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:t},e.queue=t,t=t.dispatch=zN.bind(null,sn,t),[e.memoizedState,t]}function mu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=sn.updateQueue,e===null?(e={lastEffect:null,stores:null},sn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cS(){return ss().memoizedState}function ch(t,e,n,r){var s=Rs();sn.flags|=t,s.memoizedState=mu(1|e,n,void 0,r===void 0?null:r)}function Lf(t,e,n,r){var s=ss();r=r===void 0?null:r;var i=void 0;if(On!==null){var a=On.memoizedState;if(i=a.destroy,r!==null&&Cp(r,a.deps)){s.memoizedState=mu(e,n,i,r);return}}sn.flags|=t,s.memoizedState=mu(1|e,n,i,r)}function pw(t,e){return ch(8390656,8,t,e)}function Np(t,e){return Lf(2048,8,t,e)}function uS(t,e){return Lf(4,2,t,e)}function dS(t,e){return Lf(4,4,t,e)}function hS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fS(t,e,n){return n=n!=null?n.concat([t]):null,Lf(4,4,hS.bind(null,e,t),n)}function Tp(){}function mS(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gS(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pS(t,e,n){return Yo&21?(vs(n,e)||(n=v3(),sn.lanes|=n,Xo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Er=!0),t.memoizedState=n)}function UN(t,e){var n=Rt;Rt=n!==0&&4>n?n:4,t(!0);var r=X0.transition;X0.transition={};try{t(!1),e()}finally{Rt=n,X0.transition=r}}function xS(){return ss().memoizedState}function VN(t,e,n){var r=Zi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yS(t))wS(e,n);else if(n=J3(t,e,n,r),n!==null){var s=dr();bs(n,t,r,s),bS(n,e,r)}}function zN(t,e,n){var r=Zi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yS(t))wS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,u=i(a,n);if(s.hasEagerState=!0,s.eagerState=u,vs(u,a)){var d=e.interleaved;d===null?(s.next=s,bp(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=J3(t,e,s,r),n!==null&&(s=dr(),bs(n,t,r,s),bS(n,e,r))}}function yS(t){var e=t.alternate;return t===sn||e!==null&&e===sn}function wS(t,e){jc=zh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,op(t,n)}}var Wh={readContext:rs,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},WN={readContext:rs,useCallback:function(t,e){return Rs().memoizedState=[t,e===void 0?null:e],t},useContext:rs,useEffect:pw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ch(4194308,4,hS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ch(4194308,4,t,e)},useInsertionEffect:function(t,e){return ch(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VN.bind(null,sn,t),[r.memoizedState,t]},useRef:function(t){var e=Rs();return t={current:t},e.memoizedState=t},useState:gw,useDebugValue:Tp,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=gw(!1),e=t[0];return t=UN.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=sn,s=Rs();if(Jt){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),zn===null)throw Error(Ae(349));Yo&30||sS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,pw(oS.bind(null,r,i,t),[t]),r.flags|=2048,mu(9,iS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rs(),e=zn.identifierPrefix;if(Jt){var n=ti,r=ei;n=(r&~(1<<32-ws(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HN={readContext:rs,useCallback:mS,useContext:rs,useEffect:Np,useImperativeHandle:fS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:gS,useReducer:K0,useRef:cS,useState:function(){return K0(fu)},useDebugValue:Tp,useDeferredValue:function(t){var e=ss();return pS(e,On.memoizedState,t)},useTransition:function(){var t=K0(fu)[0],e=ss().memoizedState;return[t,e]},useMutableSource:nS,useSyncExternalStore:rS,useId:xS,unstable_isNewReconciler:!1},$N={readContext:rs,useCallback:mS,useContext:rs,useEffect:Np,useImperativeHandle:fS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:gS,useReducer:Z0,useRef:cS,useState:function(){return Z0(fu)},useDebugValue:Tp,useDeferredValue:function(t){var e=ss();return On===null?e.memoizedState=t:pS(e,On.memoizedState,t)},useTransition:function(){var t=Z0(fu)[0],e=ss().memoizedState;return[t,e]},useMutableSource:nS,useSyncExternalStore:rS,useId:xS,unstable_isNewReconciler:!1};function fs(t,e){if(t&&t.defaultProps){e=on({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Pg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:on({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ff={isMounted:function(t){return(t=t._reactInternals)?ra(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dr(),s=Zi(t),i=ri(r,s);i.payload=e,n!=null&&(i.callback=n),e=Xi(t,i,s),e!==null&&(bs(e,t,s,r),ah(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dr(),s=Zi(t),i=ri(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Xi(t,i,s),e!==null&&(bs(e,t,s,r),ah(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dr(),r=Zi(t),s=ri(n,r);s.tag=2,e!=null&&(s.callback=e),e=Xi(t,s,r),e!==null&&(bs(e,t,r,n),ah(e,t,r))}};function xw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ou(n,r)||!ou(s,i):!0}function vS(t,e,n){var r=!1,s=to,i=e.contextType;return typeof i=="object"&&i!==null?i=rs(i):(s=kr(e)?Go:ar.current,r=e.contextTypes,i=(r=r!=null)?rl(t,s):to),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ff,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ff.enqueueReplaceState(e,e.state,null)}function Og(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rs(i):(i=kr(e)?Go:ar.current,s.context=rl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Pg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ff.enqueueReplaceState(s,s.state,null),Uh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function al(t,e){try{var n="",r=e;do n+=wk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Q0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GN=typeof WeakMap=="function"?WeakMap:Map;function _S(t,e,n){n=ri(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$h||($h=!0,Hg=r),Mg(t,e)},n}function SS(t,e,n){n=ri(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Mg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Mg(t,e),typeof r!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ww(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=o8.bind(null,t,e,n),e.then(t,t))}function bw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ri(-1,1),e.tag=2,Xi(n,e,1))),n.lanes|=1),t)}var qN=mi.ReactCurrentOwner,Er=!1;function cr(t,e,n,r){e.child=t===null?Q3(e,null,n,r):il(e,t.child,n,r)}function _w(t,e,n,r,s){n=n.render;var i=e.ref;return Ka(e,s),r=Ap(t,e,n,r,i,s),n=kp(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,di(t,e,s)):(Jt&&n&&mp(e),e.flags|=1,cr(t,e,r,s),e.child)}function Sw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Lp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ES(t,e,i,r,s)):(t=fh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ou,n(a,r)&&t.ref===e.ref)return di(t,e,s)}return e.flags|=1,t=Qi(i,r),t.ref=e.ref,t.return=e,e.child=t}function ES(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ou(i,r)&&t.ref===e.ref)if(Er=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Er=!0);else return e.lanes=t.lanes,di(t,e,s)}return jg(t,e,n,r,s)}function CS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(Fa,Or),Or|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,zt(Fa,Or),Or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,zt(Fa,Or),Or|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,zt(Fa,Or),Or|=r;return cr(t,e,s,n),e.child}function AS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jg(t,e,n,r,s){var i=kr(n)?Go:ar.current;return i=rl(e,i),Ka(e,s),n=Ap(t,e,n,r,i,s),r=kp(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,di(t,e,s)):(Jt&&r&&mp(e),e.flags|=1,cr(t,e,n,s),e.child)}function Ew(t,e,n,r,s){if(kr(n)){var i=!0;jh(e)}else i=!1;if(Ka(e,s),e.stateNode===null)uh(t,e),vS(e,n,r),Og(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=rs(h):(h=kr(n)?Go:ar.current,h=rl(e,h));var x=n.getDerivedStateFromProps,y=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||d!==h)&&yw(e,a,r,h),Mi=!1;var b=e.memoizedState;a.state=b,Uh(e,r,a,s),d=e.memoizedState,u!==r||b!==d||Ar.current||Mi?(typeof x=="function"&&(Pg(e,n,x,r),d=e.memoizedState),(u=Mi||xw(e,n,u,r,b,d,h))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=h,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,eS(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:fs(e.type,u),a.props=h,y=e.pendingProps,b=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=rs(d):(d=kr(n)?Go:ar.current,d=rl(e,d));var _=n.getDerivedStateFromProps;(x=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||b!==d)&&yw(e,a,r,d),Mi=!1,b=e.memoizedState,a.state=b,Uh(e,r,a,s);var C=e.memoizedState;u!==y||b!==C||Ar.current||Mi?(typeof _=="function"&&(Pg(e,n,_,r),C=e.memoizedState),(h=Mi||xw(e,n,h,r,b,C,d)||!1)?(x||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=d,r=h):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),r=!1)}return Dg(t,e,n,r,i,s)}function Dg(t,e,n,r,s,i){AS(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&cw(e,n,!1),di(t,e,i);r=e.stateNode,qN.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=il(e,t.child,null,i),e.child=il(e,null,u,i)):cr(t,e,u,i),e.memoizedState=r.state,s&&cw(e,n,!0),e.child}function kS(t){var e=t.stateNode;e.pendingContext?lw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lw(t,e.context,!1),_p(t,e.containerInfo)}function Cw(t,e,n,r,s){return sl(),pp(s),e.flags|=256,cr(t,e,n,r),e.child}var Lg={dehydrated:null,treeContext:null,retryLane:0};function Fg(t){return{baseLanes:t,cachePool:null,transitions:null}}function NS(t,e,n){var r=e.pendingProps,s=tn.current,i=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),zt(tn,s&1),t===null)return Ig(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Vf(a,r,0,null),t=zo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fg(n),e.memoizedState=Lg,t):Ip(e,a));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return YN(t,e,a,r,u,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,u=s.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Qi(s,d),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Qi(u,i):(i=zo(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Fg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Lg,r}return i=t.child,t=i.sibling,r=Qi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ip(t,e){return e=Vf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _d(t,e,n,r){return r!==null&&pp(r),il(e,t.child,null,n),t=Ip(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function YN(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Q0(Error(Ae(422))),_d(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Vf({mode:"visible",children:r.children},s,0,null),i=zo(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&il(e,t.child,null,a),e.child.memoizedState=Fg(a),e.memoizedState=Lg,i);if(!(e.mode&1))return _d(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(Ae(419)),r=Q0(i,r,void 0),_d(t,e,a,r)}if(u=(a&t.childLanes)!==0,Er||u){if(r=zn,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ui(t,s),bs(r,t,s,-1))}return Dp(),r=Q0(Error(Ae(421))),_d(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=a8.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jr=Yi(s.nextSibling),Dr=e,Jt=!0,xs=null,t!==null&&(Zr[Qr++]=ei,Zr[Qr++]=ti,Zr[Qr++]=qo,ei=t.id,ti=t.overflow,qo=e),e=Ip(e,r.children),e.flags|=4096,e)}function Aw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rg(t.return,e,n)}function J0(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function TS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(cr(t,e,r.children,n),r=tn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,n,e);else if(t.tag===19)Aw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(zt(tn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),J0(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}J0(e,!0,n,null,i);break;case"together":J0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=Qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XN(t,e,n){switch(e.tag){case 3:kS(e),sl();break;case 5:tS(e);break;case 1:kr(e.type)&&jh(e);break;case 4:_p(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;zt(Fh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(zt(tn,tn.current&1),e.flags|=128,null):n&e.child.childLanes?NS(t,e,n):(zt(tn,tn.current&1),t=di(t,e,n),t!==null?t.sibling:null);zt(tn,tn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return TS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),zt(tn,tn.current),r)break;return null;case 22:case 23:return e.lanes=0,CS(t,e,n)}return di(t,e,n)}var IS,Bg,RS,PS;IS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bg=function(){};RS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Lo(Ls.current);var i=null;switch(n){case"input":s=ag(t,s),r=ag(t,r),i=[];break;case"select":s=on({},s,{value:void 0}),r=on({},r,{value:void 0}),i=[];break;case"textarea":s=ug(t,s),r=ug(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Oh)}hg(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Jc.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var d=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(i||(i=[]),i.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Jc.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&$t("scroll",t),i||u===d||(i=[])):(i=i||[]).push(h,d))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};PS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zl(t,e){if(!Jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KN(t,e,n){var r=e.pendingProps;switch(gp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(e),null;case 1:return kr(e.type)&&Mh(),tr(e),null;case 3:return r=e.stateNode,ol(),Yt(Ar),Yt(ar),Ep(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(qg(xs),xs=null))),Bg(t,e),tr(e),null;case 5:Sp(e);var s=Lo(du.current);if(n=e.type,t!==null&&e.stateNode!=null)RS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return tr(e),null}if(t=Lo(Ls.current),bd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Os]=e,r[cu]=i,t=(e.mode&1)!==0,n){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(s=0;s<wc.length;s++)$t(wc[s],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":jy(r,i),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$t("invalid",r);break;case"textarea":Ly(r,i),$t("invalid",r)}hg(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var u=i[a];a==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&wd(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&wd(r.textContent,u,t),s=["children",""+u]):Jc.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&$t("scroll",r)}switch(n){case"input":dd(r),Dy(r,i,!0);break;case"textarea":dd(r),Fy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Oh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=o3(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Os]=e,t[cu]=r,IS(t,e,!1,!1),e.stateNode=t;e:{switch(a=fg(n,r),n){case"dialog":$t("cancel",t),$t("close",t),s=r;break;case"iframe":case"object":case"embed":$t("load",t),s=r;break;case"video":case"audio":for(s=0;s<wc.length;s++)$t(wc[s],t);s=r;break;case"source":$t("error",t),s=r;break;case"img":case"image":case"link":$t("error",t),$t("load",t),s=r;break;case"details":$t("toggle",t),s=r;break;case"input":jy(t,r),s=ag(t,r),$t("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=on({},r,{value:void 0}),$t("invalid",t);break;case"textarea":Ly(t,r),s=ug(t,r),$t("invalid",t);break;default:s=r}hg(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?c3(t,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&a3(t,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&eu(t,d):typeof d=="number"&&eu(t,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jc.hasOwnProperty(i)?d!=null&&i==="onScroll"&&$t("scroll",t):d!=null&&ep(t,i,d,a))}switch(n){case"input":dd(t),Dy(t,r,!1);break;case"textarea":dd(t),Fy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+eo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ga(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ga(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Oh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tr(e),null;case 6:if(t&&e.stateNode!=null)PS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Lo(du.current),Lo(Ls.current),bd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Os]=e,(i=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:wd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Os]=e,e.stateNode=r}return tr(e),null;case 13:if(Yt(tn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&jr!==null&&e.mode&1&&!(e.flags&128))K3(),sl(),e.flags|=98560,i=!1;else if(i=bd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ae(317));i[Os]=e}else sl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tr(e),i=!1}else xs!==null&&(qg(xs),xs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tn.current&1?jn===0&&(jn=3):Dp())),e.updateQueue!==null&&(e.flags|=4),tr(e),null);case 4:return ol(),Bg(t,e),t===null&&au(e.stateNode.containerInfo),tr(e),null;case 10:return wp(e.type._context),tr(e),null;case 17:return kr(e.type)&&Mh(),tr(e),null;case 19:if(Yt(tn),i=e.memoizedState,i===null)return tr(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Zl(i,!1);else{if(jn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Vh(t),a!==null){for(e.flags|=128,Zl(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return zt(tn,tn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Sn()>ll&&(e.flags|=128,r=!0,Zl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Jt)return tr(e),null}else 2*Sn()-i.renderingStartTime>ll&&n!==1073741824&&(e.flags|=128,r=!0,Zl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Sn(),e.sibling=null,n=tn.current,zt(tn,r?n&1|2:n&1),e):(tr(e),null);case 22:case 23:return jp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Or&1073741824&&(tr(e),e.subtreeFlags&6&&(e.flags|=8192)):tr(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function ZN(t,e){switch(gp(e),e.tag){case 1:return kr(e.type)&&Mh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ol(),Yt(Ar),Yt(ar),Ep(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sp(e),null;case 13:if(Yt(tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Yt(tn),null;case 4:return ol(),null;case 10:return wp(e.type._context),null;case 22:case 23:return jp(),null;case 24:return null;default:return null}}var Sd=!1,sr=!1,QN=typeof WeakSet=="function"?WeakSet:Set,Be=null;function La(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fn(t,e,r)}else n.current=null}function Ug(t,e,n){try{n()}catch(r){fn(t,e,r)}}var kw=!1;function JN(t,e){if(Sg=Ih,t=L3(),fp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,h=0,x=0,y=t,b=null;t:for(;;){for(var _;y!==n||s!==0&&y.nodeType!==3||(u=a+s),y!==i||r!==0&&y.nodeType!==3||(d=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(_=y.firstChild)!==null;)b=y,y=_;for(;;){if(y===t)break t;if(b===n&&++h===s&&(u=a),b===i&&++x===r&&(d=a),(_=y.nextSibling)!==null)break;y=b,b=y.parentNode}y=_}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Eg={focusedElem:t,selectionRange:n},Ih=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,k=C.memoizedState,E=e.stateNode,A=E.getSnapshotBeforeUpdate(e.elementType===e.type?N:fs(e.type,N),k);E.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(j){fn(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return C=kw,kw=!1,C}function Dc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ug(e,n,i)}s=s.next}while(s!==r)}}function Bf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function OS(t){var e=t.alternate;e!==null&&(t.alternate=null,OS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Os],delete e[cu],delete e[kg],delete e[jN],delete e[DN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function MS(t){return t.tag===5||t.tag===3||t.tag===4}function Nw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Oh));else if(r!==4&&(t=t.child,t!==null))for(zg(t,e,n),t=t.sibling;t!==null;)zg(t,e,n),t=t.sibling}function Wg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wg(t,e,n),t=t.sibling;t!==null;)Wg(t,e,n),t=t.sibling}var Yn=null,ms=!1;function Ci(t,e,n){for(n=n.child;n!==null;)jS(t,e,n),n=n.sibling}function jS(t,e,n){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Rf,n)}catch{}switch(n.tag){case 5:sr||La(n,e);case 6:var r=Yn,s=ms;Yn=null,Ci(t,e,n),Yn=r,ms=s,Yn!==null&&(ms?(t=Yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yn.removeChild(n.stateNode));break;case 18:Yn!==null&&(ms?(t=Yn,n=n.stateNode,t.nodeType===8?G0(t.parentNode,n):t.nodeType===1&&G0(t,n),su(t)):G0(Yn,n.stateNode));break;case 4:r=Yn,s=ms,Yn=n.stateNode.containerInfo,ms=!0,Ci(t,e,n),Yn=r,ms=s;break;case 0:case 11:case 14:case 15:if(!sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ug(n,e,a),s=s.next}while(s!==r)}Ci(t,e,n);break;case 1:if(!sr&&(La(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){fn(n,e,u)}Ci(t,e,n);break;case 21:Ci(t,e,n);break;case 22:n.mode&1?(sr=(r=sr)||n.memoizedState!==null,Ci(t,e,n),sr=r):Ci(t,e,n);break;default:Ci(t,e,n)}}function Tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QN),e.forEach(function(r){var s=l8.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ds(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Yn=u.stateNode,ms=!1;break e;case 3:Yn=u.stateNode.containerInfo,ms=!0;break e;case 4:Yn=u.stateNode.containerInfo,ms=!0;break e}u=u.return}if(Yn===null)throw Error(Ae(160));jS(i,a,s),Yn=null,ms=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(h){fn(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DS(e,t),e=e.sibling}function DS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ds(e,t),ks(t),r&4){try{Dc(3,t,t.return),Bf(3,t)}catch(N){fn(t,t.return,N)}try{Dc(5,t,t.return)}catch(N){fn(t,t.return,N)}}break;case 1:ds(e,t),ks(t),r&512&&n!==null&&La(n,n.return);break;case 5:if(ds(e,t),ks(t),r&512&&n!==null&&La(n,n.return),t.flags&32){var s=t.stateNode;try{eu(s,"")}catch(N){fn(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&s3(s,i),fg(u,a);var h=fg(u,i);for(a=0;a<d.length;a+=2){var x=d[a],y=d[a+1];x==="style"?c3(s,y):x==="dangerouslySetInnerHTML"?a3(s,y):x==="children"?eu(s,y):ep(s,x,y,h)}switch(u){case"input":lg(s,i);break;case"textarea":i3(s,i);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Ga(s,!!i.multiple,_,!1):b!==!!i.multiple&&(i.defaultValue!=null?Ga(s,!!i.multiple,i.defaultValue,!0):Ga(s,!!i.multiple,i.multiple?[]:"",!1))}s[cu]=i}catch(N){fn(t,t.return,N)}}break;case 6:if(ds(e,t),ks(t),r&4){if(t.stateNode===null)throw Error(Ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){fn(t,t.return,N)}}break;case 3:if(ds(e,t),ks(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{su(e.containerInfo)}catch(N){fn(t,t.return,N)}break;case 4:ds(e,t),ks(t);break;case 13:ds(e,t),ks(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Op=Sn())),r&4&&Tw(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(sr=(h=sr)||x,ds(e,t),sr=h):ds(e,t),ks(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!x&&t.mode&1)for(Be=t,x=t.child;x!==null;){for(y=Be=x;Be!==null;){switch(b=Be,_=b.child,b.tag){case 0:case 11:case 14:case 15:Dc(4,b,b.return);break;case 1:La(b,b.return);var C=b.stateNode;if(typeof C.componentWillUnmount=="function"){r=b,n=b.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(N){fn(r,n,N)}}break;case 5:La(b,b.return);break;case 22:if(b.memoizedState!==null){Rw(y);continue}}_!==null?(_.return=b,Be=_):Rw(y)}x=x.sibling}e:for(x=null,y=t;;){if(y.tag===5){if(x===null){x=y;try{s=y.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=l3("display",a))}catch(N){fn(t,t.return,N)}}}else if(y.tag===6){if(x===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(N){fn(t,t.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;x===y&&(x=null),y=y.return}x===y&&(x=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:ds(e,t),ks(t),r&4&&Tw(t);break;case 21:break;default:ds(e,t),ks(t)}}function ks(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(MS(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(eu(s,""),r.flags&=-33);var i=Nw(t);Wg(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,u=Nw(t);zg(t,u,a);break;default:throw Error(Ae(161))}}catch(d){fn(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function e8(t,e,n){Be=t,LS(t)}function LS(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var s=Be,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Sd;if(!a){var u=s.alternate,d=u!==null&&u.memoizedState!==null||sr;u=Sd;var h=sr;if(Sd=a,(sr=d)&&!h)for(Be=s;Be!==null;)a=Be,d=a.child,a.tag===22&&a.memoizedState!==null?Pw(s):d!==null?(d.return=a,Be=d):Pw(s);for(;i!==null;)Be=i,LS(i),i=i.sibling;Be=s,Sd=u,sr=h}Iw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Be=i):Iw(t)}}function Iw(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sr||Bf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&mw(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var x=h.memoizedState;if(x!==null){var y=x.dehydrated;y!==null&&su(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}sr||e.flags&512&&Vg(e)}catch(b){fn(e,e.return,b)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Rw(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Pw(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bf(4,e)}catch(d){fn(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(d){fn(e,s,d)}}var i=e.return;try{Vg(e)}catch(d){fn(e,i,d)}break;case 5:var a=e.return;try{Vg(e)}catch(d){fn(e,a,d)}}}catch(d){fn(e,e.return,d)}if(e===t){Be=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Be=u;break}Be=e.return}}var t8=Math.ceil,Hh=mi.ReactCurrentDispatcher,Rp=mi.ReactCurrentOwner,ts=mi.ReactCurrentBatchConfig,_t=0,zn=null,Tn=null,Kn=0,Or=0,Fa=ao(0),jn=0,gu=null,Xo=0,Uf=0,Pp=0,Lc=null,vr=null,Op=0,ll=1/0,Ks=null,$h=!1,Hg=null,Ki=null,Ed=!1,Ui=null,Gh=0,Fc=0,$g=null,dh=-1,hh=0;function dr(){return _t&6?Sn():dh!==-1?dh:dh=Sn()}function Zi(t){return t.mode&1?_t&2&&Kn!==0?Kn&-Kn:FN.transition!==null?(hh===0&&(hh=v3()),hh):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:N3(t.type)),t):1}function bs(t,e,n,r){if(50<Fc)throw Fc=0,$g=null,Error(Ae(185));Fu(t,n,r),(!(_t&2)||t!==zn)&&(t===zn&&(!(_t&2)&&(Uf|=n),jn===4&&Li(t,Kn)),Nr(t,r),n===1&&_t===0&&!(e.mode&1)&&(ll=Sn()+500,Df&&lo()))}function Nr(t,e){var n=t.callbackNode;Fk(t,e);var r=Th(t,t===zn?Kn:0);if(r===0)n!==null&&Vy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vy(n),e===1)t.tag===0?LN(Ow.bind(null,t)):q3(Ow.bind(null,t)),ON(function(){!(_t&6)&&lo()}),n=null;else{switch(_3(r)){case 1:n=ip;break;case 4:n=w3;break;case 16:n=Nh;break;case 536870912:n=b3;break;default:n=Nh}n=$S(n,FS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FS(t,e){if(dh=-1,hh=0,_t&6)throw Error(Ae(327));var n=t.callbackNode;if(Za()&&t.callbackNode!==n)return null;var r=Th(t,t===zn?Kn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qh(t,r);else{e=r;var s=_t;_t|=2;var i=US();(zn!==t||Kn!==e)&&(Ks=null,ll=Sn()+500,Vo(t,e));do try{s8();break}catch(u){BS(t,u)}while(!0);yp(),Hh.current=i,_t=s,Tn!==null?e=0:(zn=null,Kn=0,e=jn)}if(e!==0){if(e===2&&(s=yg(t),s!==0&&(r=s,e=Gg(t,s))),e===1)throw n=gu,Vo(t,0),Li(t,r),Nr(t,Sn()),n;if(e===6)Li(t,r);else{if(s=t.current.alternate,!(r&30)&&!n8(s)&&(e=qh(t,r),e===2&&(i=yg(t),i!==0&&(r=i,e=Gg(t,i))),e===1))throw n=gu,Vo(t,0),Li(t,r),Nr(t,Sn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:Co(t,vr,Ks);break;case 3:if(Li(t,r),(r&130023424)===r&&(e=Op+500-Sn(),10<e)){if(Th(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ag(Co.bind(null,t,vr,Ks),e);break}Co(t,vr,Ks);break;case 4:if(Li(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ws(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*t8(r/1960))-r,10<r){t.timeoutHandle=Ag(Co.bind(null,t,vr,Ks),r);break}Co(t,vr,Ks);break;case 5:Co(t,vr,Ks);break;default:throw Error(Ae(329))}}}return Nr(t,Sn()),t.callbackNode===n?FS.bind(null,t):null}function Gg(t,e){var n=Lc;return t.current.memoizedState.isDehydrated&&(Vo(t,e).flags|=256),t=qh(t,e),t!==2&&(e=vr,vr=n,e!==null&&qg(e)),t}function qg(t){vr===null?vr=t:vr.push.apply(vr,t)}function n8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vs(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Li(t,e){for(e&=~Pp,e&=~Uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ws(e),r=1<<n;t[n]=-1,e&=~r}}function Ow(t){if(_t&6)throw Error(Ae(327));Za();var e=Th(t,0);if(!(e&1))return Nr(t,Sn()),null;var n=qh(t,e);if(t.tag!==0&&n===2){var r=yg(t);r!==0&&(e=r,n=Gg(t,r))}if(n===1)throw n=gu,Vo(t,0),Li(t,e),Nr(t,Sn()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Co(t,vr,Ks),Nr(t,Sn()),null}function Mp(t,e){var n=_t;_t|=1;try{return t(e)}finally{_t=n,_t===0&&(ll=Sn()+500,Df&&lo())}}function Ko(t){Ui!==null&&Ui.tag===0&&!(_t&6)&&Za();var e=_t;_t|=1;var n=ts.transition,r=Rt;try{if(ts.transition=null,Rt=1,t)return t()}finally{Rt=r,ts.transition=n,_t=e,!(_t&6)&&lo()}}function jp(){Or=Fa.current,Yt(Fa)}function Vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,PN(n)),Tn!==null)for(n=Tn.return;n!==null;){var r=n;switch(gp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mh();break;case 3:ol(),Yt(Ar),Yt(ar),Ep();break;case 5:Sp(r);break;case 4:ol();break;case 13:Yt(tn);break;case 19:Yt(tn);break;case 10:wp(r.type._context);break;case 22:case 23:jp()}n=n.return}if(zn=t,Tn=t=Qi(t.current,null),Kn=Or=e,jn=0,gu=null,Pp=Uf=Xo=0,vr=Lc=null,Do!==null){for(e=0;e<Do.length;e++)if(n=Do[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Do=null}return t}function BS(t,e){do{var n=Tn;try{if(yp(),lh.current=Wh,zh){for(var r=sn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zh=!1}if(Yo=0,Un=On=sn=null,jc=!1,hu=0,Rp.current=null,n===null||n.return===null){jn=1,gu=e,Tn=null;break}e:{var i=t,a=n.return,u=n,d=e;if(e=Kn,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,x=u,y=x.tag;if(!(x.mode&1)&&(y===0||y===11||y===15)){var b=x.alternate;b?(x.updateQueue=b.updateQueue,x.memoizedState=b.memoizedState,x.lanes=b.lanes):(x.updateQueue=null,x.memoizedState=null)}var _=bw(a);if(_!==null){_.flags&=-257,vw(_,a,u,i,e),_.mode&1&&ww(i,h,e),e=_,d=h;var C=e.updateQueue;if(C===null){var N=new Set;N.add(d),e.updateQueue=N}else C.add(d);break e}else{if(!(e&1)){ww(i,h,e),Dp();break e}d=Error(Ae(426))}}else if(Jt&&u.mode&1){var k=bw(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),vw(k,a,u,i,e),pp(al(d,u));break e}}i=d=al(d,u),jn!==4&&(jn=2),Lc===null?Lc=[i]:Lc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=_S(i,d,e);fw(i,E);break e;case 1:u=d;var A=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof A.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ki===null||!Ki.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=SS(i,u,e);fw(i,j);break e}}i=i.return}while(i!==null)}zS(n)}catch(F){e=F,Tn===n&&n!==null&&(Tn=n=n.return);continue}break}while(!0)}function US(){var t=Hh.current;return Hh.current=Wh,t===null?Wh:t}function Dp(){(jn===0||jn===3||jn===2)&&(jn=4),zn===null||!(Xo&268435455)&&!(Uf&268435455)||Li(zn,Kn)}function qh(t,e){var n=_t;_t|=2;var r=US();(zn!==t||Kn!==e)&&(Ks=null,Vo(t,e));do try{r8();break}catch(s){BS(t,s)}while(!0);if(yp(),_t=n,Hh.current=r,Tn!==null)throw Error(Ae(261));return zn=null,Kn=0,jn}function r8(){for(;Tn!==null;)VS(Tn)}function s8(){for(;Tn!==null&&!Tk();)VS(Tn)}function VS(t){var e=HS(t.alternate,t,Or);t.memoizedProps=t.pendingProps,e===null?zS(t):Tn=e,Rp.current=null}function zS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ZN(n,e),n!==null){n.flags&=32767,Tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jn=6,Tn=null;return}}else if(n=KN(n,e,Or),n!==null){Tn=n;return}if(e=e.sibling,e!==null){Tn=e;return}Tn=e=t}while(e!==null);jn===0&&(jn=5)}function Co(t,e,n){var r=Rt,s=ts.transition;try{ts.transition=null,Rt=1,i8(t,e,n,r)}finally{ts.transition=s,Rt=r}return null}function i8(t,e,n,r){do Za();while(Ui!==null);if(_t&6)throw Error(Ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Bk(t,i),t===zn&&(Tn=zn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ed||(Ed=!0,$S(Nh,function(){return Za(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ts.transition,ts.transition=null;var a=Rt;Rt=1;var u=_t;_t|=4,Rp.current=null,JN(t,n),DS(n,t),CN(Eg),Ih=!!Sg,Eg=Sg=null,t.current=n,e8(n),Ik(),_t=u,Rt=a,ts.transition=i}else t.current=n;if(Ed&&(Ed=!1,Ui=t,Gh=s),i=t.pendingLanes,i===0&&(Ki=null),Ok(n.stateNode),Nr(t,Sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($h)throw $h=!1,t=Hg,Hg=null,t;return Gh&1&&t.tag!==0&&Za(),i=t.pendingLanes,i&1?t===$g?Fc++:(Fc=0,$g=t):Fc=0,lo(),null}function Za(){if(Ui!==null){var t=_3(Gh),e=ts.transition,n=Rt;try{if(ts.transition=null,Rt=16>t?16:t,Ui===null)var r=!1;else{if(t=Ui,Ui=null,Gh=0,_t&6)throw Error(Ae(331));var s=_t;for(_t|=4,Be=t.current;Be!==null;){var i=Be,a=i.child;if(Be.flags&16){var u=i.deletions;if(u!==null){for(var d=0;d<u.length;d++){var h=u[d];for(Be=h;Be!==null;){var x=Be;switch(x.tag){case 0:case 11:case 15:Dc(8,x,i)}var y=x.child;if(y!==null)y.return=x,Be=y;else for(;Be!==null;){x=Be;var b=x.sibling,_=x.return;if(OS(x),x===h){Be=null;break}if(b!==null){b.return=_,Be=b;break}Be=_}}}var C=i.alternate;if(C!==null){var N=C.child;if(N!==null){C.child=null;do{var k=N.sibling;N.sibling=null,N=k}while(N!==null)}}Be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Be=a;else e:for(;Be!==null;){if(i=Be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Dc(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Be=E;break e}Be=i.return}}var A=t.current;for(Be=A;Be!==null;){a=Be;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,Be=I;else e:for(a=A;Be!==null;){if(u=Be,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Bf(9,u)}}catch(F){fn(u,u.return,F)}if(u===a){Be=null;break e}var j=u.sibling;if(j!==null){j.return=u.return,Be=j;break e}Be=u.return}}if(_t=s,lo(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Rf,t)}catch{}r=!0}return r}finally{Rt=n,ts.transition=e}}return!1}function Mw(t,e,n){e=al(n,e),e=_S(t,e,1),t=Xi(t,e,1),e=dr(),t!==null&&(Fu(t,1,e),Nr(t,e))}function fn(t,e,n){if(t.tag===3)Mw(t,t,n);else for(;e!==null;){if(e.tag===3){Mw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ki===null||!Ki.has(r))){t=al(n,t),t=SS(e,t,1),e=Xi(e,t,1),t=dr(),e!==null&&(Fu(e,1,t),Nr(e,t));break}}e=e.return}}function o8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dr(),t.pingedLanes|=t.suspendedLanes&n,zn===t&&(Kn&n)===n&&(jn===4||jn===3&&(Kn&130023424)===Kn&&500>Sn()-Op?Vo(t,0):Pp|=n),Nr(t,e)}function WS(t,e){e===0&&(t.mode&1?(e=md,md<<=1,!(md&130023424)&&(md=4194304)):e=1);var n=dr();t=ui(t,e),t!==null&&(Fu(t,e,n),Nr(t,n))}function a8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WS(t,n)}function l8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),WS(t,n)}var HS;HS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ar.current)Er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Er=!1,XN(t,e,n);Er=!!(t.flags&131072)}else Er=!1,Jt&&e.flags&1048576&&Y3(e,Lh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uh(t,e),t=e.pendingProps;var s=rl(e,ar.current);Ka(e,n),s=Ap(null,e,r,t,s,n);var i=kp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(i=!0,jh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vp(e),s.updater=Ff,e.stateNode=s,s._reactInternals=e,Og(e,r,t,n),e=Dg(null,e,r,!0,i,n)):(e.tag=0,Jt&&i&&mp(e),cr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=u8(r),t=fs(r,t),s){case 0:e=jg(null,e,r,t,n);break e;case 1:e=Ew(null,e,r,t,n);break e;case 11:e=_w(null,e,r,t,n);break e;case 14:e=Sw(null,e,r,fs(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),jg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),Ew(t,e,r,s,n);case 3:e:{if(kS(e),t===null)throw Error(Ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,eS(t,e),Uh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=al(Error(Ae(423)),e),e=Cw(t,e,r,n,s);break e}else if(r!==s){s=al(Error(Ae(424)),e),e=Cw(t,e,r,n,s);break e}else for(jr=Yi(e.stateNode.containerInfo.firstChild),Dr=e,Jt=!0,xs=null,n=Q3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sl(),r===s){e=di(t,e,n);break e}cr(t,e,r,n)}e=e.child}return e;case 5:return tS(e),t===null&&Ig(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Cg(r,s)?a=null:i!==null&&Cg(r,i)&&(e.flags|=32),AS(t,e),cr(t,e,a,n),e.child;case 6:return t===null&&Ig(e),null;case 13:return NS(t,e,n);case 4:return _p(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=il(e,null,r,n):cr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),_w(t,e,r,s,n);case 7:return cr(t,e,e.pendingProps,n),e.child;case 8:return cr(t,e,e.pendingProps.children,n),e.child;case 12:return cr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,zt(Fh,r._currentValue),r._currentValue=a,i!==null)if(vs(i.value,a)){if(i.children===s.children&&!Ar.current){e=di(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){a=i.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=ri(-1,n&-n),d.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var x=h.pending;x===null?d.next=d:(d.next=x.next,x.next=d),h.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Rg(i.return,n,e),u.lanes|=n;break}d=d.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Ae(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Rg(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}cr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ka(e,n),s=rs(s),r=r(s),e.flags|=1,cr(t,e,r,n),e.child;case 14:return r=e.type,s=fs(r,e.pendingProps),s=fs(r.type,s),Sw(t,e,r,s,n);case 15:return ES(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fs(r,s),uh(t,e),e.tag=1,kr(r)?(t=!0,jh(e)):t=!1,Ka(e,n),vS(e,r,s),Og(e,r,s,n),Dg(null,e,r,!0,t,n);case 19:return TS(t,e,n);case 22:return CS(t,e,n)}throw Error(Ae(156,e.tag))};function $S(t,e){return y3(t,e)}function c8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(t,e,n,r){return new c8(t,e,n,r)}function Lp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u8(t){if(typeof t=="function")return Lp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===np)return 11;if(t===rp)return 14}return 2}function Qi(t,e){var n=t.alternate;return n===null?(n=Jr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fh(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Lp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Na:return zo(n.children,s,i,e);case tp:a=8,s|=8;break;case rg:return t=Jr(12,n,e,s|2),t.elementType=rg,t.lanes=i,t;case sg:return t=Jr(13,n,e,s),t.elementType=sg,t.lanes=i,t;case ig:return t=Jr(19,n,e,s),t.elementType=ig,t.lanes=i,t;case t3:return Vf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J_:a=10;break e;case e3:a=9;break e;case np:a=11;break e;case rp:a=14;break e;case Oi:a=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=Jr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zo(t,e,n,r){return t=Jr(7,t,r,e),t.lanes=n,t}function Vf(t,e,n,r){return t=Jr(22,t,r,e),t.elementType=t3,t.lanes=n,t.stateNode={isHidden:!1},t}function em(t,e,n){return t=Jr(6,t,null,e),t.lanes=n,t}function tm(t,e,n){return e=Jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d8(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=j0(0),this.expirationTimes=j0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fp(t,e,n,r,s,i,a,u,d){return t=new d8(t,e,n,u,d),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vp(i),t}function h8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ka,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function GS(t){if(!t)return to;t=t._reactInternals;e:{if(ra(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(kr(n))return G3(t,n,e)}return e}function qS(t,e,n,r,s,i,a,u,d){return t=Fp(n,r,!0,t,s,i,a,u,d),t.context=GS(null),n=t.current,r=dr(),s=Zi(n),i=ri(r,s),i.callback=e??null,Xi(n,i,s),t.current.lanes=s,Fu(t,s,r),Nr(t,r),t}function zf(t,e,n,r){var s=e.current,i=dr(),a=Zi(s);return n=GS(n),e.context===null?e.context=n:e.pendingContext=n,e=ri(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xi(s,e,a),t!==null&&(bs(t,s,a,i),ah(t,s,a)),a}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bp(t,e){jw(t,e),(t=t.alternate)&&jw(t,e)}function f8(){return null}var YS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Up(t){this._internalRoot=t}Wf.prototype.render=Up.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));zf(t,e,null,null)};Wf.prototype.unmount=Up.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ko(function(){zf(null,t,null,null)}),e[ci]=null}};function Wf(t){this._internalRoot=t}Wf.prototype.unstable_scheduleHydration=function(t){if(t){var e=C3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Di.length&&e!==0&&e<Di[n].priority;n++);Di.splice(n,0,t),n===0&&k3(t)}};function Vp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dw(){}function m8(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Yh(a);i.call(h)}}var a=qS(e,r,t,0,null,!1,!1,"",Dw);return t._reactRootContainer=a,t[ci]=a.current,au(t.nodeType===8?t.parentNode:t),Ko(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=Yh(d);u.call(h)}}var d=Fp(t,0,!1,null,null,!1,!1,"",Dw);return t._reactRootContainer=d,t[ci]=d.current,au(t.nodeType===8?t.parentNode:t),Ko(function(){zf(e,d,n,r)}),d}function $f(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var u=s;s=function(){var d=Yh(a);u.call(d)}}zf(e,a,t,s)}else a=m8(n,e,t,s,r);return Yh(a)}S3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yc(e.pendingLanes);n!==0&&(op(e,n|1),Nr(e,Sn()),!(_t&6)&&(ll=Sn()+500,lo()))}break;case 13:Ko(function(){var r=ui(t,1);if(r!==null){var s=dr();bs(r,t,1,s)}}),Bp(t,1)}};ap=function(t){if(t.tag===13){var e=ui(t,134217728);if(e!==null){var n=dr();bs(e,t,134217728,n)}Bp(t,134217728)}};E3=function(t){if(t.tag===13){var e=Zi(t),n=ui(t,e);if(n!==null){var r=dr();bs(n,t,e,r)}Bp(t,e)}};C3=function(){return Rt};A3=function(t,e){var n=Rt;try{return Rt=t,e()}finally{Rt=n}};gg=function(t,e,n){switch(e){case"input":if(lg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=jf(r);if(!s)throw Error(Ae(90));r3(r),lg(r,s)}}}break;case"textarea":i3(t,n);break;case"select":e=n.value,e!=null&&Ga(t,!!n.multiple,e,!1)}};h3=Mp;f3=Ko;var g8={usingClientEntryPoint:!1,Events:[Uu,Pa,jf,u3,d3,Mp]},Ql={findFiberByHostInstance:jo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p8={bundleType:Ql.bundleType,version:Ql.version,rendererPackageName:Ql.rendererPackageName,rendererConfig:Ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=p3(t),t===null?null:t.stateNode},findFiberByHostInstance:Ql.findFiberByHostInstance||f8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Rf=Cd.inject(p8),Ds=Cd}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g8;Vr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vp(e))throw Error(Ae(200));return h8(t,e,null,n)};Vr.createRoot=function(t,e){if(!Vp(t))throw Error(Ae(299));var n=!1,r="",s=YS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fp(t,1,!1,null,null,n,!1,r,s),t[ci]=e.current,au(t.nodeType===8?t.parentNode:t),new Up(e)};Vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=p3(e),t=t===null?null:t.stateNode,t};Vr.flushSync=function(t){return Ko(t)};Vr.hydrate=function(t,e,n){if(!Hf(e))throw Error(Ae(200));return $f(null,t,e,!0,n)};Vr.hydrateRoot=function(t,e,n){if(!Vp(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=YS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=qS(e,null,t,1,n??null,s,!1,i,a),t[ci]=e.current,au(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Wf(e)};Vr.render=function(t,e,n){if(!Hf(e))throw Error(Ae(200));return $f(null,t,e,!1,n)};Vr.unmountComponentAtNode=function(t){if(!Hf(t))throw Error(Ae(40));return t._reactRootContainer?(Ko(function(){$f(null,null,t,!1,function(){t._reactRootContainer=null,t[ci]=null})}),!0):!1};Vr.unstable_batchedUpdates=Mp;Vr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hf(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return $f(t,e,n,!1,r)};Vr.version="18.3.1-next-f1338f8080-20240426";function XS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XS)}catch(t){console.error(t)}}XS(),X_.exports=Vr;var zp=X_.exports;const x8=Tf(zp),y8=q1({__proto__:null,default:x8},[zp]);var Lw=zp;tg.createRoot=Lw.createRoot,tg.hydrateRoot=Lw.hydrateRoot;var KS={exports:{}},ZS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=T;function w8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var b8=typeof Object.is=="function"?Object.is:w8,v8=zu.useSyncExternalStore,_8=zu.useRef,S8=zu.useEffect,E8=zu.useMemo,C8=zu.useDebugValue;ZS.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=_8(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=E8(function(){function d(_){if(!h){if(h=!0,x=_,_=r(_),s!==void 0&&a.hasValue){var C=a.value;if(s(C,_))return y=C}return y=_}if(C=y,b8(x,_))return C;var N=r(_);return s!==void 0&&s(C,N)?(x=_,C):(x=_,y=N)}var h=!1,x,y,b=n===void 0?null:n;return[function(){return d(e())},b===null?void 0:function(){return d(b())}]},[e,n,r,s]);var u=v8(t,i[0],i[1]);return S8(function(){a.hasValue=!0,a.value=u},[u]),C8(u),u};KS.exports=ZS;var A8=KS.exports;function k8(t){t()}function N8(){let t=null,e=null;return{clear(){t=null,e=null},notify(){k8(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var Fw={notify(){},get:()=>[]};function T8(t,e){let n,r=Fw,s=0,i=!1;function a(N){x();const k=r.subscribe(N);let E=!1;return()=>{E||(E=!0,k(),y())}}function u(){r.notify()}function d(){C.onStateChange&&C.onStateChange()}function h(){return i}function x(){s++,n||(n=t.subscribe(d),r=N8())}function y(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=Fw)}function b(){i||(i=!0,x())}function _(){i&&(i=!1,y())}const C={addNestedSub:a,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:b,tryUnsubscribe:_,getListeners:()=>r};return C}var I8=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R8=I8(),P8=()=>typeof navigator<"u"&&navigator.product==="ReactNative",O8=P8(),M8=()=>R8||O8?T.useLayoutEffect:T.useEffect,j8=M8(),nm=Symbol.for("react-redux-context"),rm=typeof globalThis<"u"?globalThis:{};function D8(){if(!T.createContext)return{};const t=rm[nm]??(rm[nm]=new Map);let e=t.get(T.createContext);return e||(e=T.createContext(null),t.set(T.createContext,e)),e}var no=D8();function L8(t){const{children:e,context:n,serverState:r,store:s}=t,i=T.useMemo(()=>{const d=T8(s);return{store:s,subscription:d,getServerState:r?()=>r:void 0}},[s,r]),a=T.useMemo(()=>s.getState(),[s]);j8(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),a!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,a]);const u=n||no;return T.createElement(u.Provider,{value:i},e)}var F8=L8;function Wp(t=no){return function(){return T.useContext(t)}}var QS=Wp();function JS(t=no){const e=t===no?QS:Wp(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var B8=JS();function U8(t=no){const e=t===no?B8:JS(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var zs=U8(),V8=(t,e)=>t===e;function z8(t=no){const e=t===no?QS:Wp(t),n=(r,s={})=>{const{equalityFn:i=V8}=typeof s=="function"?{equalityFn:s}:s,a=e(),{store:u,subscription:d,getServerState:h}=a;T.useRef(!0);const x=T.useCallback({[r.name](b){return r(b)}}[r.name],[r]),y=A8.useSyncExternalStoreWithSelector(d.addNestedSub,u.getState,h||u.getState,x,i);return T.useDebugValue(y),y};return Object.assign(n,{withTypes:()=>n}),n}var Xt=z8();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qt(){return Qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qt.apply(this,arguments)}var Nn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nn||(Nn={}));const Bw="popstate";function W8(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:u}=r.location;return pu("",{pathname:i,search:a,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Zo(s)}return $8(e,n,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function H8(){return Math.random().toString(36).substr(2,8)}function Uw(t,e){return{usr:t.state,key:t.key,idx:e}}function pu(t,e,n,r){return n===void 0&&(n=null),Qt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:n,key:e&&e.key||r||H8()})}function Zo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $8(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,u=Nn.Pop,d=null,h=x();h==null&&(h=0,a.replaceState(Qt({},a.state,{idx:h}),""));function x(){return(a.state||{idx:null}).idx}function y(){u=Nn.Pop;let k=x(),E=k==null?null:k-h;h=k,d&&d({action:u,location:N.location,delta:E})}function b(k,E){u=Nn.Push;let A=pu(N.location,k,E);h=x()+1;let I=Uw(A,h),j=N.createHref(A);try{a.pushState(I,"",j)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(j)}i&&d&&d({action:u,location:N.location,delta:1})}function _(k,E){u=Nn.Replace;let A=pu(N.location,k,E);h=x();let I=Uw(A,h),j=N.createHref(A);a.replaceState(I,"",j),i&&d&&d({action:u,location:N.location,delta:0})}function C(k){let E=s.location.origin!=="null"?s.location.origin:s.location.href,A=typeof k=="string"?k:Zo(k);return A=A.replace(/ $/,"%20"),lt(E,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,E)}let N={get action(){return u},get location(){return t(s,a)},listen(k){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Bw,y),d=k,()=>{s.removeEventListener(Bw,y),d=null}},createHref(k){return e(s,k)},createURL:C,encodeLocation(k){let E=C(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:_,go(k){return a.go(k)}};return N}var Tt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tt||(Tt={}));const G8=new Set(["lazy","caseSensitive","path","id","index","children"]);function q8(t){return t.index===!0}function Xh(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let a=[...n,String(i)],u=typeof s.id=="string"?s.id:a.join("-");if(lt(s.index!==!0||!s.children,"Cannot specify children on an index route"),lt(!r[u],'Found a route id collision on id "'+u+`".  Route id's must be globally unique within Data Router usages`),q8(s)){let d=Qt({},s,e(s),{id:u});return r[u]=d,d}else{let d=Qt({},s,e(s),{id:u,children:void 0});return r[u]=d,s.children&&(d.children=Xh(s.children,e,a,r)),d}})}function Po(t,e,n){return n===void 0&&(n="/"),mh(t,e,n,!1)}function mh(t,e,n,r){let s=typeof e=="string"?co(e):e,i=Cl(s.pathname||"/",n);if(i==null)return null;let a=eE(t);X8(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let h=oT(i);u=sT(a[d],h,r)}return u}function Y8(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function eE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};d.relativePath.startsWith("/")&&(lt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=si([r,d.relativePath]),x=n.concat(d);i.children&&i.children.length>0&&(lt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),eE(i.children,e,x,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:nT(h,i.index),routesMeta:x})};return t.forEach((i,a)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,a);else for(let d of tE(i.path))s(i,a,d)}),e}function tE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=tE(r.join("/")),u=[];return u.push(...a.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...a),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function X8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const K8=/^:[\w-]+$/,Z8=3,Q8=2,J8=1,eT=10,tT=-2,Vw=t=>t==="*";function nT(t,e){let n=t.split("/"),r=n.length;return n.some(Vw)&&(r+=tT),e&&(r+=Q8),n.filter(s=>!Vw(s)).reduce((s,i)=>s+(K8.test(i)?Z8:i===""?J8:eT),r)}function rT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sT(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,x=i==="/"?e:e.slice(i.length)||"/",y=zw({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},x),b=d.route;if(!y&&h&&n&&!r[r.length-1].route.index&&(y=zw({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},x)),!y)return null;Object.assign(s,y.params),a.push({params:s,pathname:si([i,y.pathname]),pathnameBase:cT(si([i,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(i=si([i,y.pathnameBase]))}return a}function zw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,x,y)=>{let{paramName:b,isOptional:_}=x;if(b==="*"){let N=u[y]||"";a=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const C=u[y];return _&&!C?h[b]=void 0:h[b]=(C||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:t}}function iT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function oT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?co(t):t;return{pathname:n?n.startsWith("/")?n:lT(n,e):e,search:uT(r),hash:dT(s)}}function lT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gf(t,e){let n=nE(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=co(t):(s=Qt({},t),lt(!s.pathname||!s.pathname.includes("?"),sm("?","pathname","search",s)),lt(!s.pathname||!s.pathname.includes("#"),sm("#","pathname","hash",s)),lt(!s.search||!s.search.includes("#"),sm("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,u;if(a==null)u=n;else{let y=e.length-1;if(!r&&a.startsWith("..")){let b=a.split("/");for(;b[0]==="..";)b.shift(),y-=1;s.pathname=b.join("/")}u=y>=0?e[y]:"/"}let d=aT(s,u),h=a&&a!=="/"&&a.endsWith("/"),x=(i||a===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||x)&&(d.pathname+="/"),d}const si=t=>t.join("/").replace(/\/\/+/g,"/"),cT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Kh{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function xu(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rE=["post","put","patch","delete"],hT=new Set(rE),fT=["get",...rE],mT=new Set(fT),gT=new Set([301,302,303,307,308]),pT=new Set([307,308]),im={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xT={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Jl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Hp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yT=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),sE="remix-router-transitions";function wT(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;lt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let Z=t.detectErrorBoundary;s=ie=>({hasErrorBoundary:Z(ie)})}else s=yT;let i={},a=Xh(t.routes,s,void 0,i),u,d=t.basename||"/",h=t.dataStrategy||ST,x=t.patchRoutesOnNavigation,y=Qt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),b=null,_=new Set,C=null,N=null,k=null,E=t.hydrationData!=null,A=Po(a,t.history.location,d),I=!1,j=null;if(A==null&&!x){let Z=br(404,{pathname:t.history.location.pathname}),{matches:ie,route:me}=Jw(a);A=ie,j={[me.id]:Z}}A&&!t.hydrationData&&wn(A,a,t.history.location.pathname).active&&(A=null);let F;if(A)if(A.some(Z=>Z.route.lazy))F=!1;else if(!A.some(Z=>Z.route.loader))F=!0;else if(y.v7_partialHydration){let Z=t.hydrationData?t.hydrationData.loaderData:null,ie=t.hydrationData?t.hydrationData.errors:null;if(ie){let me=A.findIndex(ve=>ie[ve.route.id]!==void 0);F=A.slice(0,me+1).every(ve=>!Xg(ve.route,Z,ie))}else F=A.every(me=>!Xg(me.route,Z,ie))}else F=t.hydrationData!=null;else if(F=!1,A=[],y.v7_partialHydration){let Z=wn(null,a,t.history.location.pathname);Z.active&&Z.matches&&(I=!0,A=Z.matches)}let z,O={historyAction:t.history.action,location:t.history.location,matches:A,initialized:F,navigation:im,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||j,fetchers:new Map,blockers:new Map},R=Nn.Pop,M=!1,U,X=!1,V=new Map,te=null,fe=!1,G=!1,be=[],$=new Set,Q=new Map,ne=0,J=-1,oe=new Map,re=new Set,ae=new Map,q=new Map,le=new Set,ue=new Map,Pe=new Map,se;function Y(){if(b=t.history.listen(Z=>{let{action:ie,location:me,delta:ve}=Z;if(se){se(),se=void 0;return}cl(Pe.size===0||ve!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ie=jl({currentLocation:O.location,nextLocation:me,historyAction:ie});if(Ie&&ve!=null){let Le=new Promise(_e=>{se=_e});t.history.go(ve*-1),wi(Ie,{state:"blocked",location:me,proceed(){wi(Ie,{state:"proceeding",proceed:void 0,reset:void 0,location:me}),Le.then(()=>t.history.go(ve))},reset(){let _e=new Map(O.blockers);_e.set(Ie,Jl),ze({blockers:_e})}});return}return Ge(ie,me)}),n){LT(e,V);let Z=()=>FT(e,V);e.addEventListener("pagehide",Z),te=()=>e.removeEventListener("pagehide",Z)}return O.initialized||Ge(Nn.Pop,O.location,{initialHydration:!0}),z}function ye(){b&&b(),te&&te(),_.clear(),U&&U.abort(),O.fetchers.forEach((Z,ie)=>Qn(ie)),O.blockers.forEach((Z,ie)=>yi(ie))}function Ee(Z){return _.add(Z),()=>_.delete(Z)}function ze(Z,ie){ie===void 0&&(ie={}),O=Qt({},O,Z);let me=[],ve=[];y.v7_fetcherPersist&&O.fetchers.forEach((Ie,Le)=>{Ie.state==="idle"&&(le.has(Le)?ve.push(Le):me.push(Le))}),le.forEach(Ie=>{!O.fetchers.has(Ie)&&!Q.has(Ie)&&ve.push(Ie)}),[..._].forEach(Ie=>Ie(O,{deletedFetchers:ve,viewTransitionOpts:ie.viewTransitionOpts,flushSync:ie.flushSync===!0})),y.v7_fetcherPersist?(me.forEach(Ie=>O.fetchers.delete(Ie)),ve.forEach(Ie=>Qn(Ie))):ve.forEach(Ie=>le.delete(Ie))}function Oe(Z,ie,me){var ve,Ie;let{flushSync:Le}=me===void 0?{}:me,_e=O.actionData!=null&&O.navigation.formMethod!=null&&gs(O.navigation.formMethod)&&O.navigation.state==="loading"&&((ve=Z.state)==null?void 0:ve._isRedirect)!==!0,De;ie.actionData?Object.keys(ie.actionData).length>0?De=ie.actionData:De=null:_e?De=O.actionData:De=null;let Ue=ie.loaderData?Zw(O.loaderData,ie.loaderData,ie.matches||[],ie.errors):O.loaderData,Re=O.blockers;Re.size>0&&(Re=new Map(Re),Re.forEach((it,Pt)=>Re.set(Pt,Jl)));let Ve=M===!0||O.navigation.formMethod!=null&&gs(O.navigation.formMethod)&&((Ie=Z.state)==null?void 0:Ie._isRedirect)!==!0;u&&(a=u,u=void 0),fe||R===Nn.Pop||(R===Nn.Push?t.history.push(Z,Z.state):R===Nn.Replace&&t.history.replace(Z,Z.state));let Je;if(R===Nn.Pop){let it=V.get(O.location.pathname);it&&it.has(Z.pathname)?Je={currentLocation:O.location,nextLocation:Z}:V.has(Z.pathname)&&(Je={currentLocation:Z,nextLocation:O.location})}else if(X){let it=V.get(O.location.pathname);it?it.add(Z.pathname):(it=new Set([Z.pathname]),V.set(O.location.pathname,it)),Je={currentLocation:O.location,nextLocation:Z}}ze(Qt({},ie,{actionData:De,loaderData:Ue,historyAction:R,location:Z,initialized:!0,navigation:im,revalidation:"idle",restoreScrollPosition:ua(Z,ie.matches||O.matches),preventScrollReset:Ve,blockers:Re}),{viewTransitionOpts:Je,flushSync:Le===!0}),R=Nn.Pop,M=!1,X=!1,fe=!1,G=!1,be=[]}async function $e(Z,ie){if(typeof Z=="number"){t.history.go(Z);return}let me=Yg(O.location,O.matches,d,y.v7_prependBasename,Z,y.v7_relativeSplatPath,ie==null?void 0:ie.fromRouteId,ie==null?void 0:ie.relative),{path:ve,submission:Ie,error:Le}=Ww(y.v7_normalizeFormMethod,!1,me,ie),_e=O.location,De=pu(O.location,ve,ie&&ie.state);De=Qt({},De,t.history.encodeLocation(De));let Ue=ie&&ie.replace!=null?ie.replace:void 0,Re=Nn.Push;Ue===!0?Re=Nn.Replace:Ue===!1||Ie!=null&&gs(Ie.formMethod)&&Ie.formAction===O.location.pathname+O.location.search&&(Re=Nn.Replace);let Ve=ie&&"preventScrollReset"in ie?ie.preventScrollReset===!0:void 0,Je=(ie&&ie.flushSync)===!0,it=jl({currentLocation:_e,nextLocation:De,historyAction:Re});if(it){wi(it,{state:"blocked",location:De,proceed(){wi(it,{state:"proceeding",proceed:void 0,reset:void 0,location:De}),$e(Z,ie)},reset(){let Pt=new Map(O.blockers);Pt.set(it,Jl),ze({blockers:Pt})}});return}return await Ge(Re,De,{submission:Ie,pendingError:Le,preventScrollReset:Ve,replace:ie&&ie.replace,enableViewTransition:ie&&ie.viewTransition,flushSync:Je})}function Xe(){if(yn(),ze({revalidation:"loading"}),O.navigation.state!=="submitting"){if(O.navigation.state==="idle"){Ge(O.historyAction,O.location,{startUninterruptedRevalidation:!0});return}Ge(R||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation,enableViewTransition:X===!0})}}async function Ge(Z,ie,me){U&&U.abort(),U=null,R=Z,fe=(me&&me.startUninterruptedRevalidation)===!0,Tr(O.location,O.matches),M=(me&&me.preventScrollReset)===!0,X=(me&&me.enableViewTransition)===!0;let ve=u||a,Ie=me&&me.overrideNavigation,Le=me!=null&&me.initialHydration&&O.matches&&O.matches.length>0&&!I?O.matches:Po(ve,ie,d),_e=(me&&me.flushSync)===!0;if(Le&&O.initialized&&!G&&TT(O.location,ie)&&!(me&&me.submission&&gs(me.submission.formMethod))){Oe(ie,{matches:Le},{flushSync:_e});return}let De=wn(Le,ve,ie.pathname);if(De.active&&De.matches&&(Le=De.matches),!Le){let{error:Ot,notFoundMatches:wt,route:bt}=mt(ie.pathname);Oe(ie,{matches:wt,loaderData:{},errors:{[bt.id]:Ot}},{flushSync:_e});return}U=new AbortController;let Ue=wa(t.history,ie,U.signal,me&&me.submission),Re;if(me&&me.pendingError)Re=[Oo(Le).route.id,{type:Tt.error,error:me.pendingError}];else if(me&&me.submission&&gs(me.submission.formMethod)){let Ot=await xt(Ue,ie,me.submission,Le,De.active,{replace:me.replace,flushSync:_e});if(Ot.shortCircuited)return;if(Ot.pendingActionResult){let[wt,bt]=Ot.pendingActionResult;if(Mr(bt)&&xu(bt.error)&&bt.error.status===404){U=null,Oe(ie,{matches:Ot.matches,loaderData:{},errors:{[wt]:bt.error}});return}}Le=Ot.matches||Le,Re=Ot.pendingActionResult,Ie=om(ie,me.submission),_e=!1,De.active=!1,Ue=wa(t.history,Ue.url,Ue.signal)}let{shortCircuited:Ve,matches:Je,loaderData:it,errors:Pt}=await je(Ue,ie,Le,De.active,Ie,me&&me.submission,me&&me.fetcherSubmission,me&&me.replace,me&&me.initialHydration===!0,_e,Re);Ve||(U=null,Oe(ie,Qt({matches:Je||Le},Qw(Re),{loaderData:it,errors:Pt})))}async function xt(Z,ie,me,ve,Ie,Le){Le===void 0&&(Le={}),yn();let _e=jT(ie,me);if(ze({navigation:_e},{flushSync:Le.flushSync===!0}),Ie){let Re=await ls(ve,ie.pathname,Z.signal);if(Re.type==="aborted")return{shortCircuited:!0};if(Re.type==="error"){let Ve=Oo(Re.partialMatches).route.id;return{matches:Re.partialMatches,pendingActionResult:[Ve,{type:Tt.error,error:Re.error}]}}else if(Re.matches)ve=Re.matches;else{let{notFoundMatches:Ve,error:Je,route:it}=mt(ie.pathname);return{matches:Ve,pendingActionResult:[it.id,{type:Tt.error,error:Je}]}}}let De,Ue=bc(ve,ie);if(!Ue.route.action&&!Ue.route.lazy)De={type:Tt.error,error:br(405,{method:Z.method,pathname:ie.pathname,routeId:Ue.route.id})};else if(De=(await kn("action",O,Z,[Ue],ve,null))[Ue.route.id],Z.signal.aborted)return{shortCircuited:!0};if(Fo(De)){let Re;return Le&&Le.replace!=null?Re=Le.replace:Re=Yw(De.response.headers.get("Location"),new URL(Z.url),d)===O.location.pathname+O.location.search,await gt(Z,De,!0,{submission:me,replace:Re}),{shortCircuited:!0}}if(Vi(De))throw br(400,{type:"defer-action"});if(Mr(De)){let Re=Oo(ve,Ue.route.id);return(Le&&Le.replace)!==!0&&(R=Nn.Push),{matches:ve,pendingActionResult:[Re.route.id,De]}}return{matches:ve,pendingActionResult:[Ue.route.id,De]}}async function je(Z,ie,me,ve,Ie,Le,_e,De,Ue,Re,Ve){let Je=Ie||om(ie,Le),it=Le||_e||t2(Je),Pt=!fe&&(!y.v7_partialHydration||!Ue);if(ve){if(Pt){let qe=We(Ve);ze(Qt({navigation:Je},qe!==void 0?{actionData:qe}:{}),{flushSync:Re})}let pt=await ls(me,ie.pathname,Z.signal);if(pt.type==="aborted")return{shortCircuited:!0};if(pt.type==="error"){let qe=Oo(pt.partialMatches).route.id;return{matches:pt.partialMatches,loaderData:{},errors:{[qe]:pt.error}}}else if(pt.matches)me=pt.matches;else{let{error:qe,notFoundMatches:at,route:nt}=mt(ie.pathname);return{matches:at,loaderData:{},errors:{[nt.id]:qe}}}}let Ot=u||a,[wt,bt]=$w(t.history,O,me,it,ie,y.v7_partialHydration&&Ue===!0,y.v7_skipActionErrorRevalidation,G,be,$,le,ae,re,Ot,d,Ve);if(as(pt=>!(me&&me.some(qe=>qe.route.id===pt))||wt&&wt.some(qe=>qe.route.id===pt)),J=++ne,wt.length===0&&bt.length===0){let pt=ln();return Oe(ie,Qt({matches:me,loaderData:{},errors:Ve&&Mr(Ve[1])?{[Ve[0]]:Ve[1].error}:null},Qw(Ve),pt?{fetchers:new Map(O.fetchers)}:{}),{flushSync:Re}),{shortCircuited:!0}}if(Pt){let pt={};if(!ve){pt.navigation=Je;let qe=We(Ve);qe!==void 0&&(pt.actionData=qe)}bt.length>0&&(pt.fetchers=lr(bt)),ze(pt,{flushSync:Re})}bt.forEach(pt=>{ft(pt.key),pt.controller&&Q.set(pt.key,pt.controller)});let cn=()=>bt.forEach(pt=>ft(pt.key));U&&U.signal.addEventListener("abort",cn);let{loaderResults:At,fetcherResults:Hr}=await yt(O,me,wt,bt,Z);if(Z.signal.aborted)return{shortCircuited:!0};U&&U.signal.removeEventListener("abort",cn),bt.forEach(pt=>Q.delete(pt.key));let Rn=Ad(At);if(Rn)return await gt(Z,Rn.result,!0,{replace:De}),{shortCircuited:!0};if(Rn=Ad(Hr),Rn)return re.add(Rn.key),await gt(Z,Rn.result,!0,{replace:De}),{shortCircuited:!0};let{loaderData:mo,errors:Se}=Kw(O,me,At,Ve,bt,Hr,ue);ue.forEach((pt,qe)=>{pt.subscribe(at=>{(at||pt.done)&&ue.delete(qe)})}),y.v7_partialHydration&&Ue&&O.errors&&(Se=Qt({},O.errors,Se));let $s=ln(),Dt=Ct(J),cs=$s||Dt||bt.length>0;return Qt({matches:me,loaderData:mo,errors:Se},cs?{fetchers:new Map(O.fetchers)}:{})}function We(Z){if(Z&&!Mr(Z[1]))return{[Z[0]]:Z[1].data};if(O.actionData)return Object.keys(O.actionData).length===0?null:O.actionData}function lr(Z){return Z.forEach(ie=>{let me=O.fetchers.get(ie.key),ve=ec(void 0,me?me.data:void 0);O.fetchers.set(ie.key,ve)}),new Map(O.fetchers)}function Me(Z,ie,me,ve){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ft(Z);let Ie=(ve&&ve.flushSync)===!0,Le=u||a,_e=Yg(O.location,O.matches,d,y.v7_prependBasename,me,y.v7_relativeSplatPath,ie,ve==null?void 0:ve.relative),De=Po(Le,_e,d),Ue=wn(De,Le,_e);if(Ue.active&&Ue.matches&&(De=Ue.matches),!De){kt(Z,ie,br(404,{pathname:_e}),{flushSync:Ie});return}let{path:Re,submission:Ve,error:Je}=Ww(y.v7_normalizeFormMethod,!0,_e,ve);if(Je){kt(Z,ie,Je,{flushSync:Ie});return}let it=bc(De,Re),Pt=(ve&&ve.preventScrollReset)===!0;if(Ve&&gs(Ve.formMethod)){Wn(Z,ie,Re,it,De,Ue.active,Ie,Pt,Ve);return}ae.set(Z,{routeId:ie,path:Re}),_s(Z,ie,Re,it,De,Ue.active,Ie,Pt,Ve)}async function Wn(Z,ie,me,ve,Ie,Le,_e,De,Ue){yn(),ae.delete(Z);function Re(Zt){if(!Zt.route.action&&!Zt.route.lazy){let Ss=br(405,{method:Ue.formMethod,pathname:me,routeId:ie});return kt(Z,ie,Ss,{flushSync:_e}),!0}return!1}if(!Le&&Re(ve))return;let Ve=O.fetchers.get(Z);jt(Z,DT(Ue,Ve),{flushSync:_e});let Je=new AbortController,it=wa(t.history,me,Je.signal,Ue);if(Le){let Zt=await ls(Ie,new URL(it.url).pathname,it.signal,Z);if(Zt.type==="aborted")return;if(Zt.type==="error"){kt(Z,ie,Zt.error,{flushSync:_e});return}else if(Zt.matches){if(Ie=Zt.matches,ve=bc(Ie,me),Re(ve))return}else{kt(Z,ie,br(404,{pathname:me}),{flushSync:_e});return}}Q.set(Z,Je);let Pt=ne,wt=(await kn("action",O,it,[ve],Ie,Z))[ve.route.id];if(it.signal.aborted){Q.get(Z)===Je&&Q.delete(Z);return}if(y.v7_fetcherPersist&&le.has(Z)){if(Fo(wt)||Mr(wt)){jt(Z,Ni(void 0));return}}else{if(Fo(wt))if(Q.delete(Z),J>Pt){jt(Z,Ni(void 0));return}else return re.add(Z),jt(Z,ec(Ue)),gt(it,wt,!1,{fetcherSubmission:Ue,preventScrollReset:De});if(Mr(wt)){kt(Z,ie,wt.error);return}}if(Vi(wt))throw br(400,{type:"defer-action"});let bt=O.navigation.location||O.location,cn=wa(t.history,bt,Je.signal),At=u||a,Hr=O.navigation.state!=="idle"?Po(At,O.navigation.location,d):O.matches;lt(Hr,"Didn't find any matches after fetcher action");let Rn=++ne;oe.set(Z,Rn);let mo=ec(Ue,wt.data);O.fetchers.set(Z,mo);let[Se,$s]=$w(t.history,O,Hr,Ue,bt,!1,y.v7_skipActionErrorRevalidation,G,be,$,le,ae,re,At,d,[ve.route.id,wt]);$s.filter(Zt=>Zt.key!==Z).forEach(Zt=>{let Ss=Zt.key,ha=O.fetchers.get(Ss),bn=ec(void 0,ha?ha.data:void 0);O.fetchers.set(Ss,bn),ft(Ss),Zt.controller&&Q.set(Ss,Zt.controller)}),ze({fetchers:new Map(O.fetchers)});let Dt=()=>$s.forEach(Zt=>ft(Zt.key));Je.signal.addEventListener("abort",Dt);let{loaderResults:cs,fetcherResults:pt}=await yt(O,Hr,Se,$s,cn);if(Je.signal.aborted)return;Je.signal.removeEventListener("abort",Dt),oe.delete(Z),Q.delete(Z),$s.forEach(Zt=>Q.delete(Zt.key));let qe=Ad(cs);if(qe)return gt(cn,qe.result,!1,{preventScrollReset:De});if(qe=Ad(pt),qe)return re.add(qe.key),gt(cn,qe.result,!1,{preventScrollReset:De});let{loaderData:at,errors:nt}=Kw(O,Hr,cs,void 0,$s,pt,ue);if(O.fetchers.has(Z)){let Zt=Ni(wt.data);O.fetchers.set(Z,Zt)}Ct(Rn),O.navigation.state==="loading"&&Rn>J?(lt(R,"Expected pending action"),U&&U.abort(),Oe(O.navigation.location,{matches:Hr,loaderData:at,errors:nt,fetchers:new Map(O.fetchers)})):(ze({errors:nt,loaderData:Zw(O.loaderData,at,Hr,nt),fetchers:new Map(O.fetchers)}),G=!1)}async function _s(Z,ie,me,ve,Ie,Le,_e,De,Ue){let Re=O.fetchers.get(Z);jt(Z,ec(Ue,Re?Re.data:void 0),{flushSync:_e});let Ve=new AbortController,Je=wa(t.history,me,Ve.signal);if(Le){let wt=await ls(Ie,new URL(Je.url).pathname,Je.signal,Z);if(wt.type==="aborted")return;if(wt.type==="error"){kt(Z,ie,wt.error,{flushSync:_e});return}else if(wt.matches)Ie=wt.matches,ve=bc(Ie,me);else{kt(Z,ie,br(404,{pathname:me}),{flushSync:_e});return}}Q.set(Z,Ve);let it=ne,Ot=(await kn("loader",O,Je,[ve],Ie,Z))[ve.route.id];if(Vi(Ot)&&(Ot=await $p(Ot,Je.signal,!0)||Ot),Q.get(Z)===Ve&&Q.delete(Z),!Je.signal.aborted){if(le.has(Z)){jt(Z,Ni(void 0));return}if(Fo(Ot))if(J>it){jt(Z,Ni(void 0));return}else{re.add(Z),await gt(Je,Ot,!1,{preventScrollReset:De});return}if(Mr(Ot)){kt(Z,ie,Ot.error);return}lt(!Vi(Ot),"Unhandled fetcher deferred data"),jt(Z,Ni(Ot.data))}}async function gt(Z,ie,me,ve){let{submission:Ie,fetcherSubmission:Le,preventScrollReset:_e,replace:De}=ve===void 0?{}:ve;ie.response.headers.has("X-Remix-Revalidate")&&(G=!0);let Ue=ie.response.headers.get("Location");lt(Ue,"Expected a Location header on the redirect Response"),Ue=Yw(Ue,new URL(Z.url),d);let Re=pu(O.location,Ue,{_isRedirect:!0});if(n){let wt=!1;if(ie.response.headers.has("X-Remix-Reload-Document"))wt=!0;else if(Hp.test(Ue)){const bt=t.history.createURL(Ue);wt=bt.origin!==e.location.origin||Cl(bt.pathname,d)==null}if(wt){De?e.location.replace(Ue):e.location.assign(Ue);return}}U=null;let Ve=De===!0||ie.response.headers.has("X-Remix-Replace")?Nn.Replace:Nn.Push,{formMethod:Je,formAction:it,formEncType:Pt}=O.navigation;!Ie&&!Le&&Je&&it&&Pt&&(Ie=t2(O.navigation));let Ot=Ie||Le;if(pT.has(ie.response.status)&&Ot&&gs(Ot.formMethod))await Ge(Ve,Re,{submission:Qt({},Ot,{formAction:Ue}),preventScrollReset:_e||M,enableViewTransition:me?X:void 0});else{let wt=om(Re,Ie);await Ge(Ve,Re,{overrideNavigation:wt,fetcherSubmission:Le,preventScrollReset:_e||M,enableViewTransition:me?X:void 0})}}async function kn(Z,ie,me,ve,Ie,Le){let _e,De={};try{_e=await ET(h,Z,ie,me,ve,Ie,Le,i,s)}catch(Ue){return ve.forEach(Re=>{De[Re.route.id]={type:Tt.error,error:Ue}}),De}for(let[Ue,Re]of Object.entries(_e))if(IT(Re)){let Ve=Re.result;De[Ue]={type:Tt.redirect,response:kT(Ve,me,Ue,Ie,d,y.v7_relativeSplatPath)}}else De[Ue]=await AT(Re);return De}async function yt(Z,ie,me,ve,Ie){let Le=Z.matches,_e=kn("loader",Z,Ie,me,ie,null),De=Promise.all(ve.map(async Ve=>{if(Ve.matches&&Ve.match&&Ve.controller){let it=(await kn("loader",Z,wa(t.history,Ve.path,Ve.controller.signal),[Ve.match],Ve.matches,Ve.key))[Ve.match.route.id];return{[Ve.key]:it}}else return Promise.resolve({[Ve.key]:{type:Tt.error,error:br(404,{pathname:Ve.path})}})})),Ue=await _e,Re=(await De).reduce((Ve,Je)=>Object.assign(Ve,Je),{});return await Promise.all([OT(ie,Ue,Ie.signal,Le,Z.loaderData),MT(ie,Re,ve)]),{loaderResults:Ue,fetcherResults:Re}}function yn(){G=!0,be.push(...as()),ae.forEach((Z,ie)=>{Q.has(ie)&&$.add(ie),ft(ie)})}function jt(Z,ie,me){me===void 0&&(me={}),O.fetchers.set(Z,ie),ze({fetchers:new Map(O.fetchers)},{flushSync:(me&&me.flushSync)===!0})}function kt(Z,ie,me,ve){ve===void 0&&(ve={});let Ie=Oo(O.matches,ie);Qn(Z),ze({errors:{[Ie.route.id]:me},fetchers:new Map(O.fetchers)},{flushSync:(ve&&ve.flushSync)===!0})}function xi(Z){return q.set(Z,(q.get(Z)||0)+1),le.has(Z)&&le.delete(Z),O.fetchers.get(Z)||xT}function Qn(Z){let ie=O.fetchers.get(Z);Q.has(Z)&&!(ie&&ie.state==="loading"&&oe.has(Z))&&ft(Z),ae.delete(Z),oe.delete(Z),re.delete(Z),y.v7_fetcherPersist&&le.delete(Z),$.delete(Z),O.fetchers.delete(Z)}function mr(Z){let ie=(q.get(Z)||0)-1;ie<=0?(q.delete(Z),le.add(Z),y.v7_fetcherPersist||Qn(Z)):q.set(Z,ie),ze({fetchers:new Map(O.fetchers)})}function ft(Z){let ie=Q.get(Z);ie&&(ie.abort(),Q.delete(Z))}function Te(Z){for(let ie of Z){let me=xi(ie),ve=Ni(me.data);O.fetchers.set(ie,ve)}}function ln(){let Z=[],ie=!1;for(let me of re){let ve=O.fetchers.get(me);lt(ve,"Expected fetcher: "+me),ve.state==="loading"&&(re.delete(me),Z.push(me),ie=!0)}return Te(Z),ie}function Ct(Z){let ie=[];for(let[me,ve]of oe)if(ve<Z){let Ie=O.fetchers.get(me);lt(Ie,"Expected fetcher: "+me),Ie.state==="loading"&&(ft(me),oe.delete(me),ie.push(me))}return Te(ie),ie.length>0}function Kt(Z,ie){let me=O.blockers.get(Z)||Jl;return Pe.get(Z)!==ie&&Pe.set(Z,ie),me}function yi(Z){O.blockers.delete(Z),Pe.delete(Z)}function wi(Z,ie){let me=O.blockers.get(Z)||Jl;lt(me.state==="unblocked"&&ie.state==="blocked"||me.state==="blocked"&&ie.state==="blocked"||me.state==="blocked"&&ie.state==="proceeding"||me.state==="blocked"&&ie.state==="unblocked"||me.state==="proceeding"&&ie.state==="unblocked","Invalid blocker state transition: "+me.state+" -> "+ie.state);let ve=new Map(O.blockers);ve.set(Z,ie),ze({blockers:ve})}function jl(Z){let{currentLocation:ie,nextLocation:me,historyAction:ve}=Z;if(Pe.size===0)return;Pe.size>1&&cl(!1,"A router only supports one blocker at a time");let Ie=Array.from(Pe.entries()),[Le,_e]=Ie[Ie.length-1],De=O.blockers.get(Le);if(!(De&&De.state==="proceeding")&&_e({currentLocation:ie,nextLocation:me,historyAction:ve}))return Le}function mt(Z){let ie=br(404,{pathname:Z}),me=u||a,{matches:ve,route:Ie}=Jw(me);return as(),{notFoundMatches:ve,route:Ie,error:ie}}function as(Z){let ie=[];return ue.forEach((me,ve)=>{(!Z||Z(ve))&&(me.cancel(),ie.push(ve),ue.delete(ve))}),ie}function nd(Z,ie,me){if(C=Z,k=ie,N=me||null,!E&&O.navigation===im){E=!0;let ve=ua(O.location,O.matches);ve!=null&&ze({restoreScrollPosition:ve})}return()=>{C=null,k=null,N=null}}function Dl(Z,ie){return N&&N(Z,ie.map(ve=>Y8(ve,O.loaderData)))||Z.key}function Tr(Z,ie){if(C&&k){let me=Dl(Z,ie);C[me]=k()}}function ua(Z,ie){if(C){let me=Dl(Z,ie),ve=C[me];if(typeof ve=="number")return ve}return null}function wn(Z,ie,me){if(x)if(Z){if(Object.keys(Z[0].params).length>0)return{active:!0,matches:mh(ie,me,d,!0)}}else return{active:!0,matches:mh(ie,me,d,!0)||[]};return{active:!1,matches:null}}async function ls(Z,ie,me,ve){if(!x)return{type:"success",matches:Z};let Ie=Z;for(;;){let Le=u==null,_e=u||a,De=i;try{await x({signal:me,path:ie,matches:Ie,fetcherKey:ve,patch:(Ve,Je)=>{me.aborted||qw(Ve,Je,_e,De,s)}})}catch(Ve){return{type:"error",error:Ve,partialMatches:Ie}}finally{Le&&!me.aborted&&(a=[...a])}if(me.aborted)return{type:"aborted"};let Ue=Po(_e,ie,d);if(Ue)return{type:"success",matches:Ue};let Re=mh(_e,ie,d,!0);if(!Re||Ie.length===Re.length&&Ie.every((Ve,Je)=>Ve.route.id===Re[Je].route.id))return{type:"success",matches:null};Ie=Re}}function da(Z){i={},u=Xh(Z,s,void 0,i)}function Wr(Z,ie){let me=u==null;qw(Z,ie,u||a,i,s),me&&(a=[...a],ze({}))}return z={get basename(){return d},get future(){return y},get state(){return O},get routes(){return a},get window(){return e},initialize:Y,subscribe:Ee,enableScrollRestoration:nd,navigate:$e,fetch:Me,revalidate:Xe,createHref:Z=>t.history.createHref(Z),encodeLocation:Z=>t.history.encodeLocation(Z),getFetcher:xi,deleteFetcher:mr,dispose:ye,getBlocker:Kt,deleteBlocker:yi,patchRoutes:Wr,_internalFetchControllers:Q,_internalActiveDeferreds:ue,_internalSetRoutes:da},z}function bT(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Yg(t,e,n,r,s,i,a,u){let d,h;if(a){d=[];for(let y of e)if(d.push(y),y.route.id===a){h=y;break}}else d=e,h=e[e.length-1];let x=qf(s||".",Gf(d,i),Cl(t.pathname,n)||t.pathname,u==="path");if(s==null&&(x.search=t.search,x.hash=t.hash),(s==null||s===""||s===".")&&h){let y=Gp(x.search);if(h.route.index&&!y)x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&y){let b=new URLSearchParams(x.search),_=b.getAll("index");b.delete("index"),_.filter(N=>N).forEach(N=>b.append("index",N));let C=b.toString();x.search=C?"?"+C:""}}return r&&n!=="/"&&(x.pathname=x.pathname==="/"?n:si([n,x.pathname])),Zo(x)}function Ww(t,e,n,r){if(!r||!bT(r))return{path:n};if(r.formMethod&&!PT(r.formMethod))return{path:n,error:br(405,{method:r.formMethod})};let s=()=>({path:n,error:br(400,{type:"invalid-body"})}),i=r.formMethod||"get",a=t?i.toUpperCase():i.toLowerCase(),u=aE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!gs(a))return s();let b=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,C)=>{let[N,k]=C;return""+_+N+"="+k+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:b}}}else if(r.formEncType==="application/json"){if(!gs(a))return s();try{let b=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:u,formEncType:r.formEncType,formData:void 0,json:b,text:void 0}}}catch{return s()}}}lt(typeof FormData=="function","FormData is not available in this environment");let d,h;if(r.formData)d=Kg(r.formData),h=r.formData;else if(r.body instanceof FormData)d=Kg(r.body),h=r.body;else if(r.body instanceof URLSearchParams)d=r.body,h=Xw(d);else if(r.body==null)d=new URLSearchParams,h=new FormData;else try{d=new URLSearchParams(r.body),h=Xw(d)}catch{return s()}let x={formMethod:a,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(gs(x.formMethod))return{path:n,submission:x};let y=co(n);return e&&y.search&&Gp(y.search)&&d.append("index",""),y.search="?"+d,{path:Zo(y),submission:x}}function Hw(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(s=>s.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function $w(t,e,n,r,s,i,a,u,d,h,x,y,b,_,C,N){let k=N?Mr(N[1])?N[1].error:N[1].data:void 0,E=t.createURL(e.location),A=t.createURL(s),I=n;i&&e.errors?I=Hw(n,Object.keys(e.errors)[0],!0):N&&Mr(N[1])&&(I=Hw(n,N[0]));let j=N?N[1].statusCode:void 0,F=a&&j&&j>=400,z=I.filter((R,M)=>{let{route:U}=R;if(U.lazy)return!0;if(U.loader==null)return!1;if(i)return Xg(U,e.loaderData,e.errors);if(vT(e.loaderData,e.matches[M],R)||d.some(te=>te===R.route.id))return!0;let X=e.matches[M],V=R;return Gw(R,Qt({currentUrl:E,currentParams:X.params,nextUrl:A,nextParams:V.params},r,{actionResult:k,actionStatus:j,defaultShouldRevalidate:F?!1:u||E.pathname+E.search===A.pathname+A.search||E.search!==A.search||iE(X,V)}))}),O=[];return y.forEach((R,M)=>{if(i||!n.some(fe=>fe.route.id===R.routeId)||x.has(M))return;let U=Po(_,R.path,C);if(!U){O.push({key:M,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let X=e.fetchers.get(M),V=bc(U,R.path),te=!1;b.has(M)?te=!1:h.has(M)?(h.delete(M),te=!0):X&&X.state!=="idle"&&X.data===void 0?te=u:te=Gw(V,Qt({currentUrl:E,currentParams:e.matches[e.matches.length-1].params,nextUrl:A,nextParams:n[n.length-1].params},r,{actionResult:k,actionStatus:j,defaultShouldRevalidate:F?!1:u})),te&&O.push({key:M,routeId:R.routeId,path:R.path,matches:U,match:V,controller:new AbortController})}),[z,O]}function Xg(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,s=n!=null&&n[t.id]!==void 0;return!r&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!s}function vT(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function iE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Gw(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function qw(t,e,n,r,s){var i;let a;if(t){let h=r[t];lt(h,"No route found to patch children into: routeId = "+t),h.children||(h.children=[]),a=h.children}else a=n;let u=e.filter(h=>!a.some(x=>oE(h,x))),d=Xh(u,s,[t||"_","patch",String(((i=a)==null?void 0:i.length)||"0")],r);a.push(...d)}function oE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var s;return(s=e.children)==null?void 0:s.some(i=>oE(n,i))}):!1}async function _T(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];lt(s,"No route found in manifest");let i={};for(let a in r){let d=s[a]!==void 0&&a!=="hasErrorBoundary";cl(!d,'Route "'+s.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!d&&!G8.has(a)&&(i[a]=r[a])}Object.assign(s,i),Object.assign(s,Qt({},e(s),{lazy:void 0}))}async function ST(t){let{matches:e}=t,n=e.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,i,a)=>Object.assign(s,{[n[a].route.id]:i}),{})}async function ET(t,e,n,r,s,i,a,u,d,h){let x=i.map(_=>_.route.lazy?_T(_.route,d,u):void 0),y=i.map((_,C)=>{let N=x[C],k=s.some(A=>A.route.id===_.route.id);return Qt({},_,{shouldLoad:k,resolve:async A=>(A&&r.method==="GET"&&(_.route.lazy||_.route.loader)&&(k=!0),k?CT(e,r,_,N,A,h):Promise.resolve({type:Tt.data,result:void 0}))})}),b=await t({matches:y,request:r,params:i[0].params,fetcherKey:a,context:h});try{await Promise.all(x)}catch{}return b}async function CT(t,e,n,r,s,i){let a,u,d=h=>{let x,y=new Promise((C,N)=>x=N);u=()=>x(),e.signal.addEventListener("abort",u);let b=C=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:i},...C!==void 0?[C]:[]),_=(async()=>{try{return{type:"data",result:await(s?s(N=>b(N)):b())}}catch(C){return{type:"error",result:C}}})();return Promise.race([_,y])};try{let h=n.route[t];if(r)if(h){let x,[y]=await Promise.all([d(h).catch(b=>{x=b}),r]);if(x!==void 0)throw x;a=y}else if(await r,h=n.route[t],h)a=await d(h);else if(t==="action"){let x=new URL(e.url),y=x.pathname+x.search;throw br(405,{method:e.method,pathname:y,routeId:n.route.id})}else return{type:Tt.data,result:void 0};else if(h)a=await d(h);else{let x=new URL(e.url),y=x.pathname+x.search;throw br(404,{pathname:y})}lt(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Tt.error,result:h}}finally{u&&e.signal.removeEventListener("abort",u)}return a}async function AT(t){let{result:e,type:n}=t;if(lE(e)){let y;try{let b=e.headers.get("Content-Type");b&&/\bapplication\/json\b/.test(b)?e.body==null?y=null:y=await e.json():y=await e.text()}catch(b){return{type:Tt.error,error:b}}return n===Tt.error?{type:Tt.error,error:new Kh(e.status,e.statusText,y),statusCode:e.status,headers:e.headers}:{type:Tt.data,data:y,statusCode:e.status,headers:e.headers}}if(n===Tt.error){if(e2(e)){var r,s;if(e.data instanceof Error){var i,a;return{type:Tt.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}}return{type:Tt.error,error:new Kh(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:xu(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Tt.error,error:e,statusCode:xu(e)?e.status:void 0}}if(RT(e)){var u,d;return{type:Tt.deferred,deferredData:e,statusCode:(u=e.init)==null?void 0:u.status,headers:((d=e.init)==null?void 0:d.headers)&&new Headers(e.init.headers)}}if(e2(e)){var h,x;return{type:Tt.data,data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(x=e.init)!=null&&x.headers?new Headers(e.init.headers):void 0}}return{type:Tt.data,data:e}}function kT(t,e,n,r,s,i){let a=t.headers.get("Location");if(lt(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Hp.test(a)){let u=r.slice(0,r.findIndex(d=>d.route.id===n)+1);a=Yg(new URL(e.url),u,s,!0,a,i),t.headers.set("Location",a)}return t}function Yw(t,e,n){if(Hp.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=Cl(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function wa(t,e,n,r){let s=t.createURL(aE(e)).toString(),i={signal:n};if(r&&gs(r.formMethod)){let{formMethod:a,formEncType:u}=r;i.method=a.toUpperCase(),u==="application/json"?(i.headers=new Headers({"Content-Type":u}),i.body=JSON.stringify(r.json)):u==="text/plain"?i.body=r.text:u==="application/x-www-form-urlencoded"&&r.formData?i.body=Kg(r.formData):i.body=r.formData}return new Request(s,i)}function Kg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Xw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function NT(t,e,n,r,s){let i={},a=null,u,d=!1,h={},x=n&&Mr(n[1])?n[1].error:void 0;return t.forEach(y=>{if(!(y.route.id in e))return;let b=y.route.id,_=e[b];if(lt(!Fo(_),"Cannot handle redirect results in processLoaderData"),Mr(_)){let C=_.error;x!==void 0&&(C=x,x=void 0),a=a||{};{let N=Oo(t,b);a[N.route.id]==null&&(a[N.route.id]=C)}i[b]=void 0,d||(d=!0,u=xu(_.error)?_.error.status:500),_.headers&&(h[b]=_.headers)}else Vi(_)?(r.set(b,_.deferredData),i[b]=_.deferredData.data,_.statusCode!=null&&_.statusCode!==200&&!d&&(u=_.statusCode),_.headers&&(h[b]=_.headers)):(i[b]=_.data,_.statusCode&&_.statusCode!==200&&!d&&(u=_.statusCode),_.headers&&(h[b]=_.headers))}),x!==void 0&&n&&(a={[n[0]]:x},i[n[0]]=void 0),{loaderData:i,errors:a,statusCode:u||200,loaderHeaders:h}}function Kw(t,e,n,r,s,i,a){let{loaderData:u,errors:d}=NT(e,n,r,a);return s.forEach(h=>{let{key:x,match:y,controller:b}=h,_=i[x];if(lt(_,"Did not find corresponding fetcher result"),!(b&&b.signal.aborted))if(Mr(_)){let C=Oo(t.matches,y==null?void 0:y.route.id);d&&d[C.route.id]||(d=Qt({},d,{[C.route.id]:_.error})),t.fetchers.delete(x)}else if(Fo(_))lt(!1,"Unhandled fetcher revalidation redirect");else if(Vi(_))lt(!1,"Unhandled fetcher deferred data");else{let C=Ni(_.data);t.fetchers.set(x,C)}}),{loaderData:u,errors:d}}function Zw(t,e,n,r){let s=Qt({},e);for(let i of n){let a=i.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(s[a]=e[a]):t[a]!==void 0&&i.route.loader&&(s[a]=t[a]),r&&r.hasOwnProperty(a))break}return s}function Qw(t){return t?Mr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Oo(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Jw(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function br(t,e){let{pathname:n,routeId:r,method:s,type:i,message:a}=e===void 0?{}:e,u="Unknown Server Error",d="Unknown @remix-run/router error";return t===400?(u="Bad Request",s&&n&&r?d="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?d="defer() is not supported in actions":i==="invalid-body"&&(d="Unable to encode submission body")):t===403?(u="Forbidden",d='Route "'+r+'" does not match URL "'+n+'"'):t===404?(u="Not Found",d='No route matches URL "'+n+'"'):t===405&&(u="Method Not Allowed",s&&n&&r?d="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(d='Invalid request method "'+s.toUpperCase()+'"')),new Kh(t||500,u,new Error(d),!0)}function Ad(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,s]=e[n];if(Fo(s))return{key:r,result:s}}}function aE(t){let e=typeof t=="string"?co(t):t;return Zo(Qt({},e,{hash:""}))}function TT(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function IT(t){return lE(t.result)&&gT.has(t.result.status)}function Vi(t){return t.type===Tt.deferred}function Mr(t){return t.type===Tt.error}function Fo(t){return(t&&t.type)===Tt.redirect}function e2(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function RT(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function lE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function PT(t){return mT.has(t.toLowerCase())}function gs(t){return hT.has(t.toLowerCase())}async function OT(t,e,n,r,s){let i=Object.entries(e);for(let a=0;a<i.length;a++){let[u,d]=i[a],h=t.find(b=>(b==null?void 0:b.route.id)===u);if(!h)continue;let x=r.find(b=>b.route.id===h.route.id),y=x!=null&&!iE(x,h)&&(s&&s[h.route.id])!==void 0;Vi(d)&&y&&await $p(d,n,!1).then(b=>{b&&(e[u]=b)})}}async function MT(t,e,n){for(let r=0;r<n.length;r++){let{key:s,routeId:i,controller:a}=n[r],u=e[s];t.find(h=>(h==null?void 0:h.route.id)===i)&&Vi(u)&&(lt(a,"Expected an AbortController for revalidating fetcher deferred result"),await $p(u,a.signal,!0).then(h=>{h&&(e[s]=h)}))}}async function $p(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Tt.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Tt.error,error:s}}return{type:Tt.data,data:t.deferredData.data}}}function Gp(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function bc(t,e){let n=typeof e=="string"?co(e).search:e.search;if(t[t.length-1].route.index&&Gp(n||""))return t[t.length-1];let r=nE(t);return r[r.length-1]}function t2(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:a}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function om(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function jT(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ec(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function DT(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ni(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function LT(t,e){try{let n=t.sessionStorage.getItem(sE);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function FT(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(sE,JSON.stringify(n))}catch(r){cl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zh(){return Zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zh.apply(this,arguments)}const Yf=T.createContext(null),cE=T.createContext(null),uo=T.createContext(null),qp=T.createContext(null),gi=T.createContext({outlet:null,matches:[],isDataRoute:!1}),uE=T.createContext(null);function BT(t,e){let{relative:n}=e===void 0?{}:e;Al()||lt(!1);let{basename:r,navigator:s}=T.useContext(uo),{hash:i,pathname:a,search:u}=hE(t,{relative:n}),d=a;return r!=="/"&&(d=a==="/"?r:si([r,a])),s.createHref({pathname:d,search:u,hash:i})}function Al(){return T.useContext(qp)!=null}function Ws(){return Al()||lt(!1),T.useContext(qp).location}function dE(t){T.useContext(uo).static||T.useLayoutEffect(t)}function Hs(){let{isDataRoute:t}=T.useContext(gi);return t?JT():UT()}function UT(){Al()||lt(!1);let t=T.useContext(Yf),{basename:e,future:n,navigator:r}=T.useContext(uo),{matches:s}=T.useContext(gi),{pathname:i}=Ws(),a=JSON.stringify(Gf(s,n.v7_relativeSplatPath)),u=T.useRef(!1);return dE(()=>{u.current=!0}),T.useCallback(function(h,x){if(x===void 0&&(x={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let y=qf(h,JSON.parse(a),i,x.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:si([e,y.pathname])),(x.replace?r.replace:r.push)(y,x.state,x)},[e,r,a,i,t])}const VT=T.createContext(null);function zT(t){let e=T.useContext(gi).outlet;return e&&T.createElement(VT.Provider,{value:t},e)}function hE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(uo),{matches:s}=T.useContext(gi),{pathname:i}=Ws(),a=JSON.stringify(Gf(s,r.v7_relativeSplatPath));return T.useMemo(()=>qf(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function WT(t,e,n,r){Al()||lt(!1);let{navigator:s,static:i}=T.useContext(uo),{matches:a}=T.useContext(gi),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let h=u?u.pathnameBase:"/";u&&u.route;let x=Ws(),y;y=x;let b=y.pathname||"/",_=b;if(h!=="/"){let k=h.replace(/^\//,"").split("/");_="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=!i&&n&&n.matches&&n.matches.length>0?n.matches:Po(t,{pathname:_});return YT(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:si([h,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:si([h,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,r)}function HT(){let t=QT(),e=xu(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:s},n):null,null)}const $T=T.createElement(HT,null);class GT extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(gi.Provider,{value:this.props.routeContext},T.createElement(uE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qT(t){let{routeContext:e,match:n,children:r}=t,s=T.useContext(Yf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(gi.Provider,{value:e},r)}function YT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let x=a.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);x>=0||lt(!1),a=a.slice(0,Math.min(a.length,x+1))}let d=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<a.length;x++){let y=a[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=x),y.route.id){let{loaderData:b,errors:_}=n,C=y.route.loader&&b[y.route.id]===void 0&&(!_||_[y.route.id]===void 0);if(y.route.lazy||C){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((x,y,b)=>{let _,C=!1,N=null,k=null;n&&(_=u&&y.route.id?u[y.route.id]:void 0,N=y.route.errorElement||$T,d&&(h<0&&b===0?(e6("route-fallback"),C=!0,k=null):h===b&&(C=!0,k=y.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,b+1)),A=()=>{let I;return _?I=N:C?I=k:y.route.Component?I=T.createElement(y.route.Component,null):y.route.element?I=y.route.element:I=x,T.createElement(qT,{match:y,routeContext:{outlet:x,matches:E,isDataRoute:n!=null},children:I})};return n&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?T.createElement(GT,{location:n.location,revalidation:n.revalidation,component:N,error:_,children:A(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):A()},null)}var fE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fE||{}),mE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mE||{});function XT(t){let e=T.useContext(Yf);return e||lt(!1),e}function KT(t){let e=T.useContext(cE);return e||lt(!1),e}function ZT(t){let e=T.useContext(gi);return e||lt(!1),e}function gE(t){let e=ZT(),n=e.matches[e.matches.length-1];return n.route.id||lt(!1),n.route.id}function QT(){var t;let e=T.useContext(uE),n=KT(),r=gE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JT(){let{router:t}=XT(fE.UseNavigateStable),e=gE(mE.UseNavigateStable),n=T.useRef(!1);return dE(()=>{n.current=!0}),T.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Zh({fromRouteId:e},i)))},[t,e])}const n2={};function e6(t,e,n){n2[t]||(n2[t]=!0)}function t6(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Yp(t){let{to:e,replace:n,state:r,relative:s}=t;Al()||lt(!1);let{future:i,static:a}=T.useContext(uo),{matches:u}=T.useContext(gi),{pathname:d}=Ws(),h=Hs(),x=qf(e,Gf(u,i.v7_relativeSplatPath),d,s==="path"),y=JSON.stringify(x);return T.useEffect(()=>h(JSON.parse(y),{replace:n,state:r,relative:s}),[h,y,s,n,r]),null}function n6(t){return zT(t.context)}function r6(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Nn.Pop,navigator:i,static:a=!1,future:u}=t;Al()&&lt(!1);let d=e.replace(/^\/*/,"/"),h=T.useMemo(()=>({basename:d,navigator:i,static:a,future:Zh({v7_relativeSplatPath:!1},u)}),[d,u,i,a]);typeof r=="string"&&(r=co(r));let{pathname:x="/",search:y="",hash:b="",state:_=null,key:C="default"}=r,N=T.useMemo(()=>{let k=Cl(x,d);return k==null?null:{location:{pathname:k,search:y,hash:b,state:_,key:C},navigationType:s}},[d,x,y,b,_,C,s]);return N==null?null:T.createElement(uo.Provider,{value:h},T.createElement(qp.Provider,{children:n,value:N}))}new Promise(()=>{});function s6(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:T.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:T.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:T.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yu(){return yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yu.apply(this,arguments)}function i6(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function o6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function a6(t,e){return t.button===0&&(!e||e==="_self")&&!o6(t)}const l6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c6="6";try{window.__reactRouterVersion=c6}catch{}function u6(t,e){return wT({basename:void 0,future:yu({},void 0,{v7_prependBasename:!0}),history:W8({window:void 0}),hydrationData:d6(),routes:t,mapRouteProperties:s6,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function d6(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=yu({},e,{errors:h6(e.errors)})),e}function h6(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new Kh(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let a=new i(s.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const f6=T.createContext({isTransitioning:!1}),m6=T.createContext(new Map),g6="startTransition",r2=ok[g6],p6="flushSync",s2=y8[p6];function x6(t){r2?r2(t):t()}function tc(t){s2?s2(t):t()}let y6=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function w6(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=T.useState(n.state),[a,u]=T.useState(),[d,h]=T.useState({isTransitioning:!1}),[x,y]=T.useState(),[b,_]=T.useState(),[C,N]=T.useState(),k=T.useRef(new Map),{v7_startTransition:E}=r||{},A=T.useCallback(R=>{E?x6(R):R()},[E]),I=T.useCallback((R,M)=>{let{deletedFetchers:U,flushSync:X,viewTransitionOpts:V}=M;R.fetchers.forEach((fe,G)=>{fe.data!==void 0&&k.current.set(G,fe.data)}),U.forEach(fe=>k.current.delete(fe));let te=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!V||te){X?tc(()=>i(R)):A(()=>i(R));return}if(X){tc(()=>{b&&(x&&x.resolve(),b.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let fe=n.window.document.startViewTransition(()=>{tc(()=>i(R))});fe.finished.finally(()=>{tc(()=>{y(void 0),_(void 0),u(void 0),h({isTransitioning:!1})})}),tc(()=>_(fe));return}b?(x&&x.resolve(),b.skipTransition(),N({state:R,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(u(R),h({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,b,x,k,A]);T.useLayoutEffect(()=>n.subscribe(I),[n,I]),T.useEffect(()=>{d.isTransitioning&&!d.flushSync&&y(new y6)},[d]),T.useEffect(()=>{if(x&&a&&n.window){let R=a,M=x.promise,U=n.window.document.startViewTransition(async()=>{A(()=>i(R)),await M});U.finished.finally(()=>{y(void 0),_(void 0),u(void 0),h({isTransitioning:!1})}),_(U)}},[A,a,x,n.window]),T.useEffect(()=>{x&&a&&s.location.key===a.location.key&&x.resolve()},[x,b,s.location,a]),T.useEffect(()=>{!d.isTransitioning&&C&&(u(C.state),h({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),N(void 0))},[d.isTransitioning,C]),T.useEffect(()=>{},[]);let j=T.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,M,U)=>n.navigate(R,{state:M,preventScrollReset:U==null?void 0:U.preventScrollReset}),replace:(R,M,U)=>n.navigate(R,{replace:!0,state:M,preventScrollReset:U==null?void 0:U.preventScrollReset})}),[n]),F=n.basename||"/",z=T.useMemo(()=>({router:n,navigator:j,static:!1,basename:F}),[n,j,F]),O=T.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return T.useEffect(()=>t6(r,n.future),[r,n.future]),T.createElement(T.Fragment,null,T.createElement(Yf.Provider,{value:z},T.createElement(cE.Provider,{value:s},T.createElement(m6.Provider,{value:k.current},T.createElement(f6.Provider,{value:d},T.createElement(r6,{basename:F,location:s.location,navigationType:s.historyAction,navigator:j,future:O},s.initialized||n.future.v7_partialHydration?T.createElement(b6,{routes:n.routes,future:n.future,state:s}):e))))),null)}const b6=T.memo(v6);function v6(t){let{routes:e,future:n,state:r}=t;return WT(e,void 0,r,n)}const _6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=T.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:u,target:d,to:h,preventScrollReset:x,viewTransition:y}=e,b=i6(e,l6),{basename:_}=T.useContext(uo),C,N=!1;if(typeof h=="string"&&S6.test(h)&&(C=h,_6))try{let I=new URL(window.location.href),j=h.startsWith("//")?new URL(I.protocol+h):new URL(h),F=Cl(j.pathname,_);j.origin===I.origin&&F!=null?h=F+j.search+j.hash:N=!0}catch{}let k=BT(h,{relative:s}),E=E6(h,{replace:a,state:u,target:d,preventScrollReset:x,relative:s,viewTransition:y});function A(I){r&&r(I),I.defaultPrevented||E(I)}return T.createElement("a",yu({},b,{href:C||k,onClick:N||i?r:A,ref:n,target:d}))});var i2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(i2||(i2={}));var o2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(o2||(o2={}));function E6(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:u}=e===void 0?{}:e,d=Hs(),h=Ws(),x=hE(t,{relative:a});return T.useCallback(y=>{if(a6(y,n)){y.preventDefault();let b=r!==void 0?r:Zo(h)===Zo(x);d(t,{replace:b,state:s,preventScrollReset:i,relative:a,viewTransition:u})}},[h,d,x,r,s,n,t,i,a,u])}function qn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var C6=typeof Symbol=="function"&&Symbol.observable||"@@observable",a2=C6,am=()=>Math.random().toString(36).substring(7).split("").join("."),A6={INIT:`@@redux/INIT${am()}`,REPLACE:`@@redux/REPLACE${am()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${am()}`},Qh=A6;function Xp(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function pE(t,e,n){if(typeof t!="function")throw new Error(qn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(qn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(qn(1));return n(pE)(t,e)}let r=t,s=e,i=new Map,a=i,u=0,d=!1;function h(){a===i&&(a=new Map,i.forEach((k,E)=>{a.set(E,k)}))}function x(){if(d)throw new Error(qn(3));return s}function y(k){if(typeof k!="function")throw new Error(qn(4));if(d)throw new Error(qn(5));let E=!0;h();const A=u++;return a.set(A,k),function(){if(E){if(d)throw new Error(qn(6));E=!1,h(),a.delete(A),i=null}}}function b(k){if(!Xp(k))throw new Error(qn(7));if(typeof k.type>"u")throw new Error(qn(8));if(typeof k.type!="string")throw new Error(qn(17));if(d)throw new Error(qn(9));try{d=!0,s=r(s,k)}finally{d=!1}return(i=a).forEach(A=>{A()}),k}function _(k){if(typeof k!="function")throw new Error(qn(10));r=k,b({type:Qh.REPLACE})}function C(){const k=y;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(qn(11));function A(){const j=E;j.next&&j.next(x())}return A(),{unsubscribe:k(A)}},[a2](){return this}}}return b({type:Qh.INIT}),{dispatch:b,subscribe:y,getState:x,replaceReducer:_,[a2]:C}}function k6(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Qh.INIT})>"u")throw new Error(qn(12));if(typeof n(void 0,{type:Qh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qn(13))})}function N6(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const a=e[i];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let s;try{k6(n)}catch(i){s=i}return function(a={},u){if(s)throw s;let d=!1;const h={};for(let x=0;x<r.length;x++){const y=r[x],b=n[y],_=a[y],C=b(_,u);if(typeof C>"u")throw u&&u.type,new Error(qn(14));h[y]=C,d=d||C!==_}return d=d||r.length!==Object.keys(a).length,d?h:a}}function Jh(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function T6(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(qn(15))};const a={getState:s.getState,dispatch:(d,...h)=>i(d,...h)},u=t.map(d=>d(a));return i=Jh(...u)(s.dispatch),{...s,dispatch:i}}}function I6(t){return Xp(t)&&"type"in t&&typeof t.type=="string"}var xE=Symbol.for("immer-nothing"),l2=Symbol.for("immer-draftable"),Br=Symbol.for("immer-state");function ys(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ul=Object.getPrototypeOf;function Qo(t){return!!t&&!!t[Br]}function hi(t){var e;return t?yE(t)||Array.isArray(t)||!!t[l2]||!!((e=t.constructor)!=null&&e[l2])||Kf(t)||Zf(t):!1}var R6=Object.prototype.constructor.toString();function yE(t){if(!t||typeof t!="object")return!1;const e=ul(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===R6}function ef(t,e){Xf(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Xf(t){const e=t[Br];return e?e.type_:Array.isArray(t)?1:Kf(t)?2:Zf(t)?3:0}function Zg(t,e){return Xf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function wE(t,e,n){const r=Xf(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function P6(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Kf(t){return t instanceof Map}function Zf(t){return t instanceof Set}function Ao(t){return t.copy_||t.base_}function Qg(t,e){if(Kf(t))return new Map(t);if(Zf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=yE(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Br];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],u=r[a];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[a]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[a]})}return Object.create(ul(t),r)}else{const r=ul(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function Kp(t,e=!1){return Qf(t)||Qo(t)||!hi(t)||(Xf(t)>1&&(t.set=t.add=t.clear=t.delete=O6),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Kp(r,!0))),t}function O6(){ys(2)}function Qf(t){return Object.isFrozen(t)}var M6={};function Jo(t){const e=M6[t];return e||ys(0,t),e}var wu;function bE(){return wu}function j6(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function c2(t,e){e&&(Jo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Jg(t){e1(t),t.drafts_.forEach(D6),t.drafts_=null}function e1(t){t===wu&&(wu=t.parent_)}function u2(t){return wu=j6(wu,t)}function D6(t){const e=t[Br];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function d2(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Br].modified_&&(Jg(e),ys(4)),hi(t)&&(t=tf(e,t),e.parent_||nf(e,t)),e.patches_&&Jo("Patches").generateReplacementPatches_(n[Br].base_,t,e.patches_,e.inversePatches_)):t=tf(e,n,[]),Jg(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==xE?t:void 0}function tf(t,e,n){if(Qf(e))return e;const r=e[Br];if(!r)return ef(e,(s,i)=>h2(t,r,e,s,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return nf(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,a=!1;r.type_===3&&(i=new Set(s),s.clear(),a=!0),ef(i,(u,d)=>h2(t,r,s,u,d,n,a)),nf(t,s,!1),n&&t.patches_&&Jo("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function h2(t,e,n,r,s,i,a){if(Qo(s)){const u=i&&e&&e.type_!==3&&!Zg(e.assigned_,r)?i.concat(r):void 0,d=tf(t,s,u);if(wE(n,r,d),Qo(d))t.canAutoFreeze_=!1;else return}else a&&n.add(s);if(hi(s)&&!Qf(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;tf(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&nf(t,s)}}function nf(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Kp(e,n)}function L6(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:bE(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=Zp;n&&(s=[r],i=bu);const{revoke:a,proxy:u}=Proxy.revocable(s,i);return r.draft_=u,r.revoke_=a,u}var Zp={get(t,e){if(e===Br)return t;const n=Ao(t);if(!Zg(n,e))return F6(t,n,e);const r=n[e];return t.finalized_||!hi(r)?r:r===lm(t.base_,e)?(cm(t),t.copy_[e]=n1(r,t)):r},has(t,e){return e in Ao(t)},ownKeys(t){return Reflect.ownKeys(Ao(t))},set(t,e,n){const r=vE(Ao(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=lm(Ao(t),e),i=s==null?void 0:s[Br];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(P6(n,s)&&(n!==void 0||Zg(t.base_,e)))return!0;cm(t),t1(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return lm(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,cm(t),t1(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ao(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ys(11)},getPrototypeOf(t){return ul(t.base_)},setPrototypeOf(){ys(12)}},bu={};ef(Zp,(t,e)=>{bu[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});bu.deleteProperty=function(t,e){return bu.set.call(this,t,e,void 0)};bu.set=function(t,e,n){return Zp.set.call(this,t[0],e,n,t[0])};function lm(t,e){const n=t[Br];return(n?Ao(n):t)[e]}function F6(t,e,n){var s;const r=vE(e,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function vE(t,e){if(!(e in t))return;let n=ul(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=ul(n)}}function t1(t){t.modified_||(t.modified_=!0,t.parent_&&t1(t.parent_))}function cm(t){t.copy_||(t.copy_=Qg(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var B6=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(d=i,...h){return a.produce(d,x=>n.call(this,x,...h))}}typeof n!="function"&&ys(6),r!==void 0&&typeof r!="function"&&ys(7);let s;if(hi(e)){const i=u2(this),a=n1(e,void 0);let u=!0;try{s=n(a),u=!1}finally{u?Jg(i):e1(i)}return c2(i,r),d2(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===xE&&(s=void 0),this.autoFreeze_&&Kp(s,!0),r){const i=[],a=[];Jo("Patches").generateReplacementPatches_(e,s,i,a),r(i,a)}return s}else ys(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...u)=>this.produceWithPatches(a,d=>e(d,...u));let r,s;return[this.produce(e,n,(a,u)=>{r=a,s=u}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){hi(t)||ys(8),Qo(t)&&(t=U6(t));const e=u2(this),n=n1(t,void 0);return n[Br].isManual_=!0,e1(e),n}finishDraft(t,e){const n=t&&t[Br];(!n||!n.isManual_)&&ys(9);const{scope_:r}=n;return c2(r,e),d2(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=Jo("Patches").applyPatches_;return Qo(t)?r(t,e):this.produce(t,s=>r(s,e))}};function n1(t,e){const n=Kf(t)?Jo("MapSet").proxyMap_(t,e):Zf(t)?Jo("MapSet").proxySet_(t,e):L6(t,e);return(e?e.scope_:bE()).drafts_.push(n),n}function U6(t){return Qo(t)||ys(10,t),_E(t)}function _E(t){if(!hi(t)||Qf(t))return t;const e=t[Br];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Qg(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Qg(t,!0);return ef(n,(r,s)=>{wE(n,r,_E(s))}),e&&(e.finalized_=!1),n}var Ur=new B6,SE=Ur.produce;Ur.produceWithPatches.bind(Ur);Ur.setAutoFreeze.bind(Ur);Ur.setUseStrictShallowCopy.bind(Ur);Ur.applyPatches.bind(Ur);Ur.createDraft.bind(Ur);Ur.finishDraft.bind(Ur);function EE(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var V6=EE(),z6=EE,W6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Jh:Jh.apply(null,arguments)},H6=t=>t&&typeof t.match=="function";function Bc(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(ii(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>I6(r)&&r.type===t,n}var CE=class vc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,vc.prototype)}static get[Symbol.species](){return vc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new vc(...e[0].concat(this)):new vc(...e.concat(this))}};function f2(t){return hi(t)?SE(t,()=>{}):t}function m2(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function $6(t){return typeof t=="boolean"}var G6=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let a=new CE;return n&&($6(n)?a.push(V6):a.push(z6(n.extraArgument))),a},q6="RTK_autoBatch",g2=t=>e=>{setTimeout(e,t)},Y6=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,a=!1;const u=new Set,d=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:g2(10):t.type==="callback"?t.queueNotification:g2(t.timeout),h=()=>{a=!1,i&&(i=!1,u.forEach(x=>x()))};return Object.assign({},r,{subscribe(x){const y=()=>s&&x(),b=r.subscribe(y);return u.add(x),()=>{b(),u.delete(x)}},dispatch(x){var y;try{return s=!((y=x==null?void 0:x.meta)!=null&&y[q6]),i=!s,i&&(a||(a=!0,d(h))),r.dispatch(x)}finally{s=!0}}})},X6=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new CE(t);return r&&s.push(Y6(typeof r=="object"?r:void 0)),s};function K6(t){const e=G6(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(Xp(n))u=N6(n);else throw new Error(ii(1));let d;typeof r=="function"?d=r(e):d=e();let h=Jh;s&&(h=W6({trace:!1,...typeof s=="object"&&s}));const x=T6(...d),y=X6(x);let b=typeof a=="function"?a(y):y();const _=h(...b);return pE(u,i,_)}function AE(t){const e={},n=[];let r;const s={addCase(i,a){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(ii(28));if(u in e)throw new Error(ii(29));return e[u]=a,s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function Z6(t){return typeof t=="function"}function Q6(t,e){let[n,r,s]=AE(e),i;if(Z6(t))i=()=>f2(t());else{const u=f2(t);i=()=>u}function a(u=i(),d){let h=[n[d.type],...r.filter(({matcher:x})=>x(d)).map(({reducer:x})=>x)];return h.filter(x=>!!x).length===0&&(h=[s]),h.reduce((x,y)=>{if(y)if(Qo(x)){const _=y(x,d);return _===void 0?x:_}else{if(hi(x))return SE(x,b=>y(b,d));{const b=y(x,d);if(b===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return x},u)}return a.getInitialState=i,a}var J6=(t,e)=>H6(t)?t.match(e):t(e);function eI(...t){return e=>t.some(n=>J6(n,e))}var tI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nI=(t=21)=>{let e="",n=t;for(;n--;)e+=tI[Math.random()*64|0];return e},rI=["name","message","stack","code"],um=class{constructor(t,e){xe(this,"_type");this.payload=t,this.meta=e}},p2=class{constructor(t,e){xe(this,"_type");this.payload=t,this.meta=e}},sI=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of rI)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},x2="External signal was aborted",an=(()=>{function t(e,n,r){const s=Bc(e+"/fulfilled",(d,h,x,y)=>({payload:d,meta:{...y||{},arg:x,requestId:h,requestStatus:"fulfilled"}})),i=Bc(e+"/pending",(d,h,x)=>({payload:void 0,meta:{...x||{},arg:h,requestId:d,requestStatus:"pending"}})),a=Bc(e+"/rejected",(d,h,x,y,b)=>({payload:y,error:(r&&r.serializeError||sI)(d||"Rejected"),meta:{...b||{},arg:x,requestId:h,rejectedWithValue:!!y,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"}}));function u(d,{signal:h}={}){return(x,y,b)=>{const _=r!=null&&r.idGenerator?r.idGenerator(d):nI(),C=new AbortController;let N,k;function E(I){k=I,C.abort()}h&&(h.aborted?E(x2):h.addEventListener("abort",()=>E(x2),{once:!0}));const A=async function(){var F,z;let I;try{let O=(F=r==null?void 0:r.condition)==null?void 0:F.call(r,d,{getState:y,extra:b});if(oI(O)&&(O=await O),O===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const R=new Promise((M,U)=>{N=()=>{U({name:"AbortError",message:k||"Aborted"})},C.signal.addEventListener("abort",N)});x(i(_,d,(z=r==null?void 0:r.getPendingMeta)==null?void 0:z.call(r,{requestId:_,arg:d},{getState:y,extra:b}))),I=await Promise.race([R,Promise.resolve(n(d,{dispatch:x,getState:y,extra:b,requestId:_,signal:C.signal,abort:E,rejectWithValue:(M,U)=>new um(M,U),fulfillWithValue:(M,U)=>new p2(M,U)})).then(M=>{if(M instanceof um)throw M;return M instanceof p2?s(M.payload,_,d,M.meta):s(M,_,d)})])}catch(O){I=O instanceof um?a(null,_,d,O.payload,O.meta):a(O,_,d)}finally{N&&C.signal.removeEventListener("abort",N)}return r&&!r.dispatchConditionRejection&&a.match(I)&&I.meta.condition||x(I),I}();return Object.assign(A,{abort:E,requestId:_,arg:d,unwrap(){return A.then(iI)}})}}return Object.assign(u,{pending:i,rejected:a,fulfilled:s,settled:eI(a,s),typePrefix:e})}return t.withTypes=()=>t,t})();function iI(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function oI(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var aI=Symbol.for("rtk-slice-createasyncthunk");function lI(t,e){return`${t}/${e}`}function cI({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[aI];return function(s){const{name:i,reducerPath:a=i}=s;if(!i)throw new Error(ii(11));const u=(typeof s.reducers=="function"?s.reducers(dI()):s.reducers)||{},d=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},x={addCase(I,j){const F=typeof I=="string"?I:I.type;if(!F)throw new Error(ii(12));if(F in h.sliceCaseReducersByType)throw new Error(ii(13));return h.sliceCaseReducersByType[F]=j,x},addMatcher(I,j){return h.sliceMatchers.push({matcher:I,reducer:j}),x},exposeAction(I,j){return h.actionCreators[I]=j,x},exposeCaseReducer(I,j){return h.sliceCaseReducersByName[I]=j,x}};d.forEach(I=>{const j=u[I],F={reducerName:I,type:lI(i,I),createNotation:typeof s.reducers=="function"};fI(j)?gI(F,j,x,e):hI(F,j,x)});function y(){const[I={},j=[],F=void 0]=typeof s.extraReducers=="function"?AE(s.extraReducers):[s.extraReducers],z={...I,...h.sliceCaseReducersByType};return Q6(s.initialState,O=>{for(let R in z)O.addCase(R,z[R]);for(let R of h.sliceMatchers)O.addMatcher(R.matcher,R.reducer);for(let R of j)O.addMatcher(R.matcher,R.reducer);F&&O.addDefaultCase(F)})}const b=I=>I,_=new Map;let C;function N(I,j){return C||(C=y()),C(I,j)}function k(){return C||(C=y()),C.getInitialState()}function E(I,j=!1){function F(O){let R=O[I];return typeof R>"u"&&j&&(R=k()),R}function z(O=b){const R=m2(_,j,()=>new WeakMap);return m2(R,O,()=>{const M={};for(const[U,X]of Object.entries(s.selectors??{}))M[U]=uI(X,O,k,j);return M})}return{reducerPath:I,getSelectors:z,get selectors(){return z(F)},selectSlice:F}}const A={name:i,reducer:N,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:k,...E(a),injectInto(I,{reducerPath:j,...F}={}){const z=j??a;return I.inject({reducerPath:z,reducer:N},F),{...A,...E(z,!0)}}};return A}}function uI(t,e,n,r){function s(i,...a){let u=e(i);return typeof u>"u"&&r&&(u=n()),t(u,...a)}return s.unwrapped=t,s}var Wu=cI();function dI(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function hI({type:t,reducerName:e,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!mI(r))throw new Error(ii(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,a?Bc(t,a):Bc(t))}function fI(t){return t._reducerDefinitionType==="asyncThunk"}function mI(t){return t._reducerDefinitionType==="reducerWithPrepare"}function gI({type:t,reducerName:e},n,r,s){if(!s)throw new Error(ii(18));const{payloadCreator:i,fulfilled:a,pending:u,rejected:d,settled:h,options:x}=n,y=s(t,i,x);r.exposeAction(e,y),a&&r.addCase(y.fulfilled,a),u&&r.addCase(y.pending,u),d&&r.addCase(y.rejected,d),h&&r.addMatcher(y.settled,h),r.exposeCaseReducer(e,{fulfilled:a||kd,pending:u||kd,rejected:d||kd,settled:h||kd})}function kd(){}function ii(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const pI="modulepreload",xI=function(t){return"/"+t},y2={},dl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=xI(d),d in y2)return;y2[d]=!0;const h=d.endsWith(".css"),x=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${x}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":pI,h||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((b,_)=>{y.addEventListener("load",b),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return s.then(a=>{for(const u of a||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})},yI=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>dl(async()=>{const{default:r}=await Promise.resolve().then(()=>kl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Qp extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class wI extends Qp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bI extends Qp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vI extends Qp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var r1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(r1||(r1={}));var _I=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};class SI{constructor(e,{headers:n={},customFetch:r,region:s=r1.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=yI(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return _I(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let u={},{region:d}=n;d||(d=this.region),d&&d!=="any"&&(u["x-region"]=d);let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(u["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(u["Content-Type"]="application/json",h=JSON.stringify(a)));const x=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h}).catch(C=>{throw new wI(C)}),y=x.headers.get("x-relay-error");if(y&&y==="true")throw new bI(x);if(!x.ok)throw new vI(x);let b=((r=x.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield x.json():b==="application/octet-stream"?_=yield x.blob():b==="text/event-stream"?_=x:b==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null}}catch(s){return{data:null,error:s}}})}}var _r={},Jp={},Jf={},Hu={},e0={},t0={},EI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hl=EI();const CI=hl.fetch,kE=hl.fetch.bind(hl),NE=hl.Headers,AI=hl.Request,kI=hl.Response,kl=Object.freeze(Object.defineProperty({__proto__:null,Headers:NE,Request:AI,Response:kI,default:kE,fetch:CI},Symbol.toStringTag,{value:"Module"})),NI=HA(kl);var n0={};Object.defineProperty(n0,"__esModule",{value:!0});let TI=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};n0.default=TI;var TE=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t0,"__esModule",{value:!0});const II=TE(NI),RI=TE(n0);let PI=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=II.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,u,d;let h=null,x=null,y=null,b=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const E=await i.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=E:x=JSON.parse(E))}const N=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),k=(u=i.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");N&&k&&k.length>1&&(y=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(h={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,y=null,b=406,_="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const N=await i.text();try{h=JSON.parse(N),Array.isArray(h)&&i.status===404&&(x=[],h=null,b=200,_="OK")}catch{i.status===404&&N===""?(b=204,_="No Content"):h={message:N}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,b=200,_="OK"),h&&this.shouldThrowOnError)throw new RI.default(h)}return{error:h,data:x,count:y,status:b,statusText:_}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,u,d;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(u=i==null?void 0:i.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};t0.default=PI;var OI=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e0,"__esModule",{value:!0});const MI=OI(t0);let jI=class extends MI.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${h}"; options=${d};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};e0.default=jI;var DI=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hu,"__esModule",{value:!0});const LI=DI(e0);let FI=class extends LI.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Hu.default=FI;var BI=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jf,"__esModule",{value:!0});const nc=BI(Hu);let UI=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new nc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(a.length>0){const u=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new nc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",u=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&u.push(this.headers.Prefer),s&&u.push(`count=${s}`),i||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(e)){const d=e.reduce((h,x)=>h.concat(Object.keys(x)),[]);if(d.length>0){const h=[...new Set(d)].map(x=>`"${x}"`);this.url.searchParams.set("columns",h.join(","))}}return new nc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new nc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new nc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Jf.default=UI;var r0={},s0={};Object.defineProperty(s0,"__esModule",{value:!0});s0.version=void 0;s0.version="0.0.0-automated";Object.defineProperty(r0,"__esModule",{value:!0});r0.DEFAULT_HEADERS=void 0;const VI=s0;r0.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${VI.version}`};var IE=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jp,"__esModule",{value:!0});const zI=IE(Jf),WI=IE(Hu),HI=r0;let $I=class RE{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},HI.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new zI.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new RE(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const u=new URL(`${this.url}/rpc/${e}`);let d;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([x,y])=>y!==void 0).map(([x,y])=>[x,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([x,y])=>{u.searchParams.append(x,y)})):(a="POST",d=n);const h=Object.assign({},this.headers);return i&&(h.Prefer=`count=${i}`),new WI.default({method:a,url:u,headers:h,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Jp.default=$I;var Nl=Vn&&Vn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_r,"__esModule",{value:!0});_r.PostgrestError=_r.PostgrestBuilder=_r.PostgrestTransformBuilder=_r.PostgrestFilterBuilder=_r.PostgrestQueryBuilder=_r.PostgrestClient=void 0;const PE=Nl(Jp);_r.PostgrestClient=PE.default;const OE=Nl(Jf);_r.PostgrestQueryBuilder=OE.default;const ME=Nl(Hu);_r.PostgrestFilterBuilder=ME.default;const jE=Nl(e0);_r.PostgrestTransformBuilder=jE.default;const DE=Nl(t0);_r.PostgrestBuilder=DE.default;const LE=Nl(n0);_r.PostgrestError=LE.default;var GI=_r.default={PostgrestClient:PE.default,PostgrestQueryBuilder:OE.default,PostgrestFilterBuilder:ME.default,PostgrestTransformBuilder:jE.default,PostgrestBuilder:DE.default,PostgrestError:LE.default};const{PostgrestClient:qI,PostgrestQueryBuilder:b$,PostgrestFilterBuilder:v$,PostgrestTransformBuilder:_$,PostgrestBuilder:S$,PostgrestError:E$}=GI,YI="2.11.2",XI={"X-Client-Info":`realtime-js/${YI}`},KI="1.0.0",FE=1e4,ZI=1e3;var Qa;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Qa||(Qa={}));var Rr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Rr||(Rr={}));var ps;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ps||(ps={}));var s1;(function(t){t.websocket="websocket"})(s1||(s1={}));var Mo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Mo||(Mo={}));class QI{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(e.slice(a,a+s));a=a+s;const d=r.decode(e.slice(a,a+i));a=a+i;const h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:u,event:d,payload:h}}}class BE{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Vt||(Vt={}));const w2=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=JI(a,t,e,s),i),{})},JI=(t,e,n,r)=>{const s=e.find(u=>u.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?UE(i,a):i1(a)},UE=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return rR(e,n)}switch(t){case Vt.bool:return eR(e);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return tR(e);case Vt.json:case Vt.jsonb:return nR(e);case Vt.timestamp:return sR(e);case Vt.abstime:case Vt.date:case Vt.daterange:case Vt.int4range:case Vt.int8range:case Vt.money:case Vt.reltime:case Vt.text:case Vt.time:case Vt.timestamptz:case Vt.timetz:case Vt.tsrange:case Vt.tstzrange:return i1(e);default:return i1(e)}},i1=t=>t,eR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tR=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},nR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rR=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(u=>UE(e,u))}return t},sR=t=>typeof t=="string"?t.replace(" ","T"):t,VE=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dm{constructor(e,n,r={},s=FE){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var b2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(b2||(b2={}));class Uc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uc.syncState(this.state,s,i,a),this.pendingDiffs.forEach(d=>{this.state=Uc.syncDiff(this.state,d,i,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Uc.syncDiff(this.state,s,i,a),u())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),u={},d={};return this.map(i,(h,x)=>{a[h]||(d[h]=x)}),this.map(a,(h,x)=>{const y=i[h];if(y){const b=x.map(k=>k.presence_ref),_=y.map(k=>k.presence_ref),C=x.filter(k=>_.indexOf(k.presence_ref)<0),N=y.filter(k=>b.indexOf(k.presence_ref)<0);C.length>0&&(u[h]=C),N.length>0&&(d[h]=N)}else u[h]=x}),this.syncDiff(i,{joins:u,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var h;const x=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(d),x.length>0){const y=e[u].map(_=>_.presence_ref),b=x.filter(_=>y.indexOf(_.presence_ref)<0);e[u].unshift(...b)}r(u,x,d)}),this.map(a,(u,d)=>{let h=e[u];if(!h)return;const x=d.map(y=>y.presence_ref);h=h.filter(y=>x.indexOf(y.presence_ref)<0),e[u]=h,s(u,h,d),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var v2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(v2||(v2={}));var _2;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_2||(_2={}));var Zs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zs||(Zs={}));class ex{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dm(this,ps.join,this.params,this.timeout),this.rejoinTimer=new BE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ps.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Uc(this),this.broadcastEndpointURL=VE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:u}}=this.params;this._onError(x=>e==null?void 0:e(Zs.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(Zs.CLOSED));const d={},h={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket.setAuth(),x===void 0){e==null||e(Zs.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,_=(y=b==null?void 0:b.length)!==null&&y!==void 0?y:0,C=[];for(let N=0;N<_;N++){const k=b[N],{filter:{event:E,schema:A,table:I,filter:j}}=k,F=x&&x[N];if(F&&F.event===E&&F.schema===A&&F.table===I&&F.filter===j)C.push(Object.assign(Object.assign({},k),{id:F.id}));else{this.unsubscribe(),e==null||e(Zs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Zs.SUBSCRIBED);return}}).receive("error",x=>{e==null||e(Zs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Zs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,u,d;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ps.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new dm(this,ps.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dm(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:u,error:d,leave:h,join:x}=ps;if(r&&[u,d,h,x].indexOf(a)>=0&&r!==this._joinRef())return;let b=this._onMessage(a,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var C,N,k;return((C=_.filter)===null||C===void 0?void 0:C.event)==="*"||((k=(N=_.filter)===null||N===void 0?void 0:N.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(_=>_.callback(b,r)):(i=this.bindings[a])===null||i===void 0||i.filter(_=>{var C,N,k,E,A,I;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in _){const j=_.id,F=(C=_.filter)===null||C===void 0?void 0:C.event;return j&&((N=n.ids)===null||N===void 0?void 0:N.includes(j))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const j=(A=(E=_==null?void 0:_.filter)===null||E===void 0?void 0:E.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return j==="*"||j===((I=n==null?void 0:n.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===a}).map(_=>{if(typeof b=="object"&&"ids"in b){const C=b.data,{schema:N,table:k,commit_timestamp:E,type:A,errors:I}=C;b=Object.assign(Object.assign({},{schema:N,table:k,commit_timestamp:E,eventType:A,new:{},old:{},errors:I}),this._getPayloadRecords(C))}_.callback(b,r)})}_isClosed(){return this.state===Rr.closed}_isJoined(){return this.state===Rr.joined}_isJoining(){return this.state===Rr.joining}_isLeaving(){return this.state===Rr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ex.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ps.close,{},e)}_onError(e){this._on(ps.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=w2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=w2(e.columns,e.old_record)),n}}const iR=()=>{},oR=typeof WebSocket<"u",aR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lR{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=XI,this.params={},this.timeout=FE,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=iR,this.conn=null,this.sendBuffer=[],this.serializer=new QI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...u)=>dl(async()=>{const{default:d}=await Promise.resolve().then(()=>kl);return{default:d}},void 0).then(({default:d})=>d(...u)):a=fetch,(...u)=>a(...u)},this.endPoint=`${e}/${s1.websocket}`,this.httpEndpoint=VE(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,a)=>a(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new BE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(oR){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new cR(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),dl(async()=>{const{default:e}=await import("./browser-Cis99a-3.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:KI}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qa.connecting:return Mo.Connecting;case Qa.open:return Mo.Open;case Qa.closing:return Mo.Closing;default:return Mo.Closed}}isConnected(){return this.connectionState()===Mo.Open}channel(e,n={config:{}}){const r=new ex(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(ps.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ZI,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:a}=n;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(u=>u(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ps.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([aR],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class cR{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qa.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class tx extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Bn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class uR extends tx{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class o1 extends tx{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var dR=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const zE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>dl(async()=>{const{default:r}=await Promise.resolve().then(()=>kl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},hR=()=>dR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dl(()=>Promise.resolve().then(()=>kl),void 0)).Response:Response}),a1=t=>{if(Array.isArray(t))return t.map(n=>a1(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=a1(r)}),e};var sa=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const hm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fR=(t,e,n)=>sa(void 0,void 0,void 0,function*(){const r=yield hR();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new uR(hm(s),t.status||500))}).catch(s=>{e(new o1(hm(s),s))}):e(new o1(hm(t),t))}),mR=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function $u(t,e,n,r,s,i){return sa(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,mR(e,r,s,i)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>fR(d,u,r))})})}function rf(t,e,n,r){return sa(this,void 0,void 0,function*(){return $u(t,"GET",e,n,r)})}function ji(t,e,n,r,s){return sa(this,void 0,void 0,function*(){return $u(t,"POST",e,r,s,n)})}function gR(t,e,n,r,s){return sa(this,void 0,void 0,function*(){return $u(t,"PUT",e,r,s,n)})}function pR(t,e,n,r){return sa(this,void 0,void 0,function*(){return $u(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function WE(t,e,n,r,s){return sa(this,void 0,void 0,function*(){return $u(t,"DELETE",e,r,s,n)})}var yr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const xR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},S2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yR{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=zE(s)}uploadOrUpdate(e,n,r,s){return yr(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},S2),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(n),x=this._getFinalPath(h),y=yield this.fetch(`${this.url}/object/${x}`,Object.assign({method:e,body:i,headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{})),b=yield y.json();return y.ok?{data:{path:h,id:b.Id,fullPath:b.Key},error:null}:{data:null,error:b}}catch(i){if(Bn(i))return{data:null,error:i};throw i}})}upload(e,n,r){return yr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return yr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let d;const h=Object.assign({upsert:S2.upsert},s),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,x["cache-control"]=`max-age=${h.cacheControl}`,x["content-type"]=h.contentType);const y=yield this.fetch(u.toString(),{method:"PUT",body:d,headers:x}),b=yield y.json();return y.ok?{data:{path:i,fullPath:b.Key},error:null}:{data:null,error:b}}catch(d){if(Bn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return yr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield ji(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),u=a.searchParams.get("token");if(!u)throw new tx("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:u},error:null}}catch(r){if(Bn(r))return{data:null,error:r};throw r}})}update(e,n,r){return yr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return yr(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}copy(e,n,r){return yr(this,void 0,void 0,function*(){try{return{data:{path:(yield ji(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return yr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ji(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return yr(this,void 0,void 0,function*(){try{const s=yield ji(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}download(e,n){return yr(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield rf(this.fetch,`${this.url}/${s}/${u}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Bn(u))return{data:null,error:u};throw u}})}info(e){return yr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield rf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:a1(r),error:null}}catch(r){if(Bn(r))return{data:null,error:r};throw r}})}exists(e){return yr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pR(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Bn(r)&&r instanceof o1){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&s.push(d);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return yr(this,void 0,void 0,function*(){try{return{data:yield WE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Bn(n))return{data:null,error:n};throw n}})}list(e,n,r){return yr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},xR),n),{prefix:e||""});return{data:yield ji(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Bn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const wR="2.7.1",bR={"X-Client-Info":`storage-js/${wR}`};var ba=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};class vR{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},bR),n),this.fetch=zE(r)}listBuckets(){return ba(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Bn(e))return{data:null,error:e};throw e}})}getBucket(e){return ba(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Bn(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ba(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bn(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return ba(this,void 0,void 0,function*(){try{return{data:yield gR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ba(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Bn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ba(this,void 0,void 0,function*(){try{return{data:yield WE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Bn(n))return{data:null,error:n};throw n}})}}class _R extends vR{constructor(e,n={},r){super(e,n,r)}from(e){return new yR(this.url,this.headers,e,this.fetch)}}const SR="2.49.4";let _c="";typeof Deno<"u"?_c="deno":typeof document<"u"?_c="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_c="react-native":_c="node";const ER={"X-Client-Info":`supabase-js-${_c}/${SR}`},CR={headers:ER},AR={schema:"public"},kR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},NR={};var TR=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};const IR=t=>{let e;return t?e=t:typeof fetch>"u"?e=kE:e=fetch,(...n)=>e(...n)},RR=()=>typeof Headers>"u"?NE:Headers,PR=(t,e,n)=>{const r=IR(n),s=RR();return(i,a)=>TR(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:t;let h=new s(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},a),{headers:h}))})};var OR=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};function MR(t){return t.replace(/\/$/,"")}function jR(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:a,auth:u,realtime:d,global:h}=e,x={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},h),i),accessToken:()=>OR(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const HE="2.69.1",Aa=30*1e3,l1=3,fm=l1*Aa,DR="http://localhost:9999",LR="supabase.auth.token",FR={"X-Client-Info":`gotrue-js/${HE}`},c1="X-Supabase-Api-Version",$E={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,UR=6e5;class nx extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function rt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class VR extends nx{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function zR(t){return rt(t)&&t.name==="AuthApiError"}class GE extends nx{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ho extends nx{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ti extends ho{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function WR(t){return rt(t)&&t.name==="AuthSessionMissingError"}class mm extends ho{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nd extends ho{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Td extends ho{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function HR(t){return rt(t)&&t.name==="AuthImplicitGrantRedirectError"}class E2 extends ho{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class u1 extends ho{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function gm(t){return rt(t)&&t.name==="AuthRetryableFetchError"}class C2 extends ho{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Vc extends ho{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const A2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),k2=` 	
\r=`.split(""),$R=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<k2.length;e+=1)t[k2[e].charCodeAt(0)]=-2;for(let e=0;e<A2.length;e+=1)t[A2[e].charCodeAt(0)]=e;return t})();function qE(t,e,n){const r=$R[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function N2(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{YR(a,r,n)};for(let a=0;a<t.length;a+=1)qE(t.charCodeAt(a),s,i);return e.join("")}function GR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qR(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}GR(r,e)}}function YR(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function XR(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)qE(t.charCodeAt(s),n,r);return new Uint8Array(e)}function KR(t){const e=[];return qR(t,n=>e.push(n)),new Uint8Array(e)}function ZR(t){return Math.round(Date.now()/1e3)+t}function QR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ts=()=>typeof window<"u"&&typeof document<"u",yo={tested:!1,writable:!1},zc=()=>{if(!Ts())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yo.tested)return yo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yo.tested=!0,yo.writable=!0}catch{yo.tested=!0,yo.writable=!1}return yo.writable};function JR(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const YE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>dl(async()=>{const{default:r}=await Promise.resolve().then(()=>kl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},eP=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",XE=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Id=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Rd=async(t,e)=>{await t.removeItem(e)};class i0{constructor(){this.promise=new i0.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}i0.promiseConstructor=Promise;function pm(t){const e=t.split(".");if(e.length!==3)throw new Vc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BR.test(e[r]))throw new Vc("JWT not in base64url format");return{header:JSON.parse(N2(e[0])),payload:JSON.parse(N2(e[1])),signature:XR(e[2]),raw:{header:e[0],payload:e[1]}}}async function tP(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function nP(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function rP(t){return("0"+t.toString(16)).substr(-2)}function sP(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,rP).join("")}async function iP(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function oP(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await iP(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function va(t,e,n=!1){const r=sP();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await XE(t,`${e}-code-verifier`,s);const i=await oP(r);return[i,r===i?"plain":"s256"]}const aP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lP(t){const e=t.headers.get(c1);if(!e||!e.match(aP))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cP(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function uP(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var dP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const ko=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hP=[502,503,504];async function T2(t){var e;if(!eP(t))throw new u1(ko(t),0);if(hP.includes(t.status))throw new u1(ko(t),t.status);let n;try{n=await t.json()}catch(i){throw new GE(ko(i),i)}let r;const s=lP(t);if(s&&s.getTime()>=$E["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new C2(ko(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ti}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new C2(ko(n),t.status,n.weak_password.reasons);throw new VR(ko(n),t.status||500,r)}const fP=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ht(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[c1]||(i[c1]=$E["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await mP(t,e,n+u,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function mP(t,e,n,r,s,i){const a=fP(e,r,s,i);let u;try{u=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new u1(ko(d),0)}if(u.ok||await T2(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await T2(d)}}function Ii(t){var e;let n=null;yP(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=ZR(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function I2(t){const e=Ii(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Fi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gP(t){return{data:t,error:null}}function pP(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=dP(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},d=Object.assign({},a);return{data:{properties:u,user:d},error:null}}function xP(t){return t}function yP(t){return t.access_token&&t.refresh_token&&t.expires_in}var wP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class bP{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=YE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Fi})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wP(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:pP,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(rt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fi})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,u,d;try{const h={nextPage:null,lastPage:0,total:0},x=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:xP});if(x.error)throw x.error;const y=await x.json(),b=(a=x.headers.get("x-total-count"))!==null&&a!==void 0?a:0,_=(d=(u=x.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(C=>{const N=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(C.split(";")[1].split("=")[1]);h[`${k}Page`]=N}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},y),h),error:null}}catch(h){if(rt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fi})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Fi})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Fi})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await ht(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}}const vP={getItem:t=>zc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{zc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{zc()&&globalThis.localStorage.removeItem(t)}};function R2(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function _P(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _a={debug:!!(globalThis&&zc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class SP extends KE{}async function EP(t,e,n){_a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),_a.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){_a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{_a.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw _a.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new SP(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(_a.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}_P();const CP={url:DR,storageKey:LR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:FR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function P2(t,e,n){return await n()}class vu{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vu.nextInstanceID,vu.nextInstanceID+=1,this.instanceID>0&&Ts()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},CP),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bP({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=YE(s.fetch),this.lock=s.lock||P2,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ts()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=EP:this.lock=P2,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:zc()?this.storage=vP:(this.memoryStorage={},this.storage=R2(this.memoryStorage)):(this.memoryStorage={},this.storage=R2(this.memoryStorage)),Ts()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${HE}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=JR(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ts()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),HR(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return rt(n)?{error:n}:{error:new GE("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ii}),{data:a,error:u}=i;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:x,password:y,options:b}=e;let _=null,C=null;this.flowType==="pkce"&&([_,C]=await va(this.storage,this.storageKey)),i=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:x,password:y,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:_,code_challenge_method:C},xform:Ii})}else if("phone"in e){const{phone:x,password:y,options:b}=e;i=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:y,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(s=b==null?void 0:b.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Ii})}else throw new Nd("You must provide either an email or phone number and a password");const{data:a,error:u}=i;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:u}=e;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:I2})}else if("phone"in e){const{phone:i,password:a,options:u}=e;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:I2})}else throw new Nd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new mm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Id(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ii});if(await Rd(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new mm}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(rt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,u=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ii}),{data:d,error:h}=u;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new mm}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:u,options:d}=e;let h=null,x=null;this.flowType==="pkce"&&([h,x]=await va(this.storage,this.storageKey));const{error:y}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:x},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:u,options:d}=e,{data:h,error:x}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:x}}throw new Nd("You must provide either an email or phone number.")}catch(u){if(rt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ii});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,h=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await va(this.storage,this.storageKey)),await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:gP})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ti;const{error:s}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(rt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:u}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u}}throw new Nd("You must provide either an email or phone number and a type")}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Id(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,h,x)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,x))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fi}):await this._useSession(async n=>{var r,s,i;const{data:a,error:u}=n;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ti}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Fi})})}catch(n){if(rt(n))return WR(n)&&(await this._removeSession(),await Rd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ti;const a=s.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await va(this.storage,this.storageKey));const{data:h,error:x}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:a.access_token,xform:Fi});if(x)throw x;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ti;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=pm(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(rt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:u}=n;if(u)throw u;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ti;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ts())throw new Td("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Td(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new E2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Td("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new E2("No code detected.");const{data:A,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:u,expires_at:d,token_type:h}=e;if(!i||!u||!a||!h)throw new Td("No session defined in URL");const x=Math.round(Date.now()/1e3),y=parseInt(u);let b=x+y;d&&(b=parseInt(d));const _=b-x;_*1e3<=Aa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${y}s`);const C=b-y;x-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,b,x):x-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,b,x);const{data:N,error:k}=await this._getUser(i);if(k)throw k;const E={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:y,expires_at:b,refresh_token:a,token_type:h,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(rt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Id(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(zR(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Rd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=QR(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await va(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,u,d,h,x;const{data:y,error:b}=i;if(b)throw b;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",_,{headers:this.headers,jwt:(x=(h=y.session)===null||h===void 0?void 0:h.access_token)!==null&&x!==void 0?x:void 0})});if(s)throw s;return Ts()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(rt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await nP(async s=>(s>0&&await tP(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ii})),(s,i)=>{const a=200*Math.pow(2,s);return i&&gm(i)&&Date.now()+a-r<Aa})}catch(r){if(this._debug(n,"error",r),rt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ts()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Id(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<fm;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${fm}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),gm(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ti;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new i0;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ti;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={session:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),rt(i)){const a={session:null,error:i};return gm(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){i.push(d)}});if(await Promise.all(a),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await XE(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Rd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ts()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Aa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Aa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Aa}ms, refresh threshold is ${l1} ticks`),s<=l1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof KE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ts()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await va(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ht(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:h}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:u}=await ht(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:u})})}catch(n){if(rt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await ht(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(rt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=pm(s.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const x=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r||(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+UR>Date.now()))return r;const{data:s,error:i}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Vc("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(a=>a.kid===e),!r)throw new Vc("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:_,error:C}=await this.getSession();if(C||!_.session)return{data:null,error:C};r=_.session.access_token}const{header:s,payload:i,signature:a,raw:{header:u,payload:d}}=pm(r);if(cP(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:i,header:s,signature:a},error:null}}const h=uP(s.alg),x=await this.fetchJwk(s.kid,n),y=await crypto.subtle.importKey("jwk",x,h,!0,["verify"]);if(!await crypto.subtle.verify(h,y,a,KR(`${u}.${d}`)))throw new Vc("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}}vu.nextInstanceID=0;const AP=vu;class kP extends AP{constructor(e){super(e)}}var NP=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})};class TP{constructor(e,n,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=MR(e);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:AR,realtime:NR,auth:Object.assign(Object.assign({},kR),{storageKey:d}),global:CR},x=jR(r??{},h);this.storageKey=(s=x.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=x.global.headers)!==null&&i!==void 0?i:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=x.auth)!==null&&a!==void 0?a:{},this.headers,x.global.fetch),this.fetch=PR(n,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new qI(`${u}/rest/v1`,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),x.accessToken||this._listenForAuthEvents()}get functions(){return new SI(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _R(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return NP(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:u,debug:d},h,x){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kP({url:this.authUrl,headers:Object.assign(Object.assign({},y),h),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:u,debug:d,fetch:x,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new lR(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const IP=(t,e,n)=>new TP(t,e,n),RP="https://pgmdsotwmkjrrdzhxipt.supabase.co",PP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbWRzb3R3bWtqcnJkemh4aXB0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMxNTYxOTQsImV4cCI6MjA1ODczMjE5NH0.ix6zHhmLccfczQzcuILylqURATGuU6O2usFuwEWumf8",we=IP(RP,PP,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});we.auth.onAuthStateChange((t,e)=>{if(console.log("[Supabase] Auth event:",t),t==="SIGNED_IN"){console.log("[Supabase] User signed in"),sessionStorage.getItem("isSocialLogin")==="true"&&console.log("[Supabase] Social login detected in auth state change");const n=localStorage.getItem("verification_email");sessionStorage.getItem("verification_email_pending"),n&&(t==="SIGNED_IN"||t==="USER_UPDATED")&&(console.log("[Supabase] Email verification flow detected"),sessionStorage.setItem("showing_verification_success","true"))}else t==="SIGNED_OUT"&&(console.log("[Supabase] User signed out"),sessionStorage.removeItem("isSocialLogin"),sessionStorage.removeItem("authProvider"))});console.log("[Supabase Config] URL is configured:",!0);console.log("[Supabase Config] Anon key is configured:",!0);console.log("[Supabase Config] Email sender is configured:",!1);const OP={items:[],categories:[],locations:[],loading:!1,error:null},o0=an("inventory/fetchCategories",async()=>{const{data:t,error:e}=await we.from("products").select("category").not("category","is",null).not("id","like","GHOST-%").not("name","like","[DELETED]%").not("sku","like","DELETED-%");if(e)throw e;return[...new Set(t.map(r=>r.category))].sort()}),a0=an("inventory/fetchLocations",async()=>{const{data:t,error:e}=await we.from("products").select("location").not("location","is",null).not("id","like","GHOST-%").not("name","like","[DELETED]%").not("sku","like","DELETED-%");if(e)throw e;return[...new Set(t.map(r=>r.location))].sort()}),ns=an("inventory/fetchProducts",async()=>{const{data:t,error:e}=await we.from("products").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}),sf=an("inventory/updateProduct",async t=>{const{id:e,...n}=t,{adjustment_reason:r,...s}=n,{data:i,error:a}=await we.from("products").select("*").eq("id",e).single();if(a)throw a;if(!i)throw new Error("Product not found");if(i.is_serialized&&n.stock!==void 0){const{data:h,error:x}=await we.from("serial_numbers").select("id").eq("product_id",e).eq("status","available");if(x)throw x;const y=(h==null?void 0:h.length)||0;if(n.stock<y)throw new Error(`Cannot reduce stock below ${y} (number of available serial numbers)`);if(n.stock>y)throw new Error("Please use the Serial Number Manager to add new serial numbers")}const{data:u,error:d}=await we.from("products").update(s).eq("id",e).select().single();if(d)throw d;if(n.stock!==void 0&&n.stock!==i.stock){const h=n.stock>i.stock?"in":"out",x=Math.abs(n.stock-i.stock),{data:y,error:b}=await we.from("stock_adjustments").select("id").order("id",{ascending:!1}).limit(1);if(b)throw new Error(`Failed to fetch last adjustment: ${b.message}`);let _=1001;if(y&&y.length>0){const N=y[0].id,k=parseInt(N.split("-")[1]);_=isNaN(k)?1001:k+1}const{error:C}=await we.from("stock_adjustments").insert({id:`ADJ-${_}`,product_id:e,quantity:x,adjustment_type:h,reason:r||"Manual stock update",previous_quantity:i.stock,new_quantity:n.stock});if(C)throw await we.from("products").update({stock:i.stock}).eq("id",e),new Error(`Failed to create stock adjustment: ${C.message}`)}return u}),ZE=an("inventory/deleteProduct",async t=>{var e;try{const{data:n,error:r}=await we.from("order_items").select("id, order_id, product_name, product_sku").eq("product_id",t);if(r)throw console.error("Error fetching order items:",r),new Error("Failed to check if product is referenced in orders");if(n&&n.length>0){const{data:a,error:u}=await we.from("products").select("name, description, sku, category").eq("id",t).single();if(u)throw console.error("Error fetching product details:",u),new Error("Failed to fetch product details");const d=Date.now(),h=`GHOST-${t}-${d}`,x=`DELETED-${d}-${((e=a.sku)==null?void 0:e.substring(0,10))||"SKU"}`,{error:y}=await we.from("products").insert({id:h,name:`[DELETED] ${a.name||"Unknown Product"}`,description:`This product was deleted on ${new Date().toLocaleString()}. Preserved for order history.`,sku:x,category:a.category||"Deleted Products",location:"Archive",stock:0,reorder_level:0,cost_price:0,selling_price:0});if(y)throw console.error("Error creating ghost product:",y),new Error("Failed to create reference for order history");for(const b of n){const{error:_}=await we.from("order_items").update({product_id:h}).eq("id",b.id);if(_)throw console.error("Error updating order item:",_),new Error("Failed to update order references")}}const{error:s}=await we.from("stock_adjustments").delete().eq("product_id",t);s&&console.error("Error deleting stock adjustments:",s);const{error:i}=await we.from("products").delete().eq("id",t);if(i)throw console.error("Error deleting product:",i),i;return t}catch(n){throw console.error("Delete product error:",n),n}}),rx=an("inventory/createProduct",async t=>{const{error:e}=await we.from("products").select("cost_price").limit(0);if(e)throw console.error("Schema error:",e),new Error("Failed to validate schema. Please try again.");const{data:n,error:r}=await we.from("products").select("id").order("id",{ascending:!1}).limit(1);if(r)throw r;let s=1001;if(n&&n.length>0){const d=n[0].id,h=parseInt(d.split("-")[1]);s=isNaN(h)?1001:h+1}const i={id:`PRD-${s}`,name:t.name,description:t.description,sku:t.sku,category:t.category,stock:t.stock,cost_price:t.cost_price,selling_price:t.selling_price,location:t.location,reorder_level:t.reorder_level||0,is_serialized:t.is_serialized||!1},{data:a,error:u}=await we.from("products").insert([i]).select().single();if(u)throw u;return a}),QE=an("inventory/addCategory",async(t,{getState:e})=>{const n=e();return n.inventory.categories.includes(t)?n.inventory.categories:[...n.inventory.categories,t].sort()}),JE=an("inventory/addLocation",async(t,{getState:e})=>{const n=e();return n.inventory.locations.includes(t)?n.inventory.locations:[...n.inventory.locations,t].sort()}),MP=an("inventory/clearAllProducts",async()=>{const{error:t}=await we.from("stock_adjustments").delete().neq("id","");t&&console.error("Error deleting stock adjustments:",t);const{error:e}=await we.from("products").delete().neq("id","");if(e)throw e;return[]}),sx=an("inventory/clearAllInventory",async()=>{var t;try{const{data:e,error:n}=await we.from("order_items").select("product_id").not("product_id","is",null);if(n)throw console.error("Error checking order products:",n),n;const r=new Set((e==null?void 0:e.map(a=>a.product_id))||[]);console.log(`Found ${r.size} products referenced in orders`);for(const a of r){const{data:u,error:d}=await we.from("products").select("name, description, sku, category").eq("id",a).single();if(d){console.error(`Error fetching product ${a}:`,d);continue}const h=Date.now(),x=`GHOST-${a}-${h}`,y=`DELETED-${h}-${((t=u.sku)==null?void 0:t.substring(0,10))||"SKU"}`,{error:b}=await we.from("products").insert({id:x,name:`[DELETED] ${u.name||"Unknown Product"}`,description:`This product was deleted in bulk on ${new Date().toLocaleString()}. Preserved for order history.`,sku:y,category:u.category||"Deleted Products",location:"Archive",stock:0,reorder_level:0,cost_price:0,selling_price:0});if(b){console.error("Error creating ghost product:",b);continue}const{error:_}=await we.from("order_items").update({product_id:x}).eq("product_id",a);_&&console.error("Error updating order items for product:",_)}const{error:s}=await we.from("stock_adjustments").delete().neq("id","");s&&console.error("Error deleting stock adjustments:",s);const{error:i}=await we.from("products").delete().not("id","like","GHOST-%");if(i)throw console.error("Error deleting products:",i),i;return!0}catch(e){throw console.error("Clear all inventory error:",e),e}}),xm=an("inventory/updateProductIcon",async({productId:t,iconUrl:e,iconType:n})=>{const{error:r}=await we.from("products").update({custom_icon:e,custom_icon_type:n}).eq("id",t);if(r)throw r;return{productId:t,iconUrl:e,iconType:n}}),eC=Wu({name:"inventory",initialState:OP,reducers:{setProducts:(t,e)=>{t.items=e.payload},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload},updateAllProductIcons:(t,e)=>{t.items=t.items.map(n=>({...n,custom_icon:e.payload.iconUrl,custom_icon_type:e.payload.iconType}))}},extraReducers:t=>{t.addCase(o0.fulfilled,(e,n)=>{e.categories=n.payload}).addCase(QE.fulfilled,(e,n)=>{e.categories=n.payload}).addCase(a0.fulfilled,(e,n)=>{e.locations=n.payload}).addCase(JE.fulfilled,(e,n)=>{e.locations=n.payload}).addCase(ns.pending,e=>{e.loading=!0,e.error=null}).addCase(ns.fulfilled,(e,n)=>{e.loading=!1,e.items=n.payload}).addCase(ns.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to fetch products"}).addCase(rx.fulfilled,(e,n)=>{e.items.push(n.payload)}).addCase(sf.fulfilled,(e,n)=>{const r=e.items.findIndex(s=>s.id===n.payload.id);r!==-1&&(e.items[r]=n.payload)}).addCase(ZE.fulfilled,(e,n)=>{e.items=e.items.filter(r=>r.id!==n.payload)}).addCase(MP.fulfilled,e=>{e.items=[],e.categories=[],e.locations=[]}).addCase(sx.fulfilled,e=>{e.items=[],e.categories=[],e.locations=[]}).addCase(xm.pending,e=>{e.loading=!0,e.error=null}).addCase(xm.fulfilled,(e,n)=>{e.loading=!1;const r=e.items.find(s=>s.id===n.payload.productId);r&&(r.custom_icon=n.payload.iconUrl,r.custom_icon_type=n.payload.iconType)}).addCase(xm.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to update product icon"})}}),{setProducts:C$,setLoading:A$,setError:k$,updateAllProductIcons:N$}=eC.actions,jP=eC.reducer,DP={items:[],loading:!1,error:null,selectedOrder:null},LP={pending:["processing","cancelled"],processing:["shipped","cancelled"],shipped:["delivered","cancelled"],delivered:[],cancelled:[]},Wo=an("orders/fetchOrders",async()=>{const{data:t,error:e}=await we.from("orders").select("*").order("created_at",{ascending:!1});if(e)throw e;const{data:n,error:r}=await we.from("order_items").select("*, product:products(*)");if(r)throw r;return t.map(s=>({...s,items:n.filter(i=>i.order_id===s.id).map(i=>({...i,product:i.product||{id:i.product_id,name:"Deleted Product",description:"This product has been deleted",category:"N/A",location:"N/A",sku:"N/A",unit:"N/A"}}))}))}),tC=an("orders/createOrder",async(t,{dispatch:e,rejectWithValue:n})=>{for(const N of t.items){const{data:k,error:E}=await we.from("products").select("stock").eq("id",N.product_id).single();if(E)throw E;if(!k)throw new Error(`Product ${N.product_id} not found`);if(k.stock<N.quantity)return n(`Insufficient stock for product ${N.product_id}. Available: ${k.stock}, Requested: ${N.quantity}`)}const r=new Date,s=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0"),u=String(r.getHours()).padStart(2,"0"),d=String(r.getMinutes()).padStart(2,"0"),h=String(r.getSeconds()).padStart(2,"0"),x=`${s}${i}${a}${u}${d}${h}`,y=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),b=`ORD-${x}-${y}`,{data:_,error:C}=await we.from("orders").insert([{id:b,customer:t.customer,total_items:t.total_items,total_amount:t.total_amount,status:t.status}]).select().single();if(C)throw C;if(t.items.length>0){const N=t.items.map((A,I)=>({id:`ORI-${x}-${String(I+1).padStart(3,"0")}`,order_id:b,product_id:A.product_id,quantity:A.quantity,price:A.price}));for(const A of t.items){const{data:I,error:j}=await we.from("products").select("stock").eq("id",A.product_id).single();if(j)throw j;const F=I.stock-A.quantity,{error:z}=await we.from("products").update({stock:F}).eq("id",A.product_id);if(z)throw z}const{data:k,error:E}=await we.from("order_items").insert(N).select("*, product:products(*)");if(E)throw E;if(await e(ns()),t.items.some(A=>A.serial_numbers&&A.serial_numbers.length>0))for(const A of t.items)A.serial_numbers&&A.serial_numbers.length>0&&await we.from("serial_numbers").update({status:"sold",order_id:b}).in("id",A.serial_numbers);return{..._,items:k}}return{..._,items:[]}}),nC=an("orders/updateOrderStatus",async({id:t,status:e},{rejectWithValue:n,dispatch:r})=>{const{data:s,error:i}=await we.from("orders").select("status, order_items(product_id, quantity)").eq("id",t).single();if(i)throw i;if(!s)throw new Error("Order not found");const a=s.status,u=LP[a];if(!u.includes(e))return n(`Invalid status transition. Order cannot go from ${a} to ${e}. Allowed transitions: ${u.join(", ")}`);if(e==="cancelled"&&a!=="cancelled"){for(const _ of s.order_items){const{data:C,error:N}=await we.from("products").select("stock").eq("id",_.product_id).single();if(N)throw N;const k=C.stock+_.quantity,{error:E}=await we.from("products").update({stock:k}).eq("id",_.product_id);if(E)throw E}const{error:b}=await we.from("serial_numbers").update({status:"available",order_id:null}).eq("order_id",t).eq("status","sold");if(b)throw b;await r(ns())}const{data:d,error:h}=await we.from("orders").update({status:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(h)throw h;const{data:x,error:y}=await we.from("order_items").select("*, product:products(*)").eq("order_id",t);if(y)throw y;return{...d,items:x}}),rC=an("orders/deleteOrder",async t=>{const{data:e,error:n}=await we.from("order_items").select("*").eq("order_id",t);if(n)throw n;const{error:r}=await we.from("order_items").delete().eq("order_id",t);if(r)throw r;const{error:s}=await we.from("orders").delete().eq("id",t);if(s)throw s;if(e&&e.length>0){const i=e.map(a=>a.product_id).filter(a=>a&&a.startsWith("GHOST-"));if(i.length>0)for(const a of i){const{data:u,error:d}=await we.from("order_items").select("id").eq("product_id",a).neq("order_id",t);if(d){console.error(`Error checking references for ghost product ${a}:`,d);continue}if(!u||u.length===0){const{error:h}=await we.from("products").delete().eq("id",a);h?console.error(`Error deleting ghost product ${a}:`,h):console.log(`Ghost product ${a} deleted successfully`)}}}return t}),sC=an("orders/clearAllOrders",async()=>{const{data:t,error:e}=await we.from("products").select("id").like("id","GHOST-%");e&&console.error("Error fetching ghost products:",e);const{error:n}=await we.from("order_items").delete().neq("id","");if(n)throw n;const{error:r}=await we.from("orders").delete().neq("id","");if(r)throw r;if(t&&t.length>0){const s=t.map(a=>a.id),{error:i}=await we.from("products").delete().in("id",s);i?console.error("Error deleting ghost products:",i):console.log(`Successfully deleted ${s.length} ghost products`)}return[]}),iC=Wu({name:"orders",initialState:DP,reducers:{setOrders:(t,e)=>{t.items=e.payload},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload},setSelectedOrder:(t,e)=>{t.selectedOrder=e.payload}},extraReducers:t=>{t.addCase(Wo.pending,e=>{e.loading=!0,e.error=null}).addCase(Wo.fulfilled,(e,n)=>{e.loading=!1,e.items=n.payload}).addCase(Wo.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to fetch orders"}).addCase(tC.fulfilled,(e,n)=>{e.items.unshift(n.payload)}).addCase(nC.fulfilled,(e,n)=>{const r=e.items.findIndex(s=>s.id===n.payload.id);r!==-1&&(e.items[r]=n.payload)}).addCase(rC.fulfilled,(e,n)=>{var r;e.items=e.items.filter(s=>s.id!==n.payload),((r=e.selectedOrder)==null?void 0:r.id)===n.payload&&(e.selectedOrder=null)}).addCase(sC.fulfilled,e=>{e.items=[],e.selectedOrder=null})}}),{setOrders:T$,setLoading:Pd,setError:I$,setSelectedOrder:R$}=iC.actions,FP=iC.reducer,BP={items:[],loading:!1,error:null,selectedProduct:null},ym=an("products/fetchProducts",async()=>{const{data:t,error:e}=await we.from("products").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}),wm=an("products/createProduct",async t=>{const{data:e,error:n}=await we.from("products").insert([t]).select().single();if(n)throw n;return e}),bm=an("products/updateProduct",async t=>{const{data:e,error:n}=await we.from("products").update(t).eq("id",t.id).select().single();if(n)throw n;return e}),vm=an("products/deleteProduct",async t=>{const{error:e}=await we.from("products").delete().eq("id",t);if(e)throw e;return t}),_m=an("products/updateStock",async({id:t,quantity:e,adjustmentType:n,reason:r})=>{const{data:s,error:i}=await we.from("products").select("*").eq("id",t).single();if(i)throw i;if(!s)throw new Error("Product not found");const a=n==="in"?s.quantity+e:s.quantity-e;if(a<0)throw new Error("Cannot remove more stock than available");const{data:u,error:d}=await we.from("products").update({quantity:a}).eq("id",t).select().single();if(d)throw d;const{error:h}=await we.from("stock_adjustments").insert([{product_id:t,quantity:e,adjustment_type:n,reason:r,previous_quantity:s.quantity,new_quantity:a}]);if(h)throw await we.from("products").update({quantity:s.quantity}).eq("id",t),h;return u}),oC=Wu({name:"products",initialState:BP,reducers:{setSelectedProduct:(t,e)=>{t.selectedProduct=e.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(ym.pending,e=>{e.loading=!0,e.error=null}).addCase(ym.fulfilled,(e,n)=>{e.loading=!1,e.items=n.payload}).addCase(ym.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to fetch products"}).addCase(wm.pending,e=>{e.loading=!0,e.error=null}).addCase(wm.fulfilled,(e,n)=>{e.loading=!1,e.items.unshift(n.payload)}).addCase(wm.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to create product"}).addCase(bm.pending,e=>{e.loading=!0,e.error=null}).addCase(bm.fulfilled,(e,n)=>{e.loading=!1;const r=e.items.findIndex(s=>s.id===n.payload.id);r!==-1&&(e.items[r]=n.payload)}).addCase(bm.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to update product"}).addCase(vm.pending,e=>{e.loading=!0,e.error=null}).addCase(vm.fulfilled,(e,n)=>{var r;e.loading=!1,e.items=e.items.filter(s=>s.id!==n.payload),((r=e.selectedProduct)==null?void 0:r.id)===n.payload&&(e.selectedProduct=null)}).addCase(vm.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to delete product"}).addCase(_m.pending,e=>{e.loading=!0,e.error=null}).addCase(_m.fulfilled,(e,n)=>{e.loading=!1;const r=e.items.findIndex(s=>s.id===n.payload.id);r!==-1&&(e.items[r]=n.payload)}).addCase(_m.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to update stock"})}}),{setSelectedProduct:P$,clearError:O$}=oC.actions,UP=oC.reducer,VP={items:[],loading:!1,error:null},Sm=an("stockAdjustments/fetchAll",async()=>{const{data:t,error:e}=await we.from("stock_adjustments").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}),Em=an("stockAdjustments/create",async t=>{const{data:e}=await we.from("products").select("stock").eq("id",t.product_id).single();if(!e)throw new Error("Product not found");const n=e.stock,r=t.adjustment_type==="in"?n+t.quantity:n-t.quantity;if(r<0)throw new Error("Stock cannot be negative");const{data:s,error:i}=await we.from("stock_adjustments").insert([{...t,previous_quantity:n,new_quantity:r}]).select().single();if(i)throw i;const{error:a}=await we.from("products").update({stock:r}).eq("id",t.product_id);if(a)throw a;return s}),zP=Wu({name:"stockAdjustments",initialState:VP,reducers:{},extraReducers:t=>{t.addCase(Sm.pending,e=>{e.loading=!0,e.error=null}).addCase(Sm.fulfilled,(e,n)=>{e.loading=!1,e.items=n.payload}).addCase(Sm.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to fetch stock adjustments"}).addCase(Em.pending,e=>{e.loading=!0,e.error=null}).addCase(Em.fulfilled,(e,n)=>{e.loading=!1,e.items.unshift(n.payload)}).addCase(Em.rejected,(e,n)=>{e.loading=!1,e.error=n.error.message||"Failed to create stock adjustment"})}}),WP=zP.reducer,HP=()=>{try{const t=localStorage.getItem("inventorySettings");if(t)return JSON.parse(t)}catch(t){console.error("Failed to load settings from localStorage",t)}return{itemsPerPage:10,darkMode:!1,currency:"USD",notifications:!1,userName:"Demo User",userEmail:"demo@example.com",profileImage:"",companyName:"InventoryPro",orderItemsPerPage:10,inventoryItemsPerPage:10,lowStockThreshold:5,defaultCategory:"General",autoGenerateSKU:!0,enableBarcodeScanning:!0,valuationMethod:"FIFO"}},$P=HP(),aC=Wu({name:"settings",initialState:$P,reducers:{setItemsPerPage:(t,e)=>{t.itemsPerPage=e.payload;try{localStorage.setItem("inventorySettings",JSON.stringify(t))}catch(n){console.error("Failed to save settings:",n)}},setOrderItemsPerPage:(t,e)=>{t.orderItemsPerPage=e.payload;try{localStorage.setItem("inventorySettings",JSON.stringify(t))}catch(n){console.error("Failed to save settings:",n)}},setInventoryItemsPerPage:(t,e)=>{t.inventoryItemsPerPage=e.payload;try{localStorage.setItem("inventorySettings",JSON.stringify(t))}catch(n){console.error("Failed to save settings:",n)}},updateSettings:(t,e)=>{Object.assign(t,e.payload);try{localStorage.setItem("inventorySettings",JSON.stringify(t))}catch(n){console.error("Failed to save settings:",n)}}}}),{setItemsPerPage:GP,setOrderItemsPerPage:qP,setInventoryItemsPerPage:YP,updateSettings:XP}=aC.actions,KP=aC.reducer,ZP=K6({reducer:{inventory:jP,orders:FP,products:UP,stockAdjustments:WP,settings:KP}}),lC=t=>{t?(document.documentElement.classList.add("dark"),document.body.classList.add("dark-mode")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark-mode")),localStorage.setItem("theme",t?"dark":"light")},gh=(t,e="USD")=>{if(e==="GHS")return`₵${t.toFixed(2)}`;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(t)}catch{return console.warn(`Currency code ${e} not supported, using fallback format`),`${e} ${t.toFixed(2)}`}},Tl=()=>{const t=Xt(s=>s.settings);return{settings:t,formatPrice:s=>gh(s,t.currency||"USD"),isLowStock:s=>s<=(t.lowStockThreshold||5),generateProductSKU:(s,i)=>{if(!t.autoGenerateSKU)return null;const a=i?i.substring(0,3).toUpperCase():t.defaultCategory.substring(0,3).toUpperCase(),u=s.replace(/[^a-zA-Z0-9]/g,"").substring(0,4).toUpperCase(),d=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`${a}-${u}-${d}`},isDarkMode:t.darkMode||!1,notificationsEnabled:t.notifications||!1,companyName:t.companyName||"InventoryPro",lowStockThreshold:t.lowStockThreshold||5,defaultCategory:t.defaultCategory||"General",valuationMethod:t.valuationMethod||"FIFO",enableBarcodeScanning:t.enableBarcodeScanning!==!1}},cC=T.createContext(null),ia=()=>{const t=T.useContext(cC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},QP=({children:t})=>{const[e,n]=T.useState(null),[r,s]=T.useState(!0),[i,a]=T.useState(null);T.useEffect(()=>{we.auth.getSession().then(({data:{session:E}})=>{n((E==null?void 0:E.user)??null),s(!1)});const{data:{subscription:k}}=we.auth.onAuthStateChange(async(E,A)=>{n((A==null?void 0:A.user)??null),s(!1),E==="SIGNED_OUT"&&(localStorage.clear(),sessionStorage.clear())});return()=>{k.unsubscribe()}},[]);const u=k=>{switch(k.message){case"Invalid login credentials":return"Invalid email or password";case"User already registered":return"Email already in use";case"Email not confirmed":return"Please verify your email before logging in";case"New password should be different from the old password":return"New password must be different from your current password";case"Password recovery link has expired":return"Password reset link has expired. Please request a new one.";case"Too many reset attempts. Please try again later.":return"Too many password reset attempts. Please wait a few minutes and try again.";case"No account found with this email address.":return"We couldn't find an account with that email address.";default:return k.message}},N={user:e,loading:r,error:i,signup:async(k,E)=>{var A,I,j,F,z;try{if(a(null),!k||!k.includes("@"))throw new Error("Please enter a valid email address");const R=`${window.location.origin}/auth/callback`;localStorage.setItem("verification_email",k),console.log("[Auth] Signup with email:",k),console.log("[Auth] Email redirect to:",R);const{error:M,data:U}=await we.auth.signUp({email:k,password:E,options:{emailRedirectTo:R,data:{email_confirmed:!1}}});if(M)throw M;if(((I=(A=U==null?void 0:U.user)==null?void 0:A.identities)==null?void 0:I.length)===0)throw console.log("[Auth] User exists but email not confirmed, sending new verification email"),await we.auth.signInWithOtp({email:k,options:{emailRedirectTo:R}}),new Error("This email is already registered but not verified. We have sent a new verification link.");if(!((j=U==null?void 0:U.user)!=null&&j.id))throw new Error("Failed to create account. Please try again or contact support.");if(console.log("[Auth] Signup successful, verification email sent to:",k),console.log("[Auth] User data:",(F=U==null?void 0:U.user)==null?void 0:F.id),(z=U==null?void 0:U.user)!=null&&z.email)try{await new Promise(X=>setTimeout(X,500)),console.log("[Auth] Confirming verification email was sent for:",k)}catch(X){console.error("[Auth] Error confirming email send:",X)}}catch(O){const R=O;throw console.error("[Auth] Signup error:",R.message),a(u(R)),R}},login:async(k,E)=>{try{a(null);const{error:A}=await we.auth.signInWithPassword({email:k,password:E});if(A)throw A}catch(A){const I=A;throw a(u(I)),I}},logout:async()=>{try{a(null),console.log("[Auth] Signing out user...");const{error:k}=await we.auth.signOut({scope:"global"});if(k)throw k;localStorage.clear(),sessionStorage.clear(),n(null),console.log("[Auth] Successfully signed out user")}catch(k){const E=k;throw console.error("[Auth] Error during logout:",E.message),a(u(E)),E}},resetPassword:async k=>{try{if(!k||!k.includes("@"))throw new Error("Please enter a valid email address");a(null);const E=`${window.location.origin}/reset-password`;console.log("[Auth] Reset password redirect URL:",E);const{data:A,error:I}=await we.auth.resetPasswordForEmail(k.trim(),{redirectTo:E});if(I)throw console.error("[Auth] Reset password error:",I),I.message.includes("rate limit")?new Error("Too many reset attempts. Please try again later."):I.message.includes("email not found")?new Error("No account found with this email address."):I.message.includes("invalid email")?new Error("Please enter a valid email address."):I;console.log("[Auth] Password reset email sent successfully to:",k),console.log("[Auth] Redirect URL configured as:",E)}catch(E){const A=E;throw a(u(A)),A}},updatePassword:async k=>{try{a(null),s(!0);const{error:E}=await we.auth.updateUser({password:k});if(E)throw E;return console.log("Password updated successfully"),await we.auth.signOut(),n(null),localStorage.clear(),sessionStorage.clear(),{success:!0}}catch(E){const A=E;throw a(u(A)),console.error("Password update error:",A),A}finally{s(!1)}},handleSocialLogin:async k=>{try{s(!0),a(null),sessionStorage.setItem("authProvider",k),sessionStorage.setItem("isSocialLogin","true"),console.log("[Auth] Starting social login with provider:",k);const{data:E,error:A}=await we.auth.signInWithOAuth({provider:k,options:{redirectTo:`${window.location.origin}/`,queryParams:{access_type:"offline",prompt:"consent"}}});if(A){console.error("[Auth] Social login error:",A),A.message.includes("popup")?a("Please enable popups for this site to use social login"):A.message.includes("cancelled")?a("Login was cancelled"):a(A.message);return}E!=null&&E.url?(console.log("[Auth] Redirecting to social provider URL:",E.url),window.location.href=E.url):(console.error("[Auth] No redirect URL returned from social login"),a("Failed to start social login. Please try again."))}catch(E){console.error("[Auth] Unexpected error during social login:",E),a("An unexpected error occurred during social login")}finally{s(!1)}},forceGlobalSignOut:async()=>{try{return console.log("[Auth] Forcing global sign out for verification flow"),await we.auth.signOut({scope:"global"}),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(k=>{const[E]=k.trim().split("=");document.cookie=`${E}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;`}),n(null),!0}catch(k){return console.error("[Auth] Error during force sign out:",k),!1}},setUser:n};return m.jsx(cC.Provider,{value:N,children:!r&&t})},JP=async t=>{try{return console.log("Sending email:",t),await new Promise(e=>setTimeout(e,1e3)),console.log(`Email sent to ${t.to}`),console.log(`Subject: ${t.subject}`),console.log(`Body: ${t.body}`),!0}catch(e){return console.error("Error sending email:",e),!1}},eO=(t,e)=>({low_stock:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px;">
        <h2 style="color: #1f2937; margin-bottom: 20px;">Low Stock Alert</h2>
        <p>The following products are running low on stock:</p>
        <ul style="padding-left: 20px;">
          ${(e.products||[]).map(r=>`
            <li style="margin-bottom: 10px;">
              <strong>${r.name}</strong> - Current stock: ${r.stock} (Minimum: ${r.reorder_level})
            </li>
          `).join("")}
        </ul>
        <p style="margin-top: 30px; color: #6b7280;">This is an automated notification from InventoryPro Cloud.</p>
      </div>
    `,order_update:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px;">
        <h2 style="color: #1f2937; margin-bottom: 20px;">Order Status Update</h2>
        <p>Order <strong>#${e.orderId}</strong> has been updated:</p>
        <p>Status: <span style="font-weight: bold; color: ${e.status==="delivered"?"#10b981":e.status==="shipped"?"#6366f1":e.status==="processing"?"#f59e0b":e.status==="cancelled"?"#ef4444":"#6b7280"};">${e.status.toUpperCase()}</span></p>
        <p>Customer: ${e.customer}</p>
        <p>Total Amount: ${e.currency} ${e.amount.toFixed(2)}</p>
        <p style="margin-top: 30px; color: #6b7280;">This is an automated notification from InventoryPro Cloud.</p>
      </div>
    `,price_change:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px;">
        <h2 style="color: #1f2937; margin-bottom: 20px;">Price Change Alert</h2>
        <p>The following products have had price changes:</p>
        <ul style="padding-left: 20px;">
          ${(e.products||[]).map(r=>`
            <li style="margin-bottom: 10px;">
              <strong>${r.name}</strong> - Previous: ${e.currency} ${r.oldPrice.toFixed(2)}, 
              New: ${e.currency} ${r.newPrice.toFixed(2)}
            </li>
          `).join("")}
        </ul>
        <p style="margin-top: 30px; color: #6b7280;">This is an automated notification from InventoryPro Cloud.</p>
      </div>
    `,user_settings:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #e5e7eb; border-radius: 8px;">
        <h2 style="color: #1f2937; margin-bottom: 20px;">Settings Updated</h2>
        <p>Hello ${e.userName},</p>
        <p>Your account settings have been updated successfully.</p>
        
        <div style="background-color: #f9fafb; padding: 15px; border-radius: 6px; margin: 20px 0;">
          <h3 style="color: #1f2937; margin-top: 0;">Updated Settings:</h3>
          <ul style="padding-left: 20px;">
            ${e.darkMode!==void 0?`<li>Dark Mode: ${e.darkMode?"Enabled":"Disabled"}</li>`:""}
            ${e.currency?`<li>Currency: ${e.currency}</li>`:""}
            ${e.notifications!==void 0?`<li>Notifications: ${e.notifications?"Enabled":"Disabled"}</li>`:""}
          </ul>
        </div>
        
        <p style="margin-top: 30px; color: #6b7280;">This is an automated notification from InventoryPro Cloud.</p>
      </div>
    `})[t]||"",uC=T.createContext(void 0),dC=()=>{const t=T.useContext(uC);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},tO=({children:t})=>{const[e,n]=T.useState([]),r=Xt(h=>h.settings),{notifications:s,userEmail:i}=r;T.useEffect(()=>{if(e.length===0)return;const h=e.filter(x=>x.autoClose).map(x=>setTimeout(()=>{u(x.id)},x.duration||5e3));return()=>{h.forEach(x=>clearTimeout(x))}},[e]);const a=async h=>{if(!s&&h.type!=="warning")return;const x=Math.random().toString(36).substring(2,9);if(n(y=>[...y,{...h,id:x,autoClose:h.autoClose!==!1,duration:h.duration||5e3}]),h.sendEmail&&s&&i)try{const y=h.emailType||"user_settings",b=h.emailDetails||{},_=eO(y,{...b,userName:r.userName||"User",currency:r.currency||"USD"});await JP({to:i,subject:h.title||"Notification from InventoryPro",body:_,isHtml:!0});const C=Math.random().toString(36).substring(2,9);n(N=>[...N,{id:C,type:"success",title:"Email Sent",message:`Notification email sent to ${i}`,autoClose:!0,duration:3e3}])}catch(y){console.error("Failed to send email notification:",y)}},u=h=>{n(x=>x.filter(y=>y.id!==h))},d=()=>{n([])};return m.jsx(uC.Provider,{value:{notifications:e,addNotification:a,removeNotification:u,clearNotifications:d},children:t})};function nO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const d1=T.forwardRef(nO);function rO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Cm=T.forwardRef(rO);function sO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const iO=T.forwardRef(sO);function oO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const aO=T.forwardRef(oO);function lO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const cO=T.forwardRef(lO);function uO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const hC=T.forwardRef(uO);function dO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const h1=T.forwardRef(dO);function hO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}))}const fO=T.forwardRef(hO);function mO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const gO=T.forwardRef(mO);function pO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const xO=T.forwardRef(pO);function yO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const wO=T.forwardRef(yO);function bO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const vO=T.forwardRef(bO);function _O({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const SO=T.forwardRef(_O);function EO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const CO=T.forwardRef(EO);function AO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const kO=T.forwardRef(AO);function NO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const fC=T.forwardRef(NO);function TO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const ix=T.forwardRef(TO);function IO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const mC=T.forwardRef(IO);function RO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const PO=T.forwardRef(RO);function OO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const MO=T.forwardRef(OO);function jO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-2.25-1.313M21 7.5v2.25m0-2.25-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3 2.25-1.313M12 12.75l-2.25-1.313M12 12.75V15m0 6.75 2.25-1.313M12 21.75V19.5m0 2.25-2.25-1.313m0-16.875L12 2.25l2.25 1.313M21 14.25v2.25l-2.25 1.313m-13.5 0L3 16.5v-2.25"}))}const Gu=T.forwardRef(jO);function DO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const LO=T.forwardRef(DO);function FO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const BO=T.forwardRef(FO);function UO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const VO=T.forwardRef(UO);function zO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const WO=T.forwardRef(zO);function HO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const $O=T.forwardRef(HO);function GO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const fl=T.forwardRef(GO);function qO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const YO=T.forwardRef(qO);function XO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const KO=T.forwardRef(XO);function ZO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const QO=T.forwardRef(ZO);function JO({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const eM=T.forwardRef(JO);function tM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const l0=T.forwardRef(tM);function nM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const rM=T.forwardRef(nM);function sM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const gC=T.forwardRef(sM);function iM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const oM=T.forwardRef(iM);function aM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const ox=T.forwardRef(aM);function lM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const O2=T.forwardRef(lM);function cM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const qu=T.forwardRef(cM);function uM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const dM=T.forwardRef(uM);function hM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const pC=T.forwardRef(hM);function fM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const mM=T.forwardRef(fM);function gM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const ax=T.forwardRef(gM);function pM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const f1=T.forwardRef(pM);function xM({title:t,titleId:e,...n},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?T.createElement("title",{id:e},t):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Il=T.forwardRef(xM),yM=()=>{const{notifications:t,removeNotification:e}=dC();if(t.length===0)return null;const n=s=>{switch(s){case"success":return m.jsx(fC,{className:"h-6 w-6 text-green-500"});case"warning":return m.jsx($O,{className:"h-6 w-6 text-yellow-500"});case"error":return m.jsx(f1,{className:"h-6 w-6 text-red-500"});case"info":default:return m.jsx(eM,{className:"h-6 w-6 text-blue-500"})}},r=s=>{switch(s){case"success":return"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800";case"warning":return"bg-yellow-50 dark:bg-yellow-900/30 border-yellow-200 dark:border-yellow-800";case"error":return"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800";case"info":default:return"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800"}};return m.jsx("div",{className:"fixed top-4 right-4 z-50 w-80 space-y-3 pointer-events-none",children:t.map(s=>m.jsx("div",{className:`pointer-events-auto rounded-md border p-4 shadow-md transition-all duration-300 ease-in-out transform translate-x-0 ${r(s.type)}`,children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:n(s.type)}),m.jsxs("div",{className:"ml-3 flex-1",children:[s.title&&m.jsx("h3",{className:"text-sm font-medium dark:text-white",children:s.title}),m.jsx("div",{className:"text-sm dark:text-gray-200",children:s.message})]}),m.jsxs("button",{type:"button",className:"inline-flex rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 focus:outline-none",onClick:()=>e(s.id),children:[m.jsx("span",{className:"sr-only",children:"Close"}),m.jsx(Il,{className:"h-5 w-5","aria-hidden":"true"})]})]})},s.id))})},wM=[{name:"Dashboard",href:"/",icon:QO},{name:"Products",href:"/products",icon:LO},{name:"Orders",href:"/orders",icon:pC},{name:"Inventory",href:"/inventory",icon:vO},{name:"Reports",href:"/reports",icon:kO},{name:"Import CSV",href:"/import",icon:hC}],bM=()=>{const t=Ws(),e=Hs(),n=Xt(u=>u.settings),{companyName:r}=Tl(),{logout:s}=ia();T.useEffect(()=>{lC(n.darkMode||!1)},[n.darkMode]);const i=async()=>{try{await s()}catch(u){console.error("Failed to logout:",u)}},a=()=>{e("/settings")};return m.jsxs("div",{className:`min-h-screen ${n.darkMode?"bg-gray-900 text-white":"bg-gray-50"}`,children:[m.jsx(yM,{}),m.jsxs("div",{className:`fixed inset-y-0 left-0 w-64 ${n.darkMode?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border-r`,children:[m.jsx("div",{className:"flex items-center h-16 px-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(Gu,{className:"h-8 w-8 text-blue-600"}),m.jsx("span",{className:"ml-2 text-xl font-semibold text-blue-600",children:r})]})}),m.jsx("nav",{className:"mt-5 px-4 space-y-1",children:wM.map(u=>{const d=t.pathname===u.href;return m.jsxs(In,{to:u.href,className:`
                  group flex items-center px-4 py-3 text-sm font-medium rounded-lg
                  transition-colors duration-150 ease-in-out
                  ${d?`${n.darkMode?"bg-blue-900 text-blue-200":"bg-blue-50 text-blue-600"}`:`${n.darkMode?"text-gray-300 hover:bg-blue-900 hover:text-blue-200":"text-gray-600 hover:bg-blue-50 hover:text-blue-600"}`}
                `,children:[m.jsx(u.icon,{className:`
                    mr-3 h-5 w-5 flex-shrink-0 transition-colors duration-150 ease-in-out
                    ${d?`${n.darkMode?"text-blue-300":"text-blue-600"}`:`${n.darkMode?"text-gray-400 group-hover:text-blue-300":"text-gray-400 group-hover:text-blue-600"}`}
                  `,"aria-hidden":"true"}),u.name]},u.name)})}),m.jsx("div",{className:`absolute bottom-0 left-0 right-0 p-4 border-t ${n.darkMode?"border-gray-700":"border-gray-200"}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:m.jsx("span",{className:"text-blue-600 text-sm font-medium",children:n.userName?n.userName.charAt(0):"U"})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:`text-sm font-medium ${n.darkMode?"text-white":"text-gray-700"}`,children:n.userName||"Demo User"})})]}),m.jsxs("div",{className:"flex space-x-2",children:[n.notifications&&m.jsx("button",{className:`p-2 rounded-lg transition-colors duration-150 ease-in-out ${n.darkMode?"text-gray-400 hover:text-blue-300 hover:bg-blue-900":"text-gray-400 hover:text-blue-600 hover:bg-blue-50"}`,title:"Notifications",children:m.jsx(xO,{className:"h-5 w-5"})}),m.jsx("button",{onClick:a,className:`p-2 rounded-lg transition-colors duration-150 ease-in-out ${n.darkMode?"text-gray-400 hover:text-blue-300 hover:bg-blue-900":"text-gray-400 hover:text-blue-600 hover:bg-blue-50"}`,title:"User Settings",children:m.jsx(MO,{className:"h-5 w-5"})}),m.jsx("button",{onClick:i,className:`p-2 rounded-lg transition-colors duration-150 ease-in-out ${n.darkMode?"text-gray-400 hover:text-red-600 hover:bg-red-900":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:"Logout",children:m.jsx(iO,{className:"h-5 w-5"})})]})]})})]}),m.jsx("div",{className:`pl-64 ${n.darkMode?"bg-gray-900 text-white":"bg-gray-50"} min-h-screen`,children:m.jsx("main",{className:`py-6 ${n.darkMode?"bg-gray-900 text-white":"bg-gray-50"}`,children:m.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${n.darkMode?"bg-gray-900 text-white":"bg-gray-50"}`,children:m.jsx(n6,{})})})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Yu(t){return t+.5|0}const zi=(t,e,n)=>Math.max(Math.min(t,n),e);function Sc(t){return zi(Yu(t*2.55),0,255)}function Ji(t){return zi(Yu(t*255),0,255)}function Js(t){return zi(Yu(t/2.55)/100,0,1)}function M2(t){return zi(Yu(t*100),0,100)}const Yr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},m1=[..."0123456789ABCDEF"],vM=t=>m1[t&15],_M=t=>m1[(t&240)>>4]+m1[t&15],Od=t=>(t&240)>>4===(t&15),SM=t=>Od(t.r)&&Od(t.g)&&Od(t.b)&&Od(t.a);function EM(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Yr[t[1]]*17,g:255&Yr[t[2]]*17,b:255&Yr[t[3]]*17,a:e===5?Yr[t[4]]*17:255}:(e===7||e===9)&&(n={r:Yr[t[1]]<<4|Yr[t[2]],g:Yr[t[3]]<<4|Yr[t[4]],b:Yr[t[5]]<<4|Yr[t[6]],a:e===9?Yr[t[7]]<<4|Yr[t[8]]:255})),n}const CM=(t,e)=>t<255?e(t):"";function AM(t){var e=SM(t)?vM:_M;return t?"#"+e(t.r)+e(t.g)+e(t.b)+CM(t.a,e):void 0}const kM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xC(t,e,n){const r=e*Math.min(n,1-n),s=(i,a=(i+t/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function NM(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function TM(t,e,n){const r=xC(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function IM(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function lx(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),a=Math.min(n,r,s),u=(i+a)/2;let d,h,x;return i!==a&&(x=i-a,h=u>.5?x/(2-i-a):x/(i+a),d=IM(n,r,s,x,i),d=d*60+.5),[d|0,h||0,u]}function cx(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ji)}function ux(t,e,n){return cx(xC,t,e,n)}function RM(t,e,n){return cx(TM,t,e,n)}function PM(t,e,n){return cx(NM,t,e,n)}function yC(t){return(t%360+360)%360}function OM(t){const e=kM.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Sc(+e[5]):Ji(+e[5]));const s=yC(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=RM(s,i,a):e[1]==="hsv"?r=PM(s,i,a):r=ux(s,i,a),{r:r[0],g:r[1],b:r[2],a:n}}function MM(t,e){var n=lx(t);n[0]=yC(n[0]+e),n=ux(n),t.r=n[0],t.g=n[1],t.b=n[2]}function jM(t){if(!t)return;const e=lx(t),n=e[0],r=M2(e[1]),s=M2(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Js(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const j2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},D2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function DM(){const t={},e=Object.keys(D2),n=Object.keys(j2);let r,s,i,a,u;for(r=0;r<e.length;r++){for(a=u=e[r],s=0;s<n.length;s++)i=n[s],u=u.replace(i,j2[i]);i=parseInt(D2[a],16),t[u]=[i>>16&255,i>>8&255,i&255]}return t}let Md;function LM(t){Md||(Md=DM(),Md.transparent=[0,0,0,0]);const e=Md[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const FM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BM(t){const e=FM.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const a=+e[7];n=e[8]?Sc(a):zi(a*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Sc(r):zi(r,0,255)),s=255&(e[4]?Sc(s):zi(s,0,255)),i=255&(e[6]?Sc(i):zi(i,0,255)),{r,g:s,b:i,a:n}}}function UM(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Js(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Am=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Sa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function VM(t,e,n){const r=Sa(Js(t.r)),s=Sa(Js(t.g)),i=Sa(Js(t.b));return{r:Ji(Am(r+n*(Sa(Js(e.r))-r))),g:Ji(Am(s+n*(Sa(Js(e.g))-s))),b:Ji(Am(i+n*(Sa(Js(e.b))-i))),a:t.a+n*(e.a-t.a)}}function jd(t,e,n){if(t){let r=lx(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=ux(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function wC(t,e){return t&&Object.assign(e||{},t)}function L2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ji(t[3]))):(e=wC(t,{r:0,g:0,b:0,a:1}),e.a=Ji(e.a)),e}function zM(t){return t.charAt(0)==="r"?BM(t):OM(t)}class _u{constructor(e){if(e instanceof _u)return e;const n=typeof e;let r;n==="object"?r=L2(e):n==="string"&&(r=EM(e)||LM(e)||zM(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=wC(this._rgb);return e&&(e.a=Js(e.a)),e}set rgb(e){this._rgb=L2(e)}rgbString(){return this._valid?UM(this._rgb):void 0}hexString(){return this._valid?AM(this._rgb):void 0}hslString(){return this._valid?jM(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const a=n===i?.5:n,u=2*a-1,d=r.a-s.a,h=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;i=1-h,r.r=255&h*r.r+i*s.r+.5,r.g=255&h*r.g+i*s.g+.5,r.b=255&h*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=VM(this._rgb,e._rgb,n)),this}clone(){return new _u(this.rgb)}alpha(e){return this._rgb.a=Ji(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Yu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return jd(this._rgb,2,e),this}darken(e){return jd(this._rgb,2,-e),this}saturate(e){return jd(this._rgb,1,e),this}desaturate(e){return jd(this._rgb,1,-e),this}rotate(e){return MM(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gs(){}const WM=(()=>{let t=0;return()=>t++})();function Bt(t){return t==null}function Mn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function St(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function is(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ns(t,e){return is(t)?t:e}function ct(t,e){return typeof t>"u"?e:t}const HM=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,bC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function It(t,e,n,r){let s,i,a;if(Mn(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(St(t))for(a=Object.keys(t),i=a.length,s=0;s<i;s++)e.call(n,t[a[s]],a[s])}function of(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function af(t){if(Mn(t))return t.map(af);if(St(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=af(t[n[s]]);return e}return t}function vC(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $M(t,e,n,r){if(!vC(t))return;const s=e[t],i=n[t];St(s)&&St(i)?Su(s,i,r):e[t]=af(i)}function Su(t,e,n){const r=Mn(e)?e:[e],s=r.length;if(!St(t))return t;n=n||{};const i=n.merger||$M;let a;for(let u=0;u<s;++u){if(a=r[u],!St(a))continue;const d=Object.keys(a);for(let h=0,x=d.length;h<x;++h)i(d[h],t,a,n)}return t}function Wc(t,e){return Su(t,e,{merger:GM})}function GM(t,e,n){if(!vC(t))return;const r=e[t],s=n[t];St(r)&&St(s)?Wc(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=af(s))}const F2={"":t=>t,x:t=>t.x,y:t=>t.y};function qM(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function YM(t){const e=qM(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function ea(t,e){return(F2[e]||(F2[e]=YM(e)))(t)}function dx(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Eu=t=>typeof t<"u",ro=t=>typeof t=="function",B2=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function XM(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const gn=Math.PI,mn=2*gn,KM=mn+gn,lf=Number.POSITIVE_INFINITY,ZM=gn/180,Dn=gn/2,wo=gn/4,U2=gn*2/3,_C=Math.log10,Fs=Math.sign;function Hc(t,e,n){return Math.abs(t-e)<n}function V2(t){const e=Math.round(t);t=Hc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(_C(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function QM(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function JM(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function cf(t){return!JM(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function e7(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function t7(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ni(t){return t*(gn/180)}function n7(t){return t*(180/gn)}function z2(t){if(!is(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function SC(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*gn&&(i+=mn),{angle:i,distance:s}}function g1(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function r7(t,e){return(t-e+KM)%mn-gn}function Ri(t){return(t%mn+mn)%mn}function Cu(t,e,n,r){const s=Ri(t),i=Ri(e),a=Ri(n),u=Ri(i-s),d=Ri(a-s),h=Ri(s-i),x=Ri(s-a);return s===i||s===a||r&&i===a||u>d&&h<x}function Cr(t,e,n){return Math.max(e,Math.min(n,t))}function s7(t){return Cr(t,-32768,32767)}function Wi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function hx(t,e,n){n=n||(a=>t[a]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const p1=(t,e,n,r)=>hx(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),i7=(t,e,n)=>hx(t,n,r=>t[r][e]>=n);function o7(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const EC=["push","pop","shift","splice","unshift"];function a7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),EC.forEach(n=>{const r="_onData"+dx(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return t._chartjs.listeners.forEach(u=>{typeof u[r]=="function"&&u[r](...i)}),a}})})}function W2(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(EC.forEach(i=>{delete t[i]}),delete t._chartjs)}function CC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const AC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function kC(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,AC.call(window,()=>{r=!1,t.apply(e,n)}))}}function l7(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const fx=t=>t==="start"?"left":t==="end"?"right":"center",nr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,c7=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,Dd=t=>t===0||t===1,H2=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*mn/n)),$2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*mn/n)+1,$c={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Dn)+1,easeOutSine:t=>Math.sin(t*Dn),easeInOutSine:t=>-.5*(Math.cos(gn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Dd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Dd(t)?t:H2(t,.075,.3),easeOutElastic:t=>Dd(t)?t:$2(t,.075,.3),easeInOutElastic(t){return Dd(t)?t:t<.5?.5*H2(t*2,.1125,.45):.5+.5*$2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-$c.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?$c.easeInBounce(t*2)*.5:$c.easeOutBounce(t*2-1)*.5+.5};function mx(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function G2(t){return mx(t)?t:new _u(t)}function km(t){return mx(t)?t:new _u(t).saturate(.5).darken(.1).hexString()}const u7=["x","y","borderWidth","radius","tension"],d7=["color","borderColor","backgroundColor"];function h7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:d7},numbers:{type:"number",properties:u7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function f7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const q2=new Map;function m7(t,e){e=e||{};const n=t+JSON.stringify(e);let r=q2.get(n);return r||(r=new Intl.NumberFormat(t,e),q2.set(n,r)),r}function gx(t,e,n){return m7(e,n).format(t)}const g7={values(t){return Mn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),i=p7(t,n)}const a=_C(Math.abs(i)),u=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),d={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),gx(t,r,d)}};function p7(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var NC={formatters:g7};function x7(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:NC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ta=Object.create(null),x1=Object.create(null);function Gc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Nm(t,e,n){return typeof e=="string"?Su(Gc(t,e),n):Su(Gc(t,""),e)}class y7{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>km(s.backgroundColor),this.hoverBorderColor=(r,s)=>km(s.borderColor),this.hoverColor=(r,s)=>km(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Nm(this,e,n)}get(e){return Gc(this,e)}describe(e,n){return Nm(x1,e,n)}override(e,n){return Nm(ta,e,n)}route(e,n,r,s){const i=Gc(this,e),a=Gc(this,r),u="_"+n;Object.defineProperties(i,{[u]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[u],h=a[s];return St(d)?Object.assign({},h,d):ct(d,h)},set(d){this[u]=d}}})}apply(e){e.forEach(n=>n(this))}}var En=new y7({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[h7,f7,x7]);function w7(t){return!t||Bt(t.size)||Bt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Y2(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function bo(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function X2(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function y1(t,e,n,r){TC(t,e,n,r,null)}function TC(t,e,n,r,s){let i,a,u,d,h,x,y,b;const _=e.pointStyle,C=e.rotation,N=e.radius;let k=(C||0)*ZM;if(_&&typeof _=="object"&&(i=_.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),t.restore();return}if(!(isNaN(N)||N<=0)){switch(t.beginPath(),_){default:s?t.ellipse(n,r,s/2,N,0,0,mn):t.arc(n,r,N,0,mn),t.closePath();break;case"triangle":x=s?s/2:N,t.moveTo(n+Math.sin(k)*x,r-Math.cos(k)*N),k+=U2,t.lineTo(n+Math.sin(k)*x,r-Math.cos(k)*N),k+=U2,t.lineTo(n+Math.sin(k)*x,r-Math.cos(k)*N),t.closePath();break;case"rectRounded":h=N*.516,d=N-h,a=Math.cos(k+wo)*d,y=Math.cos(k+wo)*(s?s/2-h:d),u=Math.sin(k+wo)*d,b=Math.sin(k+wo)*(s?s/2-h:d),t.arc(n-y,r-u,h,k-gn,k-Dn),t.arc(n+b,r-a,h,k-Dn,k),t.arc(n+y,r+u,h,k,k+Dn),t.arc(n-b,r+a,h,k+Dn,k+gn),t.closePath();break;case"rect":if(!C){d=Math.SQRT1_2*N,x=s?s/2:d,t.rect(n-x,r-d,2*x,2*d);break}k+=wo;case"rectRot":y=Math.cos(k)*(s?s/2:N),a=Math.cos(k)*N,u=Math.sin(k)*N,b=Math.sin(k)*(s?s/2:N),t.moveTo(n-y,r-u),t.lineTo(n+b,r-a),t.lineTo(n+y,r+u),t.lineTo(n-b,r+a),t.closePath();break;case"crossRot":k+=wo;case"cross":y=Math.cos(k)*(s?s/2:N),a=Math.cos(k)*N,u=Math.sin(k)*N,b=Math.sin(k)*(s?s/2:N),t.moveTo(n-y,r-u),t.lineTo(n+y,r+u),t.moveTo(n+b,r-a),t.lineTo(n-b,r+a);break;case"star":y=Math.cos(k)*(s?s/2:N),a=Math.cos(k)*N,u=Math.sin(k)*N,b=Math.sin(k)*(s?s/2:N),t.moveTo(n-y,r-u),t.lineTo(n+y,r+u),t.moveTo(n+b,r-a),t.lineTo(n-b,r+a),k+=wo,y=Math.cos(k)*(s?s/2:N),a=Math.cos(k)*N,u=Math.sin(k)*N,b=Math.sin(k)*(s?s/2:N),t.moveTo(n-y,r-u),t.lineTo(n+y,r+u),t.moveTo(n+b,r-a),t.lineTo(n-b,r+a);break;case"line":a=s?s/2:Math.cos(k)*N,u=Math.sin(k)*N,t.moveTo(n-a,r-u),t.lineTo(n+a,r+u);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(s?s/2:N),r+Math.sin(k)*N);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Au(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function px(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function xx(t){t.restore()}function b7(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function v7(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function _7(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Bt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function S7(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),a=e-i.actualBoundingBoxLeft,u=e+i.actualBoundingBoxRight,d=n-i.actualBoundingBoxAscent,h=n+i.actualBoundingBoxDescent,x=s.strikethrough?(d+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(a,x),t.lineTo(u,x),t.stroke()}}function E7(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ku(t,e,n,r,s,i={}){const a=Mn(e)?e:[e],u=i.strokeWidth>0&&i.strokeColor!=="";let d,h;for(t.save(),t.font=s.string,_7(t,i),d=0;d<a.length;++d)h=a[d],i.backdrop&&E7(t,i.backdrop),u&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Bt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(h,n,r,i.maxWidth)),t.fillText(h,n,r,i.maxWidth),S7(t,n,r,h,i),r+=Number(s.lineHeight);t.restore()}function uf(t,e){const{x:n,y:r,w:s,h:i,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*gn,gn,!0),t.lineTo(n,r+i-a.bottomLeft),t.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,gn,Dn,!0),t.lineTo(n+s-a.bottomRight,r+i),t.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,Dn,0,!0),t.lineTo(n+s,r+a.topRight),t.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-Dn,!0),t.lineTo(n+a.topLeft,r)}const C7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,A7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function k7(t,e){const n=(""+t).match(C7);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const N7=t=>+t||0;function yx(t,e){const n={},r=St(e),s=r?Object.keys(e):e,i=St(t)?r?a=>ct(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of s)n[a]=N7(i(a));return n}function IC(t){return yx(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ja(t){return yx(t,["topLeft","topRight","bottomLeft","bottomRight"])}function os(t){const e=IC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ir(t,e){t=t||{},e=e||En.font;let n=ct(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ct(t.style,e.style);r&&!(""+r).match(A7)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ct(t.family,e.family),lineHeight:k7(ct(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ct(t.weight,e.weight),string:""};return s.string=w7(s),s}function Ld(t,e,n,r){let s,i,a;for(s=0,i=t.length;s<i;++s)if(a=t[s],a!==void 0&&a!==void 0)return a}function T7(t,e,n){const{min:r,max:s}=t,i=bC(e,(s-r)/2),a=(u,d)=>n&&u===0?0:u+d;return{min:a(r,-Math.abs(i)),max:a(s,i)}}function oa(t,e){return Object.assign(Object.create(t),e)}function wx(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=MC("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:u=>wx([u,...t],e,i,r)};return new Proxy(a,{deleteProperty(u,d){return delete u[d],delete u._keys,delete t[0][d],!0},get(u,d){return PC(u,d,()=>L7(d,e,t,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,d){return Z2(u).includes(d)},ownKeys(u){return Z2(u)},set(u,d,h){const x=u._storage||(u._storage=s());return u[d]=x[d]=h,delete u._keys,!0}})}function ml(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:RC(t,r),setContext:i=>ml(t,i,n,r),override:i=>ml(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,u){return PC(i,a,()=>R7(i,a,u))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,u){return t[a]=u,delete i[a],!0}})}function RC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:ro(n)?n:()=>n,isIndexable:ro(r)?r:()=>r}}const I7=(t,e)=>t?t+dx(e):e,bx=(t,e)=>St(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function PC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function R7(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=t;let u=r[e];return ro(u)&&a.isScriptable(e)&&(u=P7(e,u,t,n)),Mn(u)&&u.length&&(u=O7(e,u,t,a.isIndexable)),bx(e,u)&&(u=ml(u,s,i&&i[e],a)),u}function P7(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:u}=n;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let d=e(i,a||r);return u.delete(t),bx(t,d)&&(d=vx(s._scopes,s,t,d)),d}function O7(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:u}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(St(e[0])){const d=e,h=s._scopes.filter(x=>x!==d);e=[];for(const x of d){const y=vx(h,s,t,x);e.push(ml(y,i,a&&a[t],u))}}return e}function OC(t,e,n){return ro(t)?t(e,n):t}const M7=(t,e)=>t===!0?e:typeof t=="string"?ea(e,t):void 0;function j7(t,e,n,r,s){for(const i of e){const a=M7(n,i);if(a){t.add(a);const u=OC(a._fallback,n,s);if(typeof u<"u"&&u!==n&&u!==r)return u}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function vx(t,e,n,r){const s=e._rootScopes,i=OC(e._fallback,n,r),a=[...t,...s],u=new Set;u.add(r);let d=K2(u,a,n,i||n,r);return d===null||typeof i<"u"&&i!==n&&(d=K2(u,a,i,d,r),d===null)?!1:wx(Array.from(u),[""],s,i,()=>D7(e,n,r))}function K2(t,e,n,r,s){for(;n;)n=j7(t,e,n,r,s);return n}function D7(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Mn(s)&&St(n)?n:s||{}}function L7(t,e,n,r){let s;for(const i of e)if(s=MC(I7(i,t),n),typeof s<"u")return bx(t,s)?vx(n,r,t,s):s}function MC(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Z2(t){let e=t._keys;return e||(e=t._keys=F7(t._scopes)),e}function F7(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const B7=Number.EPSILON||1e-14,gl=(t,e)=>e<t.length&&!t[e].skip&&t[e],jC=t=>t==="x"?"y":"x";function U7(t,e,n,r){const s=t.skip?e:t,i=e,a=n.skip?e:n,u=g1(i,s),d=g1(a,i);let h=u/(u+d),x=d/(u+d);h=isNaN(h)?0:h,x=isNaN(x)?0:x;const y=r*h,b=r*x;return{previous:{x:i.x-y*(a.x-s.x),y:i.y-y*(a.y-s.y)},next:{x:i.x+b*(a.x-s.x),y:i.y+b*(a.y-s.y)}}}function V7(t,e,n){const r=t.length;let s,i,a,u,d,h=gl(t,0);for(let x=0;x<r-1;++x)if(d=h,h=gl(t,x+1),!(!d||!h)){if(Hc(e[x],0,B7)){n[x]=n[x+1]=0;continue}s=n[x]/e[x],i=n[x+1]/e[x],u=Math.pow(s,2)+Math.pow(i,2),!(u<=9)&&(a=3/Math.sqrt(u),n[x]=s*a*e[x],n[x+1]=i*a*e[x])}}function z7(t,e,n="x"){const r=jC(n),s=t.length;let i,a,u,d=gl(t,0);for(let h=0;h<s;++h){if(a=u,u=d,d=gl(t,h+1),!u)continue;const x=u[n],y=u[r];a&&(i=(x-a[n])/3,u[`cp1${n}`]=x-i,u[`cp1${r}`]=y-i*e[h]),d&&(i=(d[n]-x)/3,u[`cp2${n}`]=x+i,u[`cp2${r}`]=y+i*e[h])}}function W7(t,e="x"){const n=jC(e),r=t.length,s=Array(r).fill(0),i=Array(r);let a,u,d,h=gl(t,0);for(a=0;a<r;++a)if(u=d,d=h,h=gl(t,a+1),!!d){if(h){const x=h[e]-d[e];s[a]=x!==0?(h[n]-d[n])/x:0}i[a]=u?h?Fs(s[a-1])!==Fs(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}V7(t,s,i),z7(t,i,e)}function Fd(t,e,n){return Math.max(Math.min(t,n),e)}function H7(t,e){let n,r,s,i,a,u=Au(t[0],e);for(n=0,r=t.length;n<r;++n)a=i,i=u,u=n<r-1&&Au(t[n+1],e),i&&(s=t[n],a&&(s.cp1x=Fd(s.cp1x,e.left,e.right),s.cp1y=Fd(s.cp1y,e.top,e.bottom)),u&&(s.cp2x=Fd(s.cp2x,e.left,e.right),s.cp2y=Fd(s.cp2y,e.top,e.bottom)))}function $7(t,e,n,r,s){let i,a,u,d;if(e.spanGaps&&(t=t.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")W7(t,s);else{let h=r?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)u=t[i],d=U7(h,u,t[Math.min(i+1,a-(r?0:1))%a],e.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,h=u}e.capBezierPoints&&H7(t,n)}function _x(){return typeof window<"u"&&typeof document<"u"}function Sx(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function df(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const c0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function G7(t,e){return c0(t).getPropertyValue(e)}const q7=["top","right","bottom","left"];function Ho(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=q7[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Y7=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function X7(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let a=!1,u,d;if(Y7(s,i,t.target))u=s,d=i;else{const h=e.getBoundingClientRect();u=r.clientX-h.left,d=r.clientY-h.top,a=!0}return{x:u,y:d,box:a}}function No(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=c0(n),i=s.boxSizing==="border-box",a=Ho(s,"padding"),u=Ho(s,"border","width"),{x:d,y:h,box:x}=X7(t,n),y=a.left+(x&&u.left),b=a.top+(x&&u.top);let{width:_,height:C}=e;return i&&(_-=a.width+u.width,C-=a.height+u.height),{x:Math.round((d-y)/_*n.width/r),y:Math.round((h-b)/C*n.height/r)}}function K7(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Sx(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const a=i.getBoundingClientRect(),u=c0(i),d=Ho(u,"border","width"),h=Ho(u,"padding");e=a.width-h.width-d.width,n=a.height-h.height-d.height,r=df(u.maxWidth,i,"clientWidth"),s=df(u.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||lf,maxHeight:s||lf}}const Bd=t=>Math.round(t*10)/10;function Z7(t,e,n,r){const s=c0(t),i=Ho(s,"margin"),a=df(s.maxWidth,t,"clientWidth")||lf,u=df(s.maxHeight,t,"clientHeight")||lf,d=K7(t,e,n);let{width:h,height:x}=d;if(s.boxSizing==="content-box"){const b=Ho(s,"border","width"),_=Ho(s,"padding");h-=_.width+b.width,x-=_.height+b.height}return h=Math.max(0,h-i.width),x=Math.max(0,r?h/r:x-i.height),h=Bd(Math.min(h,a,d.maxWidth)),x=Bd(Math.min(x,u,d.maxHeight)),h&&!x&&(x=Bd(h/2)),(e!==void 0||n!==void 0)&&r&&d.height&&x>d.height&&(x=d.height,h=Bd(Math.floor(x*r))),{width:h,height:x}}function Q2(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||a.height!==s||a.width!==i?(t.currentDevicePixelRatio=r,a.height=s,a.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Q7=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_x()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function J2(t,e){const n=G7(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function To(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function J7(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function ej(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=To(t,s,n),u=To(s,i,n),d=To(i,e,n),h=To(a,u,n),x=To(u,d,n);return To(h,x,n)}const tj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},nj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function el(t,e,n){return t?tj(e,n):nj()}function DC(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function LC(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function FC(t){return t==="angle"?{between:Cu,compare:r7,normalize:Ri}:{between:Wi,compare:(e,n)=>e-n,normalize:e=>e}}function eb({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function rj(t,e,n){const{property:r,start:s,end:i}=n,{between:a,normalize:u}=FC(r),d=e.length;let{start:h,end:x,loop:y}=t,b,_;if(y){for(h+=d,x+=d,b=0,_=d;b<_&&a(u(e[h%d][r]),s,i);++b)h--,x--;h%=d,x%=d}return x<h&&(x+=d),{start:h,end:x,loop:y,style:t.style}}function sj(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,a=e.length,{compare:u,between:d,normalize:h}=FC(r),{start:x,end:y,loop:b,style:_}=rj(t,e,n),C=[];let N=!1,k=null,E,A,I;const j=()=>d(s,I,E)&&u(s,I)!==0,F=()=>u(i,E)===0||d(i,I,E),z=()=>N||j(),O=()=>!N||F();for(let R=x,M=x;R<=y;++R)A=e[R%a],!A.skip&&(E=h(A[r]),E!==I&&(N=d(E,s,i),k===null&&z()&&(k=u(E,s)===0?R:M),k!==null&&O()&&(C.push(eb({start:k,end:R,loop:b,count:a,style:_})),k=null),M=R,I=E));return k!==null&&C.push(eb({start:k,end:y,loop:b,count:a,style:_})),C}function ij(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=sj(r[s],t.points,e);i.length&&n.push(...i)}return n}function oj(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function aj(t,e,n,r){const s=t.length,i=[];let a=e,u=t[e],d;for(d=e+1;d<=n;++d){const h=t[d%s];h.skip||h.stop?u.skip||(r=!1,i.push({start:e%s,end:(d-1)%s,loop:r}),e=a=h.stop?d:null):(a=d,u.skip&&(e=d)),u=h}return a!==null&&i.push({start:e%s,end:a%s,loop:r}),i}function lj(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:a,end:u}=oj(n,s,i,r);if(r===!0)return tb(t,[{start:a,end:u,loop:i}],n,e);const d=u<a?u+s:u,h=!!t._fullLoop&&a===0&&u===s-1;return tb(t,aj(n,a,d,h),n,e)}function tb(t,e,n,r){return!r||!r.setContext||!n?e:cj(t,e,n,r)}function cj(t,e,n,r){const s=t._chart.getContext(),i=nb(t.options),{_datasetIndex:a,options:{spanGaps:u}}=t,d=n.length,h=[];let x=i,y=e[0].start,b=y;function _(C,N,k,E){const A=u?-1:1;if(C!==N){for(C+=d;n[C%d].skip;)C-=A;for(;n[N%d].skip;)N+=A;C%d!==N%d&&(h.push({start:C%d,end:N%d,loop:k,style:E}),x=E,y=N%d)}}for(const C of e){y=u?y:C.start;let N=n[y%d],k;for(b=y+1;b<=C.end;b++){const E=n[b%d];k=nb(r.setContext(oa(s,{type:"segment",p0:N,p1:E,p0DataIndex:(b-1)%d,p1DataIndex:b%d,datasetIndex:a}))),uj(k,x)&&_(y,b-1,C.loop,x),N=E,x=k}y<b-1&&_(y,b-1,C.loop,x)}return h}function nb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function uj(t,e){if(!e)return!1;const n=[],r=function(s,i){return mx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class dj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],a=n.duration;i.forEach(u=>u({chart:e,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=AC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,u=!1,d;for(;a>=0;--a)d=i[a],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(e),u=!0):(i[a]=i[i.length-1],i.pop());u&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qs=new dj;const rb="transparent",hj={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=G2(t||rb),s=r.valid&&G2(e||rb);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class fj{constructor(e,n,r,s){const i=n[r];s=Ld([e.to,s,i,e.from]);const a=Ld([e.from,i,s]);this._active=!0,this._fn=e.fn||hj[e.type||typeof a],this._easing=$c[e.easing]||$c.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ld([e.to,n,s,e.from]),this._from=Ld([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,a=this._loop,u=this._to;let d;if(this._active=i!==u&&(a||n<r),!this._active){this._target[s]=u,this._notify(!0);return}if(n<0){this._target[s]=i;return}d=n/r%2,d=a&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[s]=this._fn(i,u,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class BC{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!St(e))return;const n=Object.keys(En.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!St(i))return;const a={};for(const u of n)a[u]=i[u];(Mn(i.properties)&&i.properties||[s]).forEach(u=>{(u===s||!r.has(u))&&r.set(u,a)})})}_animateOptions(e,n){const r=n.options,s=gj(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&mj(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),a=Object.keys(n),u=Date.now();let d;for(d=a.length-1;d>=0;--d){const h=a[d];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(e,n));continue}const x=n[h];let y=i[h];const b=r.get(h);if(y)if(b&&y.active()){y.update(b,x,u);continue}else y.cancel();if(!b||!b.duration){e[h]=x;continue}i[h]=y=new fj(b,e,h,x),s.push(y)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return qs.add(this._chart,r),!0}}function mj(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function gj(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function sb(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function pj(t,e,n){if(n===!1)return!1;const r=sb(t,n),s=sb(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function xj(t){let e,n,r,s;return St(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function UC(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function ib(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let a,u,d,h;if(e===null)return;let x=!1;for(a=0,u=s.length;a<u;++a){if(d=+s[a],d===n){if(x=!0,r.all)continue;break}h=t.values[d],is(h)&&(i||e===0||Fs(e)===Fs(h))&&(e+=h)}return!x&&!r.all?0:e}function yj(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",a=Object.keys(t),u=new Array(a.length);let d,h,x;for(d=0,h=a.length;d<h;++d)x=a[d],u[d]={[s]:x,[i]:t[x]};return u}function Tm(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function wj(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function bj(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function vj(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function ob(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function ab(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:u}=r,d=i.axis,h=a.axis,x=wj(i,a,r),y=e.length;let b;for(let _=0;_<y;++_){const C=e[_],{[d]:N,[h]:k}=C,E=C._stacks||(C._stacks={});b=E[h]=vj(s,x,N),b[u]=k,b._top=ob(b,a,!0,r.type),b._bottom=ob(b,a,!1,r.type);const A=b._visualValues||(b._visualValues={});A[u]=k}}function Im(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function _j(t,e){return oa(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Sj(t,e,n){return oa(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function rc(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Rm=t=>t==="reset"||t==="none",lb=(t,e)=>e?t:Object.assign({},t),Ej=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:UC(n,!0),values:null};class tl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(y,b,_,C)=>y==="x"?b:y==="r"?C:_,i=n.xAxisID=ct(r.xAxisID,Im(e,"x")),a=n.yAxisID=ct(r.yAxisID,Im(e,"y")),u=n.rAxisID=ct(r.rAxisID,Im(e,"r")),d=n.indexAxis,h=n.iAxisID=s(d,i,a,u),x=n.vAxisID=s(d,a,i,u);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&W2(this._data,this),e._stacked&&rc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(St(n)){const s=this._cachedMeta;this._data=yj(n,s)}else if(r!==n){if(r){W2(r,this);const s=this._cachedMeta;rc(s),s._parsed=[]}n&&Object.isExtensible(n)&&a7(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Tm(n.vScale,n),n.stack!==r.stack&&(s=!0,rc(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(ab(this,n._parsed),n._stacked=Tm(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:a}=r,u=i.axis;let d=e===0&&n===s.length?!0:r._sorted,h=e>0&&r._parsed[e-1],x,y,b;if(this._parsing===!1)r._parsed=s,r._sorted=!0,b=s;else{Mn(s[e])?b=this.parseArrayData(r,s,e,n):St(s[e])?b=this.parseObjectData(r,s,e,n):b=this.parsePrimitiveData(r,s,e,n);const _=()=>y[u]===null||h&&y[u]<h[u];for(x=0;x<n;++x)r._parsed[x+e]=y=b[x],d&&(_()&&(d=!1),h=y);r._sorted=d}a&&ab(this,b)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:a}=e,u=i.axis,d=a.axis,h=i.getLabels(),x=i===a,y=new Array(s);let b,_,C;for(b=0,_=s;b<_;++b)C=b+r,y[b]={[u]:x||i.parse(h[C],C),[d]:a.parse(n[C],C)};return y}parseArrayData(e,n,r,s){const{xScale:i,yScale:a}=e,u=new Array(s);let d,h,x,y;for(d=0,h=s;d<h;++d)x=d+r,y=n[x],u[d]={x:i.parse(y[0],x),y:a.parse(y[1],x)};return u}parseObjectData(e,n,r,s){const{xScale:i,yScale:a}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,h=new Array(s);let x,y,b,_;for(x=0,y=s;x<y;++x)b=x+r,_=n[b],h[x]={x:i.parse(ea(_,u),b),y:a.parse(ea(_,d),b)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,a=n[e.axis],u={keys:UC(s,!0),values:n._stacks[e.axis]._visualValues};return ib(u,a,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let a=i===null?NaN:i;const u=s&&r._stacks[n.axis];s&&u&&(s.values=u,a=ib(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,a=s.length,u=this._getOtherScale(e),d=Ej(n,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:y}=bj(u);let b,_;function C(){_=s[b];const N=_[u.axis];return!is(_[e.axis])||x>N||y<N}for(b=0;b<a&&!(!C()&&(this.updateRangeFromParsed(h,e,_,d),i));++b);if(i){for(b=a-1;b>=0;--b)if(!C()){this.updateRangeFromParsed(h,e,_,d);break}}return h}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,a;for(s=0,i=n.length;s<i;++s)a=n[s][e.axis],is(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=xj(ct(this.options.clip,pj(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,a=[],u=this._drawStart||0,d=this._drawCount||s.length-u,h=this.options.drawActiveElementsOnTop;let x;for(r.dataset&&r.dataset.draw(e,i,u,d),x=u;x<u+d;++x){const y=s[x];y.hidden||(y.active&&h?a.push(y):y.draw(e,i))}for(x=0;x<a.length;++x)a[x].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=Sj(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=_j(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,a=e+"-"+n,u=i[a],d=this.enableOptionSharing&&Eu(r);if(u)return lb(u,d);const h=this.chart.config,x=h.datasetElementScopeKeys(this._type,e),y=s?[`${e}Hover`,"hover",e,""]:[e,""],b=h.getOptionScopes(this.getDataset(),x),_=Object.keys(En.elements[e]),C=()=>this.getContext(r,s,n),N=h.resolveNamedOptions(b,_,C,y);return N.$shared&&(N.$shared=d,i[a]=Object.freeze(lb(N,d))),N}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,u=i[a];if(u)return u;let d;if(s.options.animation!==!1){const x=this.chart.config,y=x.datasetAnimationScopeKeys(this._type,n),b=x.getOptionScopes(this.getDataset(),y);d=x.createResolver(b,this.getContext(e,r,n))}const h=new BC(s,d&&d.animations);return d&&d._cacheable&&(i[a]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Rm(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:a}}updateElement(e,n,r,s){Rm(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Rm(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[u,d,h]of this._syncList)this[u](d,h);this._syncList=[];const s=r.length,i=n.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,a=e+n;let u;const d=h=>{for(h.length+=n,u=h.length-1;u>=a;u--)h[u]=h[u-n]};for(d(i),u=e;u<a;++u)i[u]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&rc(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}xe(tl,"defaults",{}),xe(tl,"datasetElementType",null),xe(tl,"dataElementType",null);function Cj(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=CC(r.sort((s,i)=>s-i))}return t._cache.$bar}function Aj(t){const e=t.iScale,n=Cj(e,t.type);let r=e._length,s,i,a,u;const d=()=>{a===32767||a===-32768||(Eu(u)&&(r=Math.min(r,Math.abs(a-u)||r)),u=a)};for(s=0,i=n.length;s<i;++s)a=e.getPixelForValue(n[s]),d();for(u=void 0,s=0,i=e.ticks.length;s<i;++s)a=e.getPixelForTick(s),d();return r}function kj(t,e,n,r){const s=n.barThickness;let i,a;return Bt(s)?(i=e.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:e.pixels[t]-i/2}}function Nj(t,e,n,r){const s=e.pixels,i=s[t];let a=t>0?s[t-1]:null,u=t<s.length-1?s[t+1]:null;const d=n.categoryPercentage;a===null&&(a=i-(u===null?e.end-e.start:u-i)),u===null&&(u=i+i-a);const h=i-(i-Math.min(a,u))/2*d;return{chunk:Math.abs(u-a)/2*d/r,ratio:n.barPercentage,start:h}}function Tj(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),a=Math.min(s,i),u=Math.max(s,i);let d=a,h=u;Math.abs(a)>Math.abs(u)&&(d=u,h=a),e[n.axis]=h,e._custom={barStart:d,barEnd:h,start:s,end:i,min:a,max:u}}function VC(t,e,n,r){return Mn(t)?Tj(t,e,n,r):e[n.axis]=n.parse(t,r),e}function cb(t,e,n,r){const s=t.iScale,i=t.vScale,a=s.getLabels(),u=s===i,d=[];let h,x,y,b;for(h=n,x=n+r;h<x;++h)b=e[h],y={},y[s.axis]=u||s.parse(a[h],h),d.push(VC(b,y,i,h));return d}function Pm(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Ij(t,e,n){return t!==0?Fs(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Rj(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function Pj(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:u,reverse:d,top:h,bottom:x}=Rj(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=h:(n._bottom||0)===r?s=x:(i[ub(x,a,u,d)]=!0,s=h)),i[ub(s,a,u,d)]=!0,t.borderSkipped=i}function ub(t,e,n,r){return r?(t=Oj(t,e,n),t=db(t,n,e)):t=db(t,e,n),t}function Oj(t,e,n){return t===e?n:t===n?e:t}function db(t,e,n){return t==="start"?e:t==="end"?n:t}function Mj(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ph extends tl{parsePrimitiveData(e,n,r,s){return cb(e,n,r,s)}parseArrayData(e,n,r,s){return cb(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:a}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,h=i.axis==="x"?u:d,x=a.axis==="x"?u:d,y=[];let b,_,C,N;for(b=r,_=r+s;b<_;++b)N=n[b],C={},C[i.axis]=i.parse(ea(N,h),b),y.push(VC(ea(N,x),C,a,b));return y}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),a=i._custom,u=Pm(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:a,_cachedMeta:{vScale:u}}=this,d=u.getBasePixel(),h=u.isHorizontal(),x=this._getRuler(),{sharedOptions:y,includeOptions:b}=this._getSharedOptions(n,s);for(let _=n;_<n+r;_++){const C=this.getParsed(_),N=i||Bt(C[u.axis])?{base:d,head:d}:this._calculateBarValuePixels(_),k=this._calculateBarIndexPixels(_,x),E=(C._stacks||{})[u.axis],A={horizontal:h,base:N.base,enableBorderRadius:!E||Pm(C._custom)||a===E._top||a===E._bottom,x:h?N.head:k.center,y:h?k.center:N.head,height:h?k.size:Math.abs(N.size),width:h?Math.abs(N.size):k.size};b&&(A.options=y||this.resolveDataElementOptions(_,e[_].active?"active":s));const I=A.options||e[_].options;Pj(A,I,E,a),Mj(A,I,x.ratio),this.updateElement(e[_],_,A,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(x=>x.controller.options.grouped),i=r.options.stacked,a=[],u=this._cachedMeta.controller.getParsed(n),d=u&&u[r.axis],h=x=>{const y=x._parsed.find(_=>_[r.axis]===d),b=y&&y[x.vScale.axis];if(Bt(b)||isNaN(b))return!0};for(const x of s)if(!(n!==void 0&&h(x))&&((i===!1||a.indexOf(x.stack)===-1||i===void 0&&x.stack===void 0)&&a.push(x.stack),x.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,a;for(i=0,a=n.data.length;i<a;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const u=e.barThickness;return{min:u||Aj(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:a}}=this,u=i||0,d=this.getParsed(e),h=d._custom,x=Pm(h);let y=d[n.axis],b=0,_=r?this.applyStack(n,d,r):y,C,N;_!==y&&(b=_-y,_=y),x&&(y=h.barStart,_=h.barEnd-h.barStart,y!==0&&Fs(y)!==Fs(h.barEnd)&&(b=0),b+=y);const k=!Bt(i)&&!x?i:b;let E=n.getPixelForValue(k);if(this.chart.getDataVisibility(e)?C=n.getPixelForValue(b+_):C=E,N=C-E,Math.abs(N)<a){N=Ij(N,n,u)*a,y===u&&(E-=N/2);const A=n.getPixelForDecimal(0),I=n.getPixelForDecimal(1),j=Math.min(A,I),F=Math.max(A,I);E=Math.max(Math.min(E,F),j),C=E+N,r&&!x&&(d._stacks[n.axis]._visualValues[s]=n.getValueForPixel(C)-n.getValueForPixel(E))}if(E===n.getPixelForValue(u)){const A=Fs(N)*n.getLineWidthForValue(u)/2;E+=A,N-=A}return{size:N,base:E,head:C,center:C+N/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,a=ct(s.maxBarThickness,1/0);let u,d;if(n.grouped){const h=i?this._getStackCount(e):n.stackCount,x=s.barThickness==="flex"?Nj(e,n,s,h):kj(e,n,s,h),y=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);u=x.start+x.chunk*y+x.chunk/2,d=Math.min(a,x.chunk*x.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),d=Math.min(a,n.min*n.ratio);return{base:u-d/2,head:u+d/2,center:u,size:d}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}xe(ph,"id","bar"),xe(ph,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),xe(ph,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function jj(t,e,n){let r=1,s=1,i=0,a=0;if(e<mn){const u=t,d=u+e,h=Math.cos(u),x=Math.sin(u),y=Math.cos(d),b=Math.sin(d),_=(I,j,F)=>Cu(I,u,d,!0)?1:Math.max(j,j*n,F,F*n),C=(I,j,F)=>Cu(I,u,d,!0)?-1:Math.min(j,j*n,F,F*n),N=_(0,h,y),k=_(Dn,x,b),E=C(gn,h,y),A=C(gn+Dn,x,b);r=(N-E)/2,s=(k-A)/2,i=-(N+E)/2,a=-(k+A)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}class Ec extends tl{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=d=>+r[d];if(St(r[e])){const{key:d="value"}=this._parsing;i=h=>+ea(r[h],d)}let a,u;for(a=e,u=e+n;a<u;++a)s._parsed[a]=i(a)}}_getRotation(){return ni(this.options.rotation-90)}_getCircumference(){return ni(this.options.circumference)}_getRotationExtents(){let e=mn,n=-mn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),a=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+a)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-a)/2,0),d=Math.min(HM(this.options.cutout,u),1),h=this._getRingWeight(this.index),{circumference:x,rotation:y}=this._getRotationExtents(),{ratioX:b,ratioY:_,offsetX:C,offsetY:N}=jj(y,x,d),k=(r.width-a)/b,E=(r.height-a)/_,A=Math.max(Math.min(k,E)/2,0),I=bC(this.options.radius,A),j=Math.max(I*d,0),F=(I-j)/this._getVisibleDatasetWeightTotal();this.offsetX=C*I,this.offsetY=N*I,s.total=this.calculateTotal(),this.outerRadius=I-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*h,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/mn)}updateElements(e,n,r,s){const i=s==="reset",a=this.chart,u=a.chartArea,h=a.options.animation,x=(u.left+u.right)/2,y=(u.top+u.bottom)/2,b=i&&h.animateScale,_=b?0:this.innerRadius,C=b?0:this.outerRadius,{sharedOptions:N,includeOptions:k}=this._getSharedOptions(n,s);let E=this._getRotation(),A;for(A=0;A<n;++A)E+=this._circumference(A,i);for(A=n;A<n+r;++A){const I=this._circumference(A,i),j=e[A],F={x:x+this.offsetX,y:y+this.offsetY,startAngle:E,endAngle:E+I,circumference:I,outerRadius:C,innerRadius:_};k&&(F.options=N||this.resolveDataElementOptions(A,j.active?"active":s)),E+=I,this.updateElement(j,A,F,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?mn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=gx(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,a,u,d;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,u=a.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)d=u.resolveDataElementOptions(s),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ct(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}xe(Ec,"id","doughnut"),xe(Ec,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),xe(Ec,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),xe(Ec,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((i,a)=>{const d=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:s,lineWidth:d.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});function vo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ex{constructor(e){xe(this,"options");this.options=e||{}}static override(e){Object.assign(Ex.prototype,e)}init(){}formats(){return vo()}parse(){return vo()}format(){return vo()}add(){return vo()}diff(){return vo()}startOf(){return vo()}endOf(){return vo()}}var zC={_date:Ex};function Dj(t,e,n,r){const{controller:s,data:i,_sorted:a}=t,u=s._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&a&&i.length){const h=u._reversePixels?i7:p1;if(r){if(s._sharedOptions){const x=i[0],y=typeof x.getRange=="function"&&x.getRange(e);if(y){const b=h(i,e,n-y),_=h(i,e,n+y);return{lo:b.lo,hi:_.hi}}}}else{const x=h(i,e,n);if(d){const{vScale:y}=s._cachedMeta,{_parsed:b}=t,_=b.slice(0,x.lo+1).reverse().findIndex(N=>!Bt(N[y.axis]));x.lo-=Math.max(0,_);const C=b.slice(x.hi).findIndex(N=>!Bt(N[y.axis]));x.hi+=Math.max(0,C)}return x}}return{lo:0,hi:i.length-1}}function u0(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),a=n[e];for(let u=0,d=i.length;u<d;++u){const{index:h,data:x}=i[u],{lo:y,hi:b}=Dj(i[u],e,a,s);for(let _=y;_<=b;++_){const C=x[_];C.skip||r(C,h,_)}}}function Lj(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,a=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function Om(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||u0(t,n,e,function(u,d,h){!s&&!Au(u,t.chartArea,0)||u.inRange(e.x,e.y,r)&&i.push({element:u,datasetIndex:d,index:h})},!0),i}function Fj(t,e,n,r){let s=[];function i(a,u,d){const{startAngle:h,endAngle:x}=a.getProps(["startAngle","endAngle"],r),{angle:y}=SC(a,{x:e.x,y:e.y});Cu(y,h,x)&&s.push({element:a,datasetIndex:u,index:d})}return u0(t,n,e,i),s}function Bj(t,e,n,r,s,i){let a=[];const u=Lj(n);let d=Number.POSITIVE_INFINITY;function h(x,y,b){const _=x.inRange(e.x,e.y,s);if(r&&!_)return;const C=x.getCenterPoint(s);if(!(!!i||t.isPointInArea(C))&&!_)return;const k=u(e,C);k<d?(a=[{element:x,datasetIndex:y,index:b}],d=k):k===d&&a.push({element:x,datasetIndex:y,index:b})}return u0(t,n,e,h),a}function Mm(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?Fj(t,e,n,s):Bj(t,e,n,r,s,i)}function hb(t,e,n,r,s){const i=[],a=n==="x"?"inXRange":"inYRange";let u=!1;return u0(t,n,e,(d,h,x)=>{d[a]&&d[a](e[n],s)&&(i.push({element:d,datasetIndex:h,index:x}),u=u||d.inRange(e.x,e.y,s))}),r&&!u?[]:i}var Uj={modes:{index(t,e,n,r){const s=No(e,t),i=n.axis||"x",a=n.includeInvisible||!1,u=n.intersect?Om(t,s,i,r,a):Mm(t,s,i,!1,r,a),d=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const x=u[0].index,y=h.data[x];y&&!y.skip&&d.push({element:y,datasetIndex:h.index,index:x})}),d):[]},dataset(t,e,n,r){const s=No(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;let u=n.intersect?Om(t,s,i,r,a):Mm(t,s,i,!1,r,a);if(u.length>0){const d=u[0].datasetIndex,h=t.getDatasetMeta(d).data;u=[];for(let x=0;x<h.length;++x)u.push({element:h[x],datasetIndex:d,index:x})}return u},point(t,e,n,r){const s=No(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return Om(t,s,i,r,a)},nearest(t,e,n,r){const s=No(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return Mm(t,s,i,n.intersect,r,a)},x(t,e,n,r){const s=No(e,t);return hb(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=No(e,t);return hb(t,s,"y",n.intersect,r)}}};const WC=["left","top","right","bottom"];function sc(t,e){return t.filter(n=>n.pos===e)}function fb(t,e){return t.filter(n=>WC.indexOf(n.pos)===-1&&n.box.axis===e)}function ic(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Vj(t){const e=[];let n,r,s,i,a,u;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:a,stackWeight:u=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:u});return e}function zj(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!WC.includes(s))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function Wj(t,e){const n=zj(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,a,u;for(i=0,a=t.length;i<a;++i){u=t[i];const{fullSize:d}=u.box,h=n[u.stack],x=h&&u.stackWeight/h.weight;u.horizontal?(u.width=x?x*r:d&&e.availableWidth,u.height=s):(u.width=r,u.height=x?x*s:d&&e.availableHeight)}return n}function Hj(t){const e=Vj(t),n=ic(e.filter(h=>h.box.fullSize),!0),r=ic(sc(e,"left"),!0),s=ic(sc(e,"right")),i=ic(sc(e,"top"),!0),a=ic(sc(e,"bottom")),u=fb(e,"x"),d=fb(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(d).concat(a).concat(u),chartArea:sc(e,"chartArea"),vertical:r.concat(s).concat(d),horizontal:i.concat(a).concat(u)}}function mb(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function HC(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function $j(t,e,n,r){const{pos:s,box:i}=n,a=t.maxPadding;if(!St(s)){n.size&&(t[s]-=n.size);const y=r[n.stack]||{size:0,count:1};y.size=Math.max(y.size,n.horizontal?i.height:i.width),n.size=y.size/y.count,t[s]+=n.size}i.getPadding&&HC(a,i.getPadding());const u=Math.max(0,e.outerWidth-mb(a,t,"left","right")),d=Math.max(0,e.outerHeight-mb(a,t,"top","bottom")),h=u!==t.w,x=d!==t.h;return t.w=u,t.h=d,n.horizontal?{same:h,other:x}:{same:x,other:h}}function Gj(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function qj(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(e[a],n[a])}),i}return r(t?["left","right"]:["top","bottom"])}function Cc(t,e,n,r){const s=[];let i,a,u,d,h,x;for(i=0,a=t.length,h=0;i<a;++i){u=t[i],d=u.box,d.update(u.width||e.w,u.height||e.h,qj(u.horizontal,e));const{same:y,other:b}=$j(e,n,u,r);h|=y&&s.length,x=x||b,d.fullSize||s.push(u)}return h&&Cc(s,e,n,r)||x}function Ud(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function gb(t,e,n,r){const s=n.padding;let{x:i,y:a}=e;for(const u of t){const d=u.box,h=r[u.stack]||{placed:0,weight:1},x=u.stackWeight/h.weight||1;if(u.horizontal){const y=e.w*x,b=h.size||d.height;Eu(h.start)&&(a=h.start),d.fullSize?Ud(d,s.left,a,n.outerWidth-s.right-s.left,b):Ud(d,e.left+h.placed,a,y,b),h.start=a,h.placed+=y,a=d.bottom}else{const y=e.h*x,b=h.size||d.width;Eu(h.start)&&(i=h.start),d.fullSize?Ud(d,i,s.top,b,n.outerHeight-s.bottom-s.top):Ud(d,i,e.top+h.placed,b,y),h.start=i,h.placed+=y,i=d.right}}e.x=i,e.y=a}var es={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=os(t.options.layout.padding),i=Math.max(e-s.width,0),a=Math.max(n-s.height,0),u=Hj(t.boxes),d=u.vertical,h=u.horizontal;It(t.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const x=d.reduce((N,k)=>k.box.options&&k.box.options.display===!1?N:N+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/x,hBoxMaxHeight:a/2}),b=Object.assign({},s);HC(b,os(r));const _=Object.assign({maxPadding:b,w:i,h:a,x:s.left,y:s.top},s),C=Wj(d.concat(h),y);Cc(u.fullSize,_,y,C),Cc(d,_,y,C),Cc(h,_,y,C)&&Cc(d,_,y,C),Gj(_),gb(u.leftAndTop,_,y,C),_.x+=_.w,_.y+=_.h,gb(u.rightAndBottom,_,y,C),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},It(u.chartArea,N=>{const k=N.box;Object.assign(k,t.chartArea),k.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class $C{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class Yj extends $C{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xh="$chartjs",Xj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pb=t=>t===null||t==="";function Kj(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[xh]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",pb(s)){const i=J2(t,"width");i!==void 0&&(t.width=i)}if(pb(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=J2(t,"height");i!==void 0&&(t.height=i)}return t}const GC=Q7?{passive:!0}:!1;function Zj(t,e,n){t&&t.addEventListener(e,n,GC)}function Qj(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,GC)}function Jj(t,e){const n=Xj[t.type]||t.type,{x:r,y:s}=No(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function hf(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function eD(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const u of i)a=a||hf(u.addedNodes,r),a=a&&!hf(u.removedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function tD(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const u of i)a=a||hf(u.removedNodes,r),a=a&&!hf(u.addedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Nu=new Map;let xb=0;function qC(){const t=window.devicePixelRatio;t!==xb&&(xb=t,Nu.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function nD(t,e){Nu.size||window.addEventListener("resize",qC),Nu.set(t,e)}function rD(t){Nu.delete(t),Nu.size||window.removeEventListener("resize",qC)}function sD(t,e,n){const r=t.canvas,s=r&&Sx(r);if(!s)return;const i=kC((u,d)=>{const h=s.clientWidth;n(u,d),h<s.clientWidth&&n()},window),a=new ResizeObserver(u=>{const d=u[0],h=d.contentRect.width,x=d.contentRect.height;h===0&&x===0||i(h,x)});return a.observe(s),nD(t,i),a}function jm(t,e,n){n&&n.disconnect(),e==="resize"&&rD(t)}function iD(t,e,n){const r=t.canvas,s=kC(i=>{t.ctx!==null&&n(Jj(i,t))},t);return Zj(r,e,s),s}class oD extends $C{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Kj(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[xh])return!1;const r=n[xh].initial;["height","width"].forEach(i=>{const a=r[i];Bt(a)?n.removeAttribute(i):n.setAttribute(i,a)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[xh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),a={attach:eD,detach:tD,resize:sD}[n]||iD;s[n]=a(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:jm,detach:jm,resize:jm}[n]||Qj)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return Z7(e,n,r,s)}isAttached(e){const n=e&&Sx(e);return!!(n&&n.isConnected)}}function aD(t){return!_x()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Yj:oD}var th;let pi=(th=class{constructor(){xe(this,"x");xe(this,"y");xe(this,"active",!1);xe(this,"options");xe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return cf(this.x)&&cf(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},xe(th,"defaults",{}),xe(th,"defaultRoutes"),th);function lD(t,e){const n=t.options.ticks,r=cD(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?dD(e):[],a=i.length,u=i[0],d=i[a-1],h=[];if(a>s)return hD(e,h,i,a/s),h;const x=uD(i,e,s);if(a>0){let y,b;const _=a>1?Math.round((d-u)/(a-1)):null;for(Vd(e,h,x,Bt(_)?0:u-_,u),y=0,b=a-1;y<b;y++)Vd(e,h,x,i[y],i[y+1]);return Vd(e,h,x,d,Bt(_)?e.length:d+_),h}return Vd(e,h,x),h}function cD(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function uD(t,e,n){const r=fD(t),s=e.length/n;if(!r)return Math.max(s,1);const i=QM(r);for(let a=0,u=i.length-1;a<u;a++){const d=i[a];if(d>s)return d}return Math.max(s,1)}function dD(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function hD(t,e,n,r){let s=0,i=n[0],a;for(r=Math.ceil(r),a=0;a<t.length;a++)a===i&&(e.push(t[a]),s++,i=n[s*r])}function Vd(t,e,n,r,s){const i=ct(r,0),a=Math.min(ct(s,t.length),t.length);let u=0,d,h,x;for(n=Math.ceil(n),s&&(d=s-r,n=d/Math.floor(d/n)),x=i;x<0;)u++,x=Math.round(i+u*n);for(h=Math.max(i,0);h<a;h++)h===x&&(e.push(t[h]),u++,x=Math.round(i+u*n))}function fD(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const mD=t=>t==="left"?"right":t==="right"?"left":t,yb=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,wb=(t,e)=>Math.min(e||t,t);function bb(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function gD(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,a=t._endPixel,u=1e-6;let d=t.getPixelForTick(s),h;if(!(n&&(r===1?h=Math.max(d-i,a-d):e===0?h=(t.getPixelForTick(1)-d)/2:h=(d-t.getPixelForTick(s-1))/2,d+=s<e?h:-h,d<i-u||d>a+u)))return d}function pD(t,e){It(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function oc(t){return t.drawTicks?t.tickLength:0}function vb(t,e){if(!t.display)return 0;const n=ir(t.font,e),r=os(t.padding);return(Mn(t.text)?t.text.length:1)*n.lineHeight+r.height}function xD(t,e){return oa(t,{scale:e,type:"scale"})}function yD(t,e,n){return oa(t,{tick:n,index:e,type:"tick"})}function wD(t,e,n){let r=fx(t);return(n&&e!=="right"||!n&&e==="right")&&(r=mD(r)),r}function bD(t,e,n,r){const{top:s,left:i,bottom:a,right:u,chart:d}=t,{chartArea:h,scales:x}=d;let y=0,b,_,C;const N=a-s,k=u-i;if(t.isHorizontal()){if(_=nr(r,i,u),St(n)){const E=Object.keys(n)[0],A=n[E];C=x[E].getPixelForValue(A)+N-e}else n==="center"?C=(h.bottom+h.top)/2+N-e:C=yb(t,n,e);b=u-i}else{if(St(n)){const E=Object.keys(n)[0],A=n[E];_=x[E].getPixelForValue(A)-k+e}else n==="center"?_=(h.left+h.right)/2-k+e:_=yb(t,n,e);C=nr(r,a,s),y=n==="left"?-Dn:Dn}return{titleX:_,titleY:C,maxWidth:b,rotation:y}}class Rl extends pi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Ns(e,Number.POSITIVE_INFINITY),n=Ns(n,Number.NEGATIVE_INFINITY),r=Ns(r,Number.POSITIVE_INFINITY),s=Ns(s,Number.NEGATIVE_INFINITY),{min:Ns(e,r),max:Ns(n,s),minDefined:is(e),maxDefined:is(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:n,max:r};const u=this.getMatchingVisibleMetas();for(let d=0,h=u.length;d<h;++d)a=u[d].controller.getMinMax(this,e),s||(n=Math.min(n,a.min)),i||(r=Math.max(r,a.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Ns(n,Ns(r,n)),max:Ns(r,Ns(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:a}=this.options,u=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=T7(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?bb(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=lD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qt(this.options.afterUpdate,[this])}beforeSetDimensions(){qt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=qt(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){qt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=wb(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let a=s,u,d,h;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const x=this._getLabelSizes(),y=x.widest.width,b=x.highest.height,_=Cr(this.chart.width-y,0,this.maxWidth);u=e.offset?this.maxWidth/r:_/(r-1),y+6>u&&(u=_/(r-(e.offset?.5:1)),d=this.maxHeight-oc(e.grid)-n.padding-vb(e.title,this.chart.options.font),h=Math.sqrt(y*y+b*b),a=n7(Math.min(Math.asin(Cr((x.highest.height+6)/u,-1,1)),Math.asin(Cr(d/h,-1,1))-Math.asin(Cr(b/h,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){qt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,a=this._isVisible(),u=this.isHorizontal();if(a){const d=vb(s,n.options.font);if(u?(e.width=this.maxWidth,e.height=oc(i)+d):(e.height=this.maxHeight,e.width=oc(i)+d),r.display&&this.ticks.length){const{first:h,last:x,widest:y,highest:b}=this._getLabelSizes(),_=r.padding*2,C=ni(this.labelRotation),N=Math.cos(C),k=Math.sin(C);if(u){const E=r.mirror?0:k*y.width+N*b.height;e.height=Math.min(this.maxHeight,e.height+E+_)}else{const E=r.mirror?0:N*y.width+k*b.height;e.width=Math.min(this.maxWidth,e.width+E+_)}this._calculatePadding(h,x,k,N)}}this._handleMargins(),u?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:a},position:u}=this.options,d=this.labelRotation!==0,h=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const x=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,_=0;d?h?(b=s*e.width,_=r*n.height):(b=r*e.height,_=s*n.width):i==="start"?_=n.width:i==="end"?b=e.width:i!=="inner"&&(b=e.width/2,_=n.width/2),this.paddingLeft=Math.max((b-x+a)*this.width/(this.width-x),0),this.paddingRight=Math.max((_-y+a)*this.width/(this.width-y),0)}else{let x=n.height/2,y=e.height/2;i==="start"?(x=0,y=e.height):i==="end"&&(x=n.height,y=0),this.paddingTop=x+a,this.paddingBottom=y+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Bt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=bb(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,a=[],u=[],d=Math.floor(n/wb(n,r));let h=0,x=0,y,b,_,C,N,k,E,A,I,j,F;for(y=0;y<n;y+=d){if(C=e[y].label,N=this._resolveTickFontOptions(y),s.font=k=N.string,E=i[k]=i[k]||{data:{},gc:[]},A=N.lineHeight,I=j=0,!Bt(C)&&!Mn(C))I=Y2(s,E.data,E.gc,I,C),j=A;else if(Mn(C))for(b=0,_=C.length;b<_;++b)F=C[b],!Bt(F)&&!Mn(F)&&(I=Y2(s,E.data,E.gc,I,F),j+=A);a.push(I),u.push(j),h=Math.max(I,h),x=Math.max(j,x)}pD(i,n);const z=a.indexOf(h),O=u.indexOf(x),R=M=>({width:a[M]||0,height:u[M]||0});return{first:R(0),last:R(n-1),widest:R(z),highest:R(O),widths:a,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return s7(this._alignToPixels?bo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=yD(this.getContext(),e,r))}return this.$context||(this.$context=xD(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ni(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,u=i?i.widest.width+a:0,d=i?i.highest.height+a:0;return this.isHorizontal()?d*r>u*s?u/r:d/s:d*s<u*r?d/r:u/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:a,border:u}=s,d=i.offset,h=this.isHorizontal(),y=this.ticks.length+(d?1:0),b=oc(i),_=[],C=u.setContext(this.getContext()),N=C.display?C.width:0,k=N/2,E=function(be){return bo(r,be,N)};let A,I,j,F,z,O,R,M,U,X,V,te;if(a==="top")A=E(this.bottom),O=this.bottom-b,M=A-k,X=E(e.top)+k,te=e.bottom;else if(a==="bottom")A=E(this.top),X=e.top,te=E(e.bottom)-k,O=A+k,M=this.top+b;else if(a==="left")A=E(this.right),z=this.right-b,R=A-k,U=E(e.left)+k,V=e.right;else if(a==="right")A=E(this.left),U=e.left,V=E(e.right)-k,z=A+k,R=this.left+b;else if(n==="x"){if(a==="center")A=E((e.top+e.bottom)/2+.5);else if(St(a)){const be=Object.keys(a)[0],$=a[be];A=E(this.chart.scales[be].getPixelForValue($))}X=e.top,te=e.bottom,O=A+k,M=O+b}else if(n==="y"){if(a==="center")A=E((e.left+e.right)/2);else if(St(a)){const be=Object.keys(a)[0],$=a[be];A=E(this.chart.scales[be].getPixelForValue($))}z=A-k,R=z-b,U=e.left,V=e.right}const fe=ct(s.ticks.maxTicksLimit,y),G=Math.max(1,Math.ceil(y/fe));for(I=0;I<y;I+=G){const be=this.getContext(I),$=i.setContext(be),Q=u.setContext(be),ne=$.lineWidth,J=$.color,oe=Q.dash||[],re=Q.dashOffset,ae=$.tickWidth,q=$.tickColor,le=$.tickBorderDash||[],ue=$.tickBorderDashOffset;j=gD(this,I,d),j!==void 0&&(F=bo(r,j,ne),h?z=R=U=V=F:O=M=X=te=F,_.push({tx1:z,ty1:O,tx2:R,ty2:M,x1:U,y1:X,x2:V,y2:te,width:ne,color:J,borderDash:oe,borderDashOffset:re,tickWidth:ae,tickColor:q,tickBorderDash:le,tickBorderDashOffset:ue}))}return this._ticksLength=y,this._borderValue=A,_}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,a=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:h,padding:x,mirror:y}=i,b=oc(r.grid),_=b+x,C=y?-x:_,N=-ni(this.labelRotation),k=[];let E,A,I,j,F,z,O,R,M,U,X,V,te="middle";if(s==="top")z=this.bottom-C,O=this._getXAxisLabelAlignment();else if(s==="bottom")z=this.top+C,O=this._getXAxisLabelAlignment();else if(s==="left"){const G=this._getYAxisLabelAlignment(b);O=G.textAlign,F=G.x}else if(s==="right"){const G=this._getYAxisLabelAlignment(b);O=G.textAlign,F=G.x}else if(n==="x"){if(s==="center")z=(e.top+e.bottom)/2+_;else if(St(s)){const G=Object.keys(s)[0],be=s[G];z=this.chart.scales[G].getPixelForValue(be)+_}O=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")F=(e.left+e.right)/2-_;else if(St(s)){const G=Object.keys(s)[0],be=s[G];F=this.chart.scales[G].getPixelForValue(be)}O=this._getYAxisLabelAlignment(b).textAlign}n==="y"&&(d==="start"?te="top":d==="end"&&(te="bottom"));const fe=this._getLabelSizes();for(E=0,A=u.length;E<A;++E){I=u[E],j=I.label;const G=i.setContext(this.getContext(E));R=this.getPixelForTick(E)+i.labelOffset,M=this._resolveTickFontOptions(E),U=M.lineHeight,X=Mn(j)?j.length:1;const be=X/2,$=G.color,Q=G.textStrokeColor,ne=G.textStrokeWidth;let J=O;a?(F=R,O==="inner"&&(E===A-1?J=this.options.reverse?"left":"right":E===0?J=this.options.reverse?"right":"left":J="center"),s==="top"?h==="near"||N!==0?V=-X*U+U/2:h==="center"?V=-fe.highest.height/2-be*U+U:V=-fe.highest.height+U/2:h==="near"||N!==0?V=U/2:h==="center"?V=fe.highest.height/2-be*U:V=fe.highest.height-X*U,y&&(V*=-1),N!==0&&!G.showLabelBackdrop&&(F+=U/2*Math.sin(N))):(z=R,V=(1-X)*U/2);let oe;if(G.showLabelBackdrop){const re=os(G.backdropPadding),ae=fe.heights[E],q=fe.widths[E];let le=V-re.top,ue=0-re.left;switch(te){case"middle":le-=ae/2;break;case"bottom":le-=ae;break}switch(O){case"center":ue-=q/2;break;case"right":ue-=q;break;case"inner":E===A-1?ue-=q:E>0&&(ue-=q/2);break}oe={left:ue,top:le,width:q+re.width,height:ae+re.height,color:G.backdropColor}}k.push({label:j,font:M,textOffset:V,options:{rotation:N,color:$,strokeColor:Q,strokeWidth:ne,textAlign:J,textBaseline:te,translation:[F,z],backdrop:oe}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ni(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),u=e+i,d=a.widest.width;let h,x;return n==="left"?s?(x=this.right+i,r==="near"?h="left":r==="center"?(h="center",x+=d/2):(h="right",x+=d)):(x=this.right-u,r==="near"?h="right":r==="center"?(h="center",x-=d/2):(h="left",x=this.left)):n==="right"?s?(x=this.left+i,r==="near"?h="right":r==="center"?(h="center",x-=d/2):(h="left",x-=d)):(x=this.left+u,r==="near"?h="left":r==="center"?(h="center",x+=d/2):(h="right",x=this.right)):h="right",{textAlign:h,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:a}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,a),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const u=(d,h,x)=>{!x.width||!x.color||(r.save(),r.lineWidth=x.width,r.strokeStyle=x.color,r.setLineDash(x.borderDash||[]),r.lineDashOffset=x.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(n.display)for(i=0,a=s.length;i<a;++i){const d=s[i];n.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const u=s.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let h,x,y,b;this.isHorizontal()?(h=bo(e,this.left,a)-a/2,x=bo(e,this.right,u)+u/2,y=b=d):(y=bo(e,this.top,a)-a/2,b=bo(e,this.bottom,u)+u/2,h=x=d),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(h,y),n.lineTo(x,b),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&px(r,s);const i=this.getLabelItems(e);for(const a of i){const u=a.options,d=a.font,h=a.label,x=a.textOffset;ku(r,h,0,x,d,u)}s&&xx(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=ir(r.font),a=os(r.padding),u=r.align;let d=i.lineHeight/2;n==="bottom"||n==="center"||St(n)?(d+=a.bottom,Mn(r.text)&&(d+=i.lineHeight*(r.text.length-1))):d+=a.top;const{titleX:h,titleY:x,maxWidth:y,rotation:b}=bD(this,d,n,u);ku(e,r.text,0,0,i,{color:r.color,maxWidth:y,rotation:b,textAlign:wD(u,n,s),textBaseline:"middle",translation:[h,x]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ct(e.grid&&e.grid.z,-1),s=ct(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Rl.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,a;for(i=0,a=n.length;i<a;++i){const u=n[i];u[r]===this.id&&(!e||u.type===e)&&s.push(u)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ir(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class zd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;SD(n)&&(r=this.register(n));const s=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,vD(e,a,r),this.override&&En.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in En[s]&&(delete En[s][r],this.override&&delete ta[r])}}function vD(t,e,n){const r=Su(Object.create(null),[n?En.get(n):{},En.get(e),t.defaults]);En.set(e,r),t.defaultRoutes&&_D(e,t.defaultRoutes),t.descriptors&&En.describe(e,t.descriptors)}function _D(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),a=e[n].split("."),u=a.pop(),d=a.join(".");En.route(i,s,d,u)})}function SD(t){return"id"in t&&"defaults"in t}class ED{constructor(){this.controllers=new zd(tl,"datasets",!0),this.elements=new zd(pi,"elements"),this.plugins=new zd(Object,"plugins"),this.scales=new zd(Rl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):It(s,a=>{const u=r||this._getRegistryForType(a);this._exec(e,u,a)})})}_exec(e,n,r){const s=dx(e);qt(r["before"+s],[],r),n[e](r),qt(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Ps=new ED;class CD{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,n,r,s){s=s||{};for(const i of e){const a=i.plugin,u=a[r],d=[n,s,i.options];if(qt(u,d,a)===!1&&s.cancelable)return!1}return!0}invalidate(){Bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ct(r.options&&r.options.plugins,{}),i=AD(r);return s===!1&&!n?[]:ND(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,a)=>i.filter(u=>!a.some(d=>u.plugin.id===d.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function AD(t){const e={},n=[],r=Object.keys(Ps.plugins.items);for(let i=0;i<r.length;i++)n.push(Ps.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];n.indexOf(a)===-1&&(n.push(a),e[a.id]=!0)}return{plugins:n,localIds:e}}function kD(t,e){return!e&&t===!1?null:t===!0?{}:t}function ND(t,{plugins:e,localIds:n},r,s){const i=[],a=t.getContext();for(const u of e){const d=u.id,h=kD(r[d],s);h!==null&&i.push({plugin:u,options:TD(t.config,{plugin:u,local:n[d]},h,a)})}return i}function TD(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(r,i);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function w1(t,e){const n=En.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function ID(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function RD(t,e){return t===e?"_index_":"_value_"}function _b(t){if(t==="x"||t==="y"||t==="r")return t}function PD(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function b1(t,...e){if(_b(t))return t;for(const n of e){const r=n.axis||PD(n.position)||t.length>1&&_b(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Sb(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function OD(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Sb(t,"x",n[0])||Sb(t,"y",n[0])}return{}}function MD(t,e){const n=ta[t.type]||{scales:{}},r=e.scales||{},s=w1(t.type,e),i=Object.create(null);return Object.keys(r).forEach(a=>{const u=r[a];if(!St(u))return console.error(`Invalid scale configuration for scale: ${a}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const d=b1(a,u,OD(a,t),En.scales[u.type]),h=RD(d,s),x=n.scales||{};i[a]=Wc(Object.create(null),[{axis:d},u,x[d],x[h]])}),t.data.datasets.forEach(a=>{const u=a.type||t.type,d=a.indexAxis||w1(u,e),x=(ta[u]||{}).scales||{};Object.keys(x).forEach(y=>{const b=ID(y,d),_=a[b+"AxisID"]||b;i[_]=i[_]||Object.create(null),Wc(i[_],[{axis:b},r[_],x[y]])})}),Object.keys(i).forEach(a=>{const u=i[a];Wc(u,[En.scales[u.type],En.scale])}),i}function YC(t){const e=t.options||(t.options={});e.plugins=ct(e.plugins,{}),e.scales=MD(t,e)}function XC(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function jD(t){return t=t||{},t.data=XC(t.data),YC(t),t}const Eb=new Map,KC=new Set;function Wd(t,e){let n=Eb.get(t);return n||(n=e(),Eb.set(t,n),KC.add(n)),n}const ac=(t,e,n)=>{const r=ea(e,n);r!==void 0&&t.add(r)};class DD{constructor(e){this._config=jD(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=XC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),YC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Wd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Wd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Wd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Wd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,a=this._cachedScopes(e,r),u=a.get(n);if(u)return u;const d=new Set;n.forEach(x=>{e&&(d.add(e),x.forEach(y=>ac(d,e,y))),x.forEach(y=>ac(d,s,y)),x.forEach(y=>ac(d,ta[i]||{},y)),x.forEach(y=>ac(d,En,y)),x.forEach(y=>ac(d,x1,y))});const h=Array.from(d);return h.length===0&&h.push(Object.create(null)),KC.has(n)&&a.set(n,h),h}chartOptionScopes(){const{options:e,type:n}=this;return[e,ta[n]||{},En.datasets[n]||{},{type:n},En,x1]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:u}=Cb(this._resolverCache,e,s);let d=a;if(FD(a,n)){i.$shared=!1,r=ro(r)?r():r;const h=this.createResolver(e,r,u);d=ml(a,r,h)}for(const h of n)i[h]=d[h];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Cb(this._resolverCache,e,r);return St(n)?ml(i,n,void 0,s):i}}function Cb(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:wx(e,n),subPrefixes:n.filter(u=>!u.toLowerCase().includes("hover"))},r.set(s,i)),i}const LD=t=>St(t)&&Object.getOwnPropertyNames(t).some(e=>ro(t[e]));function FD(t,e){const{isScriptable:n,isIndexable:r}=RC(t);for(const s of e){const i=n(s),a=r(s),u=(a||i)&&t[s];if(i&&(ro(u)||LD(u))||a&&Mn(u))return!0}return!1}var BD="4.4.8";const UD=["top","bottom","left","right","chartArea"];function Ab(t,e){return t==="top"||t==="bottom"||UD.indexOf(t)===-1&&e==="x"}function kb(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Nb(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),qt(n&&n.onComplete,[t],e)}function VD(t){const e=t.chart,n=e.options.animation;qt(n&&n.onProgress,[t],e)}function ZC(t){return _x()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const yh={},Tb=t=>{const e=ZC(t);return Object.values(yh).filter(n=>n.canvas===e).pop()};function zD(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const a=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=a)}}}function WD(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function Hd(t,e,n){return t.options.clip?t[n]:e[n]}function HD(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Hd(n,e,"left"),right:Hd(n,e,"right"),top:Hd(r,e,"top"),bottom:Hd(r,e,"bottom")}:e}var ki;let Pl=(ki=class{static register(...e){Ps.add(...e),Ib()}static unregister(...e){Ps.remove(...e),Ib()}constructor(e,n){const r=this.config=new DD(n),s=ZC(e),i=Tb(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||aD(s)),this.platform.updateConfig(r);const u=this.platform.acquireContext(s,a.aspectRatio),d=u&&u.canvas,h=d&&d.height,x=d&&d.width;if(this.id=WM(),this.ctx=u,this.canvas=d,this.width=x,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new CD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=l7(y=>this.update(y),a.resizeDelay||0),this._dataChanges=[],yh[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}qs.listen(this,"complete",Nb),qs.listen(this,"progress",VD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Bt(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ps}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Q2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return X2(this.canvas,this.ctx),this}stop(){return qs.stop(this),this}resize(e,n){qs.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,n,i),u=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Q2(this,u,!0)&&(this.notifyPlugins("resize",{size:a}),qt(r.onResize,[this,a],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};It(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((a,u)=>(a[u]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const u=n[a],d=b1(a,u),h=d==="r",x=d==="x";return{options:u,dposition:h?"chartArea":x?"bottom":"left",dtype:h?"radialLinear":x?"category":"linear"}}))),It(i,a=>{const u=a.options,d=u.id,h=b1(d,u),x=ct(u.type,a.dtype);(u.position===void 0||Ab(u.position,h)!==Ab(a.dposition))&&(u.position=a.dposition),s[d]=!0;let y=null;if(d in r&&r[d].type===x)y=r[d];else{const b=Ps.getScale(x);y=new b({id:d,type:x,ctx:this.ctx,chart:this}),r[y.id]=y}y.init(u,e)}),It(s,(a,u)=>{a||delete r[u]}),It(r,a=>{es.configure(this,a,a.options),es.addBox(this,a)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(kb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let a=this.getDatasetMeta(r);const u=i.type||this.config.type;if(a.type&&a.type!==u&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=u,a.indexAxis=i.indexAxis||w1(u,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const d=Ps.getController(u),{datasetElementType:h,dataElementType:x}=En.datasets[u];Object.assign(d,{dataElementType:Ps.getElement(x),datasetElementType:h&&Ps.getElement(h)}),a.controller=new d(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){It(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,x=this.data.datasets.length;h<x;h++){const{controller:y}=this.getDatasetMeta(h),b=!s&&i.indexOf(y)===-1;y.buildOrUpdateElements(b),a=Math.max(+y.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||It(i,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(kb("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){It(this.scales,e=>{es.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!B2(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const a=r==="_removeElements"?-i:i;zD(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(a=>a[0]===i).map((a,u)=>u+","+a.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!B2(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;es.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],It(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ro(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qs.has(this)?this.attached&&!qs.running(this)&&qs.start(this):(this.draw(),Nb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const a=n[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,s=!r.disabled,i=HD(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&px(n,{left:r.left===!1?0:i.left-r.left,right:r.right===!1?this.width:i.right+r.right,top:r.top===!1?0:i.top-r.top,bottom:r.bottom===!1?this.height:i.bottom+r.bottom}),e.controller.draw(),s&&xx(n),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return Au(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Uj.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=oa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,s);Eu(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(i,{visible:r}),this.update(u=>u.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),qs.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),X2(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete yh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,a)=>{n.addEventListener(this,i,a),e[i]=a},s=(i,a,u)=>{i.offsetX=a,i.offsetY=u,this._eventHandler(i)};It(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(d,h)=>{n.addEventListener(this,d,h),e[d]=h},s=(d,h)=>{e[d]&&(n.removeEventListener(this,d,h),delete e[d])},i=(d,h)=>{this.canvas&&this.resize(d,h)};let a;const u=()=>{s("attach",u),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",u)},n.isAttached(this.canvas)?u():a()}unbindEvents(){It(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},It(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,a,u,d;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),u=0,d=e.length;u<d;++u){a=e[u];const h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:a})=>{const u=this.getDatasetMeta(i);if(!u)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:u.data[a],index:a}});!of(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(d,h)=>d.filter(x=>!h.some(y=>x.datasetIndex===y.datasetIndex&&x.index===y.index)),a=i(n,e),u=r?e:i(e,n);a.length&&this.updateHoverStyle(a,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,a=n,u=this._getActiveElements(e,s,r,a),d=XM(e),h=WD(e,this._lastEvent,r,d);r&&(this._lastEvent=null,qt(i.onHover,[e,u,this],this),d&&qt(i.onClick,[e,u,this],this));const x=!of(u,s);return(x||n)&&(this._active=u,this._updateHoverStyles(u,s,n)),this._lastEvent=h,x}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},xe(ki,"defaults",En),xe(ki,"instances",yh),xe(ki,"overrides",ta),xe(ki,"registry",Ps),xe(ki,"version",BD),xe(ki,"getChart",Tb),ki);function Ib(){return It(Pl.instances,t=>t._plugins.invalidate())}function $D(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:u,innerRadius:d}=e;let h=s/u;t.beginPath(),t.arc(i,a,u,r-h,n+h),d>s?(h=s/d,t.arc(i,a,d,n+h,r-h,!0)):t.arc(i,a,s,n+Dn,r-Dn),t.closePath(),t.clip()}function GD(t){return yx(t,["outerStart","outerEnd","innerStart","innerEnd"])}function qD(t,e,n,r){const s=GD(t.options.borderRadius),i=(n-e)/2,a=Math.min(i,r*e/2),u=d=>{const h=(n-Math.min(i,d))*r/2;return Cr(d,0,Math.min(i,h))};return{outerStart:u(s.outerStart),outerEnd:u(s.outerEnd),innerStart:Cr(s.innerStart,0,a),innerEnd:Cr(s.innerEnd,0,a)}}function Ea(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ff(t,e,n,r,s,i){const{x:a,y:u,startAngle:d,pixelMargin:h,innerRadius:x}=e,y=Math.max(e.outerRadius+r+n-h,0),b=x>0?x+r+n+h:0;let _=0;const C=s-d;if(r){const G=x>0?x-r:0,be=y>0?y-r:0,$=(G+be)/2,Q=$!==0?C*$/($+r):C;_=(C-Q)/2}const N=Math.max(.001,C*y-n/gn)/y,k=(C-N)/2,E=d+k+_,A=s-k-_,{outerStart:I,outerEnd:j,innerStart:F,innerEnd:z}=qD(e,b,y,A-E),O=y-I,R=y-j,M=E+I/O,U=A-j/R,X=b+F,V=b+z,te=E+F/X,fe=A-z/V;if(t.beginPath(),i){const G=(M+U)/2;if(t.arc(a,u,y,M,G),t.arc(a,u,y,G,U),j>0){const ne=Ea(R,U,a,u);t.arc(ne.x,ne.y,j,U,A+Dn)}const be=Ea(V,A,a,u);if(t.lineTo(be.x,be.y),z>0){const ne=Ea(V,fe,a,u);t.arc(ne.x,ne.y,z,A+Dn,fe+Math.PI)}const $=(A-z/b+(E+F/b))/2;if(t.arc(a,u,b,A-z/b,$,!0),t.arc(a,u,b,$,E+F/b,!0),F>0){const ne=Ea(X,te,a,u);t.arc(ne.x,ne.y,F,te+Math.PI,E-Dn)}const Q=Ea(O,E,a,u);if(t.lineTo(Q.x,Q.y),I>0){const ne=Ea(O,M,a,u);t.arc(ne.x,ne.y,I,E-Dn,M)}}else{t.moveTo(a,u);const G=Math.cos(M)*y+a,be=Math.sin(M)*y+u;t.lineTo(G,be);const $=Math.cos(U)*y+a,Q=Math.sin(U)*y+u;t.lineTo($,Q)}t.closePath()}function YD(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:u}=e;let d=e.endAngle;if(i){ff(t,e,n,r,d,s);for(let h=0;h<i;++h)t.fill();isNaN(u)||(d=a+(u%mn||mn))}return ff(t,e,n,r,d,s),t.fill(),d}function XD(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:u,options:d}=e,{borderWidth:h,borderJoinStyle:x,borderDash:y,borderDashOffset:b}=d,_=d.borderAlign==="inner";if(!h)return;t.setLineDash(y||[]),t.lineDashOffset=b,_?(t.lineWidth=h*2,t.lineJoin=x||"round"):(t.lineWidth=h,t.lineJoin=x||"bevel");let C=e.endAngle;if(i){ff(t,e,n,r,C,s);for(let N=0;N<i;++N)t.stroke();isNaN(u)||(C=a+(u%mn||mn))}_&&$D(t,e,C),i||(ff(t,e,n,r,C,s),t.stroke())}class Ba extends pi{constructor(n){super();xe(this,"circumference");xe(this,"endAngle");xe(this,"fullCircles");xe(this,"innerRadius");xe(this,"outerRadius");xe(this,"pixelMargin");xe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:a,distance:u}=SC(i,{x:n,y:r}),{startAngle:d,endAngle:h,innerRadius:x,outerRadius:y,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),_=(this.options.spacing+this.options.borderWidth)/2,C=ct(b,h-d),N=Cu(a,d,h)&&d!==h,k=C>=mn||N,E=Wi(u,x+_,y+_);return k&&E}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:a,innerRadius:u,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:h,spacing:x}=this.options,y=(i+a)/2,b=(u+d+x+h)/2;return{x:r+Math.cos(y)*b,y:s+Math.sin(y)*b}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,a=(r.spacing||0)/2,u=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>mn?Math.floor(s/mn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const d=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(d)*i,Math.sin(d)*i);const h=1-Math.sin(Math.min(gn,s||0)),x=i*h;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,YD(n,this,x,a,u),XD(n,this,x,a,u),n.restore()}}xe(Ba,"id","arc"),xe(Ba,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),xe(Ba,"defaultRoutes",{backgroundColor:"backgroundColor"}),xe(Ba,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function QC(t,e,n=e){t.lineCap=ct(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ct(n.borderDash,e.borderDash)),t.lineDashOffset=ct(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ct(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ct(n.borderWidth,e.borderWidth),t.strokeStyle=ct(n.borderColor,e.borderColor)}function KD(t,e,n){t.lineTo(n.x,n.y)}function ZD(t){return t.stepped?b7:t.tension||t.cubicInterpolationMode==="monotone"?v7:KD}function JC(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:a,end:u}=e,d=Math.max(s,a),h=Math.min(i,u),x=s<a&&i<a||s>u&&i>u;return{count:r,start:d,loop:e.loop,ilen:h<d&&!x?r+h-d:h-d}}function QD(t,e,n,r){const{points:s,options:i}=e,{count:a,start:u,loop:d,ilen:h}=JC(s,n,r),x=ZD(i);let{move:y=!0,reverse:b}=r||{},_,C,N;for(_=0;_<=h;++_)C=s[(u+(b?h-_:_))%a],!C.skip&&(y?(t.moveTo(C.x,C.y),y=!1):x(t,N,C,b,i.stepped),N=C);return d&&(C=s[(u+(b?h:0))%a],x(t,N,C,b,i.stepped)),!!d}function JD(t,e,n,r){const s=e.points,{count:i,start:a,ilen:u}=JC(s,n,r),{move:d=!0,reverse:h}=r||{};let x=0,y=0,b,_,C,N,k,E;const A=j=>(a+(h?u-j:j))%i,I=()=>{N!==k&&(t.lineTo(x,k),t.lineTo(x,N),t.lineTo(x,E))};for(d&&(_=s[A(0)],t.moveTo(_.x,_.y)),b=0;b<=u;++b){if(_=s[A(b)],_.skip)continue;const j=_.x,F=_.y,z=j|0;z===C?(F<N?N=F:F>k&&(k=F),x=(y*x+j)/++y):(I(),t.lineTo(j,F),C=z,y=0,N=k=F),E=F}I()}function v1(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?JD:QD}function e9(t){return t.stepped?J7:t.tension||t.cubicInterpolationMode==="monotone"?ej:To}function t9(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),QC(t,e.options),t.stroke(s)}function n9(t,e,n,r){const{segments:s,options:i}=e,a=v1(e);for(const u of s)QC(t,i,u.style),t.beginPath(),a(t,e,u,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const r9=typeof Path2D=="function";function s9(t,e,n,r){r9&&!e.options.segment?t9(t,e,n,r):n9(t,e,n,r)}class Ac extends pi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;$7(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,a=ij(this,{property:n,start:s,end:s});if(!a.length)return;const u=[],d=e9(r);let h,x;for(h=0,x=a.length;h<x;++h){const{start:y,end:b}=a[h],_=i[y],C=i[b];if(_===C){u.push(_);continue}const N=Math.abs((s-_[n])/(C[n]-_[n])),k=d(_,C,N,r.stepped);k[n]=e[n],u.push(k)}return u.length===1?u[0]:u}pathSegment(e,n,r){return v1(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=v1(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const u of s)a&=i(e,this,u,{start:n,end:n+r-1});return!!a}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),s9(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}xe(Ac,"id","line"),xe(Ac,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),xe(Ac,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),xe(Ac,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Rb(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class wh extends pi{constructor(n){super();xe(this,"parsed");xe(this,"skip");xe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:a,y:u}=this.getProps(["x","y"],s);return Math.pow(n-a,2)+Math.pow(r-u,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Rb(this,n,"x",r)}inYRange(n,r){return Rb(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Au(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,y1(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}xe(wh,"id","point"),xe(wh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),xe(wh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function e5(t,e){const{x:n,y:r,base:s,width:i,height:a}=t.getProps(["x","y","base","width","height"],e);let u,d,h,x,y;return t.horizontal?(y=a/2,u=Math.min(n,s),d=Math.max(n,s),h=r-y,x=r+y):(y=i/2,u=n-y,d=n+y,h=Math.min(r,s),x=Math.max(r,s)),{left:u,top:h,right:d,bottom:x}}function Hi(t,e,n,r){return t?0:Cr(e,n,r)}function i9(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=IC(r);return{t:Hi(s.top,i.top,0,n),r:Hi(s.right,i.right,0,e),b:Hi(s.bottom,i.bottom,0,n),l:Hi(s.left,i.left,0,e)}}function o9(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Ja(s),a=Math.min(e,n),u=t.borderSkipped,d=r||St(s);return{topLeft:Hi(!d||u.top||u.left,i.topLeft,0,a),topRight:Hi(!d||u.top||u.right,i.topRight,0,a),bottomLeft:Hi(!d||u.bottom||u.left,i.bottomLeft,0,a),bottomRight:Hi(!d||u.bottom||u.right,i.bottomRight,0,a)}}function a9(t){const e=e5(t),n=e.right-e.left,r=e.bottom-e.top,s=i9(t,n/2,r/2),i=o9(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Dm(t,e,n,r){const s=e===null,i=n===null,u=t&&!(s&&i)&&e5(t,r);return u&&(s||Wi(e,u.left,u.right))&&(i||Wi(n,u.top,u.bottom))}function l9(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function c9(t,e){t.rect(e.x,e.y,e.w,e.h)}function Lm(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,a=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+a,radius:t.radius}}class bh extends pi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:a}=a9(this),u=l9(a.radius)?uf:c9;e.save(),(a.w!==i.w||a.h!==i.h)&&(e.beginPath(),u(e,Lm(a,n,i)),e.clip(),u(e,Lm(i,-n,a)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),u(e,Lm(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return Dm(this,e,n,r)}inXRange(e,n){return Dm(this,e,null,n)}inYRange(e,n){return Dm(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}xe(bh,"id","bar"),xe(bh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),xe(bh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Pb=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},u9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ob extends pi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=qt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=ir(r.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=Pb(r,i);let h,x;n.font=s.string,this.isHorizontal()?(h=this.maxWidth,x=this._fitRows(a,i,u,d)+10):(x=this.maxHeight,h=this._fitCols(a,s,u,d)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(x,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:a,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],h=this.lineWidths=[0],x=s+u;let y=e;i.textAlign="left",i.textBaseline="middle";let b=-1,_=-x;return this.legendItems.forEach((C,N)=>{const k=r+n/2+i.measureText(C.text).width;(N===0||h[h.length-1]+k+2*u>a)&&(y+=x,h[h.length-(N>0?0:1)]=0,_+=x,b++),d[N]={left:0,top:_,row:b,width:k,height:s},h[h.length-1]+=k+u}),y}_fitCols(e,n,r,s){const{ctx:i,maxHeight:a,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],h=this.columnSizes=[],x=a-e;let y=u,b=0,_=0,C=0,N=0;return this.legendItems.forEach((k,E)=>{const{itemWidth:A,itemHeight:I}=d9(r,n,i,k,s);E>0&&_+I+2*u>x&&(y+=b+u,h.push({width:b,height:_}),C+=b+u,N++,b=_=0),d[E]={left:C,top:_,col:N,width:A,height:I},b=Math.max(b,A),_+=I+u}),y+=b,h.push({width:b,height:_}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,a=el(i,this.left,this.width);if(this.isHorizontal()){let u=0,d=nr(r,this.left+s,this.right-this.lineWidths[u]);for(const h of n)u!==h.row&&(u=h.row,d=nr(r,this.left+s,this.right-this.lineWidths[u])),h.top+=this.top+e+s,h.left=a.leftForLtr(a.x(d),h.width),d+=h.width+s}else{let u=0,d=nr(r,this.top+e+s,this.bottom-this.columnSizes[u].height);for(const h of n)h.col!==u&&(u=h.col,d=nr(r,this.top+e+s,this.bottom-this.columnSizes[u].height)),h.top=d,h.left+=this.left+s,h.left=a.leftForLtr(a.x(h.left),h.width),d+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;px(e,this),this._draw(),xx(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:a}=e,u=En.color,d=el(e.rtl,this.left,this.width),h=ir(a.font),{padding:x}=a,y=h.size,b=y/2;let _;this.drawTitle(),s.textAlign=d.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:C,boxHeight:N,itemHeight:k}=Pb(a,y),E=function(z,O,R){if(isNaN(C)||C<=0||isNaN(N)||N<0)return;s.save();const M=ct(R.lineWidth,1);if(s.fillStyle=ct(R.fillStyle,u),s.lineCap=ct(R.lineCap,"butt"),s.lineDashOffset=ct(R.lineDashOffset,0),s.lineJoin=ct(R.lineJoin,"miter"),s.lineWidth=M,s.strokeStyle=ct(R.strokeStyle,u),s.setLineDash(ct(R.lineDash,[])),a.usePointStyle){const U={radius:N*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:M},X=d.xPlus(z,C/2),V=O+b;TC(s,U,X,V,a.pointStyleWidth&&C)}else{const U=O+Math.max((y-N)/2,0),X=d.leftForLtr(z,C),V=Ja(R.borderRadius);s.beginPath(),Object.values(V).some(te=>te!==0)?uf(s,{x:X,y:U,w:C,h:N,radius:V}):s.rect(X,U,C,N),s.fill(),M!==0&&s.stroke()}s.restore()},A=function(z,O,R){ku(s,R.text,z,O+k/2,h,{strikethrough:R.hidden,textAlign:d.textAlign(R.textAlign)})},I=this.isHorizontal(),j=this._computeTitleHeight();I?_={x:nr(i,this.left+x,this.right-r[0]),y:this.top+x+j,line:0}:_={x:this.left+x,y:nr(i,this.top+j+x,this.bottom-n[0].height),line:0},DC(this.ctx,e.textDirection);const F=k+x;this.legendItems.forEach((z,O)=>{s.strokeStyle=z.fontColor,s.fillStyle=z.fontColor;const R=s.measureText(z.text).width,M=d.textAlign(z.textAlign||(z.textAlign=a.textAlign)),U=C+b+R;let X=_.x,V=_.y;d.setWidth(this.width),I?O>0&&X+U+x>this.right&&(V=_.y+=F,_.line++,X=_.x=nr(i,this.left+x,this.right-r[_.line])):O>0&&V+F>this.bottom&&(X=_.x=X+n[_.line].width+x,_.line++,V=_.y=nr(i,this.top+j+x,this.bottom-n[_.line].height));const te=d.x(X);if(E(te,V,z),X=c7(M,X+C+b,I?X+U:this.right,e.rtl),A(d.x(X),V,z),I)_.x+=U+x;else if(typeof z.text!="string"){const fe=h.lineHeight;_.y+=t5(z,fe)+x}else _.y+=F}),LC(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ir(n.font),s=os(n.padding);if(!n.display)return;const i=el(e.rtl,this.left,this.width),a=this.ctx,u=n.position,d=r.size/2,h=s.top+d;let x,y=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),x=this.top+h,y=nr(e.align,y,this.right-b);else{const C=this.columnSizes.reduce((N,k)=>Math.max(N,k.height),0);x=h+nr(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const _=nr(u,y,y+b);a.textAlign=i.textAlign(fx(u)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,ku(a,n.text,_,x,r)}_computeTitleHeight(){const e=this.options.title,n=ir(e.font),r=os(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Wi(e,this.left,this.right)&&Wi(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Wi(e,s.left,s.left+s.width)&&Wi(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!m9(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=u9(s,r);s&&!i&&qt(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&qt(n.onHover,[e,r,this],this)}else r&&qt(n.onClick,[e,r,this],this)}}function d9(t,e,n,r,s){const i=h9(r,t,e,n),a=f9(s,r,e.lineHeight);return{itemWidth:i,itemHeight:a}}function h9(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),e+n.size/2+r.measureText(s).width}function f9(t,e,n){let r=t;return typeof e.text!="string"&&(r=t5(e,n)),r}function t5(t,e){const n=t.text?t.text.length:0;return e*n}function m9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Cx={id:"legend",_element:Ob,start(t,e,n){const r=t.legend=new Ob({ctx:t.ctx,options:n,chart:t});es.configure(t,r,n),es.addBox(t,r)},stop(t){es.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;es.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const h=d.controller.getStyle(n?0:void 0),x=os(h.borderWidth);return{text:e[d.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!d.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(x.width+x.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:a&&(u||h.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class n5 extends pi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Mn(r.text)?r.text.length:1;this._padding=os(r.padding);const i=s*ir(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:a}=this,u=a.align;let d=0,h,x,y;return this.isHorizontal()?(x=nr(u,r,i),y=n+e,h=i-r):(a.position==="left"?(x=r+e,y=nr(u,s,n),d=gn*-.5):(x=i-e,y=nr(u,n,s),d=gn*.5),h=s-n),{titleX:x,titleY:y,maxWidth:h,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ir(n.font),i=r.lineHeight/2+this._padding.top,{titleX:a,titleY:u,maxWidth:d,rotation:h}=this._drawArgs(i);ku(e,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:h,textAlign:fx(n.align),textBaseline:"middle",translation:[a,u]})}}function g9(t,e){const n=new n5({ctx:t.ctx,options:e,chart:t});es.configure(t,n,e),es.addBox(t,n),t.titleBlock=n}var r5={id:"title",_element:n5,start(t,e,n){g9(t,n)},stop(t){const e=t.titleBlock;es.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;es.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const kc={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const u=t[e].element;if(u&&u.hasValue()){const d=u.tooltipPosition();r.add(d.x),s+=d.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((u,d)=>u+d)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,a,u;for(i=0,a=t.length;i<a;++i){const d=t[i].element;if(d&&d.hasValue()){const h=d.getCenterPoint(),x=g1(e,h);x<s&&(s=x,u=d)}}if(u){const d=u.tooltipPosition();n=d.x,r=d.y}return{x:n,y:r}}};function Is(t,e){return e&&(Mn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ys(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function p9(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:a,value:u}=i.getLabelAndValue(s);return{chart:t,label:a,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:u,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Mb(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:a,boxHeight:u}=e,d=ir(e.bodyFont),h=ir(e.titleFont),x=ir(e.footerFont),y=i.length,b=s.length,_=r.length,C=os(e.padding);let N=C.height,k=0,E=r.reduce((j,F)=>j+F.before.length+F.lines.length+F.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,y&&(N+=y*h.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),E){const j=e.displayColors?Math.max(u,d.lineHeight):d.lineHeight;N+=_*j+(E-_)*d.lineHeight+(E-1)*e.bodySpacing}b&&(N+=e.footerMarginTop+b*x.lineHeight+(b-1)*e.footerSpacing);let A=0;const I=function(j){k=Math.max(k,n.measureText(j).width+A)};return n.save(),n.font=h.string,It(t.title,I),n.font=d.string,It(t.beforeBody.concat(t.afterBody),I),A=e.displayColors?a+2+e.boxPadding:0,It(r,j=>{It(j.before,I),It(j.lines,I),It(j.after,I)}),A=0,n.font=x.string,It(t.footer,I),n.restore(),k+=C.width,{width:k,height:N}}function x9(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function y9(t,e,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;if(t==="left"&&s+i+a>e.width||t==="right"&&s-i-a<0)return!0}function w9(t,e,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:u,right:d}}=t;let h="center";return r==="center"?h=s<=(u+d)/2?"left":"right":s<=i/2?h="left":s>=a-i/2&&(h="right"),y9(h,t,e,n)&&(h="center"),h}function jb(t,e,n){const r=n.yAlign||e.yAlign||x9(t,n);return{xAlign:n.xAlign||e.xAlign||w9(t,e,n,r),yAlign:r}}function b9(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function v9(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Db(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=t,{xAlign:u,yAlign:d}=n,h=s+i,{topLeft:x,topRight:y,bottomLeft:b,bottomRight:_}=Ja(a);let C=b9(e,u);const N=v9(e,d,h);return d==="center"?u==="left"?C+=h:u==="right"&&(C-=h):u==="left"?C-=Math.max(x,b)+s:u==="right"&&(C+=Math.max(y,_)+s),{x:Cr(C,0,r.width-e.width),y:Cr(N,0,r.height-e.height)}}function $d(t,e,n){const r=os(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Lb(t){return Is([],Ys(t))}function _9(t,e,n){return oa(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Fb(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const s5={beforeTitle:Gs,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Gs,beforeBody:Gs,beforeLabel:Gs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Bt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gs,afterBody:Gs,beforeFooter:Gs,footer:Gs,afterFooter:Gs};function wr(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?s5[e].call(n,r):s}class _1 extends pi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new BC(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=wr(r,"beforeTitle",this,e),i=wr(r,"title",this,e),a=wr(r,"afterTitle",this,e);let u=[];return u=Is(u,Ys(s)),u=Is(u,Ys(i)),u=Is(u,Ys(a)),u}getBeforeBody(e,n){return Lb(wr(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return It(e,i=>{const a={before:[],lines:[],after:[]},u=Fb(r,i);Is(a.before,Ys(wr(u,"beforeLabel",this,i))),Is(a.lines,wr(u,"label",this,i)),Is(a.after,Ys(wr(u,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(e,n){return Lb(wr(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=wr(r,"beforeFooter",this,e),i=wr(r,"footer",this,e),a=wr(r,"afterFooter",this,e);let u=[];return u=Is(u,Ys(s)),u=Is(u,Ys(i)),u=Is(u,Ys(a)),u}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],a=[];let u=[],d,h;for(d=0,h=n.length;d<h;++d)u.push(p9(this.chart,n[d]));return e.filter&&(u=u.filter((x,y,b)=>e.filter(x,y,b,r))),e.itemSort&&(u=u.sort((x,y)=>e.itemSort(x,y,r))),It(u,x=>{const y=Fb(e.callbacks,x);s.push(wr(y,"labelColor",this,x)),i.push(wr(y,"labelPointStyle",this,x)),a.push(wr(y,"labelTextColor",this,x))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=u,u}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const u=kc[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const d=this._size=Mb(this,r),h=Object.assign({},u,d),x=jb(this.chart,r,h),y=Db(r,h,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,i={opacity:1,x:y.x,y:y.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:u}=r,{topLeft:d,topRight:h,bottomLeft:x,bottomRight:y}=Ja(u),{x:b,y:_}=e,{width:C,height:N}=n;let k,E,A,I,j,F;return i==="center"?(j=_+N/2,s==="left"?(k=b,E=k-a,I=j+a,F=j-a):(k=b+C,E=k+a,I=j-a,F=j+a),A=k):(s==="left"?E=b+Math.max(d,x)+a:s==="right"?E=b+C-Math.max(h,y)-a:E=this.caretX,i==="top"?(I=_,j=I-a,k=E-a,A=E+a):(I=_+N,j=I+a,k=E+a,A=E-a),F=I),{x1:k,x2:E,x3:A,y1:I,y2:j,y3:F}}drawTitle(e,n,r){const s=this.title,i=s.length;let a,u,d;if(i){const h=el(r.rtl,this.x,this.width);for(e.x=$d(this,r.titleAlign,r),n.textAlign=h.textAlign(r.titleAlign),n.textBaseline="middle",a=ir(r.titleFont),u=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,d=0;d<i;++d)n.fillText(s[d],h.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+u,d+1===i&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,n,r,s,i){const a=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:d,boxWidth:h}=i,x=ir(i.bodyFont),y=$d(this,"left",i),b=s.x(y),_=d<x.lineHeight?(x.lineHeight-d)/2:0,C=n.y+_;if(i.usePointStyle){const N={radius:Math.min(h,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},k=s.leftForLtr(b,h)+h/2,E=C+d/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,y1(e,N,k,E),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,y1(e,N,k,E)}else{e.lineWidth=St(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const N=s.leftForLtr(b,h),k=s.leftForLtr(s.xPlus(b,1),h-2),E=Ja(a.borderRadius);Object.values(E).some(A=>A!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,uf(e,{x:N,y:C,w:h,h:d,radius:E}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),uf(e,{x:k,y:C+1,w:h-2,h:d-2,radius:E}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(N,C,h,d),e.strokeRect(N,C,h,d),e.fillStyle=a.backgroundColor,e.fillRect(k,C+1,h-2,d-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:u,boxHeight:d,boxWidth:h,boxPadding:x}=r,y=ir(r.bodyFont);let b=y.lineHeight,_=0;const C=el(r.rtl,this.x,this.width),N=function(R){n.fillText(R,C.x(e.x+_),e.y+b/2),e.y+=b+i},k=C.textAlign(a);let E,A,I,j,F,z,O;for(n.textAlign=a,n.textBaseline="middle",n.font=y.string,e.x=$d(this,k,r),n.fillStyle=r.bodyColor,It(this.beforeBody,N),_=u&&k!=="right"?a==="center"?h/2+x:h+2+x:0,j=0,z=s.length;j<z;++j){for(E=s[j],A=this.labelTextColors[j],n.fillStyle=A,It(E.before,N),I=E.lines,u&&I.length&&(this._drawColorBox(n,e,j,C,r),b=Math.max(y.lineHeight,d)),F=0,O=I.length;F<O;++F)N(I[F]),b=y.lineHeight;It(E.after,N)}_=0,b=y.lineHeight,It(this.afterBody,N),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let a,u;if(i){const d=el(r.rtl,this.x,this.width);for(e.x=$d(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=d.textAlign(r.footerAlign),n.textBaseline="middle",a=ir(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,u=0;u<i;++u)n.fillText(s[u],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:a}=this,{x:u,y:d}=e,{width:h,height:x}=r,{topLeft:y,topRight:b,bottomLeft:_,bottomRight:C}=Ja(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(u+y,d),a==="top"&&this.drawCaret(e,n,r,s),n.lineTo(u+h-b,d),n.quadraticCurveTo(u+h,d,u+h,d+b),a==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(u+h,d+x-C),n.quadraticCurveTo(u+h,d+x,u+h-C,d+x),a==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(u+_,d+x),n.quadraticCurveTo(u,d+x,u,d+x-_),a==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(u,d+y),n.quadraticCurveTo(u,d,u+y,d),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const a=kc[e.position].call(this,this._active,this._eventPosition);if(!a)return;const u=this._size=Mb(this,e),d=Object.assign({},a,this._size),h=jb(n,e,d),x=Db(e,d,h,n);(s._to!==x.x||i._to!==x.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=u.width,this.height=u.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=os(n.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&u&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),DC(e,n.textDirection),i.y+=a.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),LC(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:u,index:d})=>{const h=this.chart.getDatasetMeta(u);if(!h)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:h.data[d],index:d}}),i=!of(r,s),a=this._positionChanged(s,n);(i||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(e,i,n,r),u=this._positionChanged(a,e),d=n||!of(a,i)||u;return d&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,a=kc[i.position].call(this,e,n);return a!==!1&&(r!==a.x||s!==a.y)}}xe(_1,"positioners",kc);var Ax={id:"tooltip",_element:_1,positioners:kc,afterInit(t,e,n){n&&(t.tooltip=new _1({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:s5},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const S9=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function E9(t,e,n,r){const s=t.indexOf(e);if(s===-1)return S9(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const C9=(t,e)=>t===null?null:Cr(Math.round(t),0,e);function Bb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class mf extends Rl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Bt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:E9(r,e,ct(n,e),this._addedLabels),C9(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=n;a++)s.push({value:a});return s}getLabelForValue(e){return Bb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}xe(mf,"id","category"),xe(mf,"defaults",{ticks:{callback:Bb}});function A9(t,e){const n=[],{bounds:s,step:i,min:a,max:u,precision:d,count:h,maxTicks:x,maxDigits:y,includeBounds:b}=t,_=i||1,C=x-1,{min:N,max:k}=e,E=!Bt(a),A=!Bt(u),I=!Bt(h),j=(k-N)/(y+1);let F=V2((k-N)/C/_)*_,z,O,R,M;if(F<1e-14&&!E&&!A)return[{value:N},{value:k}];M=Math.ceil(k/F)-Math.floor(N/F),M>C&&(F=V2(M*F/C/_)*_),Bt(d)||(z=Math.pow(10,d),F=Math.ceil(F*z)/z),s==="ticks"?(O=Math.floor(N/F)*F,R=Math.ceil(k/F)*F):(O=N,R=k),E&&A&&i&&e7((u-a)/i,F/1e3)?(M=Math.round(Math.min((u-a)/F,x)),F=(u-a)/M,O=a,R=u):I?(O=E?a:O,R=A?u:R,M=h-1,F=(R-O)/M):(M=(R-O)/F,Hc(M,Math.round(M),F/1e3)?M=Math.round(M):M=Math.ceil(M));const U=Math.max(z2(F),z2(O));z=Math.pow(10,Bt(d)?U:d),O=Math.round(O*z)/z,R=Math.round(R*z)/z;let X=0;for(E&&(b&&O!==a?(n.push({value:a}),O<a&&X++,Hc(Math.round((O+X*F)*z)/z,a,Ub(a,j,t))&&X++):O<a&&X++);X<M;++X){const V=Math.round((O+X*F)*z)/z;if(A&&V>u)break;n.push({value:V})}return A&&b&&R!==u?n.length&&Hc(n[n.length-1].value,u,Ub(u,j,t))?n[n.length-1].value=u:n.push({value:u}):(!A||R===u)&&n.push({value:R}),n}function Ub(t,e,{horizontal:n,minRotation:r}){const s=ni(r),i=(n?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class k9 extends Rl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Bt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const a=d=>s=n?s:d,u=d=>i=r?i:d;if(e){const d=Fs(s),h=Fs(i);d<0&&h<0?u(0):d>0&&h>0&&a(0)}if(s===i){let d=i===0?1:Math.abs(i*.05);u(i+d),e||a(s-d)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=A9(s,i);return e.bounds==="ticks"&&t7(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return gx(e,this.chart.options.locale,this.options.ticks.format)}}class gf extends k9{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=is(e)?e:0,this.max=is(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ni(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}xe(gf,"id","linear"),xe(gf,"defaults",{ticks:{callback:NC.formatters.numeric}});const d0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Sr=Object.keys(d0);function Vb(t,e){return t-e}function zb(t,e){if(Bt(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),is(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(cf(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,s)),+a)}function Wb(t,e,n,r){const s=Sr.length;for(let i=Sr.indexOf(t);i<s-1;++i){const a=d0[Sr[i]],u=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-e)/(u*a.size))<=r)return Sr[i]}return Sr[s-1]}function N9(t,e,n,r,s){for(let i=Sr.length-1;i>=Sr.indexOf(n);i--){const a=Sr[i];if(d0[a].common&&t._adapter.diff(s,r,a)>=e-1)return a}return Sr[n?Sr.indexOf(n):0]}function T9(t){for(let e=Sr.indexOf(t)+1,n=Sr.length;e<n;++e)if(d0[Sr[e]].common)return Sr[e]}function Hb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=hx(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function I9(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),a=e[e.length-1].value;let u,d;for(u=i;u<=a;u=+s.add(u,1,r))d=n[u],d>=0&&(e[d].major=!0);return e}function $b(t,e,n){const r=[],s={},i=e.length;let a,u;for(a=0;a<i;++a)u=e[a],s[u]=a,r.push({value:u,major:!1});return i===0||!n?r:I9(t,r,s,n)}class Tu extends Rl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new zC._date(e.adapters.date);s.init(n),Wc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:zb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:u}=this.getUserBounds();function d(h){!a&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!u&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!a||!u)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=is(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=is(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,u=o7(s,i,a);return this._unit=n.unit||(r.autoSkip?Wb(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):N9(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:T9(this._unit),this.initOffsets(s),e.reverse&&u.reverse(),$b(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;n=Cr(n,0,a),r=Cr(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,a=i.unit||Wb(i.minUnit,n,r,this._getLabelCapacity(n)),u=ct(s.ticks.stepSize,1),d=a==="week"?i.isoWeekday:!1,h=cf(d)||d===!0,x={};let y=n,b,_;if(h&&(y=+e.startOf(y,"isoWeek",d)),y=+e.startOf(y,h?"day":a),e.diff(r,n,a)>1e5*u)throw new Error(n+" and "+r+" are too far apart with stepSize of "+u+" "+a);const C=s.ticks.source==="data"&&this.getDataTimestamps();for(b=y,_=0;b<r;b=+e.add(b,u,a),_++)Hb(x,b,C);return(b===r||s.bounds==="ticks"||_===1)&&Hb(x,b,C),Object.keys(x).sort(Vb).map(N=>+N)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,a=n||s[i];return this._adapter.format(e,a)}_tickFormatFunction(e,n,r,s){const i=this.options,a=i.ticks.callback;if(a)return qt(a,[e,n,r],this);const u=i.time.displayFormats,d=this._unit,h=this._majorUnit,x=d&&u[d],y=h&&u[h],b=r[n],_=h&&y&&b&&b.major;return this._adapter.format(e,s||(_?y:x))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ni(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),a=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:r*i+u*a,h:r*a+u*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,$b(this,[e],this._majorUnit),s),a=this._getLabelSize(i),u=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(zb(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return CC(e.sort(Vb))}}xe(Tu,"id","time"),xe(Tu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Gd(t,e,n){let r=0,s=t.length-1,i,a,u,d;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=p1(t,"pos",e)),{pos:i,time:u}=t[r],{pos:a,time:d}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=p1(t,"time",e)),{time:i,pos:u}=t[r],{time:a,pos:d}=t[s]);const h=a-i;return h?u+(d-u)*(e-i)/h:u}class Gb extends Tu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Gd(n,this.min),this._tableRange=Gd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let a,u,d,h,x;for(a=0,u=e.length;a<u;++a)h=e[a],h>=n&&h<=r&&s.push(h);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,u=s.length;a<u;++a)x=s[a+1],d=s[a-1],h=s[a],Math.round((x+d)/2)!==h&&i.push({time:h,pos:a/(u-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Gd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Gd(this._table,r*this._tableRange+this._minPos,!0)}}xe(Gb,"id","timeseries"),xe(Gb,"defaults",Tu.defaults);const i5="label";function qb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function R9(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function o5(t,e){t.labels=e}function a5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i5;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(a=>a[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function P9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i5;const n={labels:[],datasets:[]};return o5(n,t.labels),a5(n,t.datasets,e),n}function O9(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:a,data:u,options:d,plugins:h=[],fallbackContent:x,updateMode:y,...b}=t,_=T.useRef(null),C=T.useRef(null),N=()=>{_.current&&(C.current=new Pl(_.current,{type:a,data:P9(u,i),options:d&&{...d},plugins:h}),qb(e,C.current))},k=()=>{qb(e,null),C.current&&(C.current.destroy(),C.current=null)};return T.useEffect(()=>{!s&&C.current&&d&&R9(C.current,d)},[s,d]),T.useEffect(()=>{!s&&C.current&&o5(C.current.config.data,u.labels)},[s,u.labels]),T.useEffect(()=>{!s&&C.current&&u.datasets&&a5(C.current.config.data,u.datasets,i)},[s,u.datasets]),T.useEffect(()=>{C.current&&(s?(k(),setTimeout(N)):C.current.update(y))},[s,d,u.labels,u.datasets,y]),T.useEffect(()=>{C.current&&(k(),setTimeout(N))},[a]),T.useEffect(()=>(N(),()=>k()),[]),_l.createElement("canvas",{ref:_,role:"img",height:n,width:r,...b},x)}const M9=T.forwardRef(O9);function l5(t,e){return Pl.register(e),T.forwardRef((n,r)=>_l.createElement(M9,{...n,ref:r,type:t}))}const c5=l5("bar",ph),j9=l5("doughnut",Ec),u5=6048e5,D9=864e5,Xu=6e4,Ku=36e5,L9=1e3,Yb=Symbol.for("constructDateFrom");function pn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Yb in t?t[Yb](e):t instanceof Date?new t.constructor(e):new Date(e)}function et(t,e){return pn(e||t,t)}function h0(t,e,n){const r=et(t,n==null?void 0:n.in);return isNaN(e)?pn((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function kx(t,e,n){const r=et(t,n==null?void 0:n.in);if(isNaN(e))return pn(t,NaN);if(!e)return r;const s=r.getDate(),i=pn(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function Nx(t,e,n){return pn(t,+et(t)+e)}function F9(t,e,n){return Nx(t,e*Ku)}let B9={};function aa(){return B9}function Vs(t,e){var u,d,h,x;const n=aa(),r=(e==null?void 0:e.weekStartsOn)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??n.weekStartsOn??((x=(h=n.locale)==null?void 0:h.options)==null?void 0:x.weekStartsOn)??0,s=et(t,e==null?void 0:e.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function pl(t,e){return Vs(t,{...e,weekStartsOn:1})}function d5(t,e){const n=et(t,e==null?void 0:e.in),r=n.getFullYear(),s=pn(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=pl(s),a=pn(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const u=pl(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function pf(t){const e=et(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function la(t,...e){const n=pn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function S1(t,e){const n=et(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function h5(t,e,n){const[r,s]=la(n==null?void 0:n.in,t,e),i=S1(r),a=S1(s),u=+i-pf(i),d=+a-pf(a);return Math.round((u-d)/D9)}function U9(t,e){const n=d5(t,e),r=pn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),pl(r)}function V9(t,e,n){const r=et(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*Xu),r}function z9(t,e,n){return kx(t,e*3,n)}function W9(t,e,n){return Nx(t,e*1e3)}function H9(t,e,n){return h0(t,e*7,n)}function $9(t,e,n){return kx(t,e*12,n)}function qc(t,e){const n=+et(t)-+et(e);return n<0?-1:n>0?1:n}function G9(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function f5(t){return!(!G9(t)&&typeof t!="number"||isNaN(+et(t)))}function q9(t,e,n){const[r,s]=la(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return i*12+a}function Y9(t,e,n){const[r,s]=la(n==null?void 0:n.in,t,e);return r.getFullYear()-s.getFullYear()}function m5(t,e,n){const[r,s]=la(n==null?void 0:n.in,t,e),i=Xb(r,s),a=Math.abs(h5(r,s));r.setDate(r.getDate()-i*a);const u=+(Xb(r,s)===-i),d=i*(a-u);return d===0?0:d}function Xb(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Zu(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function X9(t,e,n){const[r,s]=la(n==null?void 0:n.in,t,e),i=(+r-+s)/Ku;return Zu(n==null?void 0:n.roundingMethod)(i)}function Tx(t,e){return+et(t)-+et(e)}function K9(t,e,n){const r=Tx(t,e)/Xu;return Zu(n==null?void 0:n.roundingMethod)(r)}function g5(t,e){const n=et(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function p5(t,e){const n=et(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Z9(t,e){const n=et(t,e==null?void 0:e.in);return+g5(n,e)==+p5(n,e)}function x5(t,e,n){const[r,s,i]=la(n==null?void 0:n.in,t,t,e),a=qc(s,i),u=Math.abs(q9(s,i));if(u<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*u);let d=qc(s,i)===-a;Z9(r)&&u===1&&qc(r,i)===1&&(d=!1);const h=a*(u-+d);return h===0?0:h}function Q9(t,e,n){const r=x5(t,e,n)/3;return Zu(n==null?void 0:n.roundingMethod)(r)}function J9(t,e,n){const r=Tx(t,e)/1e3;return Zu(n==null?void 0:n.roundingMethod)(r)}function eL(t,e,n){const r=m5(t,e,n)/7;return Zu(n==null?void 0:n.roundingMethod)(r)}function tL(t,e,n){const[r,s]=la(n==null?void 0:n.in,t,e),i=qc(r,s),a=Math.abs(Y9(r,s));r.setFullYear(1584),s.setFullYear(1584);const u=qc(r,s)===-i,d=i*(a-+u);return d===0?0:d}function nL(t,e){const n=et(t,e==null?void 0:e.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function rL(t,e){const n=et(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function sL(t,e){const n=et(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function y5(t,e){const n=et(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function iL(t,e){const n=et(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function oL(t,e){var u,d;const n=aa(),r=n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=et(t,e==null?void 0:e.in),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function aL(t,e){const n=et(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function lL(t,e){const n=et(t,e==null?void 0:e.in),r=n.getMonth(),s=r-r%3+3;return n.setMonth(s,0),n.setHours(23,59,59,999),n}function cL(t,e){const n=et(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const uL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dL=(t,e,n)=>{let r;const s=uL[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Fm(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const hL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gL={date:Fm({formats:hL,defaultWidth:"full"}),time:Fm({formats:fL,defaultWidth:"full"}),dateTime:Fm({formats:mL,defaultWidth:"full"})},pL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xL=(t,e,n,r)=>pL[t];function lc(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,u=n!=null&&n.width?String(n.width):a;s=t.formattingValues[u]||t.formattingValues[a]}else{const a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const yL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_L={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},SL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},EL=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},CL={ordinalNumber:EL,era:lc({values:yL,defaultWidth:"wide"}),quarter:lc({values:wL,defaultWidth:"wide",argumentCallback:t=>t-1}),month:lc({values:bL,defaultWidth:"wide"}),day:lc({values:vL,defaultWidth:"wide"}),dayPeriod:lc({values:_L,defaultWidth:"wide",formattingValues:SL,defaultFormattingWidth:"wide"})};function cc(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?kL(u,y=>y.test(a)):AL(u,y=>y.test(a));let h;h=t.valueCallback?t.valueCallback(d):d,h=n.valueCallback?n.valueCallback(h):h;const x=e.slice(a.length);return{value:h,rest:x}}}function AL(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function kL(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function NL(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const u=e.slice(s.length);return{value:a,rest:u}}}const TL=/^(\d+)(th|st|nd|rd)?/i,IL=/\d+/i,RL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},PL={any:[/^b/i,/^(a|c)/i]},OL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ML={any:[/1/i,/2/i,/3/i,/4/i]},jL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},DL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},LL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},FL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},VL={ordinalNumber:NL({matchPattern:TL,parsePattern:IL,valueCallback:t=>parseInt(t,10)}),era:cc({matchPatterns:RL,defaultMatchWidth:"wide",parsePatterns:PL,defaultParseWidth:"any"}),quarter:cc({matchPatterns:OL,defaultMatchWidth:"wide",parsePatterns:ML,defaultParseWidth:"any",valueCallback:t=>t+1}),month:cc({matchPatterns:jL,defaultMatchWidth:"wide",parsePatterns:DL,defaultParseWidth:"any"}),day:cc({matchPatterns:LL,defaultMatchWidth:"wide",parsePatterns:FL,defaultParseWidth:"any"}),dayPeriod:cc({matchPatterns:BL,defaultMatchWidth:"any",parsePatterns:UL,defaultParseWidth:"any"})},w5={code:"en-US",formatDistance:dL,formatLong:gL,formatRelative:xL,localize:CL,match:VL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zL(t,e){const n=et(t,e==null?void 0:e.in);return h5(n,y5(n))+1}function b5(t,e){const n=et(t,e==null?void 0:e.in),r=+pl(n)-+U9(n);return Math.round(r/u5)+1}function Ix(t,e){var x,y,b,_;const n=et(t,e==null?void 0:e.in),r=n.getFullYear(),s=aa(),i=(e==null?void 0:e.firstWeekContainsDate)??((y=(x=e==null?void 0:e.locale)==null?void 0:x.options)==null?void 0:y.firstWeekContainsDate)??s.firstWeekContainsDate??((_=(b=s.locale)==null?void 0:b.options)==null?void 0:_.firstWeekContainsDate)??1,a=pn((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const u=Vs(a,e),d=pn((e==null?void 0:e.in)||t,0);d.setFullYear(r,0,i),d.setHours(0,0,0,0);const h=Vs(d,e);return+n>=+u?r+1:+n>=+h?r:r-1}function WL(t,e){var u,d,h,x;const n=aa(),r=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(h=n.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,s=Ix(t,e),i=pn((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Vs(i,e)}function v5(t,e){const n=et(t,e==null?void 0:e.in),r=+Vs(n,e)-+WL(n,e);return Math.round(r/u5)+1}function Nt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ai={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Nt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Nt(n+1,2)},d(t,e){return Nt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Nt(t.getHours()%12||12,e.length)},H(t,e){return Nt(t.getHours(),e.length)},m(t,e){return Nt(t.getMinutes(),e.length)},s(t,e){return Nt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Nt(s,e.length)}},Ca={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kb={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ai.y(t,e)},Y:function(t,e,n,r){const s=Ix(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Nt(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Nt(i,e.length)},R:function(t,e){const n=d5(t);return Nt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Nt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Nt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Nt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ai.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Nt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=v5(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Nt(s,e.length)},I:function(t,e,n){const r=b5(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Nt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ai.d(t,e)},D:function(t,e,n){const r=zL(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Nt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Nt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Nt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Nt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ca.noon:r===0?s=Ca.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ca.evening:r>=12?s=Ca.afternoon:r>=4?s=Ca.morning:s=Ca.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ai.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ai.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Nt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Nt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ai.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ai.s(t,e)},S:function(t,e){return Ai.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Qb(r);case"XXXX":case"XX":return Io(r);case"XXXXX":case"XXX":default:return Io(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Qb(r);case"xxxx":case"xx":return Io(r);case"xxxxx":case"xxx":default:return Io(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Zb(r,":");case"OOOO":default:return"GMT"+Io(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Zb(r,":");case"zzzz":default:return"GMT"+Io(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Nt(r,e.length)},T:function(t,e,n){return Nt(+t,e.length)}};function Zb(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Nt(i,2)}function Qb(t,e){return t%60===0?(t>0?"-":"+")+Nt(Math.abs(t)/60,2):Io(t,e)}function Io(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Nt(Math.trunc(r/60),2),i=Nt(r%60,2);return n+s+e+i}const Jb=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_5=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},HL=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Jb(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Jb(r,e)).replace("{{time}}",_5(s,e))},E1={p:_5,P:HL},$L=/^D+$/,GL=/^Y+$/,qL=["D","DD","YY","YYYY"];function S5(t){return $L.test(t)}function E5(t){return GL.test(t)}function C1(t,e,n){const r=YL(t,e,n);if(console.warn(r),qL.includes(t))throw new RangeError(r)}function YL(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const XL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZL=/^'([^]*?)'?$/,QL=/''/g,JL=/[a-zA-Z]/;function vh(t,e,n){var x,y,b,_,C,N,k,E;const r=aa(),s=(n==null?void 0:n.locale)??r.locale??w5,i=(n==null?void 0:n.firstWeekContainsDate)??((y=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(b=r.locale)==null?void 0:b.options)==null?void 0:_.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((N=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:N.weekStartsOn)??r.weekStartsOn??((E=(k=r.locale)==null?void 0:k.options)==null?void 0:E.weekStartsOn)??0,u=et(t,n==null?void 0:n.in);if(!f5(u))throw new RangeError("Invalid time value");let d=e.match(KL).map(A=>{const I=A[0];if(I==="p"||I==="P"){const j=E1[I];return j(A,s.formatLong)}return A}).join("").match(XL).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const I=A[0];if(I==="'")return{isToken:!1,value:eF(A)};if(Kb[I])return{isToken:!0,value:A};if(I.match(JL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");return{isToken:!1,value:A}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return d.map(A=>{if(!A.isToken)return A.value;const I=A.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&E5(I)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&S5(I))&&C1(I,e,String(t));const j=Kb[I[0]];return j(u,I,s.localize,h)}).join("")}function eF(t){const e=t.match(ZL);return e?e[1].replace(QL,"'"):t}function tF(){return Object.assign({},aa())}function nF(t,e){const n=et(t,e==null?void 0:e.in).getDay();return n===0?7:n}function rF(t,e){const n=sF(e)?new e(0):pn(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function sF(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const iF=10;class C5{constructor(){xe(this,"subPriority",0)}validate(e,n){return!0}}class oF extends C5{constructor(e,n,r,s,i){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class aF extends C5{constructor(n,r){super();xe(this,"priority",iF);xe(this,"subPriority",-1);this.context=n||(s=>pn(r,s))}set(n,r){return r.timestampIsSet?n:pn(n,rF(n,this.context))}}class Et{run(e,n,r,s){const i=this.parse(e,n,r,s);return i?{setter:new oF(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,r){return!0}}class lF extends Et{constructor(){super(...arguments);xe(this,"priority",140);xe(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})||s.era(n,{width:"abbreviated"})||s.era(n,{width:"narrow"})}}set(n,r,s){return r.era=s,n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}const Cn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ms={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function An(t,e){return t&&{value:e(t.value),rest:t.rest}}function nn(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function js(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(s*Ku+i*Xu+a*L9),rest:e.slice(n[0].length)}}function A5(t){return nn(Cn.anyDigitsSigned,t)}function xn(t,e){switch(t){case 1:return nn(Cn.singleDigit,e);case 2:return nn(Cn.twoDigits,e);case 3:return nn(Cn.threeDigits,e);case 4:return nn(Cn.fourDigits,e);default:return nn(new RegExp("^\\d{1,"+t+"}"),e)}}function xf(t,e){switch(t){case 1:return nn(Cn.singleDigitSigned,e);case 2:return nn(Cn.twoDigitsSigned,e);case 3:return nn(Cn.threeDigitsSigned,e);case 4:return nn(Cn.fourDigitsSigned,e);default:return nn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Rx(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function k5(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const i=r+50,a=Math.trunc(i/100)*100,u=t>=i%100;s=t+a-(u?100:0)}return n?s:1-s}function N5(t){return t%400===0||t%4===0&&t%100!==0}class cF extends Et{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,s){const i=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return An(xn(4,n),i);case"yo":return An(s.ordinalNumber(n,{unit:"year"}),i);default:return An(xn(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s){const i=n.getFullYear();if(s.isTwoDigitYear){const u=k5(s.year,i);return n.setFullYear(u,0,1),n.setHours(0,0,0,0),n}const a=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}class uF extends Et{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,s){const i=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return An(xn(4,n),i);case"Yo":return An(s.ordinalNumber(n,{unit:"year"}),i);default:return An(xn(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,s,i){const a=Ix(n,i);if(s.isTwoDigitYear){const d=k5(s.year,a);return n.setFullYear(d,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),Vs(n,i)}const u=!("era"in r)||r.era===1?s.year:1-s.year;return n.setFullYear(u,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),Vs(n,i)}}class dF extends Et{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return xf(r==="R"?4:r.length,n)}set(n,r,s){const i=pn(n,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),pl(i)}}class hF extends Et{constructor(){super(...arguments);xe(this,"priority",130);xe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return xf(r==="u"?4:r.length,n)}set(n,r,s){return n.setFullYear(s,0,1),n.setHours(0,0,0,0),n}}class fF extends Et{constructor(){super(...arguments);xe(this,"priority",120);xe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"Q":case"QQ":return xn(r.length,n);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})||s.quarter(n,{width:"abbreviated",context:"formatting"})||s.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class mF extends Et{constructor(){super(...arguments);xe(this,"priority",120);xe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"q":case"qq":return xn(r.length,n);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})||s.quarter(n,{width:"abbreviated",context:"standalone"})||s.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,s){return n.setMonth((s-1)*3,1),n.setHours(0,0,0,0),n}}class gF extends Et{constructor(){super(...arguments);xe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);xe(this,"priority",110)}parse(n,r,s){const i=a=>a-1;switch(r){case"M":return An(nn(Cn.month,n),i);case"MM":return An(xn(2,n),i);case"Mo":return An(s.ordinalNumber(n,{unit:"month"}),i);case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})||s.month(n,{width:"abbreviated",context:"formatting"})||s.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}class pF extends Et{constructor(){super(...arguments);xe(this,"priority",110);xe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,s){const i=a=>a-1;switch(r){case"L":return An(nn(Cn.month,n),i);case"LL":return An(xn(2,n),i);case"Lo":return An(s.ordinalNumber(n,{unit:"month"}),i);case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})||s.month(n,{width:"abbreviated",context:"standalone"})||s.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.setMonth(s,1),n.setHours(0,0,0,0),n}}function xF(t,e,n){const r=et(t,n==null?void 0:n.in),s=v5(r,n)-e;return r.setDate(r.getDate()-s*7),et(r,n==null?void 0:n.in)}class yF extends Et{constructor(){super(...arguments);xe(this,"priority",100);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,s){switch(r){case"w":return nn(Cn.week,n);case"wo":return s.ordinalNumber(n,{unit:"week"});default:return xn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s,i){return Vs(xF(n,s,i),i)}}function wF(t,e,n){const r=et(t,n==null?void 0:n.in),s=b5(r,n)-e;return r.setDate(r.getDate()-s*7),r}class bF extends Et{constructor(){super(...arguments);xe(this,"priority",100);xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,s){switch(r){case"I":return nn(Cn.week,n);case"Io":return s.ordinalNumber(n,{unit:"week"});default:return xn(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,s){return pl(wF(n,s))}}const vF=[31,28,31,30,31,30,31,31,30,31,30,31],_F=[31,29,31,30,31,30,31,31,30,31,30,31];class SF extends Et{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"subPriority",1);xe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"d":return nn(Cn.date,n);case"do":return s.ordinalNumber(n,{unit:"date"});default:return xn(r.length,n)}}validate(n,r){const s=n.getFullYear(),i=N5(s),a=n.getMonth();return i?r>=1&&r<=_F[a]:r>=1&&r<=vF[a]}set(n,r,s){return n.setDate(s),n.setHours(0,0,0,0),n}}class EF extends Et{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"subpriority",1);xe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,s){switch(r){case"D":case"DD":return nn(Cn.dayOfYear,n);case"Do":return s.ordinalNumber(n,{unit:"date"});default:return xn(r.length,n)}}validate(n,r){const s=n.getFullYear();return N5(s)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,s){return n.setMonth(0,s),n.setHours(0,0,0,0),n}}function Px(t,e,n){var y,b,_,C;const r=aa(),s=(n==null?void 0:n.weekStartsOn)??((b=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((C=(_=r.locale)==null?void 0:_.options)==null?void 0:C.weekStartsOn)??0,i=et(t,n==null?void 0:n.in),a=i.getDay(),d=(e%7+7)%7,h=7-s,x=e<0||e>6?e-(a+h)%7:(d+h)%7-(a+h)%7;return h0(i,x,n)}class CF extends Et{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=Px(n,s,i),n.setHours(0,0,0,0),n}}class AF extends Et{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,s,i){const a=u=>{const d=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+d};switch(r){case"e":case"ee":return An(xn(r.length,n),a);case"eo":return An(s.ordinalNumber(n,{unit:"day"}),a);case"eee":return s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=Px(n,s,i),n.setHours(0,0,0,0),n}}class kF extends Et{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,s,i){const a=u=>{const d=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+d};switch(r){case"c":case"cc":return An(xn(r.length,n),a);case"co":return An(s.ordinalNumber(n,{unit:"day"}),a);case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})||s.day(n,{width:"abbreviated",context:"standalone"})||s.day(n,{width:"short",context:"standalone"})||s.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,s,i){return n=Px(n,s,i),n.setHours(0,0,0,0),n}}function NF(t,e,n){const r=et(t,n==null?void 0:n.in),s=nF(r,n),i=e-s;return h0(r,i,n)}class TF extends Et{constructor(){super(...arguments);xe(this,"priority",90);xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,s){const i=a=>a===0?7:a;switch(r){case"i":case"ii":return xn(r.length,n);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return An(s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return An(s.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return An(s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return An(s.day(n,{width:"wide",context:"formatting"})||s.day(n,{width:"abbreviated",context:"formatting"})||s.day(n,{width:"short",context:"formatting"})||s.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,s){return n=NF(n,s),n.setHours(0,0,0,0),n}}class IF extends Et{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Rx(s),0,0,0),n}}class RF extends Et{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Rx(s),0,0,0),n}}class PF extends Et{constructor(){super(...arguments);xe(this,"priority",80);xe(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})||s.dayPeriod(n,{width:"abbreviated",context:"formatting"})||s.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,s){return n.setHours(Rx(s),0,0,0),n}}class OF extends Et{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,s){switch(r){case"h":return nn(Cn.hour12h,n);case"ho":return s.ordinalNumber(n,{unit:"hour"});default:return xn(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,s){const i=n.getHours()>=12;return i&&s<12?n.setHours(s+12,0,0,0):!i&&s===12?n.setHours(0,0,0,0):n.setHours(s,0,0,0),n}}class MF extends Et{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,s){switch(r){case"H":return nn(Cn.hour23h,n);case"Ho":return s.ordinalNumber(n,{unit:"hour"});default:return xn(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,s){return n.setHours(s,0,0,0),n}}class jF extends Et{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,s){switch(r){case"K":return nn(Cn.hour11h,n);case"Ko":return s.ordinalNumber(n,{unit:"hour"});default:return xn(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,s){return n.getHours()>=12&&s<12?n.setHours(s+12,0,0,0):n.setHours(s,0,0,0),n}}class DF extends Et{constructor(){super(...arguments);xe(this,"priority",70);xe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,s){switch(r){case"k":return nn(Cn.hour24h,n);case"ko":return s.ordinalNumber(n,{unit:"hour"});default:return xn(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,s){const i=s<=24?s%24:s;return n.setHours(i,0,0,0),n}}class LF extends Et{constructor(){super(...arguments);xe(this,"priority",60);xe(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"m":return nn(Cn.minute,n);case"mo":return s.ordinalNumber(n,{unit:"minute"});default:return xn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setMinutes(s,0,0),n}}class FF extends Et{constructor(){super(...arguments);xe(this,"priority",50);xe(this,"incompatibleTokens",["t","T"])}parse(n,r,s){switch(r){case"s":return nn(Cn.second,n);case"so":return s.ordinalNumber(n,{unit:"second"});default:return xn(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,s){return n.setSeconds(s,0),n}}class BF extends Et{constructor(){super(...arguments);xe(this,"priority",30);xe(this,"incompatibleTokens",["t","T"])}parse(n,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return An(xn(r.length,n),s)}set(n,r,s){return n.setMilliseconds(s),n}}class UF extends Et{constructor(){super(...arguments);xe(this,"priority",10);xe(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return js(Ms.basicOptionalMinutes,n);case"XX":return js(Ms.basic,n);case"XXXX":return js(Ms.basicOptionalSeconds,n);case"XXXXX":return js(Ms.extendedOptionalSeconds,n);case"XXX":default:return js(Ms.extended,n)}}set(n,r,s){return r.timestampIsSet?n:pn(n,n.getTime()-pf(n)-s)}}class VF extends Et{constructor(){super(...arguments);xe(this,"priority",10);xe(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return js(Ms.basicOptionalMinutes,n);case"xx":return js(Ms.basic,n);case"xxxx":return js(Ms.basicOptionalSeconds,n);case"xxxxx":return js(Ms.extendedOptionalSeconds,n);case"xxx":default:return js(Ms.extended,n)}}set(n,r,s){return r.timestampIsSet?n:pn(n,n.getTime()-pf(n)-s)}}class zF extends Et{constructor(){super(...arguments);xe(this,"priority",40);xe(this,"incompatibleTokens","*")}parse(n){return A5(n)}set(n,r,s){return[pn(n,s*1e3),{timestampIsSet:!0}]}}class WF extends Et{constructor(){super(...arguments);xe(this,"priority",20);xe(this,"incompatibleTokens","*")}parse(n){return A5(n)}set(n,r,s){return[pn(n,s),{timestampIsSet:!0}]}}const HF={G:new lF,y:new cF,Y:new uF,R:new dF,u:new hF,Q:new fF,q:new mF,M:new gF,L:new pF,w:new yF,I:new bF,d:new SF,D:new EF,E:new CF,e:new AF,c:new kF,i:new TF,a:new IF,b:new RF,B:new PF,h:new OF,H:new MF,K:new jF,k:new DF,m:new LF,s:new FF,S:new BF,X:new UF,x:new VF,t:new zF,T:new WF},$F=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qF=/^'([^]*?)'?$/,YF=/''/g,XF=/\S/,KF=/[a-zA-Z]/;function ZF(t,e,n,r){var k,E,A,I,j,F,z,O;const s=()=>pn((r==null?void 0:r.in)||n,NaN),i=tF(),a=(r==null?void 0:r.locale)??i.locale??w5,u=(r==null?void 0:r.firstWeekContainsDate)??((E=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((I=(A=i.locale)==null?void 0:A.options)==null?void 0:I.firstWeekContainsDate)??1,d=(r==null?void 0:r.weekStartsOn)??((F=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:F.weekStartsOn)??i.weekStartsOn??((O=(z=i.locale)==null?void 0:z.options)==null?void 0:O.weekStartsOn)??0;if(!e)return t?s():et(n,r==null?void 0:r.in);const h={firstWeekContainsDate:u,weekStartsOn:d,locale:a},x=[new aF(r==null?void 0:r.in,n)],y=e.match(GF).map(R=>{const M=R[0];if(M in E1){const U=E1[M];return U(R,a.formatLong)}return R}).join("").match($F),b=[];for(let R of y){!(r!=null&&r.useAdditionalWeekYearTokens)&&E5(R)&&C1(R,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&S5(R)&&C1(R,e,t);const M=R[0],U=HF[M];if(U){const{incompatibleTokens:X}=U;if(Array.isArray(X)){const te=b.find(fe=>X.includes(fe.token)||fe.token===M);if(te)throw new RangeError(`The format string mustn't contain \`${te.fullToken}\` and \`${R}\` at the same time`)}else if(U.incompatibleTokens==="*"&&b.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);b.push({token:M,fullToken:R});const V=U.run(t,R,a.match,h);if(!V)return s();x.push(V.setter),t=V.rest}else{if(M.match(KF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");if(R==="''"?R="'":M==="'"&&(R=QF(R)),t.indexOf(R)===0)t=t.slice(R.length);else return s()}}if(t.length>0&&XF.test(t))return s();const _=x.map(R=>R.priority).sort((R,M)=>M-R).filter((R,M,U)=>U.indexOf(R)===M).map(R=>x.filter(M=>M.priority===R).sort((M,U)=>U.subPriority-M.subPriority)).map(R=>R[0]);let C=et(n,r==null?void 0:r.in);if(isNaN(+C))return s();const N={};for(const R of _){if(!R.validate(C,h))return s();const M=R.set(C,N,h);Array.isArray(M)?(C=M[0],Object.assign(N,M[1])):C=M}return C}function QF(t){return t.match(qF)[1].replace(YF,"'")}function JF(t,e){const n=et(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function eB(t,e){const n=et(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function tB(t,e){const n=et(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function nB(t,e){const n=()=>pn(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,s=oB(t);let i;if(s.date){const h=aB(s.date,r);i=lB(h.restDateString,h.year)}if(!i||isNaN(+i))return n();const a=+i;let u=0,d;if(s.time&&(u=cB(s.time),isNaN(u)))return n();if(s.timezone){if(d=uB(s.timezone),isNaN(d))return n()}else{const h=new Date(a+u),x=et(0,e==null?void 0:e.in);return x.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),x.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),x}return et(a+u+d,e==null?void 0:e.in)}const qd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},rB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,sB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,iB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oB(t){const e={},n=t.split(qd.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],qd.timeZoneDelimiter.test(e.date)&&(e.date=t.split(qd.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=qd.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function aB(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function lB(t,e){if(e===null)return new Date(NaN);const n=t.match(rB);if(!n)return new Date(NaN);const r=!!n[4],s=uc(n[1]),i=uc(n[2])-1,a=uc(n[3]),u=uc(n[4]),d=uc(n[5])-1;if(r)return gB(e,u,d)?dB(e,u,d):new Date(NaN);{const h=new Date(0);return!fB(e,i,a)||!mB(e,s)?new Date(NaN):(h.setUTCFullYear(e,i,Math.max(s,a)),h)}}function uc(t){return t?parseInt(t):1}function cB(t){const e=t.match(sB);if(!e)return NaN;const n=Bm(e[1]),r=Bm(e[2]),s=Bm(e[3]);return pB(n,r,s)?n*Ku+r*Xu+s*1e3:NaN}function Bm(t){return t&&parseFloat(t.replace(",","."))||0}function uB(t){if(t==="Z")return 0;const e=t.match(iB);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return xB(r,s)?n*(r*Ku+s*Xu):NaN}function dB(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const hB=[31,null,31,30,31,30,31,31,30,31,30,31];function T5(t){return t%400===0||t%4===0&&t%100!==0}function fB(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(hB[e]||(T5(t)?29:28))}function mB(t,e){return e>=1&&e<=(T5(t)?366:365)}function gB(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function pB(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function xB(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const yB={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};zC._date.override({_id:"date-fns",formats:function(){return yB},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=et(t):n==="string"&&(typeof e=="string"?t=ZF(t,e,new Date,this.options):t=nB(t,this.options)),f5(t)?t.getTime():null},format:function(t,e){return vh(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return Nx(t,e);case"second":return W9(t,e);case"minute":return V9(t,e);case"hour":return F9(t,e);case"day":return h0(t,e);case"week":return H9(t,e);case"month":return kx(t,e);case"quarter":return z9(t,e);case"year":return $9(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return Tx(t,e);case"second":return J9(t,e);case"minute":return K9(t,e);case"hour":return X9(t,e);case"day":return m5(t,e);case"week":return eL(t,e);case"month":return x5(t,e);case"quarter":return Q9(t,e);case"year":return tL(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return tB(t);case"minute":return eB(t);case"hour":return JF(t);case"day":return S1(t);case"week":return Vs(t);case"isoWeek":return Vs(t,{weekStartsOn:+n});case"month":return rL(t);case"quarter":return nL(t);case"year":return y5(t);default:return t}},endOf:function(t,e){switch(e){case"second":return cL(t);case"minute":return aL(t);case"hour":return iL(t);case"day":return g5(t);case"week":return oL(t);case"month":return p5(t);case"quarter":return lL(t);case"year":return sL(t);default:return t}}});Pl.register(mf,gf,wh,Ac,Tu,r5,Ax,Cx);const ev=[{value:"today",label:"Today",days:0},{value:"yesterday",label:"Yesterday",days:1},{value:"3days",label:"Last 3 Days",days:3},{value:"week",label:"Last 7 Days",days:7},{value:"2weeks",label:"Last 2 Weeks",days:14},{value:"month",label:"Last 30 Days",days:30},{value:"quarter",label:"Last 3 Months",days:90},{value:"halfyear",label:"Last 6 Months",days:180}],wB=()=>{const[t,e]=T.useState(()=>localStorage.getItem("inventoryTrendsPeriod")||"week"),[n,r]=T.useState([]),[s,i]=T.useState(!0),[a,u]=T.useState(null),h=Xt(k=>k.inventory.items).filter(k=>!k.id.startsWith("GHOST-")&&!k.name.startsWith("[DELETED]")&&!k.sku.startsWith("DELETED-"));T.useEffect(()=>{localStorage.setItem("inventoryTrendsPeriod",t),b()},[t]),T.useEffect(()=>{const k=we.channel("stock-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"stock_adjustments"},E=>{x(E.new)}).subscribe();return()=>{k.unsubscribe()}},[h,t]);const x=k=>{const E=h.find(A=>A.id===k.product_id);if(E){const A={productId:E.id,productName:E.name,stock:k.new_quantity,timestamp:k.created_at};r(I=>{const j=[...I,A].sort((z,O)=>new Date(z.timestamp).getTime()-new Date(O.timestamp).getTime()),F=new Date;return F.setDate(F.getDate()-parseInt(t)),j.filter(z=>new Date(z.timestamp)>=F)})}},y=k=>{const E=ev.find(I=>I.value===k),A=new Date;return k==="today"?A.setHours(0,0,0,0):k==="yesterday"?(A.setDate(A.getDate()-1),A.setHours(0,0,0,0)):E?A.setDate(A.getDate()-E.days):A.setDate(A.getDate()-7),A},b=async()=>{try{i(!0),u(null);const k=new Date,E=y(t),A=h.map(M=>({productId:M.id,productName:M.name,stock:M.stock,timestamp:new Date().toISOString()})),I=t==="today"||t==="yesterday"?{ascending:!0}:{ascending:!0},{data:j,error:F}=await we.from("stock_adjustments").select("product_id, new_quantity, created_at").gte("created_at",E.toISOString()).lte("created_at",k.toISOString()).order("created_at",I);if(F)throw F;let z=[...A];j&&(z=[...j.map(U=>{const X=h.find(V=>V.id===U.product_id);return X?{productId:X.id,productName:X.name,stock:U.new_quantity,timestamp:U.created_at}:null}).filter(U=>U!==null),...A]);const O=z.reduce((M,U)=>{let X;const V=new Date(U.timestamp);return t==="today"||t==="yesterday"?X=`${V.toISOString().split("T")[0]}-${V.getHours()}-${U.productId}`:X=`${V.toISOString().split("T")[0]}-${U.productId}`,(!M[X]||new Date(U.timestamp)>new Date(M[X].timestamp))&&(M[X]=U),M},{}),R=Object.values(O).sort((M,U)=>new Date(M.timestamp).getTime()-new Date(U.timestamp).getTime());r(R)}catch(k){console.error("Error fetching stock levels:",k),u("Failed to load inventory trends. Please try again later.")}finally{i(!1)}},_=(k,E=1)=>{const A=[[255,99,132],[54,162,235],[255,206,86],[75,192,192],[153,102,255],[255,159,64],[52,231,43],[250,78,121],[141,99,255],[255,127,80]],I=parseInt(k.replace(/\D/g,""))%A.length,[j,F,z]=A[I]||A[0];return`rgba(${j}, ${F}, ${z}, ${E})`},C={labels:n.filter(k=>{var E;return k.productId===((E=h[0])==null?void 0:E.id)}).map(k=>new Date(k.timestamp)).sort((k,E)=>k.getTime()-E.getTime()),datasets:h.map(k=>({label:k.name,data:n.filter(E=>E.productId===k.id).map(E=>E.stock).sort((E,A)=>E-A),backgroundColor:_(k.id,.8),borderColor:_(k.id,1),borderWidth:1,barThickness:20,borderRadius:4}))},N={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14},bodyFont:{size:13},callbacks:{label:k=>{const E=k.dataset.label||"",A=k.parsed.y;return`${E}: ${A.toLocaleString()} units`}}}},scales:{x:{grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:12}}},y:{beginAtZero:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:12},callback:k=>k.toLocaleString()}}}};return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Inventory Trends"}),m.jsx("select",{value:t,onChange:k=>e(k.target.value),className:"border border-gray-300 rounded-md px-3 py-1.5 text-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",children:ev.map(k=>m.jsx("option",{value:k.value,children:k.label},k.value))})]}),a&&m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:a}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Stock Levels"}),s?m.jsx("div",{className:"flex justify-center items-center h-[300px]",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):n.length===0?m.jsx("div",{className:"flex flex-col items-center justify-center h-[300px] text-gray-500",children:m.jsx("p",{className:"text-sm",children:"No inventory data available for the selected period."})}):m.jsx("div",{className:"h-[300px]",children:m.jsx(c5,{data:C,options:N})})]})]})},bB=()=>{const t=zs(),{items:e,loading:n}=Xt(_=>_.inventory),{items:r,loading:s}=Xt(_=>_.orders),[i,a]=T.useState([]),[u,d]=T.useState(!0),{formatPrice:h}=Tl();T.useEffect(()=>{(async()=>{try{d(!0),await Promise.all([t(ns()),t(Wo())])}catch(C){console.error("Error fetching dashboard data:",C)}finally{d(!1)}})()},[t]),T.useEffect(()=>{const _=e.filter(C=>!C.id.startsWith("GHOST-")&&!C.name.startsWith("[DELETED]")&&!C.sku.startsWith("DELETED-")&&C.stock<=C.reorder_level).sort((C,N)=>C.stock-N.stock).slice(0,5);a(_)},[e]);const x=[...r].sort((_,C)=>new Date(C.created_at).getTime()-new Date(_.created_at).getTime()).slice(0,5),y={total:r.length,pending:r.filter(_=>_.status==="pending").length,completed:r.filter(_=>_.status==="delivered").length,cancelled:r.filter(_=>_.status==="cancelled").length},b=async()=>{try{const _=new Date().toISOString().split("T")[0],C={generatedAt:new Date().toISOString(),inventorySummary:{totalProducts:e.length,lowStockItems:e.filter(I=>I.stock<=I.reorder_level).length,outOfStockItems:e.filter(I=>I.stock===0).length,totalValue:e.reduce((I,j)=>I+j.stock*(j.selling_price||0),0)},recentOrders:r.slice(0,5).map(I=>({id:I.id,customer:I.customer,status:I.status,total:I.total_amount,date:I.created_at})),lowStockItems:e.filter(I=>I.stock<=I.reorder_level).map(I=>({name:I.name,sku:I.sku,currentStock:I.stock,reorderLevel:I.reorder_level,location:I.location}))},N=JSON.stringify(C,null,2),k=new Blob([N],{type:"application/json"}),E=window.URL.createObjectURL(k),A=document.createElement("a");A.href=E,A.download=`inventory-report-${_}.json`,document.body.appendChild(A),A.click(),window.URL.revokeObjectURL(E),document.body.removeChild(A)}catch(_){console.error("Error generating report:",_),alert("Failed to generate report. Please try again.")}};return u||n||s?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m.jsxs("div",{className:"p-6",children:[m.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),m.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[m.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(pC,{className:"h-6 w-6 text-gray-400"})}),m.jsx("div",{className:"ml-5 w-0 flex-1",children:m.jsxs("dl",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Orders"}),m.jsx("dd",{className:"flex items-baseline",children:m.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:y.total})})]})})]})})}),m.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(BO,{className:"h-6 w-6 text-gray-400"})}),m.jsx("div",{className:"ml-5 w-0 flex-1",children:m.jsxs("dl",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Orders"}),m.jsx("dd",{className:"flex items-baseline",children:m.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:y.pending})})]})})]})})}),m.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(cO,{className:"h-6 w-6 text-gray-400"})}),m.jsx("div",{className:"ml-5 w-0 flex-1",children:m.jsxs("dl",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completed Orders"}),m.jsx("dd",{className:"flex items-baseline",children:m.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:y.completed})})]})})]})})}),m.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(aO,{className:"h-6 w-6 text-gray-400"})}),m.jsx("div",{className:"ml-5 w-0 flex-1",children:m.jsxs("dl",{children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Cancelled Orders"}),m.jsx("dd",{className:"flex items-baseline",children:m.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:y.cancelled})})]})})]})})})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Inventory Trends"}),m.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:m.jsx(wB,{})})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),m.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[m.jsx(In,{to:"/import",className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:m.jsx(VO,{className:"h-6 w-6 text-blue-600"})})}),m.jsxs("div",{className:"ml-5 w-0 flex-1",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import CSV"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Import products from a CSV file"})]})]})})}),m.jsx(In,{to:"/products",className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:m.jsx(qu,{className:"h-6 w-6 text-green-600"})})}),m.jsxs("div",{className:"ml-5 w-0 flex-1",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Product"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add a new product to inventory"})]})]})})}),m.jsx(In,{to:"/inventory",className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-200",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center",children:m.jsx(gO,{className:"h-6 w-6 text-purple-600"})})}),m.jsxs("div",{className:"ml-5 w-0 flex-1",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Stock Adjustments"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Adjust inventory stock levels"})]})]})})}),m.jsx("button",{onClick:b,className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow duration-200 text-left",children:m.jsx("div",{className:"p-5",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:m.jsx(WO,{className:"h-6 w-6 text-yellow-600"})})}),m.jsxs("div",{className:"ml-5 w-0 flex-1",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generate Report"}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Download inventory report"})]})]})})})]})]}),m.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[m.jsx("div",{className:"bg-white shadow rounded-lg",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Orders"}),m.jsxs("div",{className:"mt-4",children:[x.length>0?m.jsx("div",{className:"flow-root",children:m.jsx("ul",{className:"-my-5 divide-y divide-gray-200",children:x.map(_=>m.jsx("li",{className:"py-4",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:["Order #",_.id]}),m.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[_.customer," - ",h(_.total_amount)]}),m.jsx("p",{className:"text-xs text-gray-400",children:new Date(_.created_at).toLocaleDateString()})]}),m.jsx("div",{children:m.jsx("span",{className:`
                              inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                              ${_.status==="delivered"?"bg-green-100 text-green-800":""}
                              ${_.status==="pending"?"bg-yellow-100 text-yellow-800":""}
                              ${_.status==="cancelled"?"bg-red-100 text-red-800":""}
                              ${_.status==="processing"?"bg-blue-100 text-blue-800":""}
                              ${_.status==="shipped"?"bg-purple-100 text-purple-800":""}
                            `,children:_.status.charAt(0).toUpperCase()+_.status.slice(1)})})]})},_.id))})}):m.jsx("p",{className:"text-gray-500 text-sm",children:"No recent orders"}),m.jsx("div",{className:"mt-6",children:m.jsx(In,{to:"/orders",className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"View All Orders"})})]})]})}),m.jsx("div",{className:"bg-white shadow rounded-lg",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Low Stock Items"}),m.jsxs("div",{className:"mt-4",children:[i.length>0?m.jsx("div",{className:"flow-root",children:m.jsx("ul",{className:"-my-5 divide-y divide-gray-200",children:i.map(_=>m.jsx("li",{className:"py-4",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(fl,{className:"h-6 w-6 text-yellow-400"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Current Stock: ",_.stock," (Min: ",_.reorder_level,")"]})]})]})},_.id))})}):m.jsx("p",{className:"text-gray-500 text-sm",children:"No low stock items"}),m.jsx("div",{className:"mt-6",children:m.jsx(In,{to:"/inventory",className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"View Inventory"})})]})]})})]})]})},vB=({onClose:t,initialSku:e="",initialProductData:n={},onProductCreated:r})=>{const s=zs(),i=Xt($=>$.inventory.categories),a=Xt($=>$.inventory.locations),u=Xt($=>$.inventory.items),[d,h]=T.useState(!1),[x,y]=T.useState(null),[b,_]=T.useState(!1),[C,N]=T.useState(!1),[k,E]=T.useState(""),[A,I]=T.useState("");T.useEffect(()=>{s(o0()),s(a0())},[s]);const[j,F]=T.useState({name:n.name||"",description:"",sku:e,category:n.category||"",stock:n.stock||0,cost_price:n.cost_price||0,selling_price:n.selling_price||0,location:n.location||"",reorder_level:10,custom_icon:"",custom_icon_type:"default",is_serialized:!1});T.useEffect(()=>{if(!e&&j.category&&j.name){const $=j.category.slice(0,2).toUpperCase(),Q=u.filter(re=>re.category===j.category).map(re=>re.sku).filter(re=>re.startsWith($)).map(re=>{const ae=parseInt(re.slice(3));return isNaN(ae)?0:ae}),J=Math.max(0,...Q)+1,oe=`${$}-${String(J).padStart(3,"0")}`;F(re=>({...re,sku:oe}))}},[j.category,j.name,u,e]);const z=$=>$.replace(/^0+(?=\d)/,"").replace(/[^\d]/g,""),O=$=>{const{name:Q,value:ne}=$.target;F(J=>({...J,[Q]:Q==="stock"||Q==="cost_price"||Q==="selling_price"||Q==="reorder_level"?parseFloat(ne)||0:ne})),y(null)},R=$=>{const{name:Q,value:ne}=$.target;let J=ne.replace(/^0+(?!\.)/,"");J=J.replace(/[^\d.]/g,""),F(oe=>({...oe,[Q]:J}))},M=$=>{const{name:Q,value:ne}=$.target;if(ne===""||ne==="0"||ne==="0.00")F(J=>({...J,[Q]:""}));else{let J=parseFloat(ne);isNaN(J)&&(J=0),F(oe=>({...oe,[Q]:J.toFixed(2)}))}},U=()=>{},X=$=>{const{value:Q}=$.target;F(ne=>({...ne,stock:parseInt(z(Q))||0}))},V=$=>{const{value:Q}=$.target;F(ne=>({...ne,reorder_level:parseInt(z(Q))||0}))},te=$=>{$.preventDefault(),k.trim()&&(s(QE(k.trim())),F({...j,category:k.trim()}),E(""),_(!1))},fe=$=>{$.preventDefault(),A.trim()&&(s(JE(A.trim())),F({...j,location:A.trim()}),I(""),N(!1))},G=()=>{if(!j.name.trim())return"Product name is required";if(!j.sku.trim())return"SKU is required";if(!j.category.trim())return"Category is required";if(!j.location.trim())return"Location is required";const $=typeof j.cost_price=="string"?parseFloat(j.cost_price)||0:j.cost_price,Q=typeof j.selling_price=="string"?parseFloat(j.selling_price)||0:j.selling_price;return $<=0?"Cost price must be greater than 0":Q<=0?"Selling price must be greater than 0":Q<=$?"Selling price must be greater than cost price":j.stock<0?"Stock cannot be negative":j.reorder_level<0?"Reorder level cannot be negative":null},be=async $=>{$.preventDefault();const Q=G();if(Q){y(Q);return}h(!0),y(null);try{const ne=await s(rx({...j,cost_price:typeof j.cost_price=="string"?parseFloat(j.cost_price)||0:j.cost_price,selling_price:typeof j.selling_price=="string"?parseFloat(j.selling_price)||0:j.selling_price,description:j.description||null})).unwrap();r&&r(ne),t()}catch(ne){console.error("Failed to create product:",ne),y(ne instanceof Error?ne.message:"Failed to create product. Please try again.")}finally{h(!1)}};return m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Add New Product"}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:m.jsx(Il,{className:"h-6 w-6"})})]}),x&&m.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:x}),m.jsxs("form",{onSubmit:be,className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name"}),m.jsx("input",{type:"text",id:"name",name:"name",value:j.name,onChange:O,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:["SKU ",e?"(from Barcode)":"(Auto-generated)"]}),m.jsx("input",{type:"text",id:"sku",name:"sku",value:j.sku,onChange:e?O:void 0,className:`mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 ${e?"":"bg-gray-50 text-gray-500"} sm:text-sm`,readOnly:!e,disabled:!e})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),b?m.jsxs("div",{className:"mt-1 flex space-x-2",children:[m.jsx("input",{type:"text",value:k,onChange:$=>E($.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter new category"}),m.jsx("button",{type:"button",onClick:te,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add"}),m.jsx("button",{type:"button",onClick:()=>_(!1),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"})]}):m.jsxs("div",{className:"mt-1 flex space-x-2",children:[m.jsxs("select",{id:"category",name:"category",value:j.category,onChange:O,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[m.jsx("option",{value:"",children:"Select Category"}),i.map($=>m.jsx("option",{value:$,children:$},$))]}),m.jsx("button",{type:"button",onClick:()=>_(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),C?m.jsxs("div",{className:"mt-1 flex space-x-2",children:[m.jsx("input",{type:"text",value:A,onChange:$=>I($.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter new location"}),m.jsx("button",{type:"button",onClick:fe,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add"}),m.jsx("button",{type:"button",onClick:()=>N(!1),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"})]}):m.jsxs("div",{className:"mt-1 flex space-x-2",children:[m.jsxs("select",{id:"location",name:"location",value:j.location,onChange:O,className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[m.jsx("option",{value:"",children:"Select Location"}),a.map($=>m.jsx("option",{value:$,children:$},$))]}),m.jsx("button",{type:"button",onClick:()=>N(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),m.jsx("input",{type:"text",id:"stock",name:"stock",value:j.stock===0?"":j.stock,onChange:X,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"cost_price",className:"block text-sm font-medium text-gray-700",children:"Cost Price"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),m.jsx("input",{type:"text",id:"cost_price",name:"cost_price",min:"0",step:"0.01",placeholder:"0.00",value:typeof j.cost_price=="number"?j.cost_price===0?"":j.cost_price:j.cost_price===""?"":j.cost_price,onChange:R,onBlur:M,onFocus:U,className:"mt-1 block w-full pl-7 border border-gray-300 rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"The price you pay to acquire the product"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"selling_price",className:"block text-sm font-medium text-gray-700",children:"Selling Price"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),m.jsx("input",{type:"text",id:"selling_price",name:"selling_price",min:"0",step:"0.01",placeholder:"0.00",value:typeof j.selling_price=="number"?j.selling_price===0?"":j.selling_price:j.selling_price===""?"":j.selling_price,onChange:R,onBlur:M,onFocus:U,className:`mt-1 block w-full pl-7 border rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${Number(typeof j.selling_price=="number"?j.selling_price:parseFloat(j.selling_price))<=Number(typeof j.cost_price=="number"?j.cost_price:parseFloat(j.cost_price))?"border-red-300":"border-gray-300"}`,required:!0})]}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"The price customers will pay for the product"}),Number(typeof j.selling_price=="number"?j.selling_price:parseFloat(j.selling_price))<=Number(typeof j.cost_price=="number"?j.cost_price:parseFloat(j.cost_price))&&m.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Selling price should be higher than cost price for profit"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reorder_level",className:"block text-sm font-medium text-gray-700",children:"Reorder Level"}),m.jsx("input",{type:"text",id:"reorder_level",name:"reorder_level",value:j.reorder_level===0?"":j.reorder_level,onChange:V,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),m.jsx("textarea",{id:"description",name:"description",value:j.description,onChange:O,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",id:"is_serialized",checked:j.is_serialized,onChange:$=>F({...j,is_serialized:$.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"is_serialized",className:"block text-sm font-medium text-gray-700",children:"This product requires serial numbers"})]}),j.is_serialized&&m.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:m.jsx("p",{className:"text-sm text-blue-700",children:"Serial numbers will be required for each unit of this product. You'll be able to add serial numbers after creating the product."})}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:d,children:"Cancel"}),m.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:d,children:d?m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"h-4 w-4 mr-2 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Creating..."]}):"Create Product"})]})]})]})})};var Fe;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var tv=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),nv;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(nv||(nv={}));function _B(t){return Object.values(Fe).includes(t)}var yf;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(yf||(yf={}));var SB=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[yf.SCAN_TYPE_CAMERA,yf.SCAN_TYPE_FILE],t}(),I5=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!tv.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,tv.get(e))},t}(),rv=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),A1;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(A1||(A1={}));var EB=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:A1.UNKWOWN_ERROR}},t}(),CB=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Xs(t){return typeof t>"u"||t===null}var Ua=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),R5=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(s),a=Object.keys(e),u=0,d=a;u<d.length;u++){var h=d[u];if(i.has(h))return n.logError("".concat(h," is not supported videoConstaints."),!0),!1}return!0},t}(),k1={exports:{}};(function(t,e){(function(n,r){r(e)})(Vn,function(n){function r(D){return D==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,o){D.__proto__=o}||function(D,o){for(var l in o)o.hasOwnProperty(l)&&(D[l]=o[l])};function i(D,o){s(D,o);function l(){this.constructor=D}D.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}function a(D,o){var l=Object.setPrototypeOf;l?l(D,o):D.__proto__=o}function u(D,o){o===void 0&&(o=D.constructor);var l=Error.captureStackTrace;l&&l(D,o)}var d=function(D){i(o,D);function o(l){var c=this.constructor,f=D.call(this,l)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),a(f,c.prototype),u(f),f}return o}(Error);class h extends d{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}h.kind="Exception";class x extends h{}x.kind="ArgumentException";class y extends h{}y.kind="IllegalArgumentException";class b{constructor(o){if(this.binarizer=o,o===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,l){return this.binarizer.getBlackRow(o,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,l,c,f){const g=this.binarizer.getLuminanceSource().crop(o,l,c,f);return new b(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class _ extends h{static getChecksumInstance(){return new _}}_.kind="ChecksumException";class C{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class N{static arraycopy(o,l,c,f,g){for(;g--;)c[f++]=o[l++]}static currentTimeMillis(){return Date.now()}}class k extends h{}k.kind="IndexOutOfBoundsException";class E extends k{constructor(o=void 0,l=void 0){super(l),this.index=o,this.message=l}}E.kind="ArrayIndexOutOfBoundsException";class A{static fill(o,l){for(let c=0,f=o.length;c<f;c++)o[c]=l}static fillWithin(o,l,c,f){A.rangeCheck(o.length,l,c);for(let g=l;g<c;g++)o[g]=f}static rangeCheck(o,l,c){if(l>c)throw new y("fromIndex("+l+") > toIndex("+c+")");if(l<0)throw new E(l);if(c>o)throw new E(c)}static asList(...o){return o}static create(o,l,c){return Array.from({length:o}).map(g=>Array.from({length:l}).fill(c))}static createInt32Array(o,l,c){return Array.from({length:o}).map(g=>Int32Array.from({length:l}).fill(c))}static equals(o,l){if(!o||!l||!o.length||!l.length||o.length!==l.length)return!1;for(let c=0,f=o.length;c<f;c++)if(o[c]!==l[c])return!1;return!0}static hashCode(o){if(o===null)return 0;let l=1;for(const c of o)l=31*l+c;return l}static fillUint8Array(o,l){for(let c=0;c!==o.length;c++)o[c]=l}static copyOf(o,l){return o.slice(0,l)}static copyOfUint8Array(o,l){if(o.length<=l){const c=new Uint8Array(l);return c.set(o),c}return o.slice(0,l)}static copyOfRange(o,l,c){const f=c-l,g=new Int32Array(f);return N.arraycopy(o,l,g,0,f),g}static binarySearch(o,l,c){c===void 0&&(c=A.numberComparator);let f=0,g=o.length-1;for(;f<=g;){const p=g+f>>1,w=c(l,o[p]);if(w>0)f=p+1;else if(w<0)g=p-1;else return p}return-f-1}static numberComparator(o,l){return o-l}}class I{static numberOfTrailingZeros(o){let l;if(o===0)return 32;let c=31;return l=o<<16,l!==0&&(c-=16,o=l),l=o<<8,l!==0&&(c-=8,o=l),l=o<<4,l!==0&&(c-=4,o=l),l=o<<2,l!==0&&(c-=2,o=l),c-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let l=1;return o>>>16||(l+=16,o<<=16),o>>>24||(l+=8,o<<=8),o>>>28||(l+=4,o<<=4),o>>>30||(l+=2,o<<=2),l-=o>>>31,l}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,l){return Math.trunc(o/l)}static parseInt(o,l=void 0){return parseInt(o,l)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(o,l){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,l==null?this.bits=j.makeArray(o):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const l=j.makeArray(o);N.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const l=this.size;if(o>=l)return l;const c=this.bits;let f=Math.floor(o/32),g=c[f];g&=~((1<<(o&31))-1);const p=c.length;for(;g===0;){if(++f===p)return l;g=c[f]}const w=f*32+I.numberOfTrailingZeros(g);return w>l?l:w}getNextUnset(o){const l=this.size;if(o>=l)return l;const c=this.bits;let f=Math.floor(o/32),g=~c[f];g&=~((1<<(o&31))-1);const p=c.length;for(;g===0;){if(++f===p)return l;g=~c[f]}const w=f*32+I.numberOfTrailingZeros(g);return w>l?l:w}setBulk(o,l){this.bits[Math.floor(o/32)]=l}setRange(o,l){if(l<o||o<0||l>this.size)throw new y;if(l===o)return;l--;const c=Math.floor(o/32),f=Math.floor(l/32),g=this.bits;for(let p=c;p<=f;p++){const w=p>c?0:o&31,S=(2<<(p<f?31:l&31))-(1<<w);g[p]|=S}}clear(){const o=this.bits.length,l=this.bits;for(let c=0;c<o;c++)l[c]=0}isRange(o,l,c){if(l<o||o<0||l>this.size)throw new y;if(l===o)return!0;l--;const f=Math.floor(o/32),g=Math.floor(l/32),p=this.bits;for(let w=f;w<=g;w++){const v=w>f?0:o&31,P=(2<<(w<g?31:l&31))-(1<<v)&4294967295;if((p[w]&P)!==(c?P:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,l){if(l<0||l>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let c=l;c>0;c--)this.appendBit((o>>c-1&1)===1)}appendBitArray(o){const l=o.size;this.ensureCapacity(this.size+l);for(let c=0;c<l;c++)this.appendBit(o.get(c))}xor(o){if(this.size!==o.size)throw new y("Sizes don't match");const l=this.bits;for(let c=0,f=l.length;c<f;c++)l[c]^=o.bits[c]}toBytes(o,l,c,f){for(let g=0;g<f;g++){let p=0;for(let w=0;w<8;w++)this.get(o)&&(p|=1<<7-w),o++;l[c+g]=p}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),c=l+1,f=this.bits;for(let g=0;g<c;g++){let p=f[g];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,o[l-g]=p}if(this.size!==c*32){const g=c*32-this.size;let p=o[0]>>>g;for(let w=1;w<c;w++){const v=o[w];p|=v<<32-g,o[w-1]=p,p=v>>>g}o[c-1]=p}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof j))return!1;const l=o;return this.size===l.size&&A.equals(this.bits,l.bits)}hashCode(){return 31*this.size+A.hashCode(this.bits)}toString(){let o="";for(let l=0,c=this.size;l<c;l++)l&7||(o+=" "),o+=this.get(l)?"X":".";return o}clone(){return new j(this.size,this.bits.slice())}}var F;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(F||(F={}));var z=F;class O extends h{static getFormatInstance(){return new O}}O.kind="FormatException";var R;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(R||(R={}));class M{constructor(o,l,c,...f){this.valueIdentifier=o,this.name=c,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=f,M.VALUE_IDENTIFIER_TO_ECI.set(o,this),M.NAME_TO_ECI.set(c,this);const g=this.values;for(let p=0,w=g.length;p!==w;p++){const v=g[p];M.VALUES_TO_ECI.set(v,this)}for(const p of f)M.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new O("incorect value");const l=M.VALUES_TO_ECI.get(o);if(l===void 0)throw new O("incorect value");return l}static getCharacterSetECIByName(o){const l=M.NAME_TO_ECI.get(o);if(l===void 0)throw new O("incorect value");return l}equals(o){if(!(o instanceof M))return!1;const l=o;return this.getName()===l.getName()}}M.VALUE_IDENTIFIER_TO_ECI=new Map,M.VALUES_TO_ECI=new Map,M.NAME_TO_ECI=new Map,M.Cp437=new M(R.Cp437,Int32Array.from([0,2]),"Cp437"),M.ISO8859_1=new M(R.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),M.ISO8859_2=new M(R.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),M.ISO8859_3=new M(R.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),M.ISO8859_4=new M(R.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),M.ISO8859_5=new M(R.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),M.ISO8859_6=new M(R.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),M.ISO8859_7=new M(R.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),M.ISO8859_8=new M(R.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),M.ISO8859_9=new M(R.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),M.ISO8859_10=new M(R.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),M.ISO8859_11=new M(R.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),M.ISO8859_13=new M(R.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),M.ISO8859_14=new M(R.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),M.ISO8859_15=new M(R.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),M.ISO8859_16=new M(R.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),M.SJIS=new M(R.SJIS,20,"SJIS","Shift_JIS"),M.Cp1250=new M(R.Cp1250,21,"Cp1250","windows-1250"),M.Cp1251=new M(R.Cp1251,22,"Cp1251","windows-1251"),M.Cp1252=new M(R.Cp1252,23,"Cp1252","windows-1252"),M.Cp1256=new M(R.Cp1256,24,"Cp1256","windows-1256"),M.UnicodeBigUnmarked=new M(R.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),M.UTF8=new M(R.UTF8,26,"UTF8","UTF-8"),M.ASCII=new M(R.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),M.Big5=new M(R.Big5,28,"Big5"),M.GB18030=new M(R.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),M.EUC_KR=new M(R.EUC_KR,30,"EUC_KR","EUC-KR");class U extends h{}U.kind="UnsupportedOperationException";class X{static decode(o,l){const c=this.encodingName(l);return this.customDecoder?this.customDecoder(o,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(o,c):new TextDecoder(c).decode(o)}static shouldDecodeOnFallback(o){return!X.isBrowser()&&o==="ISO-8859-1"}static encode(o,l){const c=this.encodingName(l);return this.customEncoder?this.customEncoder(o,c):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof M?o:M.getCharacterSetECIByName(o)}static decodeFallback(o,l){const c=this.encodingCharacterSet(l);if(X.isDecodeFallbackSupported(c)){let f="";for(let g=0,p=o.length;g<p;g++){let w=o[g].toString(16);w.length<2&&(w="0"+w),f+="%"+w}return decodeURIComponent(f)}if(c.equals(M.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new U(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(M.UTF8)||o.equals(M.ISO8859_1)||o.equals(M.ASCII)}static encodeFallback(o){const c=btoa(unescape(encodeURIComponent(o))).split(""),f=[];for(let g=0;g<c.length;g++)f.push(c[g].charCodeAt(0));return new Uint8Array(f)}}class V{static castAsNonUtf8Char(o,l=null){const c=l?l.getName():this.ISO88591;return X.decode(new Uint8Array([o]),c)}static guessEncoding(o,l){if(l!=null&&l.get(z.CHARACTER_SET)!==void 0)return l.get(z.CHARACTER_SET).toString();const c=o.length;let f=!0,g=!0,p=!0,w=0,v=0,S=0,P=0,L=0,B=0,H=0,K=0,ee=0,de=0,pe=0;const ke=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let Ne=0;Ne<c&&(f||g||p);Ne++){const Ce=o[Ne]&255;p&&(w>0?Ce&128?w--:p=!1:Ce&128&&(Ce&64?(w++,Ce&32?(w++,Ce&16?(w++,Ce&8?p=!1:P++):S++):v++):p=!1)),f&&(Ce>127&&Ce<160?f=!1:Ce>159&&(Ce<192||Ce===215||Ce===247)&&pe++),g&&(L>0?Ce<64||Ce===127||Ce>252?g=!1:L--:Ce===128||Ce===160||Ce>239?g=!1:Ce>160&&Ce<224?(B++,K=0,H++,H>ee&&(ee=H)):Ce>127?(L++,H=0,K++,K>de&&(de=K)):(H=0,K=0))}return p&&w>0&&(p=!1),g&&L>0&&(g=!1),p&&(ke||v+S+P>0)?V.UTF8:g&&(V.ASSUME_SHIFT_JIS||ee>=3||de>=3)?V.SHIFT_JIS:f&&g?ee===2&&B===2||pe*10>=c?V.SHIFT_JIS:V.ISO88591:f?V.ISO88591:g?V.SHIFT_JIS:p?V.UTF8:V.PLATFORM_DEFAULT_ENCODING}static format(o,...l){let c=-1;function f(p,w,v,S,P,L){if(p==="%%")return"%";if(l[++c]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let B=P?parseInt(P.substr(1)):void 0,H;switch(L){case"s":H=l[c];break;case"c":H=l[c][0];break;case"f":H=parseFloat(l[c]).toFixed(p);break;case"p":H=parseFloat(l[c]).toPrecision(p);break;case"e":H=parseFloat(l[c]).toExponential(p);break;case"x":H=parseInt(l[c]).toString(B||16);break;case"d":H=parseFloat(parseInt(l[c],B||10).toPrecision(p)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(B);let K=parseInt(v),ee=v&&v[0]+""=="0"?"0":" ";for(;H.length<K;)H=w!==void 0?H+ee:ee+H;return H}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(g,f)}static getBytes(o,l){return X.encode(o,l)}static getCharCode(o,l=0){return o.charCodeAt(l)}static getCharAt(o){return String.fromCharCode(o)}}V.SHIFT_JIS=M.SJIS.getName(),V.GB2312="GB2312",V.ISO88591=M.ISO8859_1.getName(),V.EUC_JP="EUC_JP",V.UTF8=M.UTF8.getName(),V.PLATFORM_DEFAULT_ENCODING=V.UTF8,V.ASSUME_SHIFT_JIS=!1;class te{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=V.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,l,c){for(let f=l;l<l+c;f++)this.append(o[f]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,l){this.value=this.value.substr(0,o)+l+this.value.substr(o+1)}substring(o,l){return this.value.substring(o,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,l){this.value=this.value.substr(0,o)+l+this.value.substr(o+l.length)}}class fe{constructor(o,l,c,f){if(this.width=o,this.height=l,this.rowSize=c,this.bits=f,l==null&&(l=o),this.height=l,o<1||l<1)throw new y("Both dimensions must be greater than 0");c==null&&(c=Math.floor((o+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const l=o.length,c=o[0].length,f=new fe(c,l);for(let g=0;g<l;g++){const p=o[g];for(let w=0;w<c;w++)p[w]&&f.set(w,g)}return f}static parseFromString(o,l,c){if(o===null)throw new y("stringRepresentation cannot be null");const f=new Array(o.length);let g=0,p=0,w=-1,v=0,S=0;for(;S<o.length;)if(o.charAt(S)===`
`||o.charAt(S)==="\r"){if(g>p){if(w===-1)w=g-p;else if(g-p!==w)throw new y("row lengths do not match");p=g,v++}S++}else if(o.substring(S,S+l.length)===l)S+=l.length,f[g]=!0,g++;else if(o.substring(S,S+c.length)===c)S+=c.length,f[g]=!1,g++;else throw new y("illegal character encountered: "+o.substring(S));if(g>p){if(w===-1)w=g-p;else if(g-p!==w)throw new y("row lengths do not match");v++}const P=new fe(w,v);for(let L=0;L<g;L++)f[L]&&P.set(Math.floor(L%w),Math.floor(L/w));return P}get(o,l){const c=l*this.rowSize+Math.floor(o/32);return(this.bits[c]>>>(o&31)&1)!==0}set(o,l){const c=l*this.rowSize+Math.floor(o/32);this.bits[c]|=1<<(o&31)&4294967295}unset(o,l){const c=l*this.rowSize+Math.floor(o/32);this.bits[c]&=~(1<<(o&31)&4294967295)}flip(o,l){const c=l*this.rowSize+Math.floor(o/32);this.bits[c]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new y("input matrix dimensions do not match");const l=new j(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let g=0,p=this.height;g<p;g++){const w=g*c,v=o.getRow(g,l).getBitArray();for(let S=0;S<c;S++)f[w+S]^=v[S]}}clear(){const o=this.bits,l=o.length;for(let c=0;c<l;c++)o[c]=0}setRegion(o,l,c,f){if(l<0||o<0)throw new y("Left and top must be nonnegative");if(f<1||c<1)throw new y("Height and width must be at least 1");const g=o+c,p=l+f;if(p>this.height||g>this.width)throw new y("The region must fit inside the matrix");const w=this.rowSize,v=this.bits;for(let S=l;S<p;S++){const P=S*w;for(let L=o;L<g;L++)v[P+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(o,l){l==null||l.getSize()<this.width?l=new j(this.width):l.clear();const c=this.rowSize,f=this.bits,g=o*c;for(let p=0;p<c;p++)l.setBulk(p*32,f[g+p]);return l}setRow(o,l){N.arraycopy(l.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),l=this.getHeight();let c=new j(o),f=new j(o);for(let g=0,p=Math.floor((l+1)/2);g<p;g++)c=this.getRow(g,c),f=this.getRow(l-1-g,f),c.reverse(),f.reverse(),this.setRow(g,f),this.setRow(l-1-g,c)}getEnclosingRectangle(){const o=this.width,l=this.height,c=this.rowSize,f=this.bits;let g=o,p=l,w=-1,v=-1;for(let S=0;S<l;S++)for(let P=0;P<c;P++){const L=f[S*c+P];if(L!==0){if(S<p&&(p=S),S>v&&(v=S),P*32<g){let B=0;for(;!(L<<31-B&4294967295);)B++;P*32+B<g&&(g=P*32+B)}if(P*32+31>w){let B=31;for(;!(L>>>B);)B--;P*32+B>w&&(w=P*32+B)}}}return w<g||v<p?null:Int32Array.from([g,p,w-g+1,v-p+1])}getTopLeftOnBit(){const o=this.rowSize,l=this.bits;let c=0;for(;c<l.length&&l[c]===0;)c++;if(c===l.length)return null;const f=c/o;let g=c%o*32;const p=l[c];let w=0;for(;!(p<<31-w&4294967295);)w++;return g+=w,Int32Array.from([g,f])}getBottomRightOnBit(){const o=this.rowSize,l=this.bits;let c=l.length-1;for(;c>=0&&l[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/o);let g=Math.floor(c%o)*32;const p=l[c];let w=31;for(;!(p>>>w);)w--;return g+=w,Int32Array.from([g,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof fe))return!1;const l=o;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&A.equals(this.bits,l.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+A.hashCode(this.bits),o}toString(o="X ",l="  ",c=`
`){return this.buildToString(o,l,c)}buildToString(o,l,c){let f=new te;for(let g=0,p=this.height;g<p;g++){for(let w=0,v=this.width;w<v;w++)f.append(this.get(w,g)?o:l);f.append(c)}return f.toString()}clone(){return new fe(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends h{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class be extends C{constructor(o){super(o),this.luminances=be.EMPTY,this.buckets=new Int32Array(be.LUMINANCE_BUCKETS)}getBlackRow(o,l){const c=this.getLuminanceSource(),f=c.getWidth();l==null||l.getSize()<f?l=new j(f):l.clear(),this.initArrays(f);const g=c.getRow(o,this.luminances),p=this.buckets;for(let v=0;v<f;v++)p[(g[v]&255)>>be.LUMINANCE_SHIFT]++;const w=be.estimateBlackPoint(p);if(f<3)for(let v=0;v<f;v++)(g[v]&255)<w&&l.set(v);else{let v=g[0]&255,S=g[1]&255;for(let P=1;P<f-1;P++){const L=g[P+1]&255;(S*4-v-L)/2<w&&l.set(P),v=S,S=L}}return l}getBlackMatrix(){const o=this.getLuminanceSource(),l=o.getWidth(),c=o.getHeight(),f=new fe(l,c);this.initArrays(l);const g=this.buckets;for(let v=1;v<5;v++){const S=Math.floor(c*v/5),P=o.getRow(S,this.luminances),L=Math.floor(l*4/5);for(let B=Math.floor(l/5);B<L;B++){const H=P[B]&255;g[H>>be.LUMINANCE_SHIFT]++}}const p=be.estimateBlackPoint(g),w=o.getMatrix();for(let v=0;v<c;v++){const S=v*l;for(let P=0;P<l;P++)(w[S+P]&255)<p&&f.set(P,v)}return f}createBinarizer(o){return new be(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const l=this.buckets;for(let c=0;c<be.LUMINANCE_BUCKETS;c++)l[c]=0}static estimateBlackPoint(o){const l=o.length;let c=0,f=0,g=0;for(let P=0;P<l;P++)o[P]>g&&(f=P,g=o[P]),o[P]>c&&(c=o[P]);let p=0,w=0;for(let P=0;P<l;P++){const L=P-f,B=o[P]*L*L;B>w&&(p=P,w=B)}if(f>p){const P=f;f=p,p=P}if(p-f<=l/16)throw new G;let v=p-1,S=-1;for(let P=p-1;P>f;P--){const L=P-f,B=L*L*(p-P)*(c-o[P]);B>S&&(v=P,S=B)}return v<<be.LUMINANCE_SHIFT}}be.LUMINANCE_BITS=5,be.LUMINANCE_SHIFT=8-be.LUMINANCE_BITS,be.LUMINANCE_BUCKETS=1<<be.LUMINANCE_BITS,be.EMPTY=Uint8ClampedArray.from([0]);class $ extends be{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),l=o.getWidth(),c=o.getHeight();if(l>=$.MINIMUM_DIMENSION&&c>=$.MINIMUM_DIMENSION){const f=o.getMatrix();let g=l>>$.BLOCK_SIZE_POWER;l&$.BLOCK_SIZE_MASK&&g++;let p=c>>$.BLOCK_SIZE_POWER;c&$.BLOCK_SIZE_MASK&&p++;const w=$.calculateBlackPoints(f,g,p,l,c),v=new fe(l,c);$.calculateThresholdForBlock(f,g,p,l,c,w,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new $(o)}static calculateThresholdForBlock(o,l,c,f,g,p,w){const v=g-$.BLOCK_SIZE,S=f-$.BLOCK_SIZE;for(let P=0;P<c;P++){let L=P<<$.BLOCK_SIZE_POWER;L>v&&(L=v);const B=$.cap(P,2,c-3);for(let H=0;H<l;H++){let K=H<<$.BLOCK_SIZE_POWER;K>S&&(K=S);const ee=$.cap(H,2,l-3);let de=0;for(let ke=-2;ke<=2;ke++){const Ne=p[B+ke];de+=Ne[ee-2]+Ne[ee-1]+Ne[ee]+Ne[ee+1]+Ne[ee+2]}const pe=de/25;$.thresholdBlock(o,K,L,pe,f,w)}}}static cap(o,l,c){return o<l?l:o>c?c:o}static thresholdBlock(o,l,c,f,g,p){for(let w=0,v=c*g+l;w<$.BLOCK_SIZE;w++,v+=g)for(let S=0;S<$.BLOCK_SIZE;S++)(o[v+S]&255)<=f&&p.set(l+S,c+w)}static calculateBlackPoints(o,l,c,f,g){const p=g-$.BLOCK_SIZE,w=f-$.BLOCK_SIZE,v=new Array(c);for(let S=0;S<c;S++){v[S]=new Int32Array(l);let P=S<<$.BLOCK_SIZE_POWER;P>p&&(P=p);for(let L=0;L<l;L++){let B=L<<$.BLOCK_SIZE_POWER;B>w&&(B=w);let H=0,K=255,ee=0;for(let pe=0,ke=P*f+B;pe<$.BLOCK_SIZE;pe++,ke+=f){for(let Ne=0;Ne<$.BLOCK_SIZE;Ne++){const Ce=o[ke+Ne]&255;H+=Ce,Ce<K&&(K=Ce),Ce>ee&&(ee=Ce)}if(ee-K>$.MIN_DYNAMIC_RANGE)for(pe++,ke+=f;pe<$.BLOCK_SIZE;pe++,ke+=f)for(let Ne=0;Ne<$.BLOCK_SIZE;Ne++)H+=o[ke+Ne]&255}let de=H>>$.BLOCK_SIZE_POWER*2;if(ee-K<=$.MIN_DYNAMIC_RANGE&&(de=K/2,S>0&&L>0)){const pe=(v[S-1][L]+2*v[S][L-1]+v[S-1][L-1])/4;K<pe&&(de=pe)}v[S][L]=de}}return v}}$.BLOCK_SIZE_POWER=3,$.BLOCK_SIZE=1<<$.BLOCK_SIZE_POWER,$.BLOCK_SIZE_MASK=$.BLOCK_SIZE-1,$.MINIMUM_DIMENSION=$.BLOCK_SIZE*5,$.MIN_DYNAMIC_RANGE=24;class Q{constructor(o,l){this.width=o,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,l,c,f){throw new U("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new U("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new U("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let l=new te;for(let c=0;c<this.height;c++){const f=this.getRow(c,o);for(let g=0;g<this.width;g++){const p=f[g]&255;let w;p<64?w="#":p<128?w="+":p<192?w=".":w=" ",l.append(w)}l.append(`
`)}return l.toString()}}class ne extends Q{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,l){const c=this.delegate.getRow(o,l),f=this.getWidth();for(let g=0;g<f;g++)c[g]=255-(c[g]&255);return c}getMatrix(){const o=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(l);for(let f=0;f<l;f++)c[f]=255-(o[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(o,l,c,f){return new ne(this.delegate.crop(o,l,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ne(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ne(this.delegate.rotateCounterClockwise45())}}class J extends Q{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=J.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const l=o.getContext("2d").getImageData(0,0,o.width,o.height);return J.toGrayscaleBuffer(l.data,o.width,o.height)}static toGrayscaleBuffer(o,l,c){const f=new Uint8ClampedArray(l*c);for(let g=0,p=0,w=o.length;g<w;g+=4,p++){let v;if(o[g+3]===0)v=255;else{const P=o[g],L=o[g+1],B=o[g+2];v=306*P+601*L+117*B+512>>10}f[p]=v}return f}getRow(o,l){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth(),f=o*c;return l===null?l=this.buffer.slice(f,f+c):(l.length<c&&(l=new Uint8ClampedArray(c)),l.set(this.buffer.slice(f,f+c))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,l,c,f){return super.crop(o,l,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const l=this.getTempCanvasElement(),c=l.getContext("2d"),f=o*J.DEGREE_TO_RADIANS,g=this.canvas.width,p=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(f))*g+Math.abs(Math.sin(f))*p),v=Math.ceil(Math.abs(Math.sin(f))*g+Math.abs(Math.cos(f))*p);return l.width=w,l.height=v,c.translate(w/2,v/2),c.rotate(f),c.drawImage(this.canvas,g/-2,p/-2),this.buffer=J.makeBufferFromCanvasImageData(l),this}invert(){return new ne(this)}}J.DEGREE_TO_RADIANS=Math.PI/180;class oe{constructor(o,l,c){this.deviceId=o,this.label=l,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var re=(globalThis||Vn||self||window||void 0)&&(globalThis||Vn||self||window||void 0).__awaiter||function(D,o,l,c){function f(g){return g instanceof l?g:new l(function(p){p(g)})}return new(l||(l=Promise))(function(g,p){function w(P){try{S(c.next(P))}catch(L){p(L)}}function v(P){try{S(c.throw(P))}catch(L){p(L)}}function S(P){P.done?g(P.value):f(P.value).then(w,v)}S((c=c.apply(D,o||[])).next())})};class ae{constructor(o,l=500,c){this.reader=o,this.timeBetweenScansMillis=l,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const c of o){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const g=c.deviceId||c.id,p=c.label||`Video device ${l.length+1}`,w=c.groupId,v={deviceId:g,label:p,kind:f,groupId:w};l.push(v)}return l})}getVideoInputDevices(){return re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new oe(l.deviceId,l.label))})}findDeviceById(o){return re(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(c=>c.deviceId===o):null})}decodeFromInputVideoDevice(o,l){return re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,l)})}decodeOnceFromVideoDevice(o,l){return re(this,void 0,void 0,function*(){this.reset();let c;o?c={deviceId:{exact:o}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,l)})}decodeOnceFromConstraints(o,l){return re(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(c,l)})}decodeOnceFromStream(o,l){return re(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(o,l);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(o,l,c){return re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,l,c)})}decodeFromVideoDevice(o,l,c){return re(this,void 0,void 0,function*(){let f;o?f={deviceId:{exact:o}}:f={facingMode:"environment"};const g={video:f};return yield this.decodeFromConstraints(g,l,c)})}decodeFromConstraints(o,l,c){return re(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(f,l,c)})}decodeFromStream(o,l,c){return re(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(o,l);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,l){return re(this,void 0,void 0,function*(){const c=this.prepareVideoElement(l);return this.addVideoSource(c,o),this.videoElement=c,this.stream=o,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(o){return new Promise((l,c)=>this.playVideoOnLoad(o,()=>l()))}playVideoOnLoad(o,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",l),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return re(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,l){const c=document.getElementById(o);if(!c)throw new x(`element with id '${o}' not found`);if(c.nodeName.toLowerCase()!==l.toLowerCase())throw new x(`element with id '${o}' must be an ${l} element`);return c}decodeFromImage(o,l){if(!o&&!l)throw new x("either imageElement with a src set or an url must be provided");return l&&!o?this.decodeFromImageUrl(l):this.decodeFromImageElement(o)}decodeFromVideo(o,l){if(!o&&!l)throw new x("Either an element with a src set or an URL must be provided");return l&&!o?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,l,c){if(o===void 0&&l===void 0)throw new x("Either an element with a src set or an URL must be provided");return l&&!o?this.decodeFromVideoUrlContinuously(l,c):this.decodeFromVideoElementContinuously(o,c)}decodeFromImageElement(o){if(!o)throw new x("An image element must be provided.");this.reset();const l=this.prepareImageElement(o);this.imageElement=l;let c;return this.isImageLoaded(l)?c=this.decodeOnce(l,!1,!0):c=this._decodeOnLoadImage(l),c}decodeFromVideoElement(o){const l=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(o,l){const c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(c,l)}_decodeFromVideoElementSetup(o){if(!o)throw new x("A video element must be provided.");this.reset();const l=this.prepareVideoElement(o);return this.videoElement=l,l}decodeFromImageUrl(o){if(!o)throw new x("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const c=this._decodeOnLoadImage(l);return l.src=o,c}decodeFromVideoUrl(o){if(!o)throw new x("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElement(l);return l.src=o,c}decodeFromVideoUrlContinuously(o,l){if(!o)throw new x("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,l);return c.src=o,f}_decodeOnLoadImage(o){return new Promise((l,c)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(l,c),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,l){return re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,l)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let l;return typeof o>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof o=="string"&&(l=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(l=o),l}prepareVideoElement(o){let l;return!o&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof o=="string"&&(l=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(l=o),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(o,l=!0,c=!0){this._stopAsyncDecode=!1;const f=(g,p)=>{if(this._stopAsyncDecode){p(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(o);g(w)}catch(w){const v=l&&w instanceof G,P=(w instanceof _||w instanceof O)&&c;if(v||P)return setTimeout(f,this._timeBetweenDecodingAttempts,g,p);p(w)}};return new Promise((g,p)=>f(g,p))}decodeContinuously(o,l){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(o);l(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){l(null,f);const g=f instanceof _||f instanceof O,p=f instanceof G;(g||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(o){const l=this.createBinaryBitmap(o);return this.decodeBitmap(l)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,l,c){l||(l={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(o,l,c=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(o,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const l=this.getCaptureCanvas(o),c=new J(l),f=new $(c);return new b(f)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const l=this.createCaptureCanvas(o);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let c,f;return typeof o<"u"&&(o instanceof HTMLVideoElement?(c=o.videoWidth,f=o.videoHeight):o instanceof HTMLImageElement&&(c=o.naturalWidth||o.width,f=o.naturalHeight||o.height)),l.style.width=c+"px",l.style.height=f+"px",l.width=c,l.height=f,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,l){try{o.srcObject=l}catch{o.src=URL.createObjectURL(l)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class q{constructor(o,l,c=l==null?0:8*l.length,f,g,p=N.currentTimeMillis()){this.text=o,this.rawBytes=l,this.numBits=c,this.resultPoints=f,this.format=g,this.timestamp=p,this.text=o,this.rawBytes=l,c==null?this.numBits=l==null?0:8*l.length:this.numBits=c,this.resultPoints=f,this.format=g,this.resultMetadata=null,p==null?this.timestamp=N.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,l)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const l=this.resultPoints;if(l===null)this.resultPoints=o;else if(o!==null&&o.length>0){const c=new Array(l.length+o.length);N.arraycopy(l,0,c,0,l.length),N.arraycopy(o,0,c,l.length,o.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var le;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(le||(le={}));var ue=le,Pe;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pe||(Pe={}));var se=Pe;class Y{constructor(o,l,c,f,g=-1,p=-1){this.rawBytes=o,this.text=l,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=p,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ye{exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}static addOrSubtract(o,l){return o^l}}class Ee{constructor(o,l){if(l.length===0)throw new y;this.field=o;const c=l.length;if(c>1&&l[0]===0){let f=1;for(;f<c&&l[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),N.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const l=this.coefficients;let c;if(o===1){c=0;for(let p=0,w=l.length;p!==w;p++){const v=l[p];c=ye.addOrSubtract(c,v)}return c}c=l[0];const f=l.length,g=this.field;for(let p=1;p<f;p++)c=ye.addOrSubtract(g.multiply(o,c),l[p]);return c}addOrSubtract(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let l=this.coefficients,c=o.coefficients;if(l.length>c.length){const p=l;l=c,c=p}let f=new Int32Array(c.length);const g=c.length-l.length;N.arraycopy(c,0,f,0,g);for(let p=g;p<c.length;p++)f[p]=ye.addOrSubtract(l[p-g],c[p]);return new Ee(this.field,f)}multiply(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const l=this.coefficients,c=l.length,f=o.coefficients,g=f.length,p=new Int32Array(c+g-1),w=this.field;for(let v=0;v<c;v++){const S=l[v];for(let P=0;P<g;P++)p[v+P]=ye.addOrSubtract(p[v+P],w.multiply(S,f[P]))}return new Ee(w,p)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const l=this.coefficients.length,c=this.field,f=new Int32Array(l),g=this.coefficients;for(let p=0;p<l;p++)f[p]=c.multiply(g[p],o);return new Ee(c,f)}multiplyByMonomial(o,l){if(o<0)throw new y;if(l===0)return this.field.getZero();const c=this.coefficients,f=c.length,g=new Int32Array(f+o),p=this.field;for(let w=0;w<f;w++)g[w]=p.multiply(c[w],l);return new Ee(p,g)}divide(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new y("Divide by 0");const l=this.field;let c=l.getZero(),f=this;const g=o.getCoefficient(o.getDegree()),p=l.inverse(g);for(;f.getDegree()>=o.getDegree()&&!f.isZero();){const w=f.getDegree()-o.getDegree(),v=l.multiply(f.getCoefficient(f.getDegree()),p),S=o.multiplyByMonomial(w,v),P=l.buildMonomial(w,v);c=c.addOrSubtract(P),f=f.addOrSubtract(S)}return[c,f]}toString(){let o="";for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);if(c!==0){if(c<0?(o+=" - ",c=-c):o.length>0&&(o+=" + "),l===0||c!==1){const f=this.field.log(c);f===0?o+="1":f===1?o+="a":(o+="a^",o+=f)}l!==0&&(l===1?o+="x":(o+="x^",o+=l))}}return o}}class ze extends h{}ze.kind="ArithmeticException";class Oe extends ye{constructor(o,l,c){super(),this.primitive=o,this.size=l,this.generatorBase=c;const f=new Int32Array(l);let g=1;for(let w=0;w<l;w++)f[w]=g,g*=2,g>=l&&(g^=o,g&=l-1);this.expTable=f;const p=new Int32Array(l);for(let w=0;w<l-1;w++)p[f[w]]=w;this.logTable=p,this.zero=new Ee(this,Int32Array.from([0])),this.one=new Ee(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,l){if(o<0)throw new y;if(l===0)return this.zero;const c=new Int32Array(o+1);return c[0]=l,new Ee(this,c)}inverse(o){if(o===0)throw new ze;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,l){return o===0||l===0?0:this.expTable[(this.logTable[o]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Oe.AZTEC_DATA_12=new Oe(4201,4096,1),Oe.AZTEC_DATA_10=new Oe(1033,1024,1),Oe.AZTEC_DATA_6=new Oe(67,64,1),Oe.AZTEC_PARAM=new Oe(19,16,1),Oe.QR_CODE_FIELD_256=new Oe(285,256,0),Oe.DATA_MATRIX_FIELD_256=new Oe(301,256,1),Oe.AZTEC_DATA_8=Oe.DATA_MATRIX_FIELD_256,Oe.MAXICODE_FIELD_64=Oe.AZTEC_DATA_6;class $e extends h{}$e.kind="ReedSolomonException";class Xe extends h{}Xe.kind="IllegalStateException";class Ge{constructor(o){this.field=o}decode(o,l){const c=this.field,f=new Ee(c,o),g=new Int32Array(l);let p=!0;for(let H=0;H<l;H++){const K=f.evaluateAt(c.exp(H+c.getGeneratorBase()));g[g.length-1-H]=K,K!==0&&(p=!1)}if(p)return;const w=new Ee(c,g),v=this.runEuclideanAlgorithm(c.buildMonomial(l,1),w,l),S=v[0],P=v[1],L=this.findErrorLocations(S),B=this.findErrorMagnitudes(P,L);for(let H=0;H<L.length;H++){const K=o.length-1-c.log(L[H]);if(K<0)throw new $e("Bad error location");o[K]=Oe.addOrSubtract(o[K],B[H])}}runEuclideanAlgorithm(o,l,c){if(o.getDegree()<l.getDegree()){const H=o;o=l,l=H}const f=this.field;let g=o,p=l,w=f.getZero(),v=f.getOne();for(;p.getDegree()>=(c/2|0);){let H=g,K=w;if(g=p,w=v,g.isZero())throw new $e("r_{i-1} was zero");p=H;let ee=f.getZero();const de=g.getCoefficient(g.getDegree()),pe=f.inverse(de);for(;p.getDegree()>=g.getDegree()&&!p.isZero();){const ke=p.getDegree()-g.getDegree(),Ne=f.multiply(p.getCoefficient(p.getDegree()),pe);ee=ee.addOrSubtract(f.buildMonomial(ke,Ne)),p=p.addOrSubtract(g.multiplyByMonomial(ke,Ne))}if(v=ee.multiply(w).addOrSubtract(K),p.getDegree()>=g.getDegree())throw new Xe("Division algorithm failed to reduce polynomial?")}const S=v.getCoefficient(0);if(S===0)throw new $e("sigmaTilde(0) was zero");const P=f.inverse(S),L=v.multiplyScalar(P),B=p.multiplyScalar(P);return[L,B]}findErrorLocations(o){const l=o.getDegree();if(l===1)return Int32Array.from([o.getCoefficient(1)]);const c=new Int32Array(l);let f=0;const g=this.field;for(let p=1;p<g.getSize()&&f<l;p++)o.evaluateAt(p)===0&&(c[f]=g.inverse(p),f++);if(f!==l)throw new $e("Error locator degree does not match number of roots");return c}findErrorMagnitudes(o,l){const c=l.length,f=new Int32Array(c),g=this.field;for(let p=0;p<c;p++){const w=g.inverse(l[p]);let v=1;for(let S=0;S<c;S++)if(p!==S){const P=g.multiply(l[S],w),L=P&1?P&-2:P|1;v=g.multiply(v,L)}f[p]=g.multiply(o.evaluateAt(w),g.inverse(v)),g.getGeneratorBase()!==0&&(f[p]=g.multiply(f[p],w))}return f}}var xt;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(xt||(xt={}));class je{decode(o){this.ddata=o;let l=o.getBits(),c=this.extractBits(l),f=this.correctBits(c),g=je.convertBoolArrayToByteArray(f),p=je.getEncodedData(f),w=new Y(g,p,null,null);return w.setNumBits(f.length),w}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let l=o.length,c=xt.UPPER,f=xt.UPPER,g="",p=0;for(;p<l;)if(f===xt.BINARY){if(l-p<5)break;let w=je.readCode(o,p,5);if(p+=5,w===0){if(l-p<11)break;w=je.readCode(o,p,11)+31,p+=11}for(let v=0;v<w;v++){if(l-p<8){p=l;break}const S=je.readCode(o,p,8);g+=V.castAsNonUtf8Char(S),p+=8}f=c}else{let w=f===xt.DIGIT?4:5;if(l-p<w)break;let v=je.readCode(o,p,w);p+=w;let S=je.getCharacter(f,v);S.startsWith("CTRL_")?(c=f,f=je.getTable(S.charAt(5)),S.charAt(6)==="L"&&(c=f)):(g+=S,f=c)}return g}static getTable(o){switch(o){case"L":return xt.LOWER;case"P":return xt.PUNCT;case"M":return xt.MIXED;case"D":return xt.DIGIT;case"B":return xt.BINARY;case"U":default:return xt.UPPER}}static getCharacter(o,l){switch(o){case xt.UPPER:return je.UPPER_TABLE[l];case xt.LOWER:return je.LOWER_TABLE[l];case xt.MIXED:return je.MIXED_TABLE[l];case xt.PUNCT:return je.PUNCT_TABLE[l];case xt.DIGIT:return je.DIGIT_TABLE[l];default:throw new Xe("Bad table")}}correctBits(o){let l,c;this.ddata.getNbLayers()<=2?(c=6,l=Oe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,l=Oe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,l=Oe.AZTEC_DATA_10):(c=12,l=Oe.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),g=o.length/c;if(g<f)throw new O;let p=o.length%c,w=new Int32Array(g);for(let B=0;B<g;B++,p+=c)w[B]=je.readCode(o,p,c);try{new Ge(l).decode(w,g-f)}catch(B){throw new O(B)}let v=(1<<c)-1,S=0;for(let B=0;B<f;B++){let H=w[B];if(H===0||H===v)throw new O;(H===1||H===v-1)&&S++}let P=new Array(f*c-S),L=0;for(let B=0;B<f;B++){let H=w[B];if(H===1||H===v-1)P.fill(H>1,L,L+c-1),L+=c-1;else for(let K=c-1;K>=0;--K)P[L++]=(H&1<<K)!==0}return P}extractBits(o){let l=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(l?11:14)+c*4,g=new Int32Array(f),p=new Array(this.totalBitsInLayer(c,l));if(l)for(let w=0;w<g.length;w++)g[w]=w;else{let w=f+1+2*I.truncDivision(I.truncDivision(f,2)-1,15),v=f/2,S=I.truncDivision(w,2);for(let P=0;P<v;P++){let L=P+I.truncDivision(P,15);g[v-P-1]=S-L-1,g[v+P]=S+L+1}}for(let w=0,v=0;w<c;w++){let S=(c-w)*4+(l?9:12),P=w*2,L=f-1-P;for(let B=0;B<S;B++){let H=B*2;for(let K=0;K<2;K++)p[v+H+K]=o.get(g[P+K],g[P+B]),p[v+2*S+H+K]=o.get(g[P+B],g[L-K]),p[v+4*S+H+K]=o.get(g[L-K],g[L-B]),p[v+6*S+H+K]=o.get(g[L-B],g[P+K])}v+=S*8}return p}static readCode(o,l,c){let f=0;for(let g=l;g<l+c;g++)f<<=1,o[g]&&(f|=1);return f}static readByte(o,l){let c=o.length-l;return c>=8?je.readCode(o,l,8):je.readCode(o,l,c)<<8-c}static convertBoolArrayToByteArray(o){let l=new Uint8Array((o.length+7)/8);for(let c=0;c<l.length;c++)l[c]=je.readByte(o,8*c);return l}totalBitsInLayer(o,l){return((l?88:112)+16*o)*o}}je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class We{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,l,c,f){const g=o-c,p=l-f;return Math.sqrt(g*g+p*p)}static sum(o){let l=0;for(let c=0,f=o.length;c!==f;c++){const g=o[c];l+=g}return l}}class lr{static floatToIntBits(o){return o}}lr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(o,l){this.x=o,this.y=l}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Me){const l=o;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*lr.floatToIntBits(this.x)+lr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const l=this.distance(o[0],o[1]),c=this.distance(o[1],o[2]),f=this.distance(o[0],o[2]);let g,p,w;if(c>=l&&c>=f?(p=o[0],g=o[1],w=o[2]):f>=c&&f>=l?(p=o[1],g=o[0],w=o[2]):(p=o[2],g=o[0],w=o[1]),this.crossProductZ(g,p,w)<0){const v=g;g=w,w=v}o[0]=g,o[1]=p,o[2]=w}static distance(o,l){return We.distance(o.x,o.y,l.x,l.y)}static crossProductZ(o,l,c){const f=l.x,g=l.y;return(c.x-f)*(o.y-g)-(c.y-g)*(o.x-f)}}class Wn{constructor(o,l){this.bits=o,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class _s extends Wn{constructor(o,l,c,f,g){super(o,l),this.compact=c,this.nbDatablocks=f,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class gt{constructor(o,l,c,f){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),l==null&&(l=gt.INIT_SIZE),c==null&&(c=o.getWidth()/2|0),f==null&&(f=o.getHeight()/2|0);const g=l/2|0;if(this.leftInit=c-g,this.rightInit=c+g,this.upInit=f-g,this.downInit=f+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let o=this.leftInit,l=this.rightInit,c=this.upInit,f=this.downInit,g=!1,p=!0,w=!1,v=!1,S=!1,P=!1,L=!1;const B=this.width,H=this.height;for(;p;){p=!1;let K=!0;for(;(K||!v)&&l<B;)K=this.containsBlackPoint(c,f,l,!1),K?(l++,p=!0,v=!0):v||l++;if(l>=B){g=!0;break}let ee=!0;for(;(ee||!S)&&f<H;)ee=this.containsBlackPoint(o,l,f,!0),ee?(f++,p=!0,S=!0):S||f++;if(f>=H){g=!0;break}let de=!0;for(;(de||!P)&&o>=0;)de=this.containsBlackPoint(c,f,o,!1),de?(o--,p=!0,P=!0):P||o--;if(o<0){g=!0;break}let pe=!0;for(;(pe||!L)&&c>=0;)pe=this.containsBlackPoint(o,l,c,!0),pe?(c--,p=!0,L=!0):L||c--;if(c<0){g=!0;break}p&&(w=!0)}if(!g&&w){const K=l-o;let ee=null;for(let Ne=1;ee===null&&Ne<K;Ne++)ee=this.getBlackPointOnSegment(o,f-Ne,o+Ne,f);if(ee==null)throw new G;let de=null;for(let Ne=1;de===null&&Ne<K;Ne++)de=this.getBlackPointOnSegment(o,c+Ne,o+Ne,c);if(de==null)throw new G;let pe=null;for(let Ne=1;pe===null&&Ne<K;Ne++)pe=this.getBlackPointOnSegment(l,c+Ne,l-Ne,c);if(pe==null)throw new G;let ke=null;for(let Ne=1;ke===null&&Ne<K;Ne++)ke=this.getBlackPointOnSegment(l,f-Ne,l-Ne,f);if(ke==null)throw new G;return this.centerEdges(ke,ee,pe,de)}else throw new G}getBlackPointOnSegment(o,l,c,f){const g=We.round(We.distance(o,l,c,f)),p=(c-o)/g,w=(f-l)/g,v=this.image;for(let S=0;S<g;S++){const P=We.round(o+S*p),L=We.round(l+S*w);if(v.get(P,L))return new Me(P,L)}return null}centerEdges(o,l,c,f){const g=o.getX(),p=o.getY(),w=l.getX(),v=l.getY(),S=c.getX(),P=c.getY(),L=f.getX(),B=f.getY(),H=gt.CORR;return g<this.width/2?[new Me(L-H,B+H),new Me(w+H,v+H),new Me(S-H,P-H),new Me(g+H,p-H)]:[new Me(L+H,B+H),new Me(w+H,v-H),new Me(S-H,P+H),new Me(g-H,p-H)]}containsBlackPoint(o,l,c,f){const g=this.image;if(f){for(let p=o;p<=l;p++)if(g.get(p,c))return!0}else for(let p=o;p<=l;p++)if(g.get(c,p))return!0;return!1}}gt.INIT_SIZE=10,gt.CORR=1;class kn{static checkAndNudgePoints(o,l){const c=o.getWidth(),f=o.getHeight();let g=!0;for(let p=0;p<l.length&&g;p+=2){const w=Math.floor(l[p]),v=Math.floor(l[p+1]);if(w<-1||w>c||v<-1||v>f)throw new G;g=!1,w===-1?(l[p]=0,g=!0):w===c&&(l[p]=c-1,g=!0),v===-1?(l[p+1]=0,g=!0):v===f&&(l[p+1]=f-1,g=!0)}g=!0;for(let p=l.length-2;p>=0&&g;p-=2){const w=Math.floor(l[p]),v=Math.floor(l[p+1]);if(w<-1||w>c||v<-1||v>f)throw new G;g=!1,w===-1?(l[p]=0,g=!0):w===c&&(l[p]=c-1,g=!0),v===-1?(l[p+1]=0,g=!0):v===f&&(l[p+1]=f-1,g=!0)}}}class yt{constructor(o,l,c,f,g,p,w,v,S){this.a11=o,this.a21=l,this.a31=c,this.a12=f,this.a22=g,this.a32=p,this.a13=w,this.a23=v,this.a33=S}static quadrilateralToQuadrilateral(o,l,c,f,g,p,w,v,S,P,L,B,H,K,ee,de){const pe=yt.quadrilateralToSquare(o,l,c,f,g,p,w,v);return yt.squareToQuadrilateral(S,P,L,B,H,K,ee,de).times(pe)}transformPoints(o){const l=o.length,c=this.a11,f=this.a12,g=this.a13,p=this.a21,w=this.a22,v=this.a23,S=this.a31,P=this.a32,L=this.a33;for(let B=0;B<l;B+=2){const H=o[B],K=o[B+1],ee=g*H+v*K+L;o[B]=(c*H+p*K+S)/ee,o[B+1]=(f*H+w*K+P)/ee}}transformPointsWithValues(o,l){const c=this.a11,f=this.a12,g=this.a13,p=this.a21,w=this.a22,v=this.a23,S=this.a31,P=this.a32,L=this.a33,B=o.length;for(let H=0;H<B;H++){const K=o[H],ee=l[H],de=g*K+v*ee+L;o[H]=(c*K+p*ee+S)/de,l[H]=(f*K+w*ee+P)/de}}static squareToQuadrilateral(o,l,c,f,g,p,w,v){const S=o-c+g-w,P=l-f+p-v;if(S===0&&P===0)return new yt(c-o,g-c,o,f-l,p-f,l,0,0,1);{const L=c-g,B=w-g,H=f-p,K=v-p,ee=L*K-B*H,de=(S*K-B*P)/ee,pe=(L*P-S*H)/ee;return new yt(c-o+de*c,w-o+pe*w,o,f-l+de*f,v-l+pe*v,l,de,pe,1)}}static quadrilateralToSquare(o,l,c,f,g,p,w,v){return yt.squareToQuadrilateral(o,l,c,f,g,p,w,v).buildAdjoint()}buildAdjoint(){return new yt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new yt(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class yn extends kn{sampleGrid(o,l,c,f,g,p,w,v,S,P,L,B,H,K,ee,de,pe,ke,Ne){const Ce=yt.quadrilateralToQuadrilateral(f,g,p,w,v,S,P,L,B,H,K,ee,de,pe,ke,Ne);return this.sampleGridWithTransform(o,l,c,Ce)}sampleGridWithTransform(o,l,c,f){if(l<=0||c<=0)throw new G;const g=new fe(l,c),p=new Float32Array(2*l);for(let w=0;w<c;w++){const v=p.length,S=w+.5;for(let P=0;P<v;P+=2)p[P]=P/2+.5,p[P+1]=S;f.transformPoints(p),kn.checkAndNudgePoints(o,p);try{for(let P=0;P<v;P+=2)o.get(Math.floor(p[P]),Math.floor(p[P+1]))&&g.set(P/2,w)}catch{throw new G}}return g}}class jt{static setGridSampler(o){jt.gridSampler=o}static getInstance(){return jt.gridSampler}}jt.gridSampler=new yn;class kt{constructor(o,l){this.x=o,this.y=l}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class xi{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let l=this.getMatrixCenter(),c=this.getBullsEyeCorners(l);if(o){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),g=this.getMatrixCornerPoints(c);return new _s(f,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new G;let l=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(o[0],o[1],l),this.sampleLine(o[1],o[2],l),this.sampleLine(o[2],o[3],l),this.sampleLine(o[3],o[0],l)]);this.shift=this.getRotation(c,l);let f=0;for(let p=0;p<4;p++){let w=c[(this.shift+p)%4];this.compact?(f<<=7,f+=w>>1&127):(f<<=10,f+=(w>>2&992)+(w>>1&31))}let g=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(o,l){let c=0;o.forEach((f,g,p)=>{let w=(f>>l-2<<1)+(f&1);c=(c<<3)+w}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(I.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new G}getCorrectedParameterData(o,l){let c,f;l?(c=7,f=2):(c=10,f=4);let g=c-f,p=new Int32Array(c);for(let v=c-1;v>=0;--v)p[v]=o&15,o>>=4;try{new Ge(Oe.AZTEC_PARAM).decode(p,g)}catch{throw new G}let w=0;for(let v=0;v<f;v++)w=(w<<4)+p[v];return w}getBullsEyeCorners(o){let l=o,c=o,f=o,g=o,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(l,p,1,-1),B=this.getFirstDifferent(c,p,1,1),H=this.getFirstDifferent(f,p,-1,1),K=this.getFirstDifferent(g,p,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint(K,L)*this.nbCenterLayers/(this.distancePoint(g,l)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(L,B,H,K))break}l=L,c=B,f=H,g=K,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let w=new Me(l.getX()+.5,l.getY()-.5),v=new Me(c.getX()+.5,c.getY()+.5),S=new Me(f.getX()-.5,f.getY()+.5),P=new Me(g.getX()-.5,g.getY()-.5);return this.expandSquare([w,v,S,P],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,l,c,f;try{let w=new gt(this.image).detect();o=w[0],l=w[1],c=w[2],f=w[3]}catch{let v=this.image.getWidth()/2,S=this.image.getHeight()/2;o=this.getFirstDifferent(new kt(v+7,S-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new kt(v+7,S+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new kt(v-7,S+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new kt(v-7,S-7),!1,-1,-1).toResultPoint()}let g=We.round((o.getX()+f.getX()+l.getX()+c.getX())/4),p=We.round((o.getY()+f.getY()+l.getY()+c.getY())/4);try{let w=new gt(this.image,15,g,p).detect();o=w[0],l=w[1],c=w[2],f=w[3]}catch{o=this.getFirstDifferent(new kt(g+7,p-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new kt(g+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new kt(g-7,p+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new kt(g-7,p-7),!1,-1,-1).toResultPoint()}return g=We.round((o.getX()+f.getX()+l.getX()+c.getX())/4),p=We.round((o.getY()+f.getY()+l.getY()+c.getY())/4),new kt(g,p)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,l,c,f,g){let p=jt.getInstance(),w=this.getDimension(),v=w/2-this.nbCenterLayers,S=w/2+this.nbCenterLayers;return p.sampleGrid(o,w,w,v,v,S,v,S,S,v,S,l.getX(),l.getY(),c.getX(),c.getY(),f.getX(),f.getY(),g.getX(),g.getY())}sampleLine(o,l,c){let f=0,g=this.distanceResultPoint(o,l),p=g/c,w=o.getX(),v=o.getY(),S=p*(l.getX()-o.getX())/g,P=p*(l.getY()-o.getY())/g;for(let L=0;L<c;L++)this.image.get(We.round(w+L*S),We.round(v+L*P))&&(f|=1<<c-L-1);return f}isWhiteOrBlackRectangle(o,l,c,f){let g=3;o=new kt(o.getX()-g,o.getY()+g),l=new kt(l.getX()-g,l.getY()-g),c=new kt(c.getX()+g,c.getY()-g),f=new kt(f.getX()+g,f.getY()+g);let p=this.getColor(f,o);if(p===0)return!1;let w=this.getColor(o,l);return w!==p||(w=this.getColor(l,c),w!==p)?!1:(w=this.getColor(c,f),w===p)}getColor(o,l){let c=this.distancePoint(o,l),f=(l.getX()-o.getX())/c,g=(l.getY()-o.getY())/c,p=0,w=o.getX(),v=o.getY(),S=this.image.get(o.getX(),o.getY()),P=Math.ceil(c);for(let B=0;B<P;B++)w+=f,v+=g,this.image.get(We.round(w),We.round(v))!==S&&p++;let L=p/c;return L>.1&&L<.9?0:L<=.1===S?1:-1}getFirstDifferent(o,l,c,f){let g=o.getX()+c,p=o.getY()+f;for(;this.isValid(g,p)&&this.image.get(g,p)===l;)g+=c,p+=f;for(g-=c,p-=f;this.isValid(g,p)&&this.image.get(g,p)===l;)g+=c;for(g-=c;this.isValid(g,p)&&this.image.get(g,p)===l;)p+=f;return p-=f,new kt(g,p)}expandSquare(o,l,c){let f=c/(2*l),g=o[0].getX()-o[2].getX(),p=o[0].getY()-o[2].getY(),w=(o[0].getX()+o[2].getX())/2,v=(o[0].getY()+o[2].getY())/2,S=new Me(w+f*g,v+f*p),P=new Me(w-f*g,v-f*p);g=o[1].getX()-o[3].getX(),p=o[1].getY()-o[3].getY(),w=(o[1].getX()+o[3].getX())/2,v=(o[1].getY()+o[3].getY())/2;let L=new Me(w+f*g,v+f*p),B=new Me(w-f*g,v-f*p);return[S,L,P,B]}isValid(o,l){return o>=0&&o<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(o){let l=We.round(o.getX()),c=We.round(o.getY());return this.isValid(l,c)}distancePoint(o,l){return We.distance(o.getX(),o.getY(),l.getX(),l.getY())}distanceResultPoint(o,l){return We.distance(o.getX(),o.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class Qn{decode(o,l=null){let c=null,f=new xi(o.getBlackMatrix()),g=null,p=null;try{let P=f.detectMirror(!1);g=P.getPoints(),this.reportFoundResultPoints(l,g),p=new je().decode(P)}catch(P){c=P}if(p==null)try{let P=f.detectMirror(!0);g=P.getPoints(),this.reportFoundResultPoints(l,g),p=new je().decode(P)}catch(P){throw c??P}let w=new q(p.getText(),p.getRawBytes(),p.getNumBits(),g,ue.AZTEC,N.currentTimeMillis()),v=p.getByteSegments();v!=null&&w.putMetadata(se.BYTE_SEGMENTS,v);let S=p.getECLevel();return S!=null&&w.putMetadata(se.ERROR_CORRECTION_LEVEL,S),w}reportFoundResultPoints(o,l){if(o!=null){let c=o.get(z.NEED_RESULT_POINT_CALLBACK);c!=null&&l.forEach((f,g,p)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class mr extends ae{constructor(o=500){super(new Qn,o)}}class ft{decode(o,l){try{return this.doDecode(o,l)}catch{if(l&&l.get(z.TRY_HARDER)===!0&&o.isRotateSupported()){const g=o.rotateCounterClockwise(),p=this.doDecode(g,l),w=p.getResultMetadata();let v=270;w!==null&&w.get(se.ORIENTATION)===!0&&(v=v+w.get(se.ORIENTATION)%360),p.putMetadata(se.ORIENTATION,v);const S=p.getResultPoints();if(S!==null){const P=g.getHeight();for(let L=0;L<S.length;L++)S[L]=new Me(P-S[L].getY()-1,S[L].getX())}return p}else throw new G}}reset(){}doDecode(o,l){const c=o.getWidth(),f=o.getHeight();let g=new j(c);const p=l&&l.get(z.TRY_HARDER)===!0,w=Math.max(1,f>>(p?8:5));let v;p?v=f:v=15;const S=Math.trunc(f/2);for(let P=0;P<v;P++){const L=Math.trunc((P+1)/2),B=(P&1)===0,H=S+w*(B?L:-L);if(H<0||H>=f)break;try{g=o.getBlackRow(H,g)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(g.reverse(),l&&l.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;l.forEach((de,pe)=>ee.set(pe,de)),ee.delete(z.NEED_RESULT_POINT_CALLBACK),l=ee}try{const ee=this.decodeRow(H,g,l);if(K===1){ee.putMetadata(se.ORIENTATION,180);const de=ee.getResultPoints();de!==null&&(de[0]=new Me(c-de[0].getX()-1,de[0].getY()),de[1]=new Me(c-de[1].getX()-1,de[1].getY()))}return ee}catch{}}}throw new G}static recordPattern(o,l,c){const f=c.length;for(let S=0;S<f;S++)c[S]=0;const g=o.getSize();if(l>=g)throw new G;let p=!o.get(l),w=0,v=l;for(;v<g;){if(o.get(v)!==p)c[w]++;else{if(++w===f)break;c[w]=1,p=!p}v++}if(!(w===f||w===f-1&&v===g))throw new G}static recordPatternInReverse(o,l,c){let f=c.length,g=o.get(l);for(;l>0&&f>=0;)o.get(--l)!==g&&(f--,g=!g);if(f>=0)throw new G;ft.recordPattern(o,l+1,c)}static patternMatchVariance(o,l,c){const f=o.length;let g=0,p=0;for(let S=0;S<f;S++)g+=o[S],p+=l[S];if(g<p)return Number.POSITIVE_INFINITY;const w=g/p;c*=w;let v=0;for(let S=0;S<f;S++){const P=o[S],L=l[S]*w,B=P>L?P-L:L-P;if(B>c)return Number.POSITIVE_INFINITY;v+=B}return v/g}}class Te extends ft{static findStartPattern(o){const l=o.getSize(),c=o.getNextSet(0);let f=0,g=Int32Array.from([0,0,0,0,0,0]),p=c,w=!1;const v=6;for(let S=c;S<l;S++)if(o.get(S)!==w)g[f]++;else{if(f===v-1){let P=Te.MAX_AVG_VARIANCE,L=-1;for(let B=Te.CODE_START_A;B<=Te.CODE_START_C;B++){const H=ft.patternMatchVariance(g,Te.CODE_PATTERNS[B],Te.MAX_INDIVIDUAL_VARIANCE);H<P&&(P=H,L=B)}if(L>=0&&o.isRange(Math.max(0,p-(S-p)/2),p,!1))return Int32Array.from([p,S,L]);p+=g[0]+g[1],g=g.slice(2,g.length-1),g[f-1]=0,g[f]=0,f--}else f++;g[f]=1,w=!w}throw new G}static decodeCode(o,l,c){ft.recordPattern(o,c,l);let f=Te.MAX_AVG_VARIANCE,g=-1;for(let p=0;p<Te.CODE_PATTERNS.length;p++){const w=Te.CODE_PATTERNS[p],v=this.patternMatchVariance(l,w,Te.MAX_INDIVIDUAL_VARIANCE);v<f&&(f=v,g=p)}if(g>=0)return g;throw new G}decodeRow(o,l,c){const f=c&&c.get(z.ASSUME_GS1)===!0,g=Te.findStartPattern(l),p=g[2];let w=0;const v=new Uint8Array(20);v[w++]=p;let S;switch(p){case Te.CODE_START_A:S=Te.CODE_CODE_A;break;case Te.CODE_START_B:S=Te.CODE_CODE_B;break;case Te.CODE_START_C:S=Te.CODE_CODE_C;break;default:throw new O}let P=!1,L=!1,B="",H=g[0],K=g[1];const ee=Int32Array.from([0,0,0,0,0,0]);let de=0,pe=0,ke=p,Ne=0,Ce=!0,dt=!1,tt=!1;for(;!P;){const xa=L;switch(L=!1,de=pe,pe=Te.decodeCode(l,ee,K),v[w++]=pe,pe!==Te.CODE_STOP&&(Ce=!0),pe!==Te.CODE_STOP&&(Ne++,ke+=Ne*pe),H=K,K+=ee.reduce((UA,VA)=>UA+VA,0),pe){case Te.CODE_START_A:case Te.CODE_START_B:case Te.CODE_START_C:throw new O}switch(S){case Te.CODE_CODE_A:if(pe<64)tt===dt?B+=String.fromCharCode(32+pe):B+=String.fromCharCode(32+pe+128),tt=!1;else if(pe<96)tt===dt?B+=String.fromCharCode(pe-64):B+=String.fromCharCode(pe+64),tt=!1;else switch(pe!==Te.CODE_STOP&&(Ce=!1),pe){case Te.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_A:!dt&&tt?(dt=!0,tt=!1):dt&&tt?(dt=!1,tt=!1):tt=!0;break;case Te.CODE_SHIFT:L=!0,S=Te.CODE_CODE_B;break;case Te.CODE_CODE_B:S=Te.CODE_CODE_B;break;case Te.CODE_CODE_C:S=Te.CODE_CODE_C;break;case Te.CODE_STOP:P=!0;break}break;case Te.CODE_CODE_B:if(pe<96)tt===dt?B+=String.fromCharCode(32+pe):B+=String.fromCharCode(32+pe+128),tt=!1;else switch(pe!==Te.CODE_STOP&&(Ce=!1),pe){case Te.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_B:!dt&&tt?(dt=!0,tt=!1):dt&&tt?(dt=!1,tt=!1):tt=!0;break;case Te.CODE_SHIFT:L=!0,S=Te.CODE_CODE_A;break;case Te.CODE_CODE_A:S=Te.CODE_CODE_A;break;case Te.CODE_CODE_C:S=Te.CODE_CODE_C;break;case Te.CODE_STOP:P=!0;break}break;case Te.CODE_CODE_C:if(pe<100)pe<10&&(B+="0"),B+=pe;else switch(pe!==Te.CODE_STOP&&(Ce=!1),pe){case Te.CODE_FNC_1:f&&(B.length===0?B+="]C1":B+="");break;case Te.CODE_CODE_A:S=Te.CODE_CODE_A;break;case Te.CODE_CODE_B:S=Te.CODE_CODE_B;break;case Te.CODE_STOP:P=!0;break}break}xa&&(S=S===Te.CODE_CODE_A?Te.CODE_CODE_B:Te.CODE_CODE_A)}const pr=K-H;if(K=l.getNextUnset(K),!l.isRange(K,Math.min(l.getSize(),K+(K-H)/2),!1))throw new G;if(ke-=Ne*de,ke%103!==de)throw new _;const us=B.length;if(us===0)throw new G;us>0&&Ce&&(S===Te.CODE_CODE_C?B=B.substring(0,us-2):B=B.substring(0,us-1));const xr=(g[1]+g[0])/2,Ft=H+pr/2,Gn=v.length,Ir=new Uint8Array(Gn);for(let xa=0;xa<Gn;xa++)Ir[xa]=v[xa];const pa=[new Me(xr,o),new Me(Ft,o)];return new q(B,Ir,0,pa,ue.CODE_128,new Date().getTime())}}Te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Te.MAX_AVG_VARIANCE=.25,Te.MAX_INDIVIDUAL_VARIANCE=.7,Te.CODE_SHIFT=98,Te.CODE_CODE_C=99,Te.CODE_CODE_B=100,Te.CODE_CODE_A=101,Te.CODE_FNC_1=102,Te.CODE_FNC_2=97,Te.CODE_FNC_3=96,Te.CODE_FNC_4_A=101,Te.CODE_FNC_4_B=100,Te.CODE_START_A=103,Te.CODE_START_B=104,Te.CODE_START_C=105,Te.CODE_STOP=106;class ln extends ft{constructor(o=!1,l=!1){super(),this.usingCheckDigit=o,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,l,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let g=ln.findAsteriskPattern(l,f),p=l.getNextSet(g[1]),w=l.getSize(),v,S;do{ln.recordPattern(l,p,f);let ee=ln.toNarrowWidePattern(f);if(ee<0)throw new G;v=ln.patternToChar(ee),this.decodeRowResult+=v,S=p;for(let de of f)p+=de;p=l.getNextSet(p)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let P=0;for(let ee of f)P+=ee;let L=p-S-P;if(p!==w&&L*2<P)throw new G;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,de=0;for(let pe=0;pe<ee;pe++)de+=ln.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(ee)!==ln.ALPHABET_STRING.charAt(de%43))throw new _;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new G;let B;this.extendedMode?B=ln.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let H=(g[1]+g[0])/2,K=S+P/2;return new q(B,null,0,[new Me(H,o),new Me(K,o)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(o,l){let c=o.getSize(),f=o.getNextSet(0),g=0,p=f,w=!1,v=l.length;for(let S=f;S<c;S++)if(o.get(S)!==w)l[g]++;else{if(g===v-1){if(this.toNarrowWidePattern(l)===ln.ASTERISK_ENCODING&&o.isRange(Math.max(0,p-Math.floor((S-p)/2)),p,!1))return[p,S];p+=l[0]+l[1],l.copyWithin(0,2,2+g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,w=!w}throw new G}static toNarrowWidePattern(o){let l=o.length,c=0,f;do{let g=2147483647;for(let v of o)v<g&&v>c&&(g=v);c=g,f=0;let p=0,w=0;for(let v=0;v<l;v++){let S=o[v];S>c&&(w|=1<<l-1-v,f++,p+=S)}if(f===3){for(let v=0;v<l&&f>0;v++){let S=o[v];if(S>c&&(f--,S*2>=p))return-1}return w}}while(f>3);return-1}static patternToChar(o){for(let l=0;l<ln.CHARACTER_ENCODINGS.length;l++)if(ln.CHARACTER_ENCODINGS[l]===o)return ln.ALPHABET_STRING.charAt(l);if(o===ln.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(o){let l=o.length,c="";for(let f=0;f<l;f++){let g=o.charAt(f);if(g==="+"||g==="$"||g==="%"||g==="/"){let p=o.charAt(f+1),w="\0";switch(g){case"+":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)+32);else throw new O;break;case"$":if(p>="A"&&p<="Z")w=String.fromCharCode(p.charCodeAt(0)-64);else throw new O;break;case"%":if(p>="A"&&p<="E")w=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")w=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")w=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")w="\0";else if(p==="V")w="@";else if(p==="W")w="`";else if(p==="X"||p==="Y"||p==="Z")w="";else throw new O;break;case"/":if(p>="A"&&p<="O")w=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")w=":";else throw new O;break}c+=w,f++}else c+=g}return c}}ln.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ln.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ln.ASTERISK_ENCODING=148;class Ct extends ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,l,c){let f=this.decodeStart(l),g=this.decodeEnd(l),p=new te;Ct.decodeMiddle(l,f[1],g[0],p);let w=p.toString(),v=null;c!=null&&(v=c.get(z.ALLOWED_LENGTHS)),v==null&&(v=Ct.DEFAULT_ALLOWED_LENGTHS);let S=w.length,P=!1,L=0;for(let K of v){if(S===K){P=!0;break}K>L&&(L=K)}if(!P&&S>L&&(P=!0),!P)throw new O;const B=[new Me(f[1],o),new Me(g[0],o)];return new q(w,null,0,B,ue.ITF,new Date().getTime())}static decodeMiddle(o,l,c,f){let g=new Int32Array(10),p=new Int32Array(5),w=new Int32Array(5);for(g.fill(0),p.fill(0),w.fill(0);l<c;){ft.recordPattern(o,l,g);for(let S=0;S<5;S++){let P=2*S;p[S]=g[P],w[S]=g[P+1]}let v=Ct.decodeDigit(p);f.append(v.toString()),v=this.decodeDigit(w),f.append(v.toString()),g.forEach(function(S){l+=S})}}decodeStart(o){let l=Ct.skipWhiteSpace(o),c=Ct.findGuardPattern(o,l,Ct.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(o,c[0]),c}validateQuietZone(o,l){let c=this.narrowLineWidth*10;c=c<l?c:l;for(let f=l-1;c>0&&f>=0&&!o.get(f);f--)c--;if(c!==0)throw new G}static skipWhiteSpace(o){const l=o.getSize(),c=o.getNextSet(0);if(c===l)throw new G;return c}decodeEnd(o){o.reverse();try{let l=Ct.skipWhiteSpace(o),c;try{c=Ct.findGuardPattern(o,l,Ct.END_PATTERN_REVERSED[0])}catch(g){g instanceof G&&(c=Ct.findGuardPattern(o,l,Ct.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,c[0]);let f=c[0];return c[0]=o.getSize()-c[1],c[1]=o.getSize()-f,c}finally{o.reverse()}}static findGuardPattern(o,l,c){let f=c.length,g=new Int32Array(f),p=o.getSize(),w=!1,v=0,S=l;g.fill(0);for(let P=l;P<p;P++)if(o.get(P)!==w)g[v]++;else{if(v===f-1){if(ft.patternMatchVariance(g,c,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return[S,P];S+=g[0]+g[1],N.arraycopy(g,2,g,0,v-1),g[v-1]=0,g[v]=0,v--}else v++;g[v]=1,w=!w}throw new G}static decodeDigit(o){let l=Ct.MAX_AVG_VARIANCE,c=-1,f=Ct.PATTERNS.length;for(let g=0;g<f;g++){let p=Ct.PATTERNS[g],w=ft.patternMatchVariance(o,p,Ct.MAX_INDIVIDUAL_VARIANCE);w<l?(l=w,c=g):w===l&&(c=-1)}if(c>=0)return c%10;throw new G}}Ct.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ct.MAX_AVG_VARIANCE=.38,Ct.MAX_INDIVIDUAL_VARIANCE=.5,Ct.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ct.START_PATTERN=Int32Array.from([1,1,1,1]),Ct.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Kt extends ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let l=!1,c,f=0,g=Int32Array.from([0,0,0]);for(;!l;){g=Int32Array.from([0,0,0]),c=Kt.findGuardPattern(o,f,!1,this.START_END_PATTERN,g);let p=c[0];f=c[1];let w=p-(f-p);w>=0&&(l=o.isRange(w,p,!1))}return c}static checkChecksum(o){return Kt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let l=o.length;if(l===0)return!1;let c=parseInt(o.charAt(l-1),10);return Kt.getStandardUPCEANChecksum(o.substring(0,l-1))===c}static getStandardUPCEANChecksum(o){let l=o.length,c=0;for(let f=l-1;f>=0;f-=2){let g=o.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new O;c+=g}c*=3;for(let f=l-2;f>=0;f-=2){let g=o.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new O;c+=g}return(1e3-c)%10}static decodeEnd(o,l){return Kt.findGuardPattern(o,l,!1,Kt.START_END_PATTERN,new Int32Array(Kt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,l,c,f){return this.findGuardPattern(o,l,c,f,new Int32Array(f.length))}static findGuardPattern(o,l,c,f,g){let p=o.getSize();l=c?o.getNextUnset(l):o.getNextSet(l);let w=0,v=l,S=f.length,P=c;for(let L=l;L<p;L++)if(o.get(L)!==P)g[w]++;else{if(w===S-1){if(ft.patternMatchVariance(g,f,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return Int32Array.from([v,L]);v+=g[0]+g[1];let B=g.slice(2,g.length-1);for(let H=0;H<w-1;H++)g[H]=B[H];g[w-1]=0,g[w]=0,w--}else w++;g[w]=1,P=!P}throw new G}static decodeDigit(o,l,c,f){this.recordPattern(o,c,l);let g=this.MAX_AVG_VARIANCE,p=-1,w=f.length;for(let v=0;v<w;v++){let S=f[v],P=ft.patternMatchVariance(l,S,Kt.MAX_INDIVIDUAL_VARIANCE);P<g&&(g=P,p=v)}if(p>=0)return p;throw new G}}Kt.MAX_AVG_VARIANCE=.48,Kt.MAX_INDIVIDUAL_VARIANCE=.7,Kt.START_END_PATTERN=Int32Array.from([1,1,1]),Kt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Kt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Kt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class yi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,l,c){let f=this.decodeRowStringBuffer,g=this.decodeMiddle(l,c,f),p=f.toString(),w=yi.parseExtensionString(p),v=[new Me((c[0]+c[1])/2,o),new Me(g,o)],S=new q(p,null,0,v,ue.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&S.putAllMetadata(w),S}decodeMiddle(o,l,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=o.getSize(),p=l[1],w=0;for(let S=0;S<5&&p<g;S++){let P=Kt.decodeDigit(o,f,p,Kt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+P%10);for(let L of f)p+=L;P>=10&&(w|=1<<4-S),S!==4&&(p=o.getNextSet(p),p=o.getNextUnset(p))}if(c.length!==5)throw new G;let v=this.determineCheckDigit(w);if(yi.extensionChecksum(c.toString())!==v)throw new G;return p}static extensionChecksum(o){let l=o.length,c=0;for(let f=l-2;f>=0;f-=2)c+=o.charAt(f).charCodeAt(0)-48;c*=3;for(let f=l-1;f>=0;f-=2)c+=o.charAt(f).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(o){for(let l=0;l<10;l++)if(o===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new G}static parseExtensionString(o){if(o.length!==5)return null;let l=yi.parseExtension5String(o);return l==null?null:new Map([[se.SUGGESTED_PRICE,l]])}static parseExtension5String(o){let l;switch(o.charAt(0)){case"0":l="£";break;case"5":l="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let c=parseInt(o.substring(1)),f=(c/100).toString(),g=c%100,p=g<10?"0"+g:g.toString();return l+f+"."+p}}class wi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,l,c){let f=this.decodeRowStringBuffer,g=this.decodeMiddle(l,c,f),p=f.toString(),w=wi.parseExtensionString(p),v=[new Me((c[0]+c[1])/2,o),new Me(g,o)],S=new q(p,null,0,v,ue.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&S.putAllMetadata(w),S}decodeMiddle(o,l,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=o.getSize(),p=l[1],w=0;for(let v=0;v<2&&p<g;v++){let S=Kt.decodeDigit(o,f,p,Kt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+S%10);for(let P of f)p+=P;S>=10&&(w|=1<<1-v),v!==1&&(p=o.getNextSet(p),p=o.getNextUnset(p))}if(c.length!==2)throw new G;if(parseInt(c.toString())%4!==w)throw new G;return p}static parseExtensionString(o){return o.length!==2?null:new Map([[se.ISSUE_NUMBER,parseInt(o)]])}}class jl{static decodeRow(o,l,c){let f=Kt.findGuardPattern(l,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new yi().decodeRow(o,l,f)}catch{return new wi().decodeRow(o,l,f)}}}jl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class mt extends Kt{constructor(){super(),this.decodeRowStringBuffer="",mt.L_AND_G_PATTERNS=mt.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let l=mt.L_PATTERNS[o-10],c=new Int32Array(l.length);for(let f=0;f<l.length;f++)c[f]=l[l.length-f-1];mt.L_AND_G_PATTERNS[o]=c}}decodeRow(o,l,c){let f=mt.findStartGuardPattern(l),g=c==null?null:c.get(z.NEED_RESULT_POINT_CALLBACK);if(g!=null){const Ce=new Me((f[0]+f[1])/2,o);g.foundPossibleResultPoint(Ce)}let p=this.decodeMiddle(l,f,this.decodeRowStringBuffer),w=p.rowOffset,v=p.resultString;if(g!=null){const Ce=new Me(w,o);g.foundPossibleResultPoint(Ce)}let S=this.decodeEnd(l,w);if(g!=null){const Ce=new Me((S[0]+S[1])/2,o);g.foundPossibleResultPoint(Ce)}let P=S[1],L=P+(P-S[0]);if(L>=l.getSize()||!l.isRange(P,L,!1))throw new G;let B=v.toString();if(B.length<8)throw new O;if(!mt.checkChecksum(B))throw new _;let H=(f[1]+f[0])/2,K=(S[1]+S[0])/2,ee=this.getBarcodeFormat(),de=[new Me(H,o),new Me(K,o)],pe=new q(B,null,0,de,ee,new Date().getTime()),ke=0;try{let Ce=jl.decodeRow(o,l,S[1]);pe.putMetadata(se.UPC_EAN_EXTENSION,Ce.getText()),pe.putAllMetadata(Ce.getResultMetadata()),pe.addResultPoints(Ce.getResultPoints()),ke=Ce.getText().length}catch{}let Ne=c==null?null:c.get(z.ALLOWED_EAN_EXTENSIONS);if(Ne!=null){let Ce=!1;for(let dt in Ne)if(ke.toString()===dt){Ce=!0;break}if(!Ce)throw new G}return pe}decodeEnd(o,l){return mt.findGuardPattern(o,l,!1,mt.START_END_PATTERN,new Int32Array(mt.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return mt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let l=o.length;if(l===0)return!1;let c=parseInt(o.charAt(l-1),10);return mt.getStandardUPCEANChecksum(o.substring(0,l-1))===c}static getStandardUPCEANChecksum(o){let l=o.length,c=0;for(let f=l-1;f>=0;f-=2){let g=o.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new O;c+=g}c*=3;for(let f=l-2;f>=0;f-=2){let g=o.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new O;c+=g}return(1e3-c)%10}}class as extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,l,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=o.getSize(),p=l[1],w=0;for(let S=0;S<6&&p<g;S++){let P=mt.decodeDigit(o,f,p,mt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+P%10);for(let L of f)p+=L;P>=10&&(w|=1<<5-S)}c=as.determineFirstDigit(c,w),p=mt.findGuardPattern(o,p,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&p<g;S++){let P=mt.decodeDigit(o,f,p,mt.L_PATTERNS);c+=String.fromCharCode(48+P);for(let L of f)p+=L}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(o,l){for(let c=0;c<10;c++)if(l===this.FIRST_DIGIT_ENCODINGS[c])return o=String.fromCharCode(48+c)+o,o;throw new G}}as.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class nd extends mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,l,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=o.getSize(),p=l[1];for(let v=0;v<4&&p<g;v++){let S=mt.decodeDigit(o,f,p,mt.L_PATTERNS);c+=String.fromCharCode(48+S);for(let P of f)p+=P}p=mt.findGuardPattern(o,p,!0,mt.MIDDLE_PATTERN,new Int32Array(mt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&p<g;v++){let S=mt.decodeDigit(o,f,p,mt.L_PATTERNS);c+=String.fromCharCode(48+S);for(let P of f)p+=P}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return ue.EAN_8}}class Dl extends mt{constructor(){super(...arguments),this.ean13Reader=new as}getBarcodeFormat(){return ue.UPC_A}decode(o,l){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,l,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,l,c))}decodeMiddle(o,l,c){return this.ean13Reader.decodeMiddle(o,l,c)}maybeReturnResult(o){let l=o.getText();if(l.charAt(0)==="0"){let c=new q(l.substring(1),null,null,o.getResultPoints(),ue.UPC_A);return o.getResultMetadata()!=null&&c.putAllMetadata(o.getResultMetadata()),c}else throw new G}reset(){this.ean13Reader.reset()}}class Tr extends mt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,l,c){const f=this.decodeMiddleCounters.map(S=>S);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const g=o.getSize();let p=l[1],w=0;for(let S=0;S<6&&p<g;S++){const P=Tr.decodeDigit(o,f,p,Tr.L_AND_G_PATTERNS);c+=String.fromCharCode(48+P%10);for(let L of f)p+=L;P>=10&&(w|=1<<5-S)}let v=Tr.determineNumSysAndCheckDigit(c,w);return{rowOffset:p,resultString:v}}decodeEnd(o,l){return Tr.findGuardPatternWithoutCounters(o,l,!0,Tr.MIDDLE_END_PATTERN)}checkChecksum(o){return mt.checkChecksum(Tr.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,l){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let g=String.fromCharCode(48+c),p=String.fromCharCode(48+f);return g+o+p}throw G.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(o){const l=o.slice(1,7).split("").map(g=>g.charCodeAt(0)),c=new te;c.append(o.charAt(0));let f=l[5];switch(f){case 0:case 1:case 2:c.appendChars(l,0,2),c.append(f),c.append("0000"),c.appendChars(l,2,3);break;case 3:c.appendChars(l,0,3),c.append("00000"),c.appendChars(l,3,2);break;case 4:c.appendChars(l,0,4),c.append("00000"),c.append(l[4]);break;default:c.appendChars(l,0,5),c.append("0000"),c.append(f);break}return o.length>=8&&c.append(o.charAt(7)),c.toString()}}Tr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ua extends ft{constructor(o){super();let l=o==null?null:o.get(z.POSSIBLE_FORMATS),c=[];r(l)?(c.push(new as),c.push(new Dl),c.push(new nd),c.push(new Tr)):(l.indexOf(ue.EAN_13)>-1&&c.push(new as),l.indexOf(ue.UPC_A)>-1&&c.push(new Dl),l.indexOf(ue.EAN_8)>-1&&c.push(new nd),l.indexOf(ue.UPC_E)>-1&&c.push(new Tr)),this.readers=c}decodeRow(o,l,c){for(let f of this.readers)try{const g=f.decodeRow(o,l,c),p=g.getBarcodeFormat()===ue.EAN_13&&g.getText().charAt(0)==="0",w=c==null?null:c.get(z.POSSIBLE_FORMATS),v=w==null||w.includes(ue.UPC_A);if(p&&v){const S=g.getRawBytes(),P=new q(g.getText().substring(1),S,S?S.length:null,g.getResultPoints(),ue.UPC_A);return P.putAllMetadata(g.getResultMetadata()),P}return g}catch{}throw new G}reset(){for(let o of this.readers)o.reset()}}class wn extends ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,l){for(let c=0;c<l.length;c++)if(ft.patternMatchVariance(o,l[c],wn.MAX_INDIVIDUAL_VARIANCE)<wn.MAX_AVG_VARIANCE)return c;throw new G}static count(o){return We.sum(new Int32Array(o))}static increment(o,l){let c=0,f=l[0];for(let g=1;g<o.length;g++)l[g]>f&&(f=l[g],c=g);o[c]++}static decrement(o,l){let c=0,f=l[0];for(let g=1;g<o.length;g++)l[g]<f&&(f=l[g],c=g);o[c]--}static isFinderPattern(o){let l=o[0]+o[1],c=l+o[2]+o[3],f=l/c;if(f>=wn.MIN_FINDER_PATTERN_RATIO&&f<=wn.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let w of o)w>p&&(p=w),w<g&&(g=w);return p<10*g}return!1}}wn.MAX_AVG_VARIANCE=.2,wn.MAX_INDIVIDUAL_VARIANCE=.45,wn.MIN_FINDER_PATTERN_RATIO=9.5/12,wn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ls{constructor(o,l){this.value=o,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof ls))return!1;const l=o;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class da{constructor(o,l,c,f,g){this.value=o,this.startEnd=l,this.value=o,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new Me(c,g)),this.resultPoints.push(new Me(f,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof da))return!1;const l=o;return this.value===l.value}hashCode(){return this.value}}class Wr{constructor(){}static getRSSvalue(o,l,c){let f=0;for(let v of o)f+=v;let g=0,p=0,w=o.length;for(let v=0;v<w-1;v++){let S;for(S=1,p|=1<<v;S<o[v];S++,p&=~(1<<v)){let P=Wr.combins(f-S-1,w-v-2);if(c&&p===0&&f-S-(w-v-1)>=w-v-1&&(P-=Wr.combins(f-S-(w-v),w-v-2)),w-v-1>1){let L=0;for(let B=f-S-(w-v-2);B>l;B--)L+=Wr.combins(f-S-B-1,w-v-3);P-=L*(w-1-v)}else f-S>l&&P--;g+=P}f-=S}return g}static combins(o,l){let c,f;o-l>l?(f=l,c=o-l):(f=o-l,c=l);let g=1,p=1;for(let w=o;w>c;w--)g*=w,p<=f&&(g/=p,p++);for(;p<=f;)g/=p,p++;return g}}class Z{static buildBitArray(o){let l=o.length*2-1;o[o.length-1].getRightChar()==null&&(l-=1);let c=12*l,f=new j(c),g=0,w=o[0].getRightChar().getValue();for(let v=11;v>=0;--v)w&1<<v&&f.set(g),g++;for(let v=1;v<o.length;++v){let S=o[v],P=S.getLeftChar().getValue();for(let L=11;L>=0;--L)P&1<<L&&f.set(g),g++;if(S.getRightChar()!=null){let L=S.getRightChar().getValue();for(let B=11;B>=0;--B)L&1<<B&&f.set(g),g++}}return f}}class ie{constructor(o,l){l?this.decodedInformation=null:(this.finished=o,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class me{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class ve extends me{constructor(o,l){super(o),this.value=l}getValue(){return this.value}isFNC1(){return this.value===ve.FNC1}}ve.FNC1="$";class Ie extends me{constructor(o,l,c){super(o),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Le extends me{constructor(o,l,c){if(super(o),l<0||l>10||c<0||c>10)throw new O;this.firstDigit=l,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Le.FNC1}isSecondDigitFNC1(){return this.secondDigit===Le.FNC1}isAnyFNC1(){return this.firstDigit===Le.FNC1||this.secondDigit===Le.FNC1}}Le.FNC1=10;class _e{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new G;let l=o.substring(0,2);for(let g of _e.TWO_DIGIT_DATA_LENGTH)if(g[0]===l)return g[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(2,g[2],o):_e.processFixedAI(2,g[1],o);if(o.length<3)throw new G;let c=o.substring(0,3);for(let g of _e.THREE_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(3,g[2],o):_e.processFixedAI(3,g[1],o);for(let g of _e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,g[2],o):_e.processFixedAI(4,g[1],o);if(o.length<4)throw new G;let f=o.substring(0,4);for(let g of _e.FOUR_DIGIT_DATA_LENGTH)if(g[0]===f)return g[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,g[2],o):_e.processFixedAI(4,g[1],o);throw new G}static processFixedAI(o,l,c){if(c.length<o)throw new G;let f=c.substring(0,o);if(c.length<o+l)throw new G;let g=c.substring(o,o+l),p=c.substring(o+l),w="("+f+")"+g,v=_e.parseFieldsInGeneralPurpose(p);return v==null?w:w+v}static processVariableAI(o,l,c){let f=c.substring(0,o),g;c.length<o+l?g=c.length:g=o+l;let p=c.substring(o,g),w=c.substring(g),v="("+f+")"+p,S=_e.parseFieldsInGeneralPurpose(w);return S==null?v:v+S}}_e.VARIABLE_LENGTH=[],_e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",_e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",_e.VARIABLE_LENGTH,20],["22",_e.VARIABLE_LENGTH,29],["30",_e.VARIABLE_LENGTH,8],["37",_e.VARIABLE_LENGTH,8],["90",_e.VARIABLE_LENGTH,30],["91",_e.VARIABLE_LENGTH,30],["92",_e.VARIABLE_LENGTH,30],["93",_e.VARIABLE_LENGTH,30],["94",_e.VARIABLE_LENGTH,30],["95",_e.VARIABLE_LENGTH,30],["96",_e.VARIABLE_LENGTH,30],["97",_e.VARIABLE_LENGTH,3],["98",_e.VARIABLE_LENGTH,30],["99",_e.VARIABLE_LENGTH,30]],_e.THREE_DIGIT_DATA_LENGTH=[["240",_e.VARIABLE_LENGTH,30],["241",_e.VARIABLE_LENGTH,30],["242",_e.VARIABLE_LENGTH,6],["250",_e.VARIABLE_LENGTH,30],["251",_e.VARIABLE_LENGTH,30],["253",_e.VARIABLE_LENGTH,17],["254",_e.VARIABLE_LENGTH,20],["400",_e.VARIABLE_LENGTH,30],["401",_e.VARIABLE_LENGTH,30],["402",17],["403",_e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",_e.VARIABLE_LENGTH,20],["421",_e.VARIABLE_LENGTH,15],["422",3],["423",_e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],_e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",_e.VARIABLE_LENGTH,15],["391",_e.VARIABLE_LENGTH,18],["392",_e.VARIABLE_LENGTH,15],["393",_e.VARIABLE_LENGTH,18],["703",_e.VARIABLE_LENGTH,30]],_e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",_e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",_e.VARIABLE_LENGTH,20],["8003",_e.VARIABLE_LENGTH,30],["8004",_e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",_e.VARIABLE_LENGTH,30],["8008",_e.VARIABLE_LENGTH,12],["8018",18],["8020",_e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",_e.VARIABLE_LENGTH,70],["8200",_e.VARIABLE_LENGTH,70]];class De{constructor(o){this.buffer=new te,this.information=o}decodeAllCodes(o,l){let c=l,f=null;do{let g=this.decodeGeneralPurposeField(c,f),p=_e.parseFieldsInGeneralPurpose(g.getNewString());if(p!=null&&o.append(p),g.isRemaining()?f=""+g.getRemainingValue():f=null,c===g.getNewPosition())break;c=g.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let l=o;l<o+3;++l)if(this.information.get(l))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(o,4);return g===0?new Le(this.information.getSize(),Le.FNC1,Le.FNC1):new Le(this.information.getSize(),g-1,Le.FNC1)}let l=this.extractNumericValueFromBitArray(o,7),c=(l-8)/11,f=(l-8)%11;return new Le(o+7,c,f)}extractNumericValueFromBitArray(o,l){return De.extractNumericValueFromBitArray(this.information,o,l)}static extractNumericValueFromBitArray(o,l,c){let f=0;for(let g=0;g<c;++g)o.get(l+g)&&(f|=1<<c-g-1);return f}decodeGeneralPurposeField(o,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(o);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Ie(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Ie(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,l;do{let c=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),o=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),o=l.isFinished()):(l=this.parseNumericBlock(),o=l.isFinished()),!(c!==this.current.getPosition())&&!o)break}while(!o);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let l;return o.isSecondDigitFNC1()?l=new Ie(this.current.getPosition(),this.buffer.toString()):l=new Ie(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new ie(!0,l)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let l=new Ie(this.current.getPosition(),this.buffer.toString());return new ie(!0,l)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ie(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let l=new Ie(this.current.getPosition(),this.buffer.toString());return new ie(!0,l)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ie(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let l=new Ie(this.current.getPosition(),this.buffer.toString());return new ie(!0,l)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ie(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,5);if(l>=5&&l<16)return!0;if(o+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<116)return!0;if(o+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(o,8);return f>=232&&f<253}decodeIsoIec646(o){let l=this.extractNumericValueFromBitArray(o,5);if(l===15)return new ve(o+5,ve.FNC1);if(l>=5&&l<15)return new ve(o+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(o,7);if(c>=64&&c<90)return new ve(o+7,""+(c+1));if(c>=90&&c<116)return new ve(o+7,""+(c+7));let f=this.extractNumericValueFromBitArray(o,8),g;switch(f){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new O}return new ve(o+8,g)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,5);if(l>=5&&l<16)return!0;if(o+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,6);return c>=16&&c<63}decodeAlphanumeric(o){let l=this.extractNumericValueFromBitArray(o,5);if(l===15)return new ve(o+5,ve.FNC1);if(l>=5&&l<15)return new ve(o+5,"0"+(l-5));let c=this.extractNumericValueFromBitArray(o,6);if(c>=32&&c<58)return new ve(o+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Xe("Decoding invalid alphanumeric value: "+c)}return new ve(o+6,f)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let l=0;l<5&&l+o<this.information.getSize();++l)if(l===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+l))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let l=o;l<o+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let l=0;l<4&&l+o<this.information.getSize();++l)if(this.information.get(o+l))return!1;return!0}}class Ue{constructor(o){this.information=o,this.generalDecoder=new De(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Re extends Ue{constructor(o){super(o)}encodeCompressedGtin(o,l){o.append("(01)");let c=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,l,c)}encodeCompressedGtinWithoutAI(o,l,c){for(let f=0;f<4;++f){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*f,10);g/100===0&&o.append("0"),g/10===0&&o.append("0"),o.append(g)}Re.appendCheckDigit(o,c)}static appendCheckDigit(o,l){let c=0;for(let f=0;f<13;f++){let g=o.charAt(f+l).charCodeAt(0)-48;c+=f&1?g:3*g}c=10-c%10,c===10&&(c=0),o.append(c)}}Re.GTIN_SIZE=40;class Ve extends Re{constructor(o){super(o)}parseInformation(){let o=new te;o.append("(01)");let l=o.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(Ve.HEADER_SIZE,4);return o.append(c),this.encodeCompressedGtinWithoutAI(o,Ve.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(o,Ve.HEADER_SIZE+44)}}Ve.HEADER_SIZE=4;class Je extends Ue{constructor(o){super(o)}parseInformation(){let o=new te;return this.getGeneralDecoder().decodeAllCodes(o,Je.HEADER_SIZE)}}Je.HEADER_SIZE=5;class it extends Re{constructor(o){super(o)}encodeCompressedWeight(o,l,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l,c);this.addWeightCode(o,f);let g=this.checkWeight(f),p=1e5;for(let w=0;w<5;++w)g/p===0&&o.append("0"),p/=10;o.append(g)}}class Pt extends it{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Pt.HEADER_SIZE+it.GTIN_SIZE+Pt.WEIGHT_SIZE)throw new G;let o=new te;return this.encodeCompressedGtin(o,Pt.HEADER_SIZE),this.encodeCompressedWeight(o,Pt.HEADER_SIZE+it.GTIN_SIZE,Pt.WEIGHT_SIZE),o.toString()}}Pt.HEADER_SIZE=5,Pt.WEIGHT_SIZE=15;class Ot extends Pt{constructor(o){super(o)}addWeightCode(o,l){o.append("(3103)")}checkWeight(o){return o}}class wt extends Pt{constructor(o){super(o)}addWeightCode(o,l){l<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class bt extends Re{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<bt.HEADER_SIZE+Re.GTIN_SIZE)throw new G;let o=new te;this.encodeCompressedGtin(o,bt.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(bt.HEADER_SIZE+Re.GTIN_SIZE,bt.LAST_DIGIT_SIZE);o.append("(392"),o.append(l),o.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(bt.HEADER_SIZE+Re.GTIN_SIZE+bt.LAST_DIGIT_SIZE,null);return o.append(c.getNewString()),o.toString()}}bt.HEADER_SIZE=8,bt.LAST_DIGIT_SIZE=2;class cn extends Re{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<cn.HEADER_SIZE+Re.GTIN_SIZE)throw new G;let o=new te;this.encodeCompressedGtin(o,cn.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+Re.GTIN_SIZE,cn.LAST_DIGIT_SIZE);o.append("(393"),o.append(l),o.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+Re.GTIN_SIZE+cn.LAST_DIGIT_SIZE,cn.FIRST_THREE_DIGITS_SIZE);c/100==0&&o.append("0"),c/10==0&&o.append("0"),o.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(cn.HEADER_SIZE+Re.GTIN_SIZE+cn.LAST_DIGIT_SIZE+cn.FIRST_THREE_DIGITS_SIZE,null);return o.append(f.getNewString()),o.toString()}}cn.HEADER_SIZE=8,cn.LAST_DIGIT_SIZE=2,cn.FIRST_THREE_DIGITS_SIZE=10;class At extends it{constructor(o,l,c){super(o),this.dateCode=c,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=At.HEADER_SIZE+At.GTIN_SIZE+At.WEIGHT_SIZE+At.DATE_SIZE)throw new G;let o=new te;return this.encodeCompressedGtin(o,At.HEADER_SIZE),this.encodeCompressedWeight(o,At.HEADER_SIZE+At.GTIN_SIZE,At.WEIGHT_SIZE),this.encodeCompressedDate(o,At.HEADER_SIZE+At.GTIN_SIZE+At.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(l,At.DATE_SIZE);if(c==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let f=c%32;c/=32;let g=c%12+1;c/=12;let p=c;p/10==0&&o.append("0"),o.append(p),g/10==0&&o.append("0"),o.append(g),f/10==0&&o.append("0"),o.append(f)}addWeightCode(o,l){o.append("("),o.append(this.firstAIdigits),o.append(l/1e5),o.append(")")}checkWeight(o){return o%1e5}}At.HEADER_SIZE=8,At.WEIGHT_SIZE=20,At.DATE_SIZE=16;function Hr(D){try{if(D.get(1))return new Ve(D);if(!D.get(2))return new Je(D);switch(De.extractNumericValueFromBitArray(D,1,4)){case 4:return new Ot(D);case 5:return new wt(D)}switch(De.extractNumericValueFromBitArray(D,1,5)){case 12:return new bt(D);case 13:return new cn(D)}switch(De.extractNumericValueFromBitArray(D,1,7)){case 56:return new At(D,"310","11");case 57:return new At(D,"320","11");case 58:return new At(D,"310","13");case 59:return new At(D,"320","13");case 60:return new At(D,"310","15");case 61:return new At(D,"320","15");case 62:return new At(D,"310","17");case 63:return new At(D,"320","17")}}catch(o){throw console.log(o),new Xe("unknown decoder: "+D)}}class Rn{constructor(o,l,c,f){this.leftchar=o,this.rightchar=l,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,l){return o instanceof Rn?Rn.equalsOrNull(o.leftchar,l.leftchar)&&Rn.equalsOrNull(o.rightchar,l.rightchar)&&Rn.equalsOrNull(o.finderpattern,l.finderpattern):!1}static equalsOrNull(o,l){return o===null?l===null:Rn.equals(o,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class mo{constructor(o,l,c){this.pairs=o,this.rowNumber=l,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,l){return o instanceof mo?this.checkEqualitity(o,l)&&o.wasReversed===l.wasReversed:!1}checkEqualitity(o,l){if(!o||!l)return;let c;return o.forEach((f,g)=>{l.forEach(p=>{f.getLeftChar().getValue()===p.getLeftChar().getValue()&&f.getRightChar().getValue()===p.getRightChar().getValue()&&f.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class Se extends wn{constructor(o){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,l,c){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(o,l))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(o,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,l){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,o))}catch(g){if(g instanceof G){if(!this.pairs.length)throw new G;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(o,!1),f){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new G}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return o&&(this.rows=this.rows.reverse()),l}checkRows(o,l){for(let c=l;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let p of o)this.pairs.push(p.getPairs());if(this.pairs.push(f.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(o);g.push(f);try{return this.checkRows(g,c+1)}catch(p){this.verbose&&console.log(p)}}throw new G}static isValidSequence(o){for(let l of Se.FINDER_PATTERN_SEQUENCES){if(o.length>l.length)continue;let c=!0;for(let f=0;f<o.length;f++)if(o[f].getFinderPattern().getValue()!=l[f]){c=!1;break}if(c)return!0}return!1}storeRow(o,l){let c=0,f=!1,g=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>o){g=p.isEquivalent(this.pairs);break}f=p.isEquivalent(this.pairs),c++}g||f||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new mo(this.pairs,o,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,l){for(let c of l)if(c.getPairs().length!==o.length){for(let f of c.getPairs())for(let g of o)if(Rn.equals(f,g))break}}static isPartialRow(o,l){for(let c of l){let f=!0;for(let g of o){let p=!1;for(let w of c.getPairs())if(g.equals(w)){p=!0;break}if(!p){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(o){let l=Z.buildBitArray(o),f=Hr(l).parseInformation(),g=o[0].getFinderPattern().getResultPoints(),p=o[o.length-1].getFinderPattern().getResultPoints(),w=[g[0],g[1],p[0],p[1]];return new q(f,null,null,w,ue.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),l=o.getLeftChar(),c=o.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),g=2;for(let w=1;w<this.pairs.size();++w){let v=this.pairs.get(w);f+=v.getLeftChar().getChecksumPortion(),g++;let S=v.getRightChar();S!=null&&(f+=S.getChecksumPortion(),g++)}return f%=211,211*(g-4)+f==l.getValue()}static getNextSecondBar(o,l){let c;return o.get(l)?(c=o.getNextUnset(l),c=o.getNextSet(c)):(c=o.getNextSet(l),c=o.getNextUnset(c)),c}retrieveNextPair(o,l,c){let f=l.length%2==0;this.startFromEven&&(f=!f);let g,p=!0,w=-1;do this.findNextPair(o,l,w),g=this.parseFoundFinderPattern(o,c,f),g==null?w=Se.getNextSecondBar(o,this.startEnd[0]):p=!1;while(p);let v=this.decodeDataCharacter(o,g,f,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new G;let S;try{S=this.decodeDataCharacter(o,g,f,!1)}catch(P){S=null,this.verbose&&console.log(P)}return new Rn(v,S,g,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,l,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=o.getSize(),p;c>=0?p=c:this.isEmptyPair(l)?p=0:p=l[l.length-1].getFinderPattern().getStartEnd()[1];let w=l.length%2!=0;this.startFromEven&&(w=!w);let v=!1;for(;p<g&&(v=!o.get(p),!!v);)p++;let S=0,P=p;for(let L=p;L<g;L++)if(o.get(L)!=v)f[S]++;else{if(S==3){if(w&&Se.reverseCounters(f),Se.isFinderPattern(f)){this.startEnd[0]=P,this.startEnd[1]=L;return}w&&Se.reverseCounters(f),P+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,S--}else S++;f[S]=1,v=!v}throw new G}static reverseCounters(o){let l=o.length;for(let c=0;c<l/2;++c){let f=o[c];o[c]=o[l-c-1],o[l-c-1]=f}}parseFoundFinderPattern(o,l,c){let f,g,p;if(c){let S=this.startEnd[0]-1;for(;S>=0&&!o.get(S);)S--;S++,f=this.startEnd[0]-S,g=S,p=this.startEnd[1]}else g=this.startEnd[0],p=o.getNextUnset(this.startEnd[1]+1),f=p-this.startEnd[1];let w=this.getDecodeFinderCounters();N.arraycopy(w,0,w,1,w.length-1),w[0]=f;let v;try{v=this.parseFinderValue(w,Se.FINDER_PATTERNS)}catch{return null}return new da(v,[g,p],g,p,l)}decodeDataCharacter(o,l,c,f){let g=this.getDataCharacterCounters();for(let Ft=0;Ft<g.length;Ft++)g[Ft]=0;if(f)Se.recordPatternInReverse(o,l.getStartEnd()[0],g);else{Se.recordPattern(o,l.getStartEnd()[1],g);for(let Ft=0,Gn=g.length-1;Ft<Gn;Ft++,Gn--){let Ir=g[Ft];g[Ft]=g[Gn],g[Gn]=Ir}}let p=17,w=We.sum(new Int32Array(g))/p,v=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(w-v)/v>.3)throw new G;let S=this.getOddCounts(),P=this.getEvenCounts(),L=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Ft=0;Ft<g.length;Ft++){let Gn=1*g[Ft]/w,Ir=Gn+.5;if(Ir<1){if(Gn<.3)throw new G;Ir=1}else if(Ir>8){if(Gn>8.7)throw new G;Ir=8}let pa=Ft/2;Ft&1?(P[pa]=Ir,B[pa]=Gn-Ir):(S[pa]=Ir,L[pa]=Gn-Ir)}this.adjustOddEvenCounts(p);let H=4*l.getValue()+(c?0:2)+(f?0:1)-1,K=0,ee=0;for(let Ft=S.length-1;Ft>=0;Ft--){if(Se.isNotA1left(l,c,f)){let Gn=Se.WEIGHTS[H][2*Ft];ee+=S[Ft]*Gn}K+=S[Ft]}let de=0;for(let Ft=P.length-1;Ft>=0;Ft--)if(Se.isNotA1left(l,c,f)){let Gn=Se.WEIGHTS[H][2*Ft+1];de+=P[Ft]*Gn}let pe=ee+de;if(K&1||K>13||K<4)throw new G;let ke=(13-K)/2,Ne=Se.SYMBOL_WIDEST[ke],Ce=9-Ne,dt=Wr.getRSSvalue(S,Ne,!0),tt=Wr.getRSSvalue(P,Ce,!1),pr=Se.EVEN_TOTAL_SUBSET[ke],us=Se.GSUM[ke],xr=dt*pr+tt+us;return new ls(xr,pe)}static isNotA1left(o,l,c){return!(o.getValue()==0&&l&&c)}adjustOddEvenCounts(o){let l=We.sum(new Int32Array(this.getOddCounts())),c=We.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1;l>13?g=!0:l<4&&(f=!0);let p=!1,w=!1;c>13?w=!0:c<4&&(p=!0);let v=l+c-o,S=(l&1)==1,P=(c&1)==0;if(v==1)if(S){if(P)throw new G;g=!0}else{if(!P)throw new G;w=!0}else if(v==-1)if(S){if(P)throw new G;f=!0}else{if(!P)throw new G;p=!0}else if(v==0){if(S){if(!P)throw new G;l<c?(f=!0,w=!0):(g=!0,p=!0)}else if(P)throw new G}else throw new G;if(f){if(g)throw new G;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new G;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class $s extends ls{constructor(o,l,c){super(o,l),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Dt extends wn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,l,c){const f=this.decodePair(l,!1,o,c);Dt.addOrTally(this.possibleLeftPairs,f),l.reverse();let g=this.decodePair(l,!0,o,c);Dt.addOrTally(this.possibleRightPairs,g),l.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&Dt.checkChecksum(p,w))return Dt.constructResult(p,w)}throw new G}static addOrTally(o,l){if(l==null)return;let c=!1;for(let f of o)if(f.getValue()===l.getValue()){f.incrementCount(),c=!0;break}c||o.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,l){let c=4537077*o.getValue()+l.getValue(),f=new String(c).toString(),g=new te;for(let S=13-f.length;S>0;S--)g.append("0");g.append(f);let p=0;for(let S=0;S<13;S++){let P=g.charAt(S).charCodeAt(0)-48;p+=S&1?P:3*P}p=10-p%10,p===10&&(p=0),g.append(p.toString());let w=o.getFinderPattern().getResultPoints(),v=l.getFinderPattern().getResultPoints();return new q(g.toString(),null,0,[w[0],w[1],v[0],v[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(o,l){let c=(o.getChecksumPortion()+16*l.getChecksumPortion())%79,f=9*o.getFinderPattern().getValue()+l.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(o,l,c,f){try{let g=this.findFinderPattern(o,l),p=this.parseFoundFinderPattern(o,c,l,g),w=f==null?null:f.get(z.NEED_RESULT_POINT_CALLBACK);if(w!=null){let P=(g[0]+g[1])/2;l&&(P=o.getSize()-1-P),w.foundPossibleResultPoint(new Me(P,c))}let v=this.decodeDataCharacter(o,p,!0),S=this.decodeDataCharacter(o,p,!1);return new $s(1597*v.getValue()+S.getValue(),v.getChecksumPortion()+4*S.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(o,l,c){let f=this.getDataCharacterCounters();for(let de=0;de<f.length;de++)f[de]=0;if(c)ft.recordPatternInReverse(o,l.getStartEnd()[0],f);else{ft.recordPattern(o,l.getStartEnd()[1]+1,f);for(let de=0,pe=f.length-1;de<pe;de++,pe--){let ke=f[de];f[de]=f[pe],f[pe]=ke}}let g=c?16:15,p=We.sum(new Int32Array(f))/g,w=this.getOddCounts(),v=this.getEvenCounts(),S=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let de=0;de<f.length;de++){let pe=f[de]/p,ke=Math.floor(pe+.5);ke<1?ke=1:ke>8&&(ke=8);let Ne=Math.floor(de/2);de&1?(v[Ne]=ke,P[Ne]=pe-ke):(w[Ne]=ke,S[Ne]=pe-ke)}this.adjustOddEvenCounts(c,g);let L=0,B=0;for(let de=w.length-1;de>=0;de--)B*=9,B+=w[de],L+=w[de];let H=0,K=0;for(let de=v.length-1;de>=0;de--)H*=9,H+=v[de],K+=v[de];let ee=B+3*H;if(c){if(L&1||L>12||L<4)throw new G;let de=(12-L)/2,pe=Dt.OUTSIDE_ODD_WIDEST[de],ke=9-pe,Ne=Wr.getRSSvalue(w,pe,!1),Ce=Wr.getRSSvalue(v,ke,!0),dt=Dt.OUTSIDE_EVEN_TOTAL_SUBSET[de],tt=Dt.OUTSIDE_GSUM[de];return new ls(Ne*dt+Ce+tt,ee)}else{if(K&1||K>10||K<4)throw new G;let de=(10-K)/2,pe=Dt.INSIDE_ODD_WIDEST[de],ke=9-pe,Ne=Wr.getRSSvalue(w,pe,!0),Ce=Wr.getRSSvalue(v,ke,!1),dt=Dt.INSIDE_ODD_TOTAL_SUBSET[de],tt=Dt.INSIDE_GSUM[de];return new ls(Ce*dt+Ne+tt,ee)}}findFinderPattern(o,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=o.getSize(),g=!1,p=0;for(;p<f&&(g=!o.get(p),l!==g);)p++;let w=0,v=p;for(let S=p;S<f;S++)if(o.get(S)!==g)c[w]++;else{if(w===3){if(wn.isFinderPattern(c))return[v,S];v+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,g=!g}throw new G}parseFoundFinderPattern(o,l,c,f){let g=o.get(f[0]),p=f[0]-1;for(;p>=0&&g!==o.get(p);)p--;p++;const w=f[0]-p,v=this.getDecodeFinderCounters(),S=new Int32Array(v.length);N.arraycopy(v,0,S,1,v.length-1),S[0]=w;const P=this.parseFinderValue(S,Dt.FINDER_PATTERNS);let L=p,B=f[1];return c&&(L=o.getSize()-1-L,B=o.getSize()-1-B),new da(P,[p,f[1]],L,B,l)}adjustOddEvenCounts(o,l){let c=We.sum(new Int32Array(this.getOddCounts())),f=We.sum(new Int32Array(this.getEvenCounts())),g=!1,p=!1,w=!1,v=!1;o?(c>12?p=!0:c<4&&(g=!0),f>12?v=!0:f<4&&(w=!0)):(c>11?p=!0:c<5&&(g=!0),f>10?v=!0:f<4&&(w=!0));let S=c+f-l,P=(c&1)===(o?1:0),L=(f&1)===1;if(S===1)if(P){if(L)throw new G;p=!0}else{if(!L)throw new G;v=!0}else if(S===-1)if(P){if(L)throw new G;g=!0}else{if(!L)throw new G;w=!0}else if(S===0){if(P){if(!L)throw new G;c<f?(g=!0,v=!0):(p=!0,w=!0)}else if(L)throw new G}else throw new G;if(g){if(p)throw new G;wn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&wn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(v)throw new G;wn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&wn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Dt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Dt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Dt.OUTSIDE_GSUM=[0,161,961,2015,2715],Dt.INSIDE_GSUM=[0,336,1036,1516],Dt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Dt.INSIDE_ODD_WIDEST=[2,4,6,8],Dt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class cs extends ft{constructor(o,l){super(),this.readers=[],this.verbose=l===!0;const c=o?o.get(z.POSSIBLE_FORMATS):null,f=o&&o.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(ue.EAN_13)||c.includes(ue.UPC_A)||c.includes(ue.EAN_8)||c.includes(ue.UPC_E))&&this.readers.push(new ua(o)),c.includes(ue.CODE_39)&&this.readers.push(new ln(f)),c.includes(ue.CODE_128)&&this.readers.push(new Te),c.includes(ue.ITF)&&this.readers.push(new Ct),c.includes(ue.RSS_14)&&this.readers.push(new Dt),c.includes(ue.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new ua(o)),this.readers.push(new ln),this.readers.push(new ua(o)),this.readers.push(new Te),this.readers.push(new Ct),this.readers.push(new Dt),this.readers.push(new Se(this.verbose)))}decodeRow(o,l,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(o,l,c)}catch{}throw new G}reset(){this.readers.forEach(o=>o.reset())}}class pt extends ae{constructor(o=500,l){super(new cs(l),o,l)}}class qe{constructor(o,l,c){this.ecCodewords=o,this.ecBlocks=[l],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class at{constructor(o,l){this.count=o,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class nt{constructor(o,l,c,f,g,p){this.versionNumber=o,this.symbolSizeRows=l,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=g,this.ecBlocks=p;let w=0;const v=p.getECCodewords(),S=p.getECBlocks();for(let P of S)w+=P.getCount()*(P.getDataCodewords()+v);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,l){if(o&1||l&1)throw new O;for(let c of nt.VERSIONS)if(c.symbolSizeRows===o&&c.symbolSizeColumns===l)return c;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new nt(1,10,10,8,8,new qe(5,new at(1,3))),new nt(2,12,12,10,10,new qe(7,new at(1,5))),new nt(3,14,14,12,12,new qe(10,new at(1,8))),new nt(4,16,16,14,14,new qe(12,new at(1,12))),new nt(5,18,18,16,16,new qe(14,new at(1,18))),new nt(6,20,20,18,18,new qe(18,new at(1,22))),new nt(7,22,22,20,20,new qe(20,new at(1,30))),new nt(8,24,24,22,22,new qe(24,new at(1,36))),new nt(9,26,26,24,24,new qe(28,new at(1,44))),new nt(10,32,32,14,14,new qe(36,new at(1,62))),new nt(11,36,36,16,16,new qe(42,new at(1,86))),new nt(12,40,40,18,18,new qe(48,new at(1,114))),new nt(13,44,44,20,20,new qe(56,new at(1,144))),new nt(14,48,48,22,22,new qe(68,new at(1,174))),new nt(15,52,52,24,24,new qe(42,new at(2,102))),new nt(16,64,64,14,14,new qe(56,new at(2,140))),new nt(17,72,72,16,16,new qe(36,new at(4,92))),new nt(18,80,80,18,18,new qe(48,new at(4,114))),new nt(19,88,88,20,20,new qe(56,new at(4,144))),new nt(20,96,96,22,22,new qe(68,new at(4,174))),new nt(21,104,104,24,24,new qe(56,new at(6,136))),new nt(22,120,120,18,18,new qe(68,new at(6,175))),new nt(23,132,132,20,20,new qe(62,new at(8,163))),new nt(24,144,144,22,22,new qe(62,new at(8,156),new at(2,155))),new nt(25,8,18,6,16,new qe(7,new at(1,5))),new nt(26,8,32,6,14,new qe(11,new at(1,10))),new nt(27,12,26,10,24,new qe(14,new at(1,16))),new nt(28,12,36,10,16,new qe(18,new at(1,22))),new nt(29,16,36,14,16,new qe(24,new at(1,32))),new nt(30,16,48,14,22,new qe(28,new at(1,49)))]}}nt.VERSIONS=nt.buildVersions();class Zt{constructor(o){const l=o.getHeight();if(l<8||l>144||l&1)throw new O;this.version=Zt.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new fe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const l=o.getHeight(),c=o.getWidth();return nt.getVersionForDimensions(l,c)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let l=0,c=4,f=0;const g=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let w=!1,v=!1,S=!1,P=!1;do if(c===g&&f===0&&!w)o[l++]=this.readCorner1(g,p)&255,c-=2,f+=2,w=!0;else if(c===g-2&&f===0&&p&3&&!v)o[l++]=this.readCorner2(g,p)&255,c-=2,f+=2,v=!0;else if(c===g+4&&f===2&&!(p&7)&&!S)o[l++]=this.readCorner3(g,p)&255,c-=2,f+=2,S=!0;else if(c===g-2&&f===0&&(p&7)===4&&!P)o[l++]=this.readCorner4(g,p)&255,c-=2,f+=2,P=!0;else{do c<g&&f>=0&&!this.readMappingMatrix.get(f,c)&&(o[l++]=this.readUtah(c,f,g,p)&255),c-=2,f+=2;while(c>=0&&f<p);c+=1,f+=3;do c>=0&&f<p&&!this.readMappingMatrix.get(f,c)&&(o[l++]=this.readUtah(c,f,g,p)&255),c+=2,f-=2;while(c<g&&f>=0);c+=3,f+=1}while(c<g||f<p);if(l!==this.version.getTotalCodewords())throw new O;return o}readModule(o,l,c,f){return o<0&&(o+=c,l+=4-(c+4&7)),l<0&&(l+=f,o+=4-(f+4&7)),this.readMappingMatrix.set(l,o),this.mappingBitMatrix.get(l,o)}readUtah(o,l,c,f){let g=0;return this.readModule(o-2,l-2,c,f)&&(g|=1),g<<=1,this.readModule(o-2,l-1,c,f)&&(g|=1),g<<=1,this.readModule(o-1,l-2,c,f)&&(g|=1),g<<=1,this.readModule(o-1,l-1,c,f)&&(g|=1),g<<=1,this.readModule(o-1,l,c,f)&&(g|=1),g<<=1,this.readModule(o,l-2,c,f)&&(g|=1),g<<=1,this.readModule(o,l-1,c,f)&&(g|=1),g<<=1,this.readModule(o,l,c,f)&&(g|=1),g}readCorner1(o,l){let c=0;return this.readModule(o-1,0,o,l)&&(c|=1),c<<=1,this.readModule(o-1,1,o,l)&&(c|=1),c<<=1,this.readModule(o-1,2,o,l)&&(c|=1),c<<=1,this.readModule(0,l-2,o,l)&&(c|=1),c<<=1,this.readModule(0,l-1,o,l)&&(c|=1),c<<=1,this.readModule(1,l-1,o,l)&&(c|=1),c<<=1,this.readModule(2,l-1,o,l)&&(c|=1),c<<=1,this.readModule(3,l-1,o,l)&&(c|=1),c}readCorner2(o,l){let c=0;return this.readModule(o-3,0,o,l)&&(c|=1),c<<=1,this.readModule(o-2,0,o,l)&&(c|=1),c<<=1,this.readModule(o-1,0,o,l)&&(c|=1),c<<=1,this.readModule(0,l-4,o,l)&&(c|=1),c<<=1,this.readModule(0,l-3,o,l)&&(c|=1),c<<=1,this.readModule(0,l-2,o,l)&&(c|=1),c<<=1,this.readModule(0,l-1,o,l)&&(c|=1),c<<=1,this.readModule(1,l-1,o,l)&&(c|=1),c}readCorner3(o,l){let c=0;return this.readModule(o-1,0,o,l)&&(c|=1),c<<=1,this.readModule(o-1,l-1,o,l)&&(c|=1),c<<=1,this.readModule(0,l-3,o,l)&&(c|=1),c<<=1,this.readModule(0,l-2,o,l)&&(c|=1),c<<=1,this.readModule(0,l-1,o,l)&&(c|=1),c<<=1,this.readModule(1,l-3,o,l)&&(c|=1),c<<=1,this.readModule(1,l-2,o,l)&&(c|=1),c<<=1,this.readModule(1,l-1,o,l)&&(c|=1),c}readCorner4(o,l){let c=0;return this.readModule(o-3,0,o,l)&&(c|=1),c<<=1,this.readModule(o-2,0,o,l)&&(c|=1),c<<=1,this.readModule(o-1,0,o,l)&&(c|=1),c<<=1,this.readModule(0,l-2,o,l)&&(c|=1),c<<=1,this.readModule(0,l-1,o,l)&&(c|=1),c<<=1,this.readModule(1,l-1,o,l)&&(c|=1),c<<=1,this.readModule(2,l-1,o,l)&&(c|=1),c<<=1,this.readModule(3,l-1,o,l)&&(c|=1),c}extractDataRegion(o){const l=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(o.getHeight()!==l)throw new y("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),p=l/f|0,w=c/g|0,v=p*f,S=w*g,P=new fe(S,v);for(let L=0;L<p;++L){const B=L*f;for(let H=0;H<w;++H){const K=H*g;for(let ee=0;ee<f;++ee){const de=L*(f+2)+1+ee,pe=B+ee;for(let ke=0;ke<g;++ke){const Ne=H*(g+2)+1+ke;if(o.get(Ne,de)){const Ce=K+ke;P.set(Ce,pe)}}}}}return P}}class Ss{constructor(o,l){this.numDataCodewords=o,this.codewords=l}static getDataBlocks(o,l){const c=l.getECBlocks();let f=0;const g=c.getECBlocks();for(let ee of g)f+=ee.getCount();const p=new Array(f);let w=0;for(let ee of g)for(let de=0;de<ee.getCount();de++){const pe=ee.getDataCodewords(),ke=c.getECCodewords()+pe;p[w++]=new Ss(pe,new Uint8Array(ke))}const S=p[0].codewords.length-c.getECCodewords(),P=S-1;let L=0;for(let ee=0;ee<P;ee++)for(let de=0;de<w;de++)p[de].codewords[ee]=o[L++];const B=l.getVersionNumber()===24,H=B?8:w;for(let ee=0;ee<H;ee++)p[ee].codewords[S-1]=o[L++];const K=p[0].codewords.length;for(let ee=S;ee<K;ee++)for(let de=0;de<w;de++){const pe=B?(de+8)%w:de,ke=B&&pe>7?ee-1:ee;p[pe].codewords[ke]=o[L++]}if(L!==o.length)throw new y;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ha{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new y(""+o);let l=0,c=this.bitOffset,f=this.byteOffset;const g=this.bytes;if(c>0){const p=8-c,w=o<p?o:p,v=p-w,S=255>>8-w<<v;l=(g[f]&S)>>v,o-=w,c+=w,c===8&&(c=0,f++)}if(o>0){for(;o>=8;)l=l<<8|g[f]&255,f++,o-=8;if(o>0){const p=8-o,w=255>>p<<p;l=l<<o|(g[f]&w)>>p,c+=o}}return this.bitOffset=c,this.byteOffset=f,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var bn;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(bn||(bn={}));class bi{static decode(o){const l=new ha(o),c=new te,f=new te,g=new Array;let p=bn.ASCII_ENCODE;do if(p===bn.ASCII_ENCODE)p=this.decodeAsciiSegment(l,c,f);else{switch(p){case bn.C40_ENCODE:this.decodeC40Segment(l,c);break;case bn.TEXT_ENCODE:this.decodeTextSegment(l,c);break;case bn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,c);break;case bn.EDIFACT_ENCODE:this.decodeEdifactSegment(l,c);break;case bn.BASE256_ENCODE:this.decodeBase256Segment(l,c,g);break;default:throw new O}p=bn.ASCII_ENCODE}while(p!==bn.PAD_ENCODE&&l.available()>0);return f.length()>0&&c.append(f.toString()),new Y(o,c.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(o,l,c){let f=!1;do{let g=o.readBits(8);if(g===0)throw new O;if(g<=128)return f&&(g+=128),l.append(String.fromCharCode(g-1)),bn.ASCII_ENCODE;if(g===129)return bn.PAD_ENCODE;if(g<=229){const p=g-130;p<10&&l.append("0"),l.append(""+p)}else switch(g){case 230:return bn.C40_ENCODE;case 231:return bn.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:l.append("[)>05"),c.insert(0,"");break;case 237:l.append("[)>06"),c.insert(0,"");break;case 238:return bn.ANSIX12_ENCODE;case 239:return bn.TEXT_ENCODE;case 240:return bn.EDIFACT_ENCODE;case 241:break;default:if(g!==254||o.available()!==0)throw new O;break}}while(o.available()>0);return bn.ASCII_ENCODE}static decodeC40Segment(o,l){let c=!1;const f=[];let g=0;do{if(o.available()===8)return;const p=o.readBits(8);if(p===254)return;this.parseTwoBytes(p,o.readBits(8),f);for(let w=0;w<3;w++){const v=f[w];switch(g){case 0:if(v<3)g=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[v];c?(l.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):l.append(S)}else throw new O;break;case 1:c?(l.append(String.fromCharCode(v+128)),c=!1):l.append(String.fromCharCode(v)),g=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[v];c?(l.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):l.append(S)}else switch(v){case 27:l.append("");break;case 30:c=!0;break;default:throw new O}g=0;break;case 3:c?(l.append(String.fromCharCode(v+224)),c=!1):l.append(String.fromCharCode(v+96)),g=0;break;default:throw new O}}}while(o.available()>0)}static decodeTextSegment(o,l){let c=!1,f=[],g=0;do{if(o.available()===8)return;const p=o.readBits(8);if(p===254)return;this.parseTwoBytes(p,o.readBits(8),f);for(let w=0;w<3;w++){const v=f[w];switch(g){case 0:if(v<3)g=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[v];c?(l.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):l.append(S)}else throw new O;break;case 1:c?(l.append(String.fromCharCode(v+128)),c=!1):l.append(String.fromCharCode(v)),g=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[v];c?(l.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):l.append(S)}else switch(v){case 27:l.append("");break;case 30:c=!0;break;default:throw new O}g=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[v];c?(l.append(String.fromCharCode(S.charCodeAt(0)+128)),c=!1):l.append(S),g=0}else throw new O;break;default:throw new O}}}while(o.available()>0)}static decodeAnsiX12Segment(o,l){const c=[];do{if(o.available()===8)return;const f=o.readBits(8);if(f===254)return;this.parseTwoBytes(f,o.readBits(8),c);for(let g=0;g<3;g++){const p=c[g];switch(p){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(p<14)l.append(String.fromCharCode(p+44));else if(p<40)l.append(String.fromCharCode(p+51));else throw new O;break}}}while(o.available()>0)}static parseTwoBytes(o,l,c){let f=(o<<8)+l-1,g=Math.floor(f/1600);c[0]=g,f-=g*1600,g=Math.floor(f/40),c[1]=g,c[2]=f-g*40}static decodeEdifactSegment(o,l){do{if(o.available()<=16)return;for(let c=0;c<4;c++){let f=o.readBits(6);if(f===31){const g=8-o.getBitOffset();g!==8&&o.readBits(g);return}f&32||(f|=64),l.append(String.fromCharCode(f))}}while(o.available()>0)}static decodeBase256Segment(o,l,c){let f=1+o.getByteOffset();const g=this.unrandomize255State(o.readBits(8),f++);let p;if(g===0?p=o.available()/8|0:g<250?p=g:p=250*(g-249)+this.unrandomize255State(o.readBits(8),f++),p<0)throw new O;const w=new Uint8Array(p);for(let v=0;v<p;v++){if(o.available()<8)throw new O;w[v]=this.unrandomize255State(o.readBits(8),f++)}c.push(w);try{l.append(X.decode(w,V.ISO88591))}catch(v){throw new Xe("Platform does not support required encoding: "+v.message)}}static unrandomize255State(o,l){const c=149*l%255+1,f=o-c;return f>=0?f:f+256}}bi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],bi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],bi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],bi.TEXT_SHIFT2_SET_CHARS=bi.C40_SHIFT2_SET_CHARS,bi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class xA{constructor(){this.rsDecoder=new Ge(Oe.DATA_MATRIX_FIELD_256)}decode(o){const l=new Zt(o),c=l.getVersion(),f=l.readCodewords(),g=Ss.getDataBlocks(f,c);let p=0;for(let S of g)p+=S.getNumDataCodewords();const w=new Uint8Array(p),v=g.length;for(let S=0;S<v;S++){const P=g[S],L=P.getCodewords(),B=P.getNumDataCodewords();this.correctErrors(L,B);for(let H=0;H<B;H++)w[H*v+S]=L[H]}return bi.decode(w)}correctErrors(o,l){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-l)}catch{throw new _}for(let f=0;f<l;f++)o[f]=c[f]}}class vn{constructor(o){this.image=o,this.rectangleDetector=new gt(this.image)}detect(){const o=this.rectangleDetector.detect();let l=this.detectSolid1(o);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new G;l=this.shiftToModuleCenter(l);const c=l[0],f=l[1],g=l[2],p=l[3];let w=this.transitionsBetween(c,p)+1,v=this.transitionsBetween(g,p)+1;(w&1)===1&&(w+=1),(v&1)===1&&(v+=1),4*w<7*v&&4*v<7*w&&(w=v=Math.max(w,v));let S=vn.sampleGrid(this.image,c,f,g,p,w,v);return new Wn(S,[c,f,g,p])}static shiftPoint(o,l,c){let f=(l.getX()-o.getX())/(c+1),g=(l.getY()-o.getY())/(c+1);return new Me(o.getX()+f,o.getY()+g)}static moveAway(o,l,c){let f=o.getX(),g=o.getY();return f<l?f-=1:f+=1,g<c?g-=1:g+=1,new Me(f,g)}detectSolid1(o){let l=o[0],c=o[1],f=o[3],g=o[2],p=this.transitionsBetween(l,c),w=this.transitionsBetween(c,f),v=this.transitionsBetween(f,g),S=this.transitionsBetween(g,l),P=p,L=[g,l,c,f];return P>w&&(P=w,L[0]=l,L[1]=c,L[2]=f,L[3]=g),P>v&&(P=v,L[0]=c,L[1]=f,L[2]=g,L[3]=l),P>S&&(L[0]=f,L[1]=g,L[2]=l,L[3]=c),L}detectSolid2(o){let l=o[0],c=o[1],f=o[2],g=o[3],p=this.transitionsBetween(l,g),w=vn.shiftPoint(c,f,(p+1)*4),v=vn.shiftPoint(f,c,(p+1)*4),S=this.transitionsBetween(w,l),P=this.transitionsBetween(v,g);return S<P?(o[0]=l,o[1]=c,o[2]=f,o[3]=g):(o[0]=c,o[1]=f,o[2]=g,o[3]=l),o}correctTopRight(o){let l=o[0],c=o[1],f=o[2],g=o[3],p=this.transitionsBetween(l,g),w=this.transitionsBetween(c,g),v=vn.shiftPoint(l,c,(w+1)*4),S=vn.shiftPoint(f,c,(p+1)*4);p=this.transitionsBetween(v,g),w=this.transitionsBetween(S,g);let P=new Me(g.getX()+(f.getX()-c.getX())/(p+1),g.getY()+(f.getY()-c.getY())/(p+1)),L=new Me(g.getX()+(l.getX()-c.getX())/(w+1),g.getY()+(l.getY()-c.getY())/(w+1));if(!this.isValid(P))return this.isValid(L)?L:null;if(!this.isValid(L))return P;let B=this.transitionsBetween(v,P)+this.transitionsBetween(S,P),H=this.transitionsBetween(v,L)+this.transitionsBetween(S,L);return B>H?P:L}shiftToModuleCenter(o){let l=o[0],c=o[1],f=o[2],g=o[3],p=this.transitionsBetween(l,g)+1,w=this.transitionsBetween(f,g)+1,v=vn.shiftPoint(l,c,w*4),S=vn.shiftPoint(f,c,p*4);p=this.transitionsBetween(v,g)+1,w=this.transitionsBetween(S,g)+1,(p&1)===1&&(p+=1),(w&1)===1&&(w+=1);let P=(l.getX()+c.getX()+f.getX()+g.getX())/4,L=(l.getY()+c.getY()+f.getY()+g.getY())/4;l=vn.moveAway(l,P,L),c=vn.moveAway(c,P,L),f=vn.moveAway(f,P,L),g=vn.moveAway(g,P,L);let B,H;return v=vn.shiftPoint(l,c,w*4),v=vn.shiftPoint(v,g,p*4),B=vn.shiftPoint(c,l,w*4),B=vn.shiftPoint(B,f,p*4),S=vn.shiftPoint(f,g,w*4),S=vn.shiftPoint(S,c,p*4),H=vn.shiftPoint(g,f,w*4),H=vn.shiftPoint(H,l,p*4),[v,B,S,H]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,l,c,f,g,p,w){return jt.getInstance().sampleGrid(o,p,w,.5,.5,p-.5,.5,p-.5,w-.5,.5,w-.5,l.getX(),l.getY(),g.getX(),g.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(o,l){let c=Math.trunc(o.getX()),f=Math.trunc(o.getY()),g=Math.trunc(l.getX()),p=Math.trunc(l.getY()),w=Math.abs(p-f)>Math.abs(g-c);if(w){let ee=c;c=f,f=ee,ee=g,g=p,p=ee}let v=Math.abs(g-c),S=Math.abs(p-f),P=-v/2,L=f<p?1:-1,B=c<g?1:-1,H=0,K=this.image.get(w?f:c,w?c:f);for(let ee=c,de=f;ee!==g;ee+=B){let pe=this.image.get(w?de:ee,w?ee:de);if(pe!==K&&(H++,K=pe),P+=S,P>0){if(de===p)break;de+=L,P-=v}}return H}}class vi{constructor(){this.decoder=new xA}decode(o,l=null){let c,f;if(l!=null&&l.has(z.PURE_BARCODE)){const S=vi.extractPureBits(o.getBlackMatrix());c=this.decoder.decode(S),f=vi.NO_POINTS}else{const S=new vn(o.getBlackMatrix()).detect();c=this.decoder.decode(S.getBits()),f=S.getPoints()}const g=c.getRawBytes(),p=new q(c.getText(),g,8*g.length,f,ue.DATA_MATRIX,N.currentTimeMillis()),w=c.getByteSegments();w!=null&&p.putMetadata(se.BYTE_SEGMENTS,w);const v=c.getECLevel();return v!=null&&p.putMetadata(se.ERROR_CORRECTION_LEVEL,v),p}reset(){}static extractPureBits(o){const l=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(l==null||c==null)throw new G;const f=this.moduleSize(l,o);let g=l[1];const p=c[1];let w=l[0];const S=(c[0]-w+1)/f,P=(p-g+1)/f;if(S<=0||P<=0)throw new G;const L=f/2;g+=L,w+=L;const B=new fe(S,P);for(let H=0;H<P;H++){const K=g+H*f;for(let ee=0;ee<S;ee++)o.get(w+ee*f,K)&&B.set(ee,H)}return B}static moduleSize(o,l){const c=l.getWidth();let f=o[0];const g=o[1];for(;f<c&&l.get(f,g);)f++;if(f===c)throw new G;const p=f-o[0];if(p===0)throw new G;return p}}vi.NO_POINTS=[];class yA extends ae{constructor(o=500){super(new vi,o)}}var fa;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(fa||(fa={}));class Ut{constructor(o,l,c){this.value=o,this.stringValue=l,this.bits=c,Ut.FOR_BITS.set(c,this),Ut.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Ut.L;case"M":return Ut.M;case"Q":return Ut.Q;case"H":return Ut.H;default:throw new x(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Ut))return!1;const l=o;return this.value===l.value}static forBits(o){if(o<0||o>=Ut.FOR_BITS.size)throw new y;return Ut.FOR_BITS.get(o)}}Ut.FOR_BITS=new Map,Ut.FOR_VALUE=new Map,Ut.L=new Ut(fa.L,"L",1),Ut.M=new Ut(fa.M,"M",0),Ut.Q=new Ut(fa.Q,"Q",3),Ut.H=new Ut(fa.H,"H",2);class Jn{constructor(o){this.errorCorrectionLevel=Ut.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,l){return I.bitCount(o^l)}static decodeFormatInformation(o,l){const c=Jn.doDecodeFormatInformation(o,l);return c!==null?c:Jn.doDecodeFormatInformation(o^Jn.FORMAT_INFO_MASK_QR,l^Jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,l){let c=Number.MAX_SAFE_INTEGER,f=0;for(const g of Jn.FORMAT_INFO_DECODE_LOOKUP){const p=g[0];if(p===o||p===l)return new Jn(g[1]);let w=Jn.numBitsDiffering(o,p);w<c&&(f=g[1],c=w),o!==l&&(w=Jn.numBitsDiffering(l,p),w<c&&(f=g[1],c=w))}return c<=3?new Jn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Jn))return!1;const l=o;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}Jn.FORMAT_INFO_MASK_QR=21522,Jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class he{constructor(o,...l){this.ecCodewordsPerBlock=o,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const l=this.ecBlocks;for(const c of l)o+=c.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class W{constructor(o,l){this.count=o,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class He{constructor(o,l,...c){this.versionNumber=o,this.alignmentPatternCenters=l,this.ecBlocks=c;let f=0;const g=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const w of p)f+=w.getCount()*(w.getDataCodewords()+g);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new O;try{return this.getVersionForNumber((o-17)/4)}catch{throw new O}}static getVersionForNumber(o){if(o<1||o>40)throw new y;return He.VERSIONS[o-1]}static decodeVersionInformation(o){let l=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<He.VERSION_DECODE_INFO.length;f++){const g=He.VERSION_DECODE_INFO[f];if(g===o)return He.getVersionForNumber(f+7);const p=Jn.numBitsDiffering(o,g);p<l&&(c=f+7,l=p)}return l<=3?He.getVersionForNumber(c):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),l=new fe(o);l.setRegion(0,0,9,9),l.setRegion(o-8,0,8,9),l.setRegion(0,o-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const g=this.alignmentPatternCenters[f]-2;for(let p=0;p<c;p++)f===0&&(p===0||p===c-1)||f===c-1&&p===0||l.setRegion(this.alignmentPatternCenters[p]-2,g,5,5)}return l.setRegion(6,9,1,o-17),l.setRegion(9,6,o-17,1),this.versionNumber>6&&(l.setRegion(o-11,0,3,6),l.setRegion(0,o-11,6,3)),l}toString(){return""+this.versionNumber}}He.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),He.VERSIONS=[new He(1,new Int32Array(0),new he(7,new W(1,19)),new he(10,new W(1,16)),new he(13,new W(1,13)),new he(17,new W(1,9))),new He(2,Int32Array.from([6,18]),new he(10,new W(1,34)),new he(16,new W(1,28)),new he(22,new W(1,22)),new he(28,new W(1,16))),new He(3,Int32Array.from([6,22]),new he(15,new W(1,55)),new he(26,new W(1,44)),new he(18,new W(2,17)),new he(22,new W(2,13))),new He(4,Int32Array.from([6,26]),new he(20,new W(1,80)),new he(18,new W(2,32)),new he(26,new W(2,24)),new he(16,new W(4,9))),new He(5,Int32Array.from([6,30]),new he(26,new W(1,108)),new he(24,new W(2,43)),new he(18,new W(2,15),new W(2,16)),new he(22,new W(2,11),new W(2,12))),new He(6,Int32Array.from([6,34]),new he(18,new W(2,68)),new he(16,new W(4,27)),new he(24,new W(4,19)),new he(28,new W(4,15))),new He(7,Int32Array.from([6,22,38]),new he(20,new W(2,78)),new he(18,new W(4,31)),new he(18,new W(2,14),new W(4,15)),new he(26,new W(4,13),new W(1,14))),new He(8,Int32Array.from([6,24,42]),new he(24,new W(2,97)),new he(22,new W(2,38),new W(2,39)),new he(22,new W(4,18),new W(2,19)),new he(26,new W(4,14),new W(2,15))),new He(9,Int32Array.from([6,26,46]),new he(30,new W(2,116)),new he(22,new W(3,36),new W(2,37)),new he(20,new W(4,16),new W(4,17)),new he(24,new W(4,12),new W(4,13))),new He(10,Int32Array.from([6,28,50]),new he(18,new W(2,68),new W(2,69)),new he(26,new W(4,43),new W(1,44)),new he(24,new W(6,19),new W(2,20)),new he(28,new W(6,15),new W(2,16))),new He(11,Int32Array.from([6,30,54]),new he(20,new W(4,81)),new he(30,new W(1,50),new W(4,51)),new he(28,new W(4,22),new W(4,23)),new he(24,new W(3,12),new W(8,13))),new He(12,Int32Array.from([6,32,58]),new he(24,new W(2,92),new W(2,93)),new he(22,new W(6,36),new W(2,37)),new he(26,new W(4,20),new W(6,21)),new he(28,new W(7,14),new W(4,15))),new He(13,Int32Array.from([6,34,62]),new he(26,new W(4,107)),new he(22,new W(8,37),new W(1,38)),new he(24,new W(8,20),new W(4,21)),new he(22,new W(12,11),new W(4,12))),new He(14,Int32Array.from([6,26,46,66]),new he(30,new W(3,115),new W(1,116)),new he(24,new W(4,40),new W(5,41)),new he(20,new W(11,16),new W(5,17)),new he(24,new W(11,12),new W(5,13))),new He(15,Int32Array.from([6,26,48,70]),new he(22,new W(5,87),new W(1,88)),new he(24,new W(5,41),new W(5,42)),new he(30,new W(5,24),new W(7,25)),new he(24,new W(11,12),new W(7,13))),new He(16,Int32Array.from([6,26,50,74]),new he(24,new W(5,98),new W(1,99)),new he(28,new W(7,45),new W(3,46)),new he(24,new W(15,19),new W(2,20)),new he(30,new W(3,15),new W(13,16))),new He(17,Int32Array.from([6,30,54,78]),new he(28,new W(1,107),new W(5,108)),new he(28,new W(10,46),new W(1,47)),new he(28,new W(1,22),new W(15,23)),new he(28,new W(2,14),new W(17,15))),new He(18,Int32Array.from([6,30,56,82]),new he(30,new W(5,120),new W(1,121)),new he(26,new W(9,43),new W(4,44)),new he(28,new W(17,22),new W(1,23)),new he(28,new W(2,14),new W(19,15))),new He(19,Int32Array.from([6,30,58,86]),new he(28,new W(3,113),new W(4,114)),new he(26,new W(3,44),new W(11,45)),new he(26,new W(17,21),new W(4,22)),new he(26,new W(9,13),new W(16,14))),new He(20,Int32Array.from([6,34,62,90]),new he(28,new W(3,107),new W(5,108)),new he(26,new W(3,41),new W(13,42)),new he(30,new W(15,24),new W(5,25)),new he(28,new W(15,15),new W(10,16))),new He(21,Int32Array.from([6,28,50,72,94]),new he(28,new W(4,116),new W(4,117)),new he(26,new W(17,42)),new he(28,new W(17,22),new W(6,23)),new he(30,new W(19,16),new W(6,17))),new He(22,Int32Array.from([6,26,50,74,98]),new he(28,new W(2,111),new W(7,112)),new he(28,new W(17,46)),new he(30,new W(7,24),new W(16,25)),new he(24,new W(34,13))),new He(23,Int32Array.from([6,30,54,78,102]),new he(30,new W(4,121),new W(5,122)),new he(28,new W(4,47),new W(14,48)),new he(30,new W(11,24),new W(14,25)),new he(30,new W(16,15),new W(14,16))),new He(24,Int32Array.from([6,28,54,80,106]),new he(30,new W(6,117),new W(4,118)),new he(28,new W(6,45),new W(14,46)),new he(30,new W(11,24),new W(16,25)),new he(30,new W(30,16),new W(2,17))),new He(25,Int32Array.from([6,32,58,84,110]),new he(26,new W(8,106),new W(4,107)),new he(28,new W(8,47),new W(13,48)),new he(30,new W(7,24),new W(22,25)),new he(30,new W(22,15),new W(13,16))),new He(26,Int32Array.from([6,30,58,86,114]),new he(28,new W(10,114),new W(2,115)),new he(28,new W(19,46),new W(4,47)),new he(28,new W(28,22),new W(6,23)),new he(30,new W(33,16),new W(4,17))),new He(27,Int32Array.from([6,34,62,90,118]),new he(30,new W(8,122),new W(4,123)),new he(28,new W(22,45),new W(3,46)),new he(30,new W(8,23),new W(26,24)),new he(30,new W(12,15),new W(28,16))),new He(28,Int32Array.from([6,26,50,74,98,122]),new he(30,new W(3,117),new W(10,118)),new he(28,new W(3,45),new W(23,46)),new he(30,new W(4,24),new W(31,25)),new he(30,new W(11,15),new W(31,16))),new He(29,Int32Array.from([6,30,54,78,102,126]),new he(30,new W(7,116),new W(7,117)),new he(28,new W(21,45),new W(7,46)),new he(30,new W(1,23),new W(37,24)),new he(30,new W(19,15),new W(26,16))),new He(30,Int32Array.from([6,26,52,78,104,130]),new he(30,new W(5,115),new W(10,116)),new he(28,new W(19,47),new W(10,48)),new he(30,new W(15,24),new W(25,25)),new he(30,new W(23,15),new W(25,16))),new He(31,Int32Array.from([6,30,56,82,108,134]),new he(30,new W(13,115),new W(3,116)),new he(28,new W(2,46),new W(29,47)),new he(30,new W(42,24),new W(1,25)),new he(30,new W(23,15),new W(28,16))),new He(32,Int32Array.from([6,34,60,86,112,138]),new he(30,new W(17,115)),new he(28,new W(10,46),new W(23,47)),new he(30,new W(10,24),new W(35,25)),new he(30,new W(19,15),new W(35,16))),new He(33,Int32Array.from([6,30,58,86,114,142]),new he(30,new W(17,115),new W(1,116)),new he(28,new W(14,46),new W(21,47)),new he(30,new W(29,24),new W(19,25)),new he(30,new W(11,15),new W(46,16))),new He(34,Int32Array.from([6,34,62,90,118,146]),new he(30,new W(13,115),new W(6,116)),new he(28,new W(14,46),new W(23,47)),new he(30,new W(44,24),new W(7,25)),new he(30,new W(59,16),new W(1,17))),new He(35,Int32Array.from([6,30,54,78,102,126,150]),new he(30,new W(12,121),new W(7,122)),new he(28,new W(12,47),new W(26,48)),new he(30,new W(39,24),new W(14,25)),new he(30,new W(22,15),new W(41,16))),new He(36,Int32Array.from([6,24,50,76,102,128,154]),new he(30,new W(6,121),new W(14,122)),new he(28,new W(6,47),new W(34,48)),new he(30,new W(46,24),new W(10,25)),new he(30,new W(2,15),new W(64,16))),new He(37,Int32Array.from([6,28,54,80,106,132,158]),new he(30,new W(17,122),new W(4,123)),new he(28,new W(29,46),new W(14,47)),new he(30,new W(49,24),new W(10,25)),new he(30,new W(24,15),new W(46,16))),new He(38,Int32Array.from([6,32,58,84,110,136,162]),new he(30,new W(4,122),new W(18,123)),new he(28,new W(13,46),new W(32,47)),new he(30,new W(48,24),new W(14,25)),new he(30,new W(42,15),new W(32,16))),new He(39,Int32Array.from([6,26,54,82,110,138,166]),new he(30,new W(20,117),new W(4,118)),new he(28,new W(40,47),new W(7,48)),new he(30,new W(43,24),new W(22,25)),new he(30,new W(10,15),new W(67,16))),new He(40,Int32Array.from([6,30,58,86,114,142,170]),new he(30,new W(19,118),new W(6,119)),new he(28,new W(18,47),new W(31,48)),new he(30,new W(34,24),new W(34,25)),new he(30,new W(20,15),new W(61,16)))];var Ln;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(Ln||(Ln={}));class $r{constructor(o,l){this.value=o,this.isMasked=l}unmaskBitMatrix(o,l){for(let c=0;c<l;c++)for(let f=0;f<l;f++)this.isMasked(c,f)&&o.flip(f,c)}}$r.values=new Map([[Ln.DATA_MASK_000,new $r(Ln.DATA_MASK_000,(D,o)=>(D+o&1)===0)],[Ln.DATA_MASK_001,new $r(Ln.DATA_MASK_001,(D,o)=>(D&1)===0)],[Ln.DATA_MASK_010,new $r(Ln.DATA_MASK_010,(D,o)=>o%3===0)],[Ln.DATA_MASK_011,new $r(Ln.DATA_MASK_011,(D,o)=>(D+o)%3===0)],[Ln.DATA_MASK_100,new $r(Ln.DATA_MASK_100,(D,o)=>(Math.floor(D/2)+Math.floor(o/3)&1)===0)],[Ln.DATA_MASK_101,new $r(Ln.DATA_MASK_101,(D,o)=>D*o%6===0)],[Ln.DATA_MASK_110,new $r(Ln.DATA_MASK_110,(D,o)=>D*o%6<3)],[Ln.DATA_MASK_111,new $r(Ln.DATA_MASK_111,(D,o)=>(D+o+D*o%3&1)===0)]]);class wA{constructor(o){const l=o.getHeight();if(l<21||(l&3)!==1)throw new O;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let g=0;g<6;g++)o=this.copyBit(g,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let g=5;g>=0;g--)o=this.copyBit(8,g,o);const l=this.bitMatrix.getHeight();let c=0;const f=l-7;for(let g=l-1;g>=f;g--)c=this.copyBit(8,g,c);for(let g=l-8;g<l;g++)c=this.copyBit(g,8,c);if(this.parsedFormatInfo=Jn.decodeFormatInformation(o,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),l=Math.floor((o-17)/4);if(l<=6)return He.getVersionForNumber(l);let c=0;const f=o-11;for(let p=5;p>=0;p--)for(let w=o-9;w>=f;w--)c=this.copyBit(w,p,c);let g=He.decodeVersionInformation(c);if(g!==null&&g.getDimensionForVersion()===o)return this.parsedVersion=g,g;c=0;for(let p=5;p>=0;p--)for(let w=o-9;w>=f;w--)c=this.copyBit(p,w,c);if(g=He.decodeVersionInformation(c),g!==null&&g.getDimensionForVersion()===o)return this.parsedVersion=g,g;throw new O}copyBit(o,l,c){return(this.isMirror?this.bitMatrix.get(l,o):this.bitMatrix.get(o,l))?c<<1|1:c<<1}readCodewords(){const o=this.readFormatInformation(),l=this.readVersion(),c=$r.values.get(o.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const g=l.buildFunctionPattern();let p=!0;const w=new Uint8Array(l.getTotalCodewords());let v=0,S=0,P=0;for(let L=f-1;L>0;L-=2){L===6&&L--;for(let B=0;B<f;B++){const H=p?f-1-B:B;for(let K=0;K<2;K++)g.get(L-K,H)||(P++,S<<=1,this.bitMatrix.get(L-K,H)&&(S|=1),P===8&&(w[v++]=S,P=0,S=0))}p=!p}if(v!==l.getTotalCodewords())throw new O;return w}remask(){if(this.parsedFormatInfo===null)return;const o=$r.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,l)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let l=0,c=o.getWidth();l<c;l++)for(let f=l+1,g=o.getHeight();f<g;f++)o.get(l,f)!==o.get(f,l)&&(o.flip(f,l),o.flip(l,f))}}class w0{constructor(o,l){this.numDataCodewords=o,this.codewords=l}static getDataBlocks(o,l,c){if(o.length!==l.getTotalCodewords())throw new y;const f=l.getECBlocksForLevel(c);let g=0;const p=f.getECBlocks();for(const K of p)g+=K.getCount();const w=new Array(g);let v=0;for(const K of p)for(let ee=0;ee<K.getCount();ee++){const de=K.getDataCodewords(),pe=f.getECCodewordsPerBlock()+de;w[v++]=new w0(de,new Uint8Array(pe))}const S=w[0].codewords.length;let P=w.length-1;for(;P>=0&&w[P].codewords.length!==S;)P--;P++;const L=S-f.getECCodewordsPerBlock();let B=0;for(let K=0;K<L;K++)for(let ee=0;ee<v;ee++)w[ee].codewords[K]=o[B++];for(let K=P;K<v;K++)w[K].codewords[L]=o[B++];const H=w[0].codewords.length;for(let K=L;K<H;K++)for(let ee=0;ee<v;ee++){const de=ee<P?K:K+1;w[ee].codewords[de]=o[B++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Gr;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(Gr||(Gr={}));class Ye{constructor(o,l,c,f){this.value=o,this.stringValue=l,this.characterCountBitsForVersions=c,this.bits=f,Ye.FOR_BITS.set(f,this),Ye.FOR_VALUE.set(o,this)}static forBits(o){const l=Ye.FOR_BITS.get(o);if(l===void 0)throw new y;return l}getCharacterCountBits(o){const l=o.getVersionNumber();let c;return l<=9?c=0:l<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Ye))return!1;const l=o;return this.value===l.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(Gr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(Gr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(Gr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(Gr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(Gr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(Gr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(Gr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(Gr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(Gr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(Gr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class en{static decode(o,l,c,f){const g=new ha(o);let p=new te;const w=new Array;let v=-1,S=-1;try{let P=null,L=!1,B;do{if(g.available()<4)B=Ye.TERMINATOR;else{const H=g.readBits(4);B=Ye.forBits(H)}switch(B){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:L=!0;break;case Ye.STRUCTURED_APPEND:if(g.available()<16)throw new O;v=g.readBits(8),S=g.readBits(8);break;case Ye.ECI:const H=en.parseECIValue(g);if(P=M.getCharacterSetECIByValue(H),P===null)throw new O;break;case Ye.HANZI:const K=g.readBits(4),ee=g.readBits(B.getCharacterCountBits(l));K===en.GB2312_SUBSET&&en.decodeHanziSegment(g,p,ee);break;default:const de=g.readBits(B.getCharacterCountBits(l));switch(B){case Ye.NUMERIC:en.decodeNumericSegment(g,p,de);break;case Ye.ALPHANUMERIC:en.decodeAlphanumericSegment(g,p,de,L);break;case Ye.BYTE:en.decodeByteSegment(g,p,de,P,w,f);break;case Ye.KANJI:en.decodeKanjiSegment(g,p,de);break;default:throw new O}break}}while(B!==Ye.TERMINATOR)}catch{throw new O}return new Y(o,p.toString(),w.length===0?null:w,c===null?null:c.toString(),v,S)}static decodeHanziSegment(o,l,c){if(c*13>o.available())throw new O;const f=new Uint8Array(2*c);let g=0;for(;c>0;){const p=o.readBits(13);let w=p/96<<8&4294967295|p%96;w<959?w+=41377:w+=42657,f[g]=w>>8&255,f[g+1]=w&255,g+=2,c--}try{l.append(X.decode(f,V.GB2312))}catch(p){throw new O(p)}}static decodeKanjiSegment(o,l,c){if(c*13>o.available())throw new O;const f=new Uint8Array(2*c);let g=0;for(;c>0;){const p=o.readBits(13);let w=p/192<<8&4294967295|p%192;w<7936?w+=33088:w+=49472,f[g]=w>>8,f[g+1]=w,g+=2,c--}try{l.append(X.decode(f,V.SHIFT_JIS))}catch(p){throw new O(p)}}static decodeByteSegment(o,l,c,f,g,p){if(8*c>o.available())throw new O;const w=new Uint8Array(c);for(let S=0;S<c;S++)w[S]=o.readBits(8);let v;f===null?v=V.guessEncoding(w,p):v=f.getName();try{l.append(X.decode(w,v))}catch(S){throw new O(S)}g.push(w)}static toAlphaNumericChar(o){if(o>=en.ALPHANUMERIC_CHARS.length)throw new O;return en.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,l,c,f){const g=l.length();for(;c>1;){if(o.available()<11)throw new O;const p=o.readBits(11);l.append(en.toAlphaNumericChar(Math.floor(p/45))),l.append(en.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(o.available()<6)throw new O;l.append(en.toAlphaNumericChar(o.readBits(6)))}if(f)for(let p=g;p<l.length();p++)l.charAt(p)==="%"&&(p<l.length()-1&&l.charAt(p+1)==="%"?l.deleteCharAt(p+1):l.setCharAt(p,""))}static decodeNumericSegment(o,l,c){for(;c>=3;){if(o.available()<10)throw new O;const f=o.readBits(10);if(f>=1e3)throw new O;l.append(en.toAlphaNumericChar(Math.floor(f/100))),l.append(en.toAlphaNumericChar(Math.floor(f/10)%10)),l.append(en.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(o.available()<7)throw new O;const f=o.readBits(7);if(f>=100)throw new O;l.append(en.toAlphaNumericChar(Math.floor(f/10))),l.append(en.toAlphaNumericChar(f%10))}else if(c===1){if(o.available()<4)throw new O;const f=o.readBits(4);if(f>=10)throw new O;l.append(en.toAlphaNumericChar(f))}}static parseECIValue(o){const l=o.readBits(8);if(!(l&128))return l&127;if((l&192)===128){const c=o.readBits(8);return(l&63)<<8&4294967295|c}if((l&224)===192){const c=o.readBits(16);return(l&31)<<16&4294967295|c}throw new O}}en.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",en.GB2312_SUBSET=1;class py{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const l=o[0];o[0]=o[2],o[2]=l}}class bA{constructor(){this.rsDecoder=new Ge(Oe.QR_CODE_FIELD_256)}decodeBooleanArray(o,l){return this.decodeBitMatrix(fe.parseFromBooleanArray(o),l)}decodeBitMatrix(o,l){const c=new wA(o);let f=null;try{return this.decodeBitMatrixParser(c,l)}catch(g){f=g}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const g=this.decodeBitMatrixParser(c,l);return g.setOther(new py(!0)),g}catch(g){throw f!==null?f:g}}decodeBitMatrixParser(o,l){const c=o.readVersion(),f=o.readFormatInformation().getErrorCorrectionLevel(),g=o.readCodewords(),p=w0.getDataBlocks(g,c,f);let w=0;for(const P of p)w+=P.getNumDataCodewords();const v=new Uint8Array(w);let S=0;for(const P of p){const L=P.getCodewords(),B=P.getNumDataCodewords();this.correctErrors(L,B);for(let H=0;H<B;H++)v[S++]=L[H]}return en.decode(v,c,f,l)}correctErrors(o,l){const c=new Int32Array(o);try{this.rsDecoder.decode(c,o.length-l)}catch{throw new _}for(let f=0;f<l;f++)o[f]=c[f]}}class b0 extends Me{constructor(o,l,c){super(o,l),this.estimatedModuleSize=c}aboutEquals(o,l,c){if(Math.abs(l-this.getY())<=o&&Math.abs(c-this.getX())<=o){const f=Math.abs(o-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(o,l,c){const f=(this.getX()+l)/2,g=(this.getY()+o)/2,p=(this.estimatedModuleSize+c)/2;return new b0(f,g,p)}}class rd{constructor(o,l,c,f,g,p,w){this.image=o,this.startX=l,this.startY=c,this.width=f,this.height=g,this.moduleSize=p,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,l=this.height,c=this.width,f=o+c,g=this.startY+l/2,p=new Int32Array(3),w=this.image;for(let v=0;v<l;v++){const S=g+(v&1?-Math.floor((v+1)/2):Math.floor((v+1)/2));p[0]=0,p[1]=0,p[2]=0;let P=o;for(;P<f&&!w.get(P,S);)P++;let L=0;for(;P<f;){if(w.get(P,S))if(L===1)p[1]++;else if(L===2){if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,S,P);if(B!==null)return B}p[0]=p[2],p[1]=1,p[2]=0,L=1}else p[++L]++;else L===1&&L++,p[L]++;P++}if(this.foundPatternCross(p)){const B=this.handlePossibleCenter(p,S,f);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(o,l){return l-o[2]-o[1]/2}foundPatternCross(o){const l=this.moduleSize,c=l/2;for(let f=0;f<3;f++)if(Math.abs(l-o[f])>=c)return!1;return!0}crossCheckVertical(o,l,c,f){const g=this.image,p=g.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let v=o;for(;v>=0&&g.get(l,v)&&w[1]<=c;)w[1]++,v--;if(v<0||w[1]>c)return NaN;for(;v>=0&&!g.get(l,v)&&w[0]<=c;)w[0]++,v--;if(w[0]>c)return NaN;for(v=o+1;v<p&&g.get(l,v)&&w[1]<=c;)w[1]++,v++;if(v===p||w[1]>c)return NaN;for(;v<p&&!g.get(l,v)&&w[2]<=c;)w[2]++,v++;if(w[2]>c)return NaN;const S=w[0]+w[1]+w[2];return 5*Math.abs(S-f)>=2*f?NaN:this.foundPatternCross(w)?rd.centerFromEnd(w,v):NaN}handlePossibleCenter(o,l,c){const f=o[0]+o[1]+o[2],g=rd.centerFromEnd(o,c),p=this.crossCheckVertical(l,g,2*o[1],f);if(!isNaN(p)){const w=(o[0]+o[1]+o[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(w,p,g))return S.combineEstimate(p,g,w);const v=new b0(g,p,w);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class v0 extends Me{constructor(o,l,c,f){super(o,l),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,l,c){if(Math.abs(l-this.getY())<=o&&Math.abs(c-this.getX())<=o){const f=Math.abs(o-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(o,l,c){const f=this.count+1,g=(this.count*this.getX()+l)/f,p=(this.count*this.getY()+o)/f,w=(this.count*this.estimatedModuleSize+c)/f;return new v0(g,p,w,f)}}class vA{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Fn{constructor(o,l){this.image=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const l=o!=null&&o.get(z.TRY_HARDER)!==void 0,c=o!=null&&o.get(z.PURE_BARCODE)!==void 0,f=this.image,g=f.getHeight(),p=f.getWidth();let w=Math.floor(3*g/(4*Fn.MAX_MODULES));(w<Fn.MIN_SKIP||l)&&(w=Fn.MIN_SKIP);let v=!1;const S=new Int32Array(5);for(let L=w-1;L<g&&!v;L+=w){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let B=0;for(let H=0;H<p;H++)if(f.get(H,L))(B&1)===1&&B++,S[B]++;else if(B&1)S[B]++;else if(B===4)if(Fn.foundPatternCross(S)){if(this.handlePossibleCenter(S,L,H,c)===!0)if(w=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>S[2]&&(L+=ee-S[2]-w,H=p-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,B=3;continue}B=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,B=3;else S[++B]++;Fn.foundPatternCross(S)&&this.handlePossibleCenter(S,L,p,c)===!0&&(w=S[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const P=this.selectBestPatterns();return Me.orderBestPatterns(P),new vA(P)}static centerFromEnd(o,l){return l-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let l=0;for(let g=0;g<5;g++){const p=o[g];if(p===0)return!1;l+=p}if(l<7)return!1;const c=l/7,f=c/2;return Math.abs(c-o[0])<f&&Math.abs(c-o[1])<f&&Math.abs(3*c-o[2])<3*f&&Math.abs(c-o[3])<f&&Math.abs(c-o[4])<f}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,l,c,f){const g=this.getCrossCheckStateCount();let p=0;const w=this.image;for(;o>=p&&l>=p&&w.get(l-p,o-p);)g[2]++,p++;if(o<p||l<p)return!1;for(;o>=p&&l>=p&&!w.get(l-p,o-p)&&g[1]<=c;)g[1]++,p++;if(o<p||l<p||g[1]>c)return!1;for(;o>=p&&l>=p&&w.get(l-p,o-p)&&g[0]<=c;)g[0]++,p++;if(g[0]>c)return!1;const v=w.getHeight(),S=w.getWidth();for(p=1;o+p<v&&l+p<S&&w.get(l+p,o+p);)g[2]++,p++;if(o+p>=v||l+p>=S)return!1;for(;o+p<v&&l+p<S&&!w.get(l+p,o+p)&&g[3]<c;)g[3]++,p++;if(o+p>=v||l+p>=S||g[3]>=c)return!1;for(;o+p<v&&l+p<S&&w.get(l+p,o+p)&&g[4]<c;)g[4]++,p++;if(g[4]>=c)return!1;const P=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(P-f)<2*f&&Fn.foundPatternCross(g)}crossCheckVertical(o,l,c,f){const g=this.image,p=g.getHeight(),w=this.getCrossCheckStateCount();let v=o;for(;v>=0&&g.get(l,v);)w[2]++,v--;if(v<0)return NaN;for(;v>=0&&!g.get(l,v)&&w[1]<=c;)w[1]++,v--;if(v<0||w[1]>c)return NaN;for(;v>=0&&g.get(l,v)&&w[0]<=c;)w[0]++,v--;if(w[0]>c)return NaN;for(v=o+1;v<p&&g.get(l,v);)w[2]++,v++;if(v===p)return NaN;for(;v<p&&!g.get(l,v)&&w[3]<c;)w[3]++,v++;if(v===p||w[3]>=c)return NaN;for(;v<p&&g.get(l,v)&&w[4]<c;)w[4]++,v++;if(w[4]>=c)return NaN;const S=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(S-f)>=2*f?NaN:Fn.foundPatternCross(w)?Fn.centerFromEnd(w,v):NaN}crossCheckHorizontal(o,l,c,f){const g=this.image,p=g.getWidth(),w=this.getCrossCheckStateCount();let v=o;for(;v>=0&&g.get(v,l);)w[2]++,v--;if(v<0)return NaN;for(;v>=0&&!g.get(v,l)&&w[1]<=c;)w[1]++,v--;if(v<0||w[1]>c)return NaN;for(;v>=0&&g.get(v,l)&&w[0]<=c;)w[0]++,v--;if(w[0]>c)return NaN;for(v=o+1;v<p&&g.get(v,l);)w[2]++,v++;if(v===p)return NaN;for(;v<p&&!g.get(v,l)&&w[3]<c;)w[3]++,v++;if(v===p||w[3]>=c)return NaN;for(;v<p&&g.get(v,l)&&w[4]<c;)w[4]++,v++;if(w[4]>=c)return NaN;const S=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(S-f)>=f?NaN:Fn.foundPatternCross(w)?Fn.centerFromEnd(w,v):NaN}handlePossibleCenter(o,l,c,f){const g=o[0]+o[1]+o[2]+o[3]+o[4];let p=Fn.centerFromEnd(o,c),w=this.crossCheckVertical(l,Math.floor(p),o[2],g);if(!isNaN(w)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(w),o[2],g),!isNaN(p)&&(!f||this.crossCheckDiagonal(Math.floor(w),Math.floor(p),o[2],g)))){const v=g/7;let S=!1;const P=this.possibleCenters;for(let L=0,B=P.length;L<B;L++){const H=P[L];if(H.aboutEquals(v,w,p)){P[L]=H.combineEstimate(w,p,v),S=!0;break}}if(!S){const L=new v0(p,w,v);P.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const c of this.possibleCenters)if(c.getCount()>=Fn.CENTER_QUORUM)if(l==null)l=c;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-c.getX())-Math.abs(l.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,l=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=Fn.CENTER_QUORUM&&(o++,l+=p.getEstimatedModuleSize());if(o<3)return!1;const f=l/c;let g=0;for(const p of this.possibleCenters)g+=Math.abs(p.getEstimatedModuleSize()-f);return g<=.05*l}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new G;const l=this.possibleCenters;let c;if(o>3){let f=0,g=0;for(const v of this.possibleCenters){const S=v.getEstimatedModuleSize();f+=S,g+=S*S}c=f/o;let p=Math.sqrt(g/o-c*c);l.sort((v,S)=>{const P=Math.abs(S.getEstimatedModuleSize()-c),L=Math.abs(v.getEstimatedModuleSize()-c);return P<L?-1:P>L?1:0});const w=Math.max(.2*c,p);for(let v=0;v<l.length&&l.length>3;v++){const S=l[v];Math.abs(S.getEstimatedModuleSize()-c)>w&&(l.splice(v,1),v--)}}if(l.length>3){let f=0;for(const g of l)f+=g.getEstimatedModuleSize();c=f/l.length,l.sort((g,p)=>{if(p.getCount()===g.getCount()){const w=Math.abs(p.getEstimatedModuleSize()-c),v=Math.abs(g.getEstimatedModuleSize()-c);return w<v?1:w>v?-1:0}else return p.getCount()-g.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Fn.CENTER_QUORUM=2,Fn.MIN_SKIP=3,Fn.MAX_MODULES=57;class Ll{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(z.NEED_RESULT_POINT_CALLBACK);const c=new Fn(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(c)}processFinderPatternInfo(o){const l=o.getTopLeft(),c=o.getTopRight(),f=o.getBottomLeft(),g=this.calculateModuleSize(l,c,f);if(g<1)throw new G("No pattern found in proccess finder.");const p=Ll.computeDimension(l,c,f,g),w=He.getProvisionalVersionForDimension(p),v=w.getDimensionForVersion()-7;let S=null;if(w.getAlignmentPatternCenters().length>0){const H=c.getX()-l.getX()+f.getX(),K=c.getY()-l.getY()+f.getY(),ee=1-3/v,de=Math.floor(l.getX()+ee*(H-l.getX())),pe=Math.floor(l.getY()+ee*(K-l.getY()));for(let ke=4;ke<=16;ke<<=1)try{S=this.findAlignmentInRegion(g,de,pe,ke);break}catch(Ne){if(!(Ne instanceof G))throw Ne}}const P=Ll.createTransform(l,c,f,S,p),L=Ll.sampleGrid(this.image,P,p);let B;return S===null?B=[f,l,c]:B=[f,l,c,S],new Wn(L,B)}static createTransform(o,l,c,f,g){const p=g-3.5;let w,v,S,P;return f!==null?(w=f.getX(),v=f.getY(),S=p-3,P=S):(w=l.getX()-o.getX()+c.getX(),v=l.getY()-o.getY()+c.getY(),S=p,P=p),yt.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,S,P,3.5,p,o.getX(),o.getY(),l.getX(),l.getY(),w,v,c.getX(),c.getY())}static sampleGrid(o,l,c){return jt.getInstance().sampleGridWithTransform(o,c,c,l)}static computeDimension(o,l,c,f){const g=We.round(Me.distance(o,l)/f),p=We.round(Me.distance(o,c)/f);let w=Math.floor((g+p)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new G("Dimensions could be not found.")}return w}calculateModuleSize(o,l,c){return(this.calculateModuleSizeOneWay(o,l)+this.calculateModuleSizeOneWay(o,c))/2}calculateModuleSizeOneWay(o,l){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(l.getX()),Math.floor(l.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(o,l,c,f){let g=this.sizeOfBlackWhiteBlackRun(o,l,c,f),p=1,w=o-(c-o);w<0?(p=o/(o-w),w=0):w>=this.image.getWidth()&&(p=(this.image.getWidth()-1-o)/(w-o),w=this.image.getWidth()-1);let v=Math.floor(l-(f-l)*p);return p=1,v<0?(p=l/(l-v),v=0):v>=this.image.getHeight()&&(p=(this.image.getHeight()-1-l)/(v-l),v=this.image.getHeight()-1),w=Math.floor(o+(w-o)*p),g+=this.sizeOfBlackWhiteBlackRun(o,l,w,v),g-1}sizeOfBlackWhiteBlackRun(o,l,c,f){const g=Math.abs(f-l)>Math.abs(c-o);if(g){let H=o;o=l,l=H,H=c,c=f,f=H}const p=Math.abs(c-o),w=Math.abs(f-l);let v=-p/2;const S=o<c?1:-1,P=l<f?1:-1;let L=0;const B=c+S;for(let H=o,K=l;H!==B;H+=S){const ee=g?K:H,de=g?H:K;if(L===1===this.image.get(ee,de)){if(L===2)return We.distance(H,K,o,l);L++}if(v+=w,v>0){if(K===f)break;K+=P,v-=p}}return L===2?We.distance(c+S,f,o,l):NaN}findAlignmentInRegion(o,l,c,f){const g=Math.floor(f*o),p=Math.max(0,l-g),w=Math.min(this.image.getWidth()-1,l+g);if(w-p<o*3)throw new G("Alignment top exceeds estimated module size.");const v=Math.max(0,c-g),S=Math.min(this.image.getHeight()-1,c+g);if(S-v<o*3)throw new G("Alignment bottom exceeds estimated module size.");return new rd(this.image,p,v,w-p,S-v,o,this.resultPointCallback).find()}}class _i{constructor(){this.decoder=new bA}getDecoder(){return this.decoder}decode(o,l){let c,f;if(l!=null&&l.get(z.PURE_BARCODE)!==void 0){const v=_i.extractPureBits(o.getBlackMatrix());c=this.decoder.decodeBitMatrix(v,l),f=_i.NO_POINTS}else{const v=new Ll(o.getBlackMatrix()).detect(l);c=this.decoder.decodeBitMatrix(v.getBits(),l),f=v.getPoints()}c.getOther()instanceof py&&c.getOther().applyMirroredCorrection(f);const g=new q(c.getText(),c.getRawBytes(),void 0,f,ue.QR_CODE,void 0),p=c.getByteSegments();p!==null&&g.putMetadata(se.BYTE_SEGMENTS,p);const w=c.getECLevel();return w!==null&&g.putMetadata(se.ERROR_CORRECTION_LEVEL,w),c.hasStructuredAppend()&&(g.putMetadata(se.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),g.putMetadata(se.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),g}reset(){}static extractPureBits(o){const l=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(l===null||c===null)throw new G;const f=this.moduleSize(l,o);let g=l[1],p=c[1],w=l[0],v=c[0];if(w>=v||g>=p)throw new G;if(p-g!==v-w&&(v=w+(p-g),v>=o.getWidth()))throw new G;const S=Math.round((v-w+1)/f),P=Math.round((p-g+1)/f);if(S<=0||P<=0)throw new G;if(P!==S)throw new G;const L=Math.floor(f/2);g+=L,w+=L;const B=w+Math.floor((S-1)*f)-v;if(B>0){if(B>L)throw new G;w-=B}const H=g+Math.floor((P-1)*f)-p;if(H>0){if(H>L)throw new G;g-=H}const K=new fe(S,P);for(let ee=0;ee<P;ee++){const de=g+Math.floor(ee*f);for(let pe=0;pe<S;pe++)o.get(w+Math.floor(pe*f),de)&&K.set(pe,ee)}return K}static moduleSize(o,l){const c=l.getHeight(),f=l.getWidth();let g=o[0],p=o[1],w=!0,v=0;for(;g<f&&p<c;){if(w!==l.get(g,p)){if(++v===5)break;w=!w}g++,p++}if(g===f||p===c)throw new G;return(g-o[0])/7}}_i.NO_POINTS=new Array;class Qe{PDF417Common(){}static getBitCountSum(o){return We.sum(o)}static toIntArray(o){if(o==null||!o.length)return Qe.EMPTY_INT_ARRAY;const l=new Int32Array(o.length);let c=0;for(const f of o)l[c++]=f;return l}static getCodeword(o){const l=A.binarySearch(Qe.SYMBOL_TABLE,o&262143);return l<0?-1:(Qe.CODEWORD_TABLE[l]-1)%Qe.NUMBER_OF_CODEWORDS}}Qe.NUMBER_OF_CODEWORDS=929,Qe.MAX_CODEWORDS_IN_BARCODE=Qe.NUMBER_OF_CODEWORDS-1,Qe.MIN_ROWS_IN_BARCODE=3,Qe.MAX_ROWS_IN_BARCODE=90,Qe.MODULES_IN_CODEWORD=17,Qe.MODULES_IN_STOP_PATTERN=18,Qe.BARS_IN_MODULE=8,Qe.EMPTY_INT_ARRAY=new Int32Array([]),Qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class _A{constructor(o,l){this.bits=o,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class st{static detectMultiple(o,l,c){let f=o.getBlackMatrix(),g=st.detect(c,f);return g.length||(f=f.clone(),f.rotate180(),g=st.detect(c,f)),new _A(f,g)}static detect(o,l){const c=new Array;let f=0,g=0,p=!1;for(;f<l.getHeight();){const w=st.findVertices(l,f,g);if(w[0]==null&&w[3]==null){if(!p)break;p=!1,g=0;for(const v of c)v[1]!=null&&(f=Math.trunc(Math.max(f,v[1].getY()))),v[3]!=null&&(f=Math.max(f,Math.trunc(v[3].getY())));f+=st.ROW_STEP;continue}if(p=!0,c.push(w),!o)break;w[2]!=null?(g=Math.trunc(w[2].getX()),f=Math.trunc(w[2].getY())):(g=Math.trunc(w[4].getX()),f=Math.trunc(w[4].getY()))}return c}static findVertices(o,l,c){const f=o.getHeight(),g=o.getWidth(),p=new Array(8);return st.copyToResult(p,st.findRowsWithPattern(o,f,g,l,c,st.START_PATTERN),st.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),l=Math.trunc(p[4].getY())),st.copyToResult(p,st.findRowsWithPattern(o,f,g,l,c,st.STOP_PATTERN),st.INDEXES_STOP_PATTERN),p}static copyToResult(o,l,c){for(let f=0;f<c.length;f++)o[c[f]]=l[f]}static findRowsWithPattern(o,l,c,f,g,p){const w=new Array(4);let v=!1;const S=new Int32Array(p.length);for(;f<l;f+=st.ROW_STEP){let L=st.findGuardPattern(o,g,f,c,!1,p,S);if(L!=null){for(;f>0;){const B=st.findGuardPattern(o,g,--f,c,!1,p,S);if(B!=null)L=B;else{f++;break}}w[0]=new Me(L[0],f),w[1]=new Me(L[1],f),v=!0;break}}let P=f+1;if(v){let L=0,B=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;P<l;P++){const H=st.findGuardPattern(o,B[0],P,c,!1,p,S);if(H!=null&&Math.abs(B[0]-H[0])<st.MAX_PATTERN_DRIFT&&Math.abs(B[1]-H[1])<st.MAX_PATTERN_DRIFT)B=H,L=0;else{if(L>st.SKIPPED_ROW_COUNT_MAX)break;L++}}P-=L+1,w[2]=new Me(B[0],P),w[3]=new Me(B[1],P)}return P-f<st.BARCODE_MIN_HEIGHT&&A.fill(w,null),w}static findGuardPattern(o,l,c,f,g,p,w){A.fillWithin(w,0,w.length,0);let v=l,S=0;for(;o.get(v,c)&&v>0&&S++<st.MAX_PIXEL_DRIFT;)v--;let P=v,L=0,B=p.length;for(let H=g;P<f;P++)if(o.get(P,c)!==H)w[L]++;else{if(L===B-1){if(st.patternMatchVariance(w,p,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return new Int32Array([v,P]);v+=w[0]+w[1],N.arraycopy(w,2,w,0,L-1),w[L-1]=0,w[L]=0,L--}else L++;w[L]=1,H=!H}return L===B-1&&st.patternMatchVariance(w,p,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE?new Int32Array([v,P-1]):null}static patternMatchVariance(o,l,c){let f=o.length,g=0,p=0;for(let S=0;S<f;S++)g+=o[S],p+=l[S];if(g<p)return 1/0;let w=g/p;c*=w;let v=0;for(let S=0;S<f;S++){let P=o[S],L=l[S]*w,B=P>L?P-L:L-P;if(B>c)return 1/0;v+=B}return v/g}}st.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),st.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),st.MAX_AVG_VARIANCE=.42,st.MAX_INDIVIDUAL_VARIANCE=.8,st.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),st.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),st.MAX_PIXEL_DRIFT=3,st.MAX_PATTERN_DRIFT=5,st.SKIPPED_ROW_COUNT_MAX=25,st.ROW_STEP=5,st.BARCODE_MIN_HEIGHT=10;class Hn{constructor(o,l){if(l.length===0)throw new y;this.field=o;let c=l.length;if(c>1&&l[0]===0){let f=1;for(;f<c&&l[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),N.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let f=0;for(let g of this.coefficients)f=this.field.add(f,g);return f}let l=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)l=this.field.add(this.field.multiply(o,l),this.coefficients[f]);return l}add(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let l=this.coefficients,c=o.coefficients;if(l.length>c.length){let p=l;l=c,c=p}let f=new Int32Array(c.length),g=c.length-l.length;N.arraycopy(c,0,f,0,g);for(let p=g;p<c.length;p++)f[p]=this.field.add(l[p-g],c[p]);return new Hn(this.field,f)}subtract(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Hn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Hn(this.field,new Int32Array([0]));let l=this.coefficients,c=l.length,f=o.coefficients,g=f.length,p=new Int32Array(c+g-1);for(let w=0;w<c;w++){let v=l[w];for(let S=0;S<g;S++)p[w+S]=this.field.add(p[w+S],this.field.multiply(v,f[S]))}return new Hn(this.field,p)}negative(){let o=this.coefficients.length,l=new Int32Array(o);for(let c=0;c<o;c++)l[c]=this.field.subtract(0,this.coefficients[c]);return new Hn(this.field,l)}multiplyScalar(o){if(o===0)return new Hn(this.field,new Int32Array([0]));if(o===1)return this;let l=this.coefficients.length,c=new Int32Array(l);for(let f=0;f<l;f++)c[f]=this.field.multiply(this.coefficients[f],o);return new Hn(this.field,c)}multiplyByMonomial(o,l){if(o<0)throw new y;if(l===0)return new Hn(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+o);for(let g=0;g<c;g++)f[g]=this.field.multiply(this.coefficients[g],l);return new Hn(this.field,f)}toString(){let o=new te;for(let l=this.getDegree();l>=0;l--){let c=this.getCoefficient(l);c!==0&&(c<0?(o.append(" - "),c=-c):o.length()>0&&o.append(" + "),(l===0||c!==1)&&o.append(c),l!==0&&(l===1?o.append("x"):(o.append("x^"),o.append(l))))}return o.toString()}}class SA{add(o,l){return(o+l)%this.modulus}subtract(o,l){return(this.modulus+o-l)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}inverse(o){if(o===0)throw new ze;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,l){return o===0||l===0?0:this.expTable[(this.logTable[o]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class _0 extends SA{constructor(o,l){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let c=1;for(let f=0;f<o;f++)this.expTable[f]=c,c=c*l%o;for(let f=0;f<o-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new Hn(this,new Int32Array([0])),this.one=new Hn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,l){if(o<0)throw new y;if(l===0)return this.zero;let c=new Int32Array(o+1);return c[0]=l,new Hn(this,c)}}_0.PDF417_GF=new _0(Qe.NUMBER_OF_CODEWORDS,3);class xy{constructor(){this.field=_0.PDF417_GF}decode(o,l,c){let f=new Hn(this.field,o),g=new Int32Array(l),p=!1;for(let K=l;K>0;K--){let ee=f.evaluateAt(this.field.exp(K));g[l-K]=ee,ee!==0&&(p=!0)}if(!p)return 0;let w=this.field.getOne();if(c!=null)for(const K of c){let ee=this.field.exp(o.length-1-K),de=new Hn(this.field,new Int32Array([this.field.subtract(0,ee),1]));w=w.multiply(de)}let v=new Hn(this.field,g),S=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),v,l),P=S[0],L=S[1],B=this.findErrorLocations(P),H=this.findErrorMagnitudes(L,P,B);for(let K=0;K<B.length;K++){let ee=o.length-1-this.field.log(B[K]);if(ee<0)throw _.getChecksumInstance();o[ee]=this.field.subtract(o[ee],H[K])}return B.length}runEuclideanAlgorithm(o,l,c){if(o.getDegree()<l.getDegree()){let B=o;o=l,l=B}let f=o,g=l,p=this.field.getZero(),w=this.field.getOne();for(;g.getDegree()>=Math.round(c/2);){let B=f,H=p;if(f=g,p=w,f.isZero())throw _.getChecksumInstance();g=B;let K=this.field.getZero(),ee=f.getCoefficient(f.getDegree()),de=this.field.inverse(ee);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){let pe=g.getDegree()-f.getDegree(),ke=this.field.multiply(g.getCoefficient(g.getDegree()),de);K=K.add(this.field.buildMonomial(pe,ke)),g=g.subtract(f.multiplyByMonomial(pe,ke))}w=K.multiply(p).subtract(H).negative()}let v=w.getCoefficient(0);if(v===0)throw _.getChecksumInstance();let S=this.field.inverse(v),P=w.multiply(S),L=g.multiply(S);return[P,L]}findErrorLocations(o){let l=o.getDegree(),c=new Int32Array(l),f=0;for(let g=1;g<this.field.getSize()&&f<l;g++)o.evaluateAt(g)===0&&(c[f]=this.field.inverse(g),f++);if(f!==l)throw _.getChecksumInstance();return c}findErrorMagnitudes(o,l,c){let f=l.getDegree(),g=new Int32Array(f);for(let S=1;S<=f;S++)g[f-S]=this.field.multiply(S,l.getCoefficient(S));let p=new Hn(this.field,g),w=c.length,v=new Int32Array(w);for(let S=0;S<w;S++){let P=this.field.inverse(c[S]),L=this.field.subtract(0,o.evaluateAt(P)),B=this.field.inverse(p.evaluateAt(P));v[S]=this.field.multiply(L,B)}return v}}class go{constructor(o,l,c,f,g){o instanceof go?this.constructor_2(o):this.constructor_1(o,l,c,f,g)}constructor_1(o,l,c,f,g){const p=l==null||c==null,w=f==null||g==null;if(p&&w)throw new G;p?(l=new Me(0,f.getY()),c=new Me(0,g.getY())):w&&(f=new Me(o.getWidth()-1,l.getY()),g=new Me(o.getWidth()-1,c.getY())),this.image=o,this.topLeft=l,this.bottomLeft=c,this.topRight=f,this.bottomRight=g,this.minX=Math.trunc(Math.min(l.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),g.getX())),this.minY=Math.trunc(Math.min(l.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),g.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,l){return o==null?l:l==null?o:new go(o.image,o.topLeft,o.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(o,l,c){let f=this.topLeft,g=this.bottomLeft,p=this.topRight,w=this.bottomRight;if(o>0){let v=c?this.topLeft:this.topRight,S=Math.trunc(v.getY()-o);S<0&&(S=0);let P=new Me(v.getX(),S);c?f=P:p=P}if(l>0){let v=c?this.bottomLeft:this.bottomRight,S=Math.trunc(v.getY()+l);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let P=new Me(v.getX(),S);c?g=P:w=P}return new go(this.image,f,g,p,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class EA{constructor(o,l,c,f){this.columnCount=o,this.errorCorrectionLevel=f,this.rowCountUpperPart=l,this.rowCountLowerPart=c,this.rowCount=l+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Fl{constructor(){this.buffer=""}static form(o,l){let c=-1;function f(p,w,v,S,P,L){if(p==="%%")return"%";if(l[++c]===void 0)return;p=S?parseInt(S.substr(1)):void 0;let B=P?parseInt(P.substr(1)):void 0,H;switch(L){case"s":H=l[c];break;case"c":H=l[c][0];break;case"f":H=parseFloat(l[c]).toFixed(p);break;case"p":H=parseFloat(l[c]).toPrecision(p);break;case"e":H=parseFloat(l[c]).toExponential(p);break;case"x":H=parseInt(l[c]).toString(B||16);break;case"d":H=parseFloat(parseInt(l[c],B||10).toPrecision(p)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(B);let K=parseInt(v),ee=v&&v[0]+""=="0"?"0":" ";for(;H.length<K;)H=w!==void 0?H+ee:ee+H;return H}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(g,f)}format(o,...l){this.buffer+=Fl.form(o,l)}toString(){return this.buffer}}class Bl{constructor(o){this.boundingBox=new go(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let l=this.getCodeword(o);if(l!=null)return l;for(let c=1;c<Bl.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(o)-c;if(f>=0&&(l=this.codewords[f],l!=null)||(f=this.imageRowToCodewordIndex(o)+c,f<this.codewords.length&&(l=this.codewords[f],l!=null)))return l}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,l){this.codewords[this.imageRowToCodewordIndex(o)]=l}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Fl;let l=0;for(const c of this.codewords){if(c==null){o.format("%3d:    |   %n",l++);continue}o.format("%3d: %3d|%3d%n",l++,c.getRowNumber(),c.getValue())}return o.toString()}}Bl.MAX_NEARBY_DISTANCE=5;class Ul{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let l=this.values.get(o);l==null&&(l=0),l++,this.values.set(o,l)}getValue(){let o=-1,l=new Array;for(const[c,f]of this.values.entries()){const g={getKey:()=>c,getValue:()=>f};g.getValue()>o?(o=g.getValue(),l=[],l.push(g.getKey())):g.getValue()===o&&l.push(g.getKey())}return Qe.toIntArray(l)}getConfidence(o){return this.values.get(o)}}class yy extends Bl{constructor(o,l){super(o),this._isLeft=l}setRowNumbers(){for(let o of this.getCodewords())o!=null&&o.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,o);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.imageRowToCodewordIndex(Math.trunc(g.getY())),v=-1,S=1,P=0;for(let L=p;L<w;L++){if(l[L]==null)continue;let B=l[L],H=B.getRowNumber()-v;if(H===0)P++;else if(H===1)S=Math.max(S,P),P=1,v=B.getRowNumber();else if(H<0||B.getRowNumber()>=o.getRowCount()||H>L)l[L]=null;else{let K;S>2?K=(S-2)*H:K=H;let ee=K>=L;for(let de=1;de<=K&&!ee;de++)ee=l[L-de]!=null;ee?l[L]=null:(v=B.getRowNumber(),P=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let l=new Int32Array(o.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=l.length)continue;l[f]++}return l}adjustIncompleteIndicatorColumnRowNumbers(o){let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=this.getCodewords(),v=-1;for(let S=g;S<p;S++){if(w[S]==null)continue;let P=w[S];P.setRowNumberAsRowIndicatorColumn();let L=P.getRowNumber()-v;L===0||(L===1?v=P.getRowNumber():P.getRowNumber()>=o.getRowCount()?w[S]=null:v=P.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),l=new Ul,c=new Ul,f=new Ul,g=new Ul;for(let w of o){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let v=w.getValue()%30,S=w.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:c.setValue(v*3+1);break;case 1:g.setValue(v/3),f.setValue(v%3);break;case 2:l.setValue(v+1);break}}if(l.getValue().length===0||c.getValue().length===0||f.getValue().length===0||g.getValue().length===0||l.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<Qe.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>Qe.MAX_ROWS_IN_BARCODE)return null;let p=new EA(l.getValue()[0],c.getValue()[0],f.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(o,p),p}removeIncorrectCodewords(o,l){for(let c=0;c<o.length;c++){let f=o[c];if(o[c]==null)continue;let g=f.getValue()%30,p=f.getRowNumber();if(p>l.getRowCount()){o[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:g*3+1!==l.getRowCountUpperPart()&&(o[c]=null);break;case 1:(Math.trunc(g/3)!==l.getErrorCorrectionLevel()||g%3!==l.getRowCountLowerPart())&&(o[c]=null);break;case 2:g+1!==l.getColumnCount()&&(o[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Vl{constructor(o,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Qe.MAX_CODEWORDS_IN_BARCODE,l;do l=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o!=null&&o.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let c=this.detectionResultColumns[l].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(l,f,c))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<o.length;c++)if(o[c]!=null&&l[c]!=null&&o[c].getRowNumber()===l[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let g=this.detectionResultColumns[f].getCodewords()[c];g!=null&&(g.setRowNumber(o[c].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let f=l[c].getRowNumber(),g=0;for(let p=this.barcodeColumnCount+1;p>0&&g<this.ADJUST_ROW_NUMBER_SKIP;p--){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(g=Vl.adjustRowNumberIfValid(f,g,w),w.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,l=this.detectionResultColumns[0].getCodewords();for(let c=0;c<l.length;c++){if(l[c]==null)continue;let f=l[c].getRowNumber(),g=0;for(let p=1;p<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;p++){let w=this.detectionResultColumns[p].getCodewords()[c];w!=null&&(g=Vl.adjustRowNumberIfValid(f,g,w),w.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,l,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(o)?(c.setRowNumber(o),l=0):++l),l}adjustRowNumbers(o,l,c){if(!this.detectionResultColumns[o-1])return;let f=c[l],g=this.detectionResultColumns[o-1].getCodewords(),p=g;this.detectionResultColumns[o+1]!=null&&(p=this.detectionResultColumns[o+1].getCodewords());let w=new Array(14);w[2]=g[l],w[3]=p[l],l>0&&(w[0]=c[l-1],w[4]=g[l-1],w[5]=p[l-1]),l>1&&(w[8]=c[l-2],w[10]=g[l-2],w[11]=p[l-2]),l<c.length-1&&(w[1]=c[l+1],w[6]=g[l+1],w[7]=p[l+1]),l<c.length-2&&(w[9]=c[l+2],w[12]=g[l+2],w[13]=p[l+2]);for(let v of w)if(Vl.adjustRowNumber(f,v))return}static adjustRowNumber(o,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===o.getBucket()?(o.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,l){this.detectionResultColumns[o]=l}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new Fl;for(let c=0;c<o.getCodewords().length;c++){l.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){l.format("    |   ");continue}let g=this.detectionResultColumns[f].getCodewords()[c];if(g==null){l.format("    |   ");continue}l.format(" %3d|%3d",g.getRowNumber(),g.getValue())}l.format("%n")}return l.toString()}}class zl{constructor(o,l,c,f){this.rowNumber=zl.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(l),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==zl.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}zl.BARCODE_ROW_UNKNOWN=-1;class gr{static initialize(){for(let o=0;o<Qe.SYMBOL_TABLE.length;o++){let l=Qe.SYMBOL_TABLE[o],c=l&1;for(let f=0;f<Qe.BARS_IN_MODULE;f++){let g=0;for(;(l&1)===c;)g+=1,l>>=1;c=l&1,gr.RATIOS_TABLE[o]||(gr.RATIOS_TABLE[o]=new Array(Qe.BARS_IN_MODULE)),gr.RATIOS_TABLE[o][Qe.BARS_IN_MODULE-f-1]=Math.fround(g/Qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let l=gr.getDecodedCodewordValue(gr.sampleBitCounts(o));return l!==-1?l:gr.getClosestDecodedValue(o)}static sampleBitCounts(o){let l=We.sum(o),c=new Int32Array(Qe.BARS_IN_MODULE),f=0,g=0;for(let p=0;p<Qe.MODULES_IN_CODEWORD;p++){let w=l/(2*Qe.MODULES_IN_CODEWORD)+p*l/Qe.MODULES_IN_CODEWORD;g+o[f]<=w&&(g+=o[f],f++),c[f]++}return c}static getDecodedCodewordValue(o){let l=gr.getBitValue(o);return Qe.getCodeword(l)===-1?-1:l}static getBitValue(o){let l=0;for(let c=0;c<o.length;c++)for(let f=0;f<o[c];f++)l=l<<1|(c%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(o){let l=We.sum(o),c=new Array(Qe.BARS_IN_MODULE);if(l>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(o[p]/l);let f=lr.MAX_VALUE,g=-1;this.bSymbolTableReady||gr.initialize();for(let p=0;p<gr.RATIOS_TABLE.length;p++){let w=0,v=gr.RATIOS_TABLE[p];for(let S=0;S<Qe.BARS_IN_MODULE;S++){let P=Math.fround(v[S]-c[S]);if(w+=Math.fround(P*P),w>=f)break}w<f&&(f=w,g=Qe.SYMBOL_TABLE[p])}return g}}gr.bSymbolTableReady=!1,gr.RATIOS_TABLE=new Array(Qe.SYMBOL_TABLE.length).map(D=>new Array(Qe.BARS_IN_MODULE));class wy{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class by{static parseLong(o,l=void 0){return parseInt(o,l)}}class vy extends h{}vy.kind="NullPointerException";class CA{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,l,c){if(o==null)throw new vy;if(l<0||l>o.length||c<0||l+c>o.length||l+c<0)throw new k;if(c===0)return;for(let f=0;f<c;f++)this.write(o[l+f])}flush(){}close(){}}class AA extends h{}class kA extends CA{constructor(o=32){if(super(),this.count=0,o<0)throw new y("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let c=this.buf.length<<1;if(c-o<0&&(c=o),c<0){if(o<0)throw new AA;c=I.MAX_VALUE}this.buf=A.copyOfUint8Array(this.buf,c)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,l,c){if(l<0||l>o.length||c<0||l+c-o.length>0)throw new k;this.ensureCapacity(this.count+c),N.arraycopy(o,l,this.buf,this.count,c),this.count+=c}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return A.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var Mt;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Mt||(Mt={}));function _y(){if(typeof window<"u")return window.BigInt||null;if(typeof Vn<"u")return Vn.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let sd;function Si(D){if(typeof sd>"u"&&(sd=_y()),sd===null)throw new Error("BigInt is not supported!");return sd(D)}function NA(){let D=[];D[0]=Si(1);let o=Si(900);D[1]=o;for(let l=2;l<16;l++)D[l]=D[l-1]*o;return D}class ge{static decode(o,l){let c=new te(""),f=M.ISO8859_1;c.enableDecoding(f);let g=1,p=o[g++],w=new wy;for(;g<o[0];){switch(p){case ge.TEXT_COMPACTION_MODE_LATCH:g=ge.textCompaction(o,g,c);break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:g=ge.byteCompaction(p,o,f,g,c);break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[g++]);break;case ge.NUMERIC_COMPACTION_MODE_LATCH:g=ge.numericCompaction(o,g,c);break;case ge.ECI_CHARSET:M.getCharacterSetECIByValue(o[g++]);break;case ge.ECI_GENERAL_PURPOSE:g+=2;break;case ge.ECI_USER_DEFINED:g++;break;case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=ge.decodeMacroBlock(o,g,w);break;case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:throw new O;default:g--,g=ge.textCompaction(o,g,c);break}if(g<o.length)p=o[g++];else throw O.getFormatInstance()}if(c.length()===0)throw O.getFormatInstance();let v=new Y(null,c.toString(),null,l);return v.setOther(w),v}static decodeMacroBlock(o,l,c){if(l+ge.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw O.getFormatInstance();let f=new Int32Array(ge.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<ge.NUMBER_OF_SEQUENCE_CODEWORDS;w++,l++)f[w]=o[l];c.setSegmentIndex(I.parseInt(ge.decodeBase900toBase10(f,ge.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new te;l=ge.textCompaction(o,l,g),c.setFileId(g.toString());let p=-1;for(o[l]===ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=l+1);l<o[0];)switch(o[l]){case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,o[l]){case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new te;l=ge.textCompaction(o,l+1,w),c.setFileName(w.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new te;l=ge.textCompaction(o,l+1,v),c.setSender(v.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new te;l=ge.textCompaction(o,l+1,S),c.setAddressee(S.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let P=new te;l=ge.numericCompaction(o,l+1,P),c.setSegmentCount(I.parseInt(P.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new te;l=ge.numericCompaction(o,l+1,L),c.setTimestamp(by.parseLong(L.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new te;l=ge.numericCompaction(o,l+1,B),c.setChecksum(I.parseInt(B.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new te;l=ge.numericCompaction(o,l+1,H),c.setFileSize(by.parseLong(H.toString()));break;default:throw O.getFormatInstance()}break;case ge.MACRO_PDF417_TERMINATOR:l++,c.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(p!==-1){let w=l-p;c.isLastSegment()&&w--,c.setOptionalData(A.copyOfRange(o,p,p+w))}return l}static textCompaction(o,l,c){let f=new Int32Array((o[0]-l)*2),g=new Int32Array((o[0]-l)*2),p=0,w=!1;for(;l<o[0]&&!w;){let v=o[l++];if(v<ge.TEXT_COMPACTION_MODE_LATCH)f[p]=v/30,f[p+1]=v%30,p+=2;else switch(v){case ge.TEXT_COMPACTION_MODE_LATCH:f[p++]=ge.TEXT_COMPACTION_MODE_LATCH;break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:l--,w=!0;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[p]=ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=o[l++],g[p]=v,p++;break}}return ge.decodeTextCompaction(f,g,p,c),l}static decodeTextCompaction(o,l,c,f){let g=Mt.ALPHA,p=Mt.ALPHA,w=0;for(;w<c;){let v=o[w],S="";switch(g){case Mt.ALPHA:if(v<26)S=String.fromCharCode(65+v);else switch(v){case 26:S=" ";break;case ge.LL:g=Mt.LOWER;break;case ge.ML:g=Mt.MIXED;break;case ge.PS:p=g,g=Mt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[w]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=Mt.ALPHA;break}break;case Mt.LOWER:if(v<26)S=String.fromCharCode(97+v);else switch(v){case 26:S=" ";break;case ge.AS:p=g,g=Mt.ALPHA_SHIFT;break;case ge.ML:g=Mt.MIXED;break;case ge.PS:p=g,g=Mt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[w]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=Mt.ALPHA;break}break;case Mt.MIXED:if(v<ge.PL)S=ge.MIXED_CHARS[v];else switch(v){case ge.PL:g=Mt.PUNCT;break;case 26:S=" ";break;case ge.LL:g=Mt.LOWER;break;case ge.AL:g=Mt.ALPHA;break;case ge.PS:p=g,g=Mt.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[w]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=Mt.ALPHA;break}break;case Mt.PUNCT:if(v<ge.PAL)S=ge.PUNCT_CHARS[v];else switch(v){case ge.PAL:g=Mt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[w]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=Mt.ALPHA;break}break;case Mt.ALPHA_SHIFT:if(g=p,v<26)S=String.fromCharCode(65+v);else switch(v){case 26:S=" ";break;case ge.TEXT_COMPACTION_MODE_LATCH:g=Mt.ALPHA;break}break;case Mt.PUNCT_SHIFT:if(g=p,v<ge.PAL)S=ge.PUNCT_CHARS[v];else switch(v){case ge.PAL:g=Mt.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[w]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=Mt.ALPHA;break}break}S!==""&&f.append(S),w++}}static byteCompaction(o,l,c,f,g){let p=new kA,w=0,v=0,S=!1;switch(o){case ge.BYTE_COMPACTION_MODE_LATCH:let P=new Int32Array(6),L=l[f++];for(;f<l[0]&&!S;)switch(P[w++]=L,v=900*v+L,L=l[f++],L){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:f--,S=!0;break;default:if(w%5===0&&w>0){for(let B=0;B<6;++B)p.write(Number(Si(v)>>Si(8*(5-B))));v=0,w=0}break}f===l[0]&&L<ge.TEXT_COMPACTION_MODE_LATCH&&(P[w++]=L);for(let B=0;B<w;B++)p.write(P[B]);break;case ge.BYTE_COMPACTION_MODE_LATCH_6:for(;f<l[0]&&!S;){let B=l[f++];if(B<ge.TEXT_COMPACTION_MODE_LATCH)w++,v=900*v+B;else switch(B){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:f--,S=!0;break}if(w%5===0&&w>0){for(let H=0;H<6;++H)p.write(Number(Si(v)>>Si(8*(5-H))));v=0,w=0}}break}return g.append(X.decode(p.toByteArray(),c)),f}static numericCompaction(o,l,c){let f=0,g=!1,p=new Int32Array(ge.MAX_NUMERIC_CODEWORDS);for(;l<o[0]&&!g;){let w=o[l++];if(l===o[0]&&(g=!0),w<ge.TEXT_COMPACTION_MODE_LATCH)p[f]=w,f++;else switch(w){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:l--,g=!0;break}(f%ge.MAX_NUMERIC_CODEWORDS===0||w===ge.NUMERIC_COMPACTION_MODE_LATCH||g)&&f>0&&(c.append(ge.decodeBase900toBase10(p,f)),f=0)}return l}static decodeBase900toBase10(o,l){let c=Si(0);for(let g=0;g<l;g++)c+=ge.EXP900[l-g-1]*Si(o[g]);let f=c.toString();if(f.charAt(0)!=="1")throw new O;return f.substring(1)}}ge.TEXT_COMPACTION_MODE_LATCH=900,ge.BYTE_COMPACTION_MODE_LATCH=901,ge.NUMERIC_COMPACTION_MODE_LATCH=902,ge.BYTE_COMPACTION_MODE_LATCH_6=924,ge.ECI_USER_DEFINED=925,ge.ECI_GENERAL_PURPOSE=926,ge.ECI_CHARSET=927,ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ge.MACRO_PDF417_TERMINATOR=922,ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ge.MAX_NUMERIC_CODEWORDS=15,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ge.PL=25,ge.LL=27,ge.AS=27,ge.ML=28,ge.AL=28,ge.PS=29,ge.PAL=29,ge.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ge.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ge.EXP900=_y()?NA():[],ge.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ot{constructor(){}static decode(o,l,c,f,g,p,w){let v=new go(o,l,c,f,g),S=null,P=null,L;for(let K=!0;;K=!1){if(l!=null&&(S=ot.getRowIndicatorColumn(o,v,l,!0,p,w)),f!=null&&(P=ot.getRowIndicatorColumn(o,v,f,!1,p,w)),L=ot.merge(S,P),L==null)throw G.getNotFoundInstance();let ee=L.getBoundingBox();if(K&&ee!=null&&(ee.getMinY()<v.getMinY()||ee.getMaxY()>v.getMaxY()))v=ee;else break}L.setBoundingBox(v);let B=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,S),L.setDetectionResultColumn(B,P);let H=S!=null;for(let K=1;K<=B;K++){let ee=H?K:B-K;if(L.getDetectionResultColumn(ee)!==void 0)continue;let de;ee===0||ee===B?de=new yy(v,ee===0):de=new Bl(v),L.setDetectionResultColumn(ee,de);let pe=-1,ke=pe;for(let Ne=v.getMinY();Ne<=v.getMaxY();Ne++){if(pe=ot.getStartColumn(L,ee,Ne,H),pe<0||pe>v.getMaxX()){if(ke===-1)continue;pe=ke}let Ce=ot.detectCodeword(o,v.getMinX(),v.getMaxX(),H,pe,Ne,p,w);Ce!=null&&(de.setCodeword(Ne,Ce),ke=pe,p=Math.min(p,Ce.getWidth()),w=Math.max(w,Ce.getWidth()))}}return ot.createDecoderResult(L)}static merge(o,l){if(o==null&&l==null)return null;let c=ot.getBarcodeMetadata(o,l);if(c==null)return null;let f=go.merge(ot.adjustBoundingBox(o),ot.adjustBoundingBox(l));return new Vl(c,f)}static adjustBoundingBox(o){if(o==null)return null;let l=o.getRowHeights();if(l==null)return null;let c=ot.getMax(l),f=0;for(let w of l)if(f+=c-w,w>0)break;let g=o.getCodewords();for(let w=0;f>0&&g[w]==null;w++)f--;let p=0;for(let w=l.length-1;w>=0&&(p+=c-l[w],!(l[w]>0));w--);for(let w=g.length-1;p>0&&g[w]==null;w--)p--;return o.getBoundingBox().addMissingRows(f,p,o.isLeft())}static getMax(o){let l=-1;for(let c of o)l=Math.max(l,c);return l}static getBarcodeMetadata(o,l){let c;if(o==null||(c=o.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let f;return l==null||(f=l.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(o,l,c,f,g,p){let w=new yy(l,f);for(let v=0;v<2;v++){let S=v===0?1:-1,P=Math.trunc(Math.trunc(c.getX()));for(let L=Math.trunc(Math.trunc(c.getY()));L<=l.getMaxY()&&L>=l.getMinY();L+=S){let B=ot.detectCodeword(o,0,o.getWidth(),f,P,L,g,p);B!=null&&(w.setCodeword(L,B),f?P=B.getStartX():P=B.getEndX())}}return w}static adjustCodewordCount(o,l){let c=l[0][1],f=c.getValue(),g=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-ot.getNumberOfECCodeWords(o.getBarcodeECLevel());if(f.length===0){if(g<1||g>Qe.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();c.setValue(g)}else f[0]!==g&&c.setValue(g)}static createDecoderResult(o){let l=ot.createBarcodeMatrix(o);ot.adjustCodewordCount(o,l);let c=new Array,f=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),g=[],p=new Array;for(let v=0;v<o.getBarcodeRowCount();v++)for(let S=0;S<o.getBarcodeColumnCount();S++){let P=l[v][S+1].getValue(),L=v*o.getBarcodeColumnCount()+S;P.length===0?c.push(L):P.length===1?f[L]=P[0]:(p.push(L),g.push(P))}let w=new Array(g.length);for(let v=0;v<w.length;v++)w[v]=g[v];return ot.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),f,Qe.toIntArray(c),Qe.toIntArray(p),w)}static createDecoderResultFromAmbiguousValues(o,l,c,f,g){let p=new Int32Array(f.length),w=100;for(;w-- >0;){for(let v=0;v<p.length;v++)l[f[v]]=g[v][p[v]];try{return ot.decodeCodewords(l,o,c)}catch(v){if(!(v instanceof _))throw v}if(p.length===0)throw _.getChecksumInstance();for(let v=0;v<p.length;v++)if(p[v]<g[v].length-1){p[v]++;break}else if(p[v]=0,v===p.length-1)throw _.getChecksumInstance()}throw _.getChecksumInstance()}static createBarcodeMatrix(o){let l=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let f=0;f<l.length;f++)for(let g=0;g<l[f].length;g++)l[f][g]=new Ul;let c=0;for(let f of o.getDetectionResultColumns()){if(f!=null){for(let g of f.getCodewords())if(g!=null){let p=g.getRowNumber();if(p>=0){if(p>=l.length)continue;l[p][c].setValue(g.getValue())}}}c++}return l}static isValidBarcodeColumn(o,l){return l>=0&&l<=o.getBarcodeColumnCount()+1}static getStartColumn(o,l,c,f){let g=f?1:-1,p=null;if(ot.isValidBarcodeColumn(o,l-g)&&(p=o.getDetectionResultColumn(l-g).getCodeword(c)),p!=null)return f?p.getEndX():p.getStartX();if(p=o.getDetectionResultColumn(l).getCodewordNearby(c),p!=null)return f?p.getStartX():p.getEndX();if(ot.isValidBarcodeColumn(o,l-g)&&(p=o.getDetectionResultColumn(l-g).getCodewordNearby(c)),p!=null)return f?p.getEndX():p.getStartX();let w=0;for(;ot.isValidBarcodeColumn(o,l-g);){l-=g;for(let v of o.getDetectionResultColumn(l).getCodewords())if(v!=null)return(f?v.getEndX():v.getStartX())+g*w*(v.getEndX()-v.getStartX());w++}return f?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,l,c,f,g,p,w,v){g=ot.adjustCodewordStartColumn(o,l,c,f,g,p);let S=ot.getModuleBitCount(o,l,c,f,g,p);if(S==null)return null;let P,L=We.sum(S);if(f)P=g+L;else{for(let K=0;K<S.length/2;K++){let ee=S[K];S[K]=S[S.length-1-K],S[S.length-1-K]=ee}P=g,g=P-L}if(!ot.checkCodewordSkew(L,w,v))return null;let B=gr.getDecodedValue(S),H=Qe.getCodeword(B);return H===-1?null:new zl(g,P,ot.getCodewordBucketNumber(B),H)}static getModuleBitCount(o,l,c,f,g,p){let w=g,v=new Int32Array(8),S=0,P=f?1:-1,L=f;for(;(f?w<c:w>=l)&&S<v.length;)o.get(w,p)===L?(v[S]++,w+=P):(S++,L=!L);return S===v.length||w===(f?c:l)&&S===v.length-1?v:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,l,c,f,g,p){let w=g,v=f?-1:1;for(let S=0;S<2;S++){for(;(f?w>=l:w<c)&&f===o.get(w,p);){if(Math.abs(g-w)>ot.CODEWORD_SKEW_SIZE)return g;w+=v}v=-v,f=!f}return w}static checkCodewordSkew(o,l,c){return l-ot.CODEWORD_SKEW_SIZE<=o&&o<=c+ot.CODEWORD_SKEW_SIZE}static decodeCodewords(o,l,c){if(o.length===0)throw O.getFormatInstance();let f=1<<l+1,g=ot.correctErrors(o,c,f);ot.verifyCodewordCount(o,f);let p=ge.decode(o,""+l);return p.setErrorsCorrected(g),p.setErasures(c.length),p}static correctErrors(o,l,c){if(l!=null&&l.length>c/2+ot.MAX_ERRORS||c<0||c>ot.MAX_EC_CODEWORDS)throw _.getChecksumInstance();return ot.errorCorrection.decode(o,c,l)}static verifyCodewordCount(o,l){if(o.length<4)throw O.getFormatInstance();let c=o[0];if(c>o.length)throw O.getFormatInstance();if(c===0)if(l<o.length)o[0]=o.length-l;else throw O.getFormatInstance()}static getBitCountForCodeword(o){let l=new Int32Array(8),c=0,f=l.length-1;for(;!((o&1)!==c&&(c=o&1,f--,f<0));)l[f]++,o>>=1;return l}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return ot.getCodewordBucketNumber(ot.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let l=new Fl;for(let c=0;c<o.length;c++){l.format("Row %2d: ",c);for(let f=0;f<o[c].length;f++){let g=o[c][f];g.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}l.format("%n")}return l.toString()}}ot.CODEWORD_SKEW_SIZE=2,ot.MAX_ERRORS=3,ot.MAX_EC_CODEWORDS=512,ot.errorCorrection=new xy;class $n{decode(o,l=null){let c=$n.decode(o,l,!1);if(c==null||c.length===0||c[0]==null)throw G.getNotFoundInstance();return c[0]}decodeMultiple(o,l=null){try{return $n.decode(o,l,!0)}catch(c){throw c instanceof O||c instanceof _?G.getNotFoundInstance():c}}static decode(o,l,c){const f=new Array,g=st.detectMultiple(o,l,c);for(const p of g.getPoints()){const w=ot.decode(g.getBits(),p[4],p[5],p[6],p[7],$n.getMinCodewordWidth(p),$n.getMaxCodewordWidth(p)),v=new q(w.getText(),w.getRawBytes(),void 0,p,ue.PDF_417);v.putMetadata(se.ERROR_CORRECTION_LEVEL,w.getECLevel());const S=w.getOther();S!=null&&v.putMetadata(se.PDF417_EXTRA_METADATA,S),f.push(v)}return f.map(p=>p)}static getMaxWidth(o,l){return o==null||l==null?0:Math.trunc(Math.abs(o.getX()-l.getX()))}static getMinWidth(o,l){return o==null||l==null?I.MAX_VALUE:Math.trunc(Math.abs(o.getX()-l.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max($n.getMaxWidth(o[0],o[4]),$n.getMaxWidth(o[6],o[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.max($n.getMaxWidth(o[1],o[5]),$n.getMaxWidth(o[7],o[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min($n.getMinWidth(o[0],o[4]),$n.getMinWidth(o[6],o[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.min($n.getMinWidth(o[1],o[5]),$n.getMinWidth(o[7],o[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class id extends h{}id.kind="ReaderException";class Sy{constructor(o,l){this.verbose=o===!0,l&&this.setHints(l)}decode(o,l){return l&&this.setHints(l),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const l=!r(o)&&o.get(z.TRY_HARDER)===!0,c=r(o)?null:o.get(z.POSSIBLE_FORMATS),f=new Array;if(!r(c)){const g=c.some(p=>p===ue.UPC_A||p===ue.UPC_E||p===ue.EAN_13||p===ue.EAN_8||p===ue.CODABAR||p===ue.CODE_39||p===ue.CODE_93||p===ue.CODE_128||p===ue.ITF||p===ue.RSS_14||p===ue.RSS_EXPANDED);g&&!l&&f.push(new cs(o,this.verbose)),c.includes(ue.QR_CODE)&&f.push(new _i),c.includes(ue.DATA_MATRIX)&&f.push(new vi),c.includes(ue.AZTEC)&&f.push(new Qn),c.includes(ue.PDF_417)&&f.push(new $n),g&&l&&f.push(new cs(o,this.verbose))}f.length===0&&(l||f.push(new cs(o,this.verbose)),f.push(new _i),f.push(new vi),f.push(new Qn),f.push(new $n),l&&f.push(new cs(o,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new id("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(o,this.hints)}catch(c){if(c instanceof id)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class TA extends ae{constructor(o=null,l=500){const c=new Sy;c.setHints(o),super(c,l)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class IA extends ae{constructor(o=500){super(new $n,o)}}class RA extends ae{constructor(o=500){super(new _i,o)}}var S0;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(S0||(S0={}));var Pn=S0;class E0{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Ee(o,Int32Array.from([1])))}buildGenerator(o){const l=this.cachedGenerators;if(o>=l.length){let c=l[l.length-1];const f=this.field;for(let g=l.length;g<=o;g++){const p=c.multiply(new Ee(f,Int32Array.from([1,f.exp(g-1+f.getGeneratorBase())])));l.push(p),c=p}}return l[o]}encode(o,l){if(l===0)throw new y("No error correction bytes");const c=o.length-l;if(c<=0)throw new y("No data bytes provided");const f=this.buildGenerator(l),g=new Int32Array(c);N.arraycopy(o,0,g,0,c);let p=new Ee(this.field,g);p=p.multiplyByMonomial(l,1);const v=p.divide(f)[1].getCoefficients(),S=l-v.length;for(let P=0;P<S;P++)o[c+P]=0;N.arraycopy(v,0,o,c+S,v.length)}}class un{constructor(){}static applyMaskPenaltyRule1(o){return un.applyMaskPenaltyRule1Internal(o,!0)+un.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let l=0;const c=o.getArray(),f=o.getWidth(),g=o.getHeight();for(let p=0;p<g-1;p++){const w=c[p];for(let v=0;v<f-1;v++){const S=w[v];S===w[v+1]&&S===c[p+1][v]&&S===c[p+1][v+1]&&l++}}return un.N2*l}static applyMaskPenaltyRule3(o){let l=0;const c=o.getArray(),f=o.getWidth(),g=o.getHeight();for(let p=0;p<g;p++)for(let w=0;w<f;w++){const v=c[p];w+6<f&&v[w]===1&&v[w+1]===0&&v[w+2]===1&&v[w+3]===1&&v[w+4]===1&&v[w+5]===0&&v[w+6]===1&&(un.isWhiteHorizontal(v,w-4,w)||un.isWhiteHorizontal(v,w+7,w+11))&&l++,p+6<g&&c[p][w]===1&&c[p+1][w]===0&&c[p+2][w]===1&&c[p+3][w]===1&&c[p+4][w]===1&&c[p+5][w]===0&&c[p+6][w]===1&&(un.isWhiteVertical(c,w,p-4,p)||un.isWhiteVertical(c,w,p+7,p+11))&&l++}return l*un.N3}static isWhiteHorizontal(o,l,c){l=Math.max(l,0),c=Math.min(c,o.length);for(let f=l;f<c;f++)if(o[f]===1)return!1;return!0}static isWhiteVertical(o,l,c,f){c=Math.max(c,0),f=Math.min(f,o.length);for(let g=c;g<f;g++)if(o[g][l]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let l=0;const c=o.getArray(),f=o.getWidth(),g=o.getHeight();for(let v=0;v<g;v++){const S=c[v];for(let P=0;P<f;P++)S[P]===1&&l++}const p=o.getHeight()*o.getWidth();return Math.floor(Math.abs(l*2-p)*10/p)*un.N4}static getDataMaskBit(o,l,c){let f,g;switch(o){case 0:f=c+l&1;break;case 1:f=c&1;break;case 2:f=l%3;break;case 3:f=(c+l)%3;break;case 4:f=Math.floor(c/2)+Math.floor(l/3)&1;break;case 5:g=c*l,f=(g&1)+g%3;break;case 6:g=c*l,f=(g&1)+g%3&1;break;case 7:g=c*l,f=g%3+(c+l&1)&1;break;default:throw new y("Invalid mask pattern: "+o)}return f===0}static applyMaskPenaltyRule1Internal(o,l){let c=0;const f=l?o.getHeight():o.getWidth(),g=l?o.getWidth():o.getHeight(),p=o.getArray();for(let w=0;w<f;w++){let v=0,S=-1;for(let P=0;P<g;P++){const L=l?p[w][P]:p[P][w];L===S?v++:(v>=5&&(c+=un.N1+(v-5)),v=1,S=L)}v>=5&&(c+=un.N1+(v-5))}return c}}un.N1=3,un.N2=3,un.N3=40,un.N4=10;class od{constructor(o,l){this.width=o,this.height=l;const c=new Array(l);for(let f=0;f!==l;f++)c[f]=new Uint8Array(o);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(o,l){return this.bytes[l][o]}getArray(){return this.bytes}setNumber(o,l,c){this.bytes[l][o]=c}setBoolean(o,l,c){this.bytes[l][o]=c?1:0}clear(o){for(const l of this.bytes)A.fill(l,o)}equals(o){if(!(o instanceof od))return!1;const l=o;if(this.width!==l.width||this.height!==l.height)return!1;for(let c=0,f=this.height;c<f;++c){const g=this.bytes[c],p=l.bytes[c];for(let w=0,v=this.width;w<v;++w)if(g[w]!==p[w])return!1}return!0}toString(){const o=new te;for(let l=0,c=this.height;l<c;++l){const f=this.bytes[l];for(let g=0,p=this.width;g<p;++g)switch(f[g]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class po{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new te;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<po.NUM_MASK_PATTERNS}}po.NUM_MASK_PATTERNS=8;class Lt extends h{}Lt.kind="WriterException";class Ke{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,l,c,f,g){Ke.clearMatrix(g),Ke.embedBasicPatterns(c,g),Ke.embedTypeInfo(l,f,g),Ke.maybeEmbedVersionInfo(c,g),Ke.embedDataBits(o,f,g)}static embedBasicPatterns(o,l){Ke.embedPositionDetectionPatternsAndSeparators(l),Ke.embedDarkDotAtLeftBottomCorner(l),Ke.maybeEmbedPositionAdjustmentPatterns(o,l),Ke.embedTimingPatterns(l)}static embedTypeInfo(o,l,c){const f=new j;Ke.makeTypeInfoBits(o,l,f);for(let g=0,p=f.getSize();g<p;++g){const w=f.get(f.getSize()-1-g),v=Ke.TYPE_INFO_COORDINATES[g],S=v[0],P=v[1];if(c.setBoolean(S,P,w),g<8){const L=c.getWidth()-g-1;c.setBoolean(L,8,w)}else{const B=c.getHeight()-7+(g-8);c.setBoolean(8,B,w)}}}static maybeEmbedVersionInfo(o,l){if(o.getVersionNumber()<7)return;const c=new j;Ke.makeVersionInfoBits(o,c);let f=6*3-1;for(let g=0;g<6;++g)for(let p=0;p<3;++p){const w=c.get(f);f--,l.setBoolean(g,l.getHeight()-11+p,w),l.setBoolean(l.getHeight()-11+p,g,w)}}static embedDataBits(o,l,c){let f=0,g=-1,p=c.getWidth()-1,w=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);w>=0&&w<c.getHeight();){for(let v=0;v<2;++v){const S=p-v;if(!Ke.isEmpty(c.get(S,w)))continue;let P;f<o.getSize()?(P=o.get(f),++f):P=!1,l!==255&&un.getDataMaskBit(l,S,w)&&(P=!P),c.setBoolean(S,w,P)}w+=g}g=-g,w+=g,p-=2}if(f!==o.getSize())throw new Lt("Not all bits consumed: "+f+"/"+o.getSize())}static findMSBSet(o){return 32-I.numberOfLeadingZeros(o)}static calculateBCHCode(o,l){if(l===0)throw new y("0 polynomial");const c=Ke.findMSBSet(l);for(o<<=c-1;Ke.findMSBSet(o)>=c;)o^=l<<Ke.findMSBSet(o)-c;return o}static makeTypeInfoBits(o,l,c){if(!po.isValidMaskPattern(l))throw new Lt("Invalid mask pattern");const f=o.getBits()<<3|l;c.appendBits(f,5);const g=Ke.calculateBCHCode(f,Ke.TYPE_INFO_POLY);c.appendBits(g,10);const p=new j;if(p.appendBits(Ke.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new Lt("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(o,l){l.appendBits(o.getVersionNumber(),6);const c=Ke.calculateBCHCode(o.getVersionNumber(),Ke.VERSION_INFO_POLY);if(l.appendBits(c,12),l.getSize()!==18)throw new Lt("should not happen but we got: "+l.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let l=8;l<o.getWidth()-8;++l){const c=(l+1)%2;Ke.isEmpty(o.get(l,6))&&o.setNumber(l,6,c),Ke.isEmpty(o.get(6,l))&&o.setNumber(6,l,c)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Lt;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,l,c){for(let f=0;f<8;++f){if(!Ke.isEmpty(c.get(o+f,l)))throw new Lt;c.setNumber(o+f,l,0)}}static embedVerticalSeparationPattern(o,l,c){for(let f=0;f<7;++f){if(!Ke.isEmpty(c.get(o,l+f)))throw new Lt;c.setNumber(o,l+f,0)}}static embedPositionAdjustmentPattern(o,l,c){for(let f=0;f<5;++f){const g=Ke.POSITION_ADJUSTMENT_PATTERN[f];for(let p=0;p<5;++p)c.setNumber(o+p,l+f,g[p])}}static embedPositionDetectionPattern(o,l,c){for(let f=0;f<7;++f){const g=Ke.POSITION_DETECTION_PATTERN[f];for(let p=0;p<7;++p)c.setNumber(o+p,l+f,g[p])}}static embedPositionDetectionPatternsAndSeparators(o){const l=Ke.POSITION_DETECTION_PATTERN[0].length;Ke.embedPositionDetectionPattern(0,0,o),Ke.embedPositionDetectionPattern(o.getWidth()-l,0,o),Ke.embedPositionDetectionPattern(0,o.getWidth()-l,o);const c=8;Ke.embedHorizontalSeparationPattern(0,c-1,o),Ke.embedHorizontalSeparationPattern(o.getWidth()-c,c-1,o),Ke.embedHorizontalSeparationPattern(0,o.getWidth()-c,o);const f=7;Ke.embedVerticalSeparationPattern(f,0,o),Ke.embedVerticalSeparationPattern(o.getHeight()-f-1,0,o),Ke.embedVerticalSeparationPattern(f,o.getHeight()-f,o)}static maybeEmbedPositionAdjustmentPatterns(o,l){if(o.getVersionNumber()<2)return;const c=o.getVersionNumber()-1,f=Ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let g=0,p=f.length;g!==p;g++){const w=f[g];if(w>=0)for(let v=0;v!==p;v++){const S=f[v];S>=0&&Ke.isEmpty(l.get(S,w))&&Ke.embedPositionAdjustmentPattern(S-2,w-2,l)}}}}Ke.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ke.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ke.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ke.VERSION_INFO_POLY=7973,Ke.TYPE_INFO_POLY=1335,Ke.TYPE_INFO_MASK_PATTERN=21522;class PA{constructor(o,l){this.dataBytes=o,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ht{constructor(){}static calculateMaskPenalty(o){return un.applyMaskPenaltyRule1(o)+un.applyMaskPenaltyRule2(o)+un.applyMaskPenaltyRule3(o)+un.applyMaskPenaltyRule4(o)}static encode(o,l,c=null){let f=Ht.DEFAULT_BYTE_MODE_ENCODING;const g=c!==null&&c.get(Pn.CHARACTER_SET)!==void 0;g&&(f=c.get(Pn.CHARACTER_SET).toString());const p=this.chooseMode(o,f),w=new j;if(p===Ye.BYTE&&(g||Ht.DEFAULT_BYTE_MODE_ENCODING!==f)){const Ne=M.getCharacterSetECIByName(f);Ne!==void 0&&this.appendECI(Ne,w)}this.appendModeInfo(p,w);const v=new j;this.appendBytes(o,p,v,f);let S;if(c!==null&&c.get(Pn.QR_VERSION)!==void 0){const Ne=Number.parseInt(c.get(Pn.QR_VERSION).toString(),10);S=He.getVersionForNumber(Ne);const Ce=this.calculateBitsNeeded(p,w,v,S);if(!this.willFit(Ce,S,l))throw new Lt("Data too big for requested version")}else S=this.recommendVersion(l,p,w,v);const P=new j;P.appendBitArray(w);const L=p===Ye.BYTE?v.getSizeInBytes():o.length;this.appendLengthInfo(L,S,p,P),P.appendBitArray(v);const B=S.getECBlocksForLevel(l),H=S.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(H,P);const K=this.interleaveWithECBytes(P,S.getTotalCodewords(),H,B.getNumBlocks()),ee=new po;ee.setECLevel(l),ee.setMode(p),ee.setVersion(S);const de=S.getDimensionForVersion(),pe=new od(de,de),ke=this.chooseMaskPattern(K,l,S,pe);return ee.setMaskPattern(ke),Ke.buildMatrix(K,l,S,ke,pe),ee.setMatrix(pe),ee}static recommendVersion(o,l,c,f){const g=this.calculateBitsNeeded(l,c,f,He.getVersionForNumber(1)),p=this.chooseVersion(g,o),w=this.calculateBitsNeeded(l,c,f,p);return this.chooseVersion(w,o)}static calculateBitsNeeded(o,l,c,f){return l.getSize()+o.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(o){return o<Ht.ALPHANUMERIC_TABLE.length?Ht.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,l=null){if(M.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(o))return Ye.KANJI;let c=!1,f=!1;for(let g=0,p=o.length;g<p;++g){const w=o.charAt(g);if(Ht.isDigit(w))c=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)f=!0;else return Ye.BYTE}return f?Ye.ALPHANUMERIC:c?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(o){let l;try{l=X.encode(o,M.SJIS)}catch{return!1}const c=l.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const g=l[f]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(o,l,c,f){let g=Number.MAX_SAFE_INTEGER,p=-1;for(let w=0;w<po.NUM_MASK_PATTERNS;w++){Ke.buildMatrix(o,l,c,w,f);let v=this.calculateMaskPenalty(f);v<g&&(g=v,p=w)}return p}static chooseVersion(o,l){for(let c=1;c<=40;c++){const f=He.getVersionForNumber(c);if(Ht.willFit(o,f,l))return f}throw new Lt("Data too big")}static willFit(o,l,c){const f=l.getTotalCodewords(),p=l.getECBlocksForLevel(c).getTotalECCodewords(),w=f-p,v=(o+7)/8;return w>=v}static terminateBits(o,l){const c=o*8;if(l.getSize()>c)throw new Lt("data bits cannot fit in the QR Code"+l.getSize()+" > "+c);for(let p=0;p<4&&l.getSize()<c;++p)l.appendBit(!1);const f=l.getSize()&7;if(f>0)for(let p=f;p<8;p++)l.appendBit(!1);const g=o-l.getSizeInBytes();for(let p=0;p<g;++p)l.appendBits(p&1?17:236,8);if(l.getSize()!==c)throw new Lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,l,c,f,g,p){if(f>=c)throw new Lt("Block ID too large");const w=o%c,v=c-w,S=Math.floor(o/c),P=S+1,L=Math.floor(l/c),B=L+1,H=S-L,K=P-B;if(H!==K)throw new Lt("EC bytes mismatch");if(c!==v+w)throw new Lt("RS blocks mismatch");if(o!==(L+H)*v+(B+K)*w)throw new Lt("Total bytes mismatch");f<v?(g[0]=L,p[0]=H):(g[0]=B,p[0]=K)}static interleaveWithECBytes(o,l,c,f){if(o.getSizeInBytes()!==c)throw new Lt("Number of bits and data bytes does not match");let g=0,p=0,w=0;const v=new Array;for(let P=0;P<f;++P){const L=new Int32Array(1),B=new Int32Array(1);Ht.getNumDataBytesAndNumECBytesForBlockID(l,c,f,P,L,B);const H=L[0],K=new Uint8Array(H);o.toBytes(8*g,K,0,H);const ee=Ht.generateECBytes(K,B[0]);v.push(new PA(K,ee)),p=Math.max(p,H),w=Math.max(w,ee.length),g+=L[0]}if(c!==g)throw new Lt("Data bytes does not match offset");const S=new j;for(let P=0;P<p;++P)for(const L of v){const B=L.getDataBytes();P<B.length&&S.appendBits(B[P],8)}for(let P=0;P<w;++P)for(const L of v){const B=L.getErrorCorrectionBytes();P<B.length&&S.appendBits(B[P],8)}if(l!==S.getSizeInBytes())throw new Lt("Interleaving error: "+l+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(o,l){const c=o.length,f=new Int32Array(c+l);for(let p=0;p<c;p++)f[p]=o[p]&255;new E0(Oe.QR_CODE_FIELD_256).encode(f,l);const g=new Uint8Array(l);for(let p=0;p<l;p++)g[p]=f[c+p];return g}static appendModeInfo(o,l){l.appendBits(o.getBits(),4)}static appendLengthInfo(o,l,c,f){const g=c.getCharacterCountBits(l);if(o>=1<<g)throw new Lt(o+" is bigger than "+((1<<g)-1));f.appendBits(o,g)}static appendBytes(o,l,c,f){switch(l){case Ye.NUMERIC:Ht.appendNumericBytes(o,c);break;case Ye.ALPHANUMERIC:Ht.appendAlphanumericBytes(o,c);break;case Ye.BYTE:Ht.append8BitBytes(o,c,f);break;case Ye.KANJI:Ht.appendKanjiBytes(o,c);break;default:throw new Lt("Invalid mode: "+l)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const l=Ht.getDigit(o);return l>=0&&l<=9}static appendNumericBytes(o,l){const c=o.length;let f=0;for(;f<c;){const g=Ht.getDigit(o.charAt(f));if(f+2<c){const p=Ht.getDigit(o.charAt(f+1)),w=Ht.getDigit(o.charAt(f+2));l.appendBits(g*100+p*10+w,10),f+=3}else if(f+1<c){const p=Ht.getDigit(o.charAt(f+1));l.appendBits(g*10+p,7),f+=2}else l.appendBits(g,4),f++}}static appendAlphanumericBytes(o,l){const c=o.length;let f=0;for(;f<c;){const g=Ht.getAlphanumericCode(o.charCodeAt(f));if(g===-1)throw new Lt;if(f+1<c){const p=Ht.getAlphanumericCode(o.charCodeAt(f+1));if(p===-1)throw new Lt;l.appendBits(g*45+p,11),f+=2}else l.appendBits(g,6),f++}}static append8BitBytes(o,l,c){let f;try{f=X.encode(o,c)}catch(g){throw new Lt(g)}for(let g=0,p=f.length;g!==p;g++){const w=f[g];l.appendBits(w,8)}}static appendKanjiBytes(o,l){let c;try{c=X.encode(o,M.SJIS)}catch(g){throw new Lt(g)}const f=c.length;for(let g=0;g<f;g+=2){const p=c[g]&255,w=c[g+1]&255,v=p<<8&4294967295|w;let S=-1;if(v>=33088&&v<=40956?S=v-33088:v>=57408&&v<=60351&&(S=v-49472),S===-1)throw new Lt("Invalid byte sequence");const P=(S>>8)*192+(S&255);l.appendBits(P,13)}}static appendECI(o,l){l.appendBits(Ye.ECI.getBits(),4),l.appendBits(o.getValue(),8)}}Ht.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ht.DEFAULT_BYTE_MODE_ENCODING=M.UTF8.getName();class xo{write(o,l,c,f=null){if(o.length===0)throw new y("Found empty contents");if(l<0||c<0)throw new y("Requested dimensions are too small: "+l+"x"+c);let g=Ut.L,p=xo.QUIET_ZONE_SIZE;f!==null&&(f.get(Pn.ERROR_CORRECTION)!==void 0&&(g=Ut.fromString(f.get(Pn.ERROR_CORRECTION).toString())),f.get(Pn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Pn.MARGIN).toString(),10)));const w=Ht.encode(o,g,f);return this.renderResult(w,l,c,p)}writeToDom(o,l,c,f,g=null){typeof o=="string"&&(o=document.querySelector(o));const p=this.write(l,c,f,g);o&&o.appendChild(p)}renderResult(o,l,c,f){const g=o.getMatrix();if(g===null)throw new Xe;const p=g.getWidth(),w=g.getHeight(),v=p+f*2,S=w+f*2,P=Math.max(l,v),L=Math.max(c,S),B=Math.min(Math.floor(P/v),Math.floor(L/S)),H=Math.floor((P-p*B)/2),K=Math.floor((L-w*B)/2),ee=this.createSVGElement(P,L);for(let de=0,pe=K;de<w;de++,pe+=B)for(let ke=0,Ne=H;ke<p;ke++,Ne+=B)if(g.get(ke,de)===1){const Ce=this.createSvgRectElement(Ne,pe,B,B);ee.appendChild(Ce)}return ee}createSVGElement(o,l){const c=document.createElementNS(xo.SVG_NS,"svg");return c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",l.toString()),c}createSvgRectElement(o,l,c,f){const g=document.createElementNS(xo.SVG_NS,"rect");return g.setAttributeNS(null,"x",o.toString()),g.setAttributeNS(null,"y",l.toString()),g.setAttributeNS(null,"height",c.toString()),g.setAttributeNS(null,"width",f.toString()),g.setAttributeNS(null,"fill","#000000"),g}}xo.QUIET_ZONE_SIZE=4,xo.SVG_NS="http://www.w3.org/2000/svg";class ma{encode(o,l,c,f,g){if(o.length===0)throw new y("Found empty contents");if(l!==ue.QR_CODE)throw new y("Can only encode QR_CODE, but got "+l);if(c<0||f<0)throw new y(`Requested dimensions are too small: ${c}x${f}`);let p=Ut.L,w=ma.QUIET_ZONE_SIZE;g!==null&&(g.get(Pn.ERROR_CORRECTION)!==void 0&&(p=Ut.fromString(g.get(Pn.ERROR_CORRECTION).toString())),g.get(Pn.MARGIN)!==void 0&&(w=Number.parseInt(g.get(Pn.MARGIN).toString(),10)));const v=Ht.encode(o,p,g);return ma.renderResult(v,c,f,w)}static renderResult(o,l,c,f){const g=o.getMatrix();if(g===null)throw new Xe;const p=g.getWidth(),w=g.getHeight(),v=p+f*2,S=w+f*2,P=Math.max(l,v),L=Math.max(c,S),B=Math.min(Math.floor(P/v),Math.floor(L/S)),H=Math.floor((P-p*B)/2),K=Math.floor((L-w*B)/2),ee=new fe(P,L);for(let de=0,pe=K;de<w;de++,pe+=B)for(let ke=0,Ne=H;ke<p;ke++,Ne+=B)g.get(ke,de)===1&&ee.setRegion(Ne,pe,B,B);return ee}}ma.QUIET_ZONE_SIZE=4;class OA{encode(o,l,c,f,g){let p;switch(l){case ue.QR_CODE:p=new ma;break;default:throw new y("No encoder available for format "+l)}return p.encode(o,l,c,f,g)}}class Es extends Q{constructor(o,l,c,f,g,p,w,v){if(super(p,w),this.yuvData=o,this.dataWidth=l,this.dataHeight=c,this.left=f,this.top=g,f+p>l||g+w>c)throw new y("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(p,w)}getRow(o,l){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const f=(o+this.top)*this.dataWidth+this.left;return N.arraycopy(this.yuvData,f,l,0,c),l}getMatrix(){const o=this.getWidth(),l=this.getHeight();if(o===this.dataWidth&&l===this.dataHeight)return this.yuvData;const c=o*l,f=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return N.arraycopy(this.yuvData,g,f,0,c),f;for(let p=0;p<l;p++){const w=p*o;N.arraycopy(this.yuvData,g,f,w,o),g+=this.dataWidth}return f}isCropSupported(){return!0}crop(o,l,c,f){return new Es(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+l,c,f,!1)}renderThumbnail(){const o=this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(o*l),f=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let p=0;p<l;p++){const w=p*o;for(let v=0;v<o;v++){const S=f[g+v*Es.THUMBNAIL_SCALE_FACTOR]&255;c[w+v]=4278190080|S*65793}g+=this.dataWidth*Es.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/Es.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Es.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,l){const c=this.yuvData;for(let f=0,g=this.top*this.dataWidth+this.left;f<l;f++,g+=this.dataWidth){const p=g+o/2;for(let w=g,v=g+o-1;w<p;w++,v--){const S=c[w];c[w]=c[v],c[v]=S}}}invert(){return new ne(this)}}Es.THUMBNAIL_SCALE_FACTOR=2;class C0 extends Q{constructor(o,l,c,f,g,p,w){if(super(l,c),this.dataWidth=f,this.dataHeight=g,this.left=p,this.top=w,o.BYTES_PER_ELEMENT===4){const v=l*c,S=new Uint8ClampedArray(v);for(let P=0;P<v;P++){const L=o[P],B=L>>16&255,H=L>>7&510,K=L&255;S[P]=(B+H+K)/4&255}this.luminances=S}else this.luminances=o;if(f===void 0&&(this.dataWidth=l),g===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+c>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(o,l){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const c=this.getWidth();(l==null||l.length<c)&&(l=new Uint8ClampedArray(c));const f=(o+this.top)*this.dataWidth+this.left;return N.arraycopy(this.luminances,f,l,0,c),l}getMatrix(){const o=this.getWidth(),l=this.getHeight();if(o===this.dataWidth&&l===this.dataHeight)return this.luminances;const c=o*l,f=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return N.arraycopy(this.luminances,g,f,0,c),f;for(let p=0;p<l;p++){const w=p*o;N.arraycopy(this.luminances,g,f,w,o),g+=this.dataWidth}return f}isCropSupported(){return!0}crop(o,l,c,f){return new C0(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+o,this.top+l)}invert(){return new ne(this)}}class Ey extends M{static forName(o){return this.getCharacterSetECIByName(o)}}class A0{}A0.ISO_8859_1=M.ISO8859_1;class Cy{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Ay{static singletonList(o){return[o]}static min(o,l){return o.sort(l)[0]}}class MA{constructor(o){this.previous=o}getPrevious(){return this.previous}}class ga extends MA{constructor(o,l,c){super(o),this.value=l,this.bitCount=c}appendTo(o,l){o.appendBits(this.value,this.bitCount)}add(o,l){return new ga(this,o,l)}addBinaryShift(o,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ga(this,o,l)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+I.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class k0 extends ga{constructor(o,l,c){super(o,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=c}appendTo(o,l){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):c===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(l[this.binaryShiftStart+c],8)}addBinaryShift(o,l){return new k0(this,o,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jA(D,o,l){return new k0(D,o,l)}function Wl(D,o,l){return new ga(D,o,l)}const DA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ei=0,ad=1,qr=2,ky=3,Cs=4,LA=new ga(null,0,0),N0=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function FA(D){for(let o of D)A.fill(o,-1);return D[Ei][Cs]=0,D[ad][Cs]=0,D[ad][Ei]=28,D[ky][Cs]=0,D[qr][Cs]=0,D[qr][Ei]=15,D}const Ny=FA(A.createInt32Array(6,6));class As{constructor(o,l,c,f){this.token=o,this.mode=l,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,l){let c=this.bitCount,f=this.token;if(o!==this.mode){let p=N0[this.mode][o];f=Wl(f,p&65535,p>>16),c+=p>>16}let g=o===qr?4:5;return f=Wl(f,l,g),new As(f,o,0,c+g)}shiftAndAppend(o,l){let c=this.token,f=this.mode===qr?4:5;return c=Wl(c,Ny[this.mode][o],f),c=Wl(c,l,5),new As(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(o){let l=this.token,c=this.mode,f=this.bitCount;if(this.mode===Cs||this.mode===qr){let w=N0[c][Ei];l=Wl(l,w&65535,w>>16),f+=w>>16,c=Ei}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new As(l,c,this.binaryShiftByteCount+1,f+g);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(o+1)),p}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=jA(l,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new As(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let l=this.bitCount+(N0[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?l+=As.calculateBinaryShiftCost(o)-As.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(l+=10),l<=o.bitCount}toBitArray(o){let l=[];for(let f=this.endBinaryShift(o.length).token;f!==null;f=f.getPrevious())l.unshift(f);let c=new j;for(const f of l)f.appendTo(c,o);return c}toString(){return V.format("%s bits=%d bytes=%d",DA[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}As.INITIAL_STATE=new As(LA,Ei,0,0);function BA(D){const o=V.getCharCode(" "),l=V.getCharCode("."),c=V.getCharCode(",");D[Ei][o]=1;const f=V.getCharCode("Z"),g=V.getCharCode("A");for(let B=g;B<=f;B++)D[Ei][B]=B-g+2;D[ad][o]=1;const p=V.getCharCode("z"),w=V.getCharCode("a");for(let B=w;B<=p;B++)D[ad][B]=B-w+2;D[qr][o]=1;const v=V.getCharCode("9"),S=V.getCharCode("0");for(let B=S;B<=v;B++)D[qr][B]=B-S+2;D[qr][c]=12,D[qr][l]=13;const P=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<P.length;B++)D[ky][V.getCharCode(P[B])]=B;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<L.length;B++)V.getCharCode(L[B])>0&&(D[Cs][V.getCharCode(L[B])]=B);return D}const T0=BA(A.createInt32Array(5,256));class Hl{constructor(o){this.text=o}encode(){const o=V.getCharCode(" "),l=V.getCharCode(`
`);let c=Ay.singletonList(As.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let p,w=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case V.getCharCode("\r"):p=w===l?2:0;break;case V.getCharCode("."):p=w===o?3:0;break;case V.getCharCode(","):p=w===o?4:0;break;case V.getCharCode(":"):p=w===o?5:0;break;default:p=0}p>0?(c=Hl.updateStateListForPair(c,g,p),g++):c=this.updateStateListForChar(c,g)}return Ay.min(c,(g,p)=>g.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,l){const c=[];for(let f of o)this.updateStateForChar(f,l,c);return Hl.simplifyStates(c)}updateStateForChar(o,l,c){let f=this.text[l]&255,g=T0[o.getMode()][f]>0,p=null;for(let w=0;w<=Cs;w++){let v=T0[w][f];if(v>0){if(p==null&&(p=o.endBinaryShift(l)),!g||w===o.getMode()||w===qr){const S=p.latchAndAppend(w,v);c.push(S)}if(!g&&Ny[o.getMode()][w]>=0){const S=p.shiftAndAppend(w,v);c.push(S)}}}if(o.getBinaryShiftByteCount()>0||T0[o.getMode()][f]===0){let w=o.addBinaryShiftChar(l);c.push(w)}}static updateStateListForPair(o,l,c){const f=[];for(let g of o)this.updateStateForPair(g,l,c,f);return this.simplifyStates(f)}static updateStateForPair(o,l,c,f){let g=o.endBinaryShift(l);if(f.push(g.latchAndAppend(Cs,c)),o.getMode()!==Cs&&f.push(g.shiftAndAppend(Cs,c)),c===3||c===4){let p=g.latchAndAppend(qr,16-c).latchAndAppend(qr,1);f.push(p)}if(o.getBinaryShiftByteCount()>0){let p=o.addBinaryShiftChar(l).addBinaryShiftChar(l+1);f.push(p)}}static simplifyStates(o){let l=[];for(const c of o){let f=!0;for(const g of l){if(g.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(g)&&(l=l.filter(p=>p!==g))}f&&l.push(c)}return l}}class vt{constructor(){}static encodeBytes(o){return vt.encode(o,vt.DEFAULT_EC_PERCENT,vt.DEFAULT_AZTEC_LAYERS)}static encode(o,l,c){let f=new Hl(o).encode(),g=I.truncDivision(f.getSize()*l,100)+11,p=f.getSize()+g,w,v,S,P,L;if(c!==vt.DEFAULT_AZTEC_LAYERS){if(w=c<0,v=Math.abs(c),v>(w?vt.MAX_NB_BITS_COMPACT:vt.MAX_NB_BITS))throw new y(V.format("Illegal value %s for layers",c));S=vt.totalBitsInLayer(v,w),P=vt.WORD_SIZE[v];let Ce=S-S%P;if(L=vt.stuffBits(f,P),L.getSize()+g>Ce)throw new y("Data to large for user specified layer");if(w&&L.getSize()>P*64)throw new y("Data to large for user specified layer")}else{P=0,L=null;for(let Ce=0;;Ce++){if(Ce>vt.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(w=Ce<=3,v=w?Ce+1:Ce,S=vt.totalBitsInLayer(v,w),p>S)continue;(L==null||P!==vt.WORD_SIZE[v])&&(P=vt.WORD_SIZE[v],L=vt.stuffBits(f,P));let dt=S-S%P;if(!(w&&L.getSize()>P*64)&&L.getSize()+g<=dt)break}}let B=vt.generateCheckWords(L,S,P),H=L.getSize()/P,K=vt.generateModeMessage(w,v,H),ee=(w?11:14)+v*4,de=new Int32Array(ee),pe;if(w){pe=ee;for(let Ce=0;Ce<de.length;Ce++)de[Ce]=Ce}else{pe=ee+1+2*I.truncDivision(I.truncDivision(ee,2)-1,15);let Ce=I.truncDivision(ee,2),dt=I.truncDivision(pe,2);for(let tt=0;tt<Ce;tt++){let pr=tt+I.truncDivision(tt,15);de[Ce-tt-1]=dt-pr-1,de[Ce+tt]=dt+pr+1}}let ke=new fe(pe);for(let Ce=0,dt=0;Ce<v;Ce++){let tt=(v-Ce)*4+(w?9:12);for(let pr=0;pr<tt;pr++){let us=pr*2;for(let xr=0;xr<2;xr++)B.get(dt+us+xr)&&ke.set(de[Ce*2+xr],de[Ce*2+pr]),B.get(dt+tt*2+us+xr)&&ke.set(de[Ce*2+pr],de[ee-1-Ce*2-xr]),B.get(dt+tt*4+us+xr)&&ke.set(de[ee-1-Ce*2-xr],de[ee-1-Ce*2-pr]),B.get(dt+tt*6+us+xr)&&ke.set(de[ee-1-Ce*2-pr],de[Ce*2+xr])}dt+=tt*8}if(vt.drawModeMessage(ke,w,pe,K),w)vt.drawBullsEye(ke,I.truncDivision(pe,2),5);else{vt.drawBullsEye(ke,I.truncDivision(pe,2),7);for(let Ce=0,dt=0;Ce<I.truncDivision(ee,2)-1;Ce+=15,dt+=16)for(let tt=I.truncDivision(pe,2)&1;tt<pe;tt+=2)ke.set(I.truncDivision(pe,2)-dt,tt),ke.set(I.truncDivision(pe,2)+dt,tt),ke.set(tt,I.truncDivision(pe,2)-dt),ke.set(tt,I.truncDivision(pe,2)+dt)}let Ne=new Cy;return Ne.setCompact(w),Ne.setSize(pe),Ne.setLayers(v),Ne.setCodeWords(H),Ne.setMatrix(ke),Ne}static drawBullsEye(o,l,c){for(let f=0;f<c;f+=2)for(let g=l-f;g<=l+f;g++)o.set(g,l-f),o.set(g,l+f),o.set(l-f,g),o.set(l+f,g);o.set(l-c,l-c),o.set(l-c+1,l-c),o.set(l-c,l-c+1),o.set(l+c,l-c),o.set(l+c,l-c+1),o.set(l+c,l+c-1)}static generateModeMessage(o,l,c){let f=new j;return o?(f.appendBits(l-1,2),f.appendBits(c-1,6),f=vt.generateCheckWords(f,28,4)):(f.appendBits(l-1,5),f.appendBits(c-1,11),f=vt.generateCheckWords(f,40,4)),f}static drawModeMessage(o,l,c,f){let g=I.truncDivision(c,2);if(l)for(let p=0;p<7;p++){let w=g-3+p;f.get(p)&&o.set(w,g-5),f.get(p+7)&&o.set(g+5,w),f.get(20-p)&&o.set(w,g+5),f.get(27-p)&&o.set(g-5,w)}else for(let p=0;p<10;p++){let w=g-5+p+I.truncDivision(p,5);f.get(p)&&o.set(w,g-7),f.get(p+10)&&o.set(g+7,w),f.get(29-p)&&o.set(w,g+7),f.get(39-p)&&o.set(g-7,w)}}static generateCheckWords(o,l,c){let f=o.getSize()/c,g=new E0(vt.getGF(c)),p=I.truncDivision(l,c),w=vt.bitsToWords(o,c,p);g.encode(w,p-f);let v=l%c,S=new j;S.appendBits(0,v);for(const P of Array.from(w))S.appendBits(P,c);return S}static bitsToWords(o,l,c){let f=new Int32Array(c),g,p;for(g=0,p=o.getSize()/l;g<p;g++){let w=0;for(let v=0;v<l;v++)w|=o.get(g*l+v)?1<<l-v-1:0;f[g]=w}return f}static getGF(o){switch(o){case 4:return Oe.AZTEC_PARAM;case 6:return Oe.AZTEC_DATA_6;case 8:return Oe.AZTEC_DATA_8;case 10:return Oe.AZTEC_DATA_10;case 12:return Oe.AZTEC_DATA_12;default:throw new y("Unsupported word size "+o)}}static stuffBits(o,l){let c=new j,f=o.getSize(),g=(1<<l)-2;for(let p=0;p<f;p+=l){let w=0;for(let v=0;v<l;v++)(p+v>=f||o.get(p+v))&&(w|=1<<l-1-v);(w&g)===g?(c.appendBits(w&g,l),p--):w&g?c.appendBits(w,l):(c.appendBits(w|1,l),p--)}return c}static totalBitsInLayer(o,l){return((l?88:112)+16*o)*o}}vt.DEFAULT_EC_PERCENT=33,vt.DEFAULT_AZTEC_LAYERS=0,vt.MAX_NB_BITS=32,vt.MAX_NB_BITS_COMPACT=4,vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ld{encode(o,l,c,f){return this.encodeWithHints(o,l,c,f,null)}encodeWithHints(o,l,c,f,g){let p=A0.ISO_8859_1,w=vt.DEFAULT_EC_PERCENT,v=vt.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(Pn.CHARACTER_SET)&&(p=Ey.forName(g.get(Pn.CHARACTER_SET).toString())),g.has(Pn.ERROR_CORRECTION)&&(w=I.parseInt(g.get(Pn.ERROR_CORRECTION).toString())),g.has(Pn.AZTEC_LAYERS)&&(v=I.parseInt(g.get(Pn.AZTEC_LAYERS).toString()))),ld.encodeLayers(o,l,c,f,p,w,v)}static encodeLayers(o,l,c,f,g,p,w){if(l!==ue.AZTEC)throw new y("Can only encode AZTEC, but got "+l);let v=vt.encode(V.getBytes(o,g),p,w);return ld.renderResult(v,c,f)}static renderResult(o,l,c){let f=o.getMatrix();if(f==null)throw new Xe;let g=f.getWidth(),p=f.getHeight(),w=Math.max(l,g),v=Math.max(c,p),S=Math.min(w/g,v/p),P=(w-g*S)/2,L=(v-p*S)/2,B=new fe(w,v);for(let H=0,K=L;H<p;H++,K+=S)for(let ee=0,de=P;ee<g;ee++,de+=S)f.get(ee,H)&&B.setRegion(de,K,S,S);return B}}n.AbstractExpandedDecoder=Ue,n.ArgumentException=x,n.ArithmeticException=ze,n.AztecCode=Cy,n.AztecCodeReader=Qn,n.AztecCodeWriter=ld,n.AztecDecoder=je,n.AztecDetector=xi,n.AztecDetectorResult=_s,n.AztecEncoder=vt,n.AztecHighLevelEncoder=Hl,n.AztecPoint=kt,n.BarcodeFormat=ue,n.Binarizer=C,n.BinaryBitmap=b,n.BitArray=j,n.BitMatrix=fe,n.BitSource=ha,n.BrowserAztecCodeReader=mr,n.BrowserBarcodeReader=pt,n.BrowserCodeReader=ae,n.BrowserDatamatrixCodeReader=yA,n.BrowserMultiFormatReader=TA,n.BrowserPDF417Reader=IA,n.BrowserQRCodeReader=RA,n.BrowserQRCodeSvgWriter=xo,n.CharacterSetECI=M,n.ChecksumException=_,n.Code128Reader=Te,n.Code39Reader=ln,n.DataMatrixDecodedBitStreamParser=bi,n.DataMatrixReader=vi,n.DecodeHintType=z,n.DecoderResult=Y,n.DefaultGridSampler=yn,n.DetectorResult=Wn,n.EAN13Reader=as,n.EncodeHintType=Pn,n.Exception=h,n.FormatException=O,n.GenericGF=Oe,n.GenericGFPoly=Ee,n.GlobalHistogramBinarizer=be,n.GridSampler=kn,n.GridSamplerInstance=jt,n.HTMLCanvasElementLuminanceSource=J,n.HybridBinarizer=$,n.ITFReader=Ct,n.IllegalArgumentException=y,n.IllegalStateException=Xe,n.InvertedLuminanceSource=ne,n.LuminanceSource=Q,n.MathUtils=We,n.MultiFormatOneDReader=cs,n.MultiFormatReader=Sy,n.MultiFormatWriter=OA,n.NotFoundException=G,n.OneDReader=ft,n.PDF417DecodedBitStreamParser=ge,n.PDF417DecoderErrorCorrection=xy,n.PDF417Reader=$n,n.PDF417ResultMetadata=wy,n.PerspectiveTransform=yt,n.PlanarYUVLuminanceSource=Es,n.QRCodeByteMatrix=od,n.QRCodeDataMask=$r,n.QRCodeDecodedBitStreamParser=en,n.QRCodeDecoderErrorCorrectionLevel=Ut,n.QRCodeDecoderFormatInformation=Jn,n.QRCodeEncoder=Ht,n.QRCodeEncoderQRCode=po,n.QRCodeMaskUtil=un,n.QRCodeMatrixUtil=Ke,n.QRCodeMode=Ye,n.QRCodeReader=_i,n.QRCodeVersion=He,n.QRCodeWriter=ma,n.RGBLuminanceSource=C0,n.RSS14Reader=Dt,n.RSSExpandedReader=Se,n.ReaderException=id,n.ReedSolomonDecoder=Ge,n.ReedSolomonEncoder=E0,n.ReedSolomonException=$e,n.Result=q,n.ResultMetadataType=se,n.ResultPoint=Me,n.StringUtils=V,n.UnsupportedOperationException=U,n.VideoInputDevice=oe,n.WhiteRectangleDetector=gt,n.WriterException=Lt,n.ZXingArrays=A,n.ZXingCharset=Ey,n.ZXingInteger=I,n.ZXingStandardCharsets=A0,n.ZXingStringBuilder=te,n.ZXingStringEncoding=X,n.ZXingSystem=N,n.createAbstractExpandedDecoder=Hr,Object.defineProperty(n,"__esModule",{value:!0})})})(k1,k1.exports);var Gt=k1.exports;const AB=Tf(Gt),kB=q1({__proto__:null,default:AB},[Gt]);var sv=function(){function t(e,n,r){if(this.formatMap=new Map([[Fe.QR_CODE,Gt.BarcodeFormat.QR_CODE],[Fe.AZTEC,Gt.BarcodeFormat.AZTEC],[Fe.CODABAR,Gt.BarcodeFormat.CODABAR],[Fe.CODE_39,Gt.BarcodeFormat.CODE_39],[Fe.CODE_93,Gt.BarcodeFormat.CODE_93],[Fe.CODE_128,Gt.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,Gt.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,Gt.BarcodeFormat.MAXICODE],[Fe.ITF,Gt.BarcodeFormat.ITF],[Fe.EAN_13,Gt.BarcodeFormat.EAN_13],[Fe.EAN_8,Gt.BarcodeFormat.EAN_8],[Fe.PDF_417,Gt.BarcodeFormat.PDF_417],[Fe.RSS_14,Gt.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,Gt.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,Gt.BarcodeFormat.UPC_A],[Fe.UPC_E,Gt.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,Gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!kB)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(e),i=new Map;i.set(Gt.DecodeHintType.POSSIBLE_FORMATS,s),i.set(Gt.DecodeHintType.TRY_HARDER,!1),this.hints=i}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,s){try{r(n.decode(e))}catch(i){s(i)}})},t.prototype.decode=function(e){var n=new Gt.MultiFormatReader(this.verbose,this.hints),r=new Gt.HTMLCanvasElementLuminanceSource(e),s=new Gt.BinaryBitmap(new Gt.HybridBinarizer(r)),i=n.decode(s);return{text:i.text,format:I5.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var i=s[r];this.formatMap.has(i)?n.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),NB=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},TB=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(x){return d([h,x])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(x){h=[6,x],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},iv=function(){function t(e,n,r){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return NB(this,void 0,void 0,function(){var n,r;return TB(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:I5.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,s=0,i=e;s<i.length;s++){var a=i[s],u=a.boundingBox.width*a.boundingBox.height;u>r&&(r=u,n=a)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,s=e;r<s.length;r++){var i=s[r];this.formatMap.has(i)?n.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,s){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),ov=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},av=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(x){return d([h,x])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(x){h=[6,x],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},IB=function(){function t(e,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&iv.isSupported()?(this.primaryDecoder=new iv(e,r,s),this.secondaryDecoder=new sv(e,r,s)):this.primaryDecoder=new sv(e,r,s)}return t.prototype.decodeAsync=function(e){return ov(this,void 0,void 0,function(){var n;return av(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return ov(this,void 0,void 0,function(){var n,r;return av(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];e+=s}var i=e/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Ox=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wf=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},bf=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(x){return d([h,x])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(x){h=[6,x],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},P5=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),RB=function(t){Ox(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(P5),PB=function(t){Ox(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(RB),OB=function(t){Ox(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(P5),MB=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new PB(this.track)},t.prototype.torchFeature=function(){return new OB(this.track)},t}(),jB=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,s=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,s),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,s){return wf(this,void 0,void 0,function(){var i,a;return bf(this,function(u){switch(u.label){case 0:return i=new t(e,n,s),r.aspectRatio?(a={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:u.sent(),u.label=2;case 2:return i.setupSurface(),[2,i]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return wf(this,void 0,void 0,function(){return bf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var s=e.mediaStream.getVideoTracks(),i=s.length,a=0;e.mediaStream.getVideoTracks().forEach(function(u){e.mediaStream.removeTrack(u),u.stop(),++a,a>=i&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new MB(this.getFirstTrackOrFail())},t}(),DB=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return wf(this,void 0,void 0,function(){return bf(this,function(s){return[2,jB.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return wf(this,void 0,void 0,function(){var n,r;return bf(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new t(r)]}})})},t}(),lv=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},cv=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(x){return d([h,x])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(x){h=[6,x],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},LB=function(){function t(){}return t.failIfNotSupported=function(){return lv(this,void 0,void 0,function(){return cv(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return lv(this,void 0,void 0,function(){return cv(this,function(n){return[2,DB.create(e)]})})},t}(),FB=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function u(x){try{h(r.next(x))}catch(y){a(y)}}function d(x){try{h(r.throw(x))}catch(y){a(y)}}function h(x){x.done?i(x.value):s(x.value).then(u,d)}h((r=r.apply(t,e||[])).next())})},BB=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(h){return function(x){return d([h,x])}}function d(h){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,h[0]&&(n=0)),n;)try{if(r=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,s=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){n.label=h[1];break}if(h[0]===6&&n.label<i[1]){n.label=i[1],i=h;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(h);break}i[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(x){h=[6,x],s=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},UB=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ua.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ua.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return FB(this,void 0,void 0,function(){var e,n,r,s,i,a,u;return BB(this,function(d){switch(d.label){case 0:return e=function(h){for(var x=h.getVideoTracks(),y=0,b=x;y<b.length;y++){var _=b[y];_.enabled=!1,_.stop(),h.removeTrack(_)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=d.sent(),s=[],i=0,a=r;i<a.length;i++)u=a[i],u.kind==="videoinput"&&s.push({id:u.deviceId,label:u.label});return e(n),[2,s]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(i){for(var a=[],u=0,d=i;u<d.length;u++){var h=d[u];h.kind==="video"&&a.push({id:h.id,label:h.label})}e(a)},s=MediaStreamTrack;s.getSources(r)})},t}(),dn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(dn||(dn={}));var VB=function(){function t(){this.state=dn.NOT_STARTED,this.onGoingTransactionNewState=dn.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===dn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=dn.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===dn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=dn.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==dn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case dn.UNKNOWN:throw"Transition from unknown is not allowed";case dn.NOT_STARTED:this.failIfNewStateIs(e,[dn.PAUSED]);break;case dn.SCANNING:break;case dn.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,s=n;r<s.length;r++){var i=s[r];if(e===i)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),zB=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===dn.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==dn.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===dn.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===dn.PAUSED},t}(),WB=function(){function t(){}return t.create=function(){return new zB(new VB)},t}(),HB=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pr=function(t){HB(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(SB),$B=function(){function t(e,n){this.logger=n,this.fps=Pr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Pr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?R5.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Xs(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),O5=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new CB(this.verbose),this.qrcode=new IB(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=WB.create()}return t.prototype.start=function(e,n,r,s){var i=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var a;s?a=s:a=this.verbose?this.logger.log:function(){};var u=$B.create(n,this.logger);this.clearElement();var d=!1;u.videoConstraints&&(u.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var h=d,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:Pr.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var y=this,b=this.stateManagerProxy.startTransition(dn.SCANNING);return new Promise(function(_,C){var N=h?u.videoConstraints:y.createVideoConstraints(e);if(!N){b.cancel(),C("videoConstraints should be defined");return}var k={};(!h||u.aspectRatio)&&(k.aspectRatio=u.aspectRatio);var E={onRenderSurfaceReady:function(A,I){y.setupUi(A,I,u),y.isScanning=!0,y.foreverScan(u,r,a)}};LB.failIfNotSupported().then(function(A){A.create(N).then(function(I){return I.render(i.element,k,E).then(function(j){y.renderedCamera=j,b.execute(),_(null)}).catch(function(j){b.cancel(),C(j)})}).catch(function(I){b.cancel(),C(Ua.errorGettingUserMedia(I))})}).catch(function(A){b.cancel(),C(Ua.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(dn.PAUSED),this.showPausedState(),(Xs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(dn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(dn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var i=document.getElementById(Pr.SHADED_REGION_ELEMENT_ID);i&&e.element.removeChild(i)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Xs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var a=new Image;a.onload=function(){var u=a.width,d=a.height,h=document.getElementById(r.elementId),x=h.clientWidth?h.clientWidth:Pr.DEFAULT_WIDTH,y=Math.max(h.clientHeight?h.clientHeight:d,Pr.FILE_SCAN_MIN_HEIGHT),b=r.computeCanvasDrawConfig(u,d,x,y);if(n){var _=r.createCanvasElement(x,y,"qr-canvas-visible");_.style.display="inline-block",h.appendChild(_);var C=_.getContext("2d");if(!C)throw"Unable to get 2d context from canvas";C.canvas.width=x,C.canvas.height=y,C.drawImage(a,0,0,u,d,b.x,b.y,b.width,b.height)}var N=Pr.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(a.width,b.width),E=Math.max(a.height,b.height),A=k+2*N,I=E+2*N,j=r.createCanvasElement(A,I);h.appendChild(j);var F=j.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=A,F.canvas.height=I,F.drawImage(a,0,0,u,d,N,N,k,E);try{r.qrcode.decodeRobustlyAsync(j).then(function(z){s(rv.createFromQrcodeResult(z))}).catch(i)}catch(z){i("QR code parse error, error = ".concat(z))}},a.onerror=i,a.onabort=i,a.onstalled=i,a.onsuspend=i,a.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return UB.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!R5.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,i=e.formatsToSupport;s<i.length;s++){var a=i[s];_B(a)?r.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Xs(e))return!0;if(!Xs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Xs(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Xs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var s=this,i=r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,n,i),u=function(h){if(h<Pr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Pr.MIN_QR_BOX_SIZE,"px.")},d=function(h){return h>e&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),h=e),h};u(a.width),u(a.height),a.width=d(a.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var s=Xs(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(s);var i=this.toQrdimensions(e,n,s);i.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var a=r.isShadedBoxEnabled()&&i.height<=n,u={x:0,y:0,width:e,height:n},d=a?this.getShadedRegionBounds(e,n,i):u,h=this.createCanvasElement(d.width,d.height),x={willReadFrequently:!0},y=h.getContext("2d",x);y.canvas.width=d.width,y.canvas.height=d.height,this.element.append(h),a&&this.possiblyInsertShadingElement(this.element,e,n,i),this.createScannerPausedUiElement(this.element),this.qrRegion=d,this.context=y,this.canvasElement=h},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ua.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return e(s.text,rv.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var i=Ua.codeParseError(s);return n(i,EB.createFrom(i)),!1})},t.prototype.foreverScan=function(e,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),a=i.videoWidth/i.clientWidth,u=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var d=this.qrRegion.width*a,h=this.qrRegion.height*u,x=this.qrRegion.x*a,y=this.qrRegion.y*u;this.context.drawImage(i,x,y,d,h,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(e,n,r)},s.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(_){!_&&e.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){b()})):b()}).catch(function(_){s.logger.logError("Error happend while scanning context",_),b()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},i="exact",a=function(C){if(C in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(C,"'")},u=Object.keys(e);if(u.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(u.length," keys");var d=Object.keys(e)[0];if(d!==n&&d!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(d===n){var h=e.facingMode;if(typeof h=="string"){if(a(h))return{facingMode:h}}else if(typeof h=="object")if(i in h){if(a(h["".concat(i)]))return{facingMode:{exact:h["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var x=typeof h;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var y=e.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(i in y)return{deviceId:{exact:y["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var b=typeof y;throw"Invalid type of 'deviceId' = ".concat(b)}}}var _=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(_)},t.prototype.computeCanvasDrawConfig=function(e,n,r,s){if(e<=r&&n<=s){var i=(r-e)/2,a=(s-n)/2;return{x:i,y:a,width:e,height:n}}else{var u=e,d=n;return e>r&&(n=r/e*n,e=r),n>s&&(e=s/n*e,n=s),this.logger.log("Image downsampled from "+"".concat(u,"X").concat(d)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,s)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Pr.BORDER_SHADER_MATCH_COLOR:Pr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var s=e,i=n,a=document.createElement("canvas");return a.style.width="".concat(s,"px"),a.style.height="".concat(i,"px"),a.style.display="none",a.id=Xs(r)?"qr-canvas":r,a},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,s){if(!(n-s.width<1||r-s.height<1)){var i=document.createElement("div");i.style.position="absolute";var a=(n-s.width)/2,u=(r-s.height)/2;if(i.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Pr.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var d=5,h=40;this.insertShaderBorders(i,h,d,-d,null,0,!0),this.insertShaderBorders(i,h,d,-d,null,0,!1),this.insertShaderBorders(i,h,d,null,-d,0,!0),this.insertShaderBorders(i,h,d,null,-d,0,!1),this.insertShaderBorders(i,d,h+d,-d,null,-d,!0),this.insertShaderBorders(i,d,h+d,null,-d,-d,!0),this.insertShaderBorders(i,d,h+d,-d,null,-d,!1),this.insertShaderBorders(i,d,h+d,null,-d,-d,!1),this.hasBorderShaders=!0}e.append(i)}},t.prototype.insertShaderBorders=function(e,n,r,s,i,a,u){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=Pr.BORDER_SHADER_DEFAULT_COLOR,d.style.width="".concat(n,"px"),d.style.height="".concat(r,"px"),s!==null&&(d.style.top="".concat(s,"px")),i!==null&&(d.style.bottom="".concat(i,"px")),u?d.style.left="".concat(a,"px"):d.style.right="".concat(a,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(d),e.appendChild(d)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),uv;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(uv||(uv={}));const N1=({productId:t,onClose:e,initialCount:n,onOrderLinkClick:r})=>{const[s,i]=T.useState([]),[a,u]=T.useState(""),[d,h]=T.useState(!1),[x,y]=T.useState(null),[b,_]=T.useState(""),[C,N]=T.useState(""),[k,E]=T.useState(n),[A,I]=T.useState(""),[j,F]=T.useState(null),[z,O]=T.useState(!1),[R,M]=T.useState(!1),U=T.useRef(null),X=T.useMemo(()=>s.filter($=>R?!0:$.status==="available").filter($=>$.serial_number.toLowerCase().includes(C.toLowerCase())||$.status.toLowerCase().includes(C.toLowerCase())),[s,C,R]);T.useEffect(()=>{V()},[t]),T.useEffect(()=>{typeof n=="number"?E(n):(async()=>{const{data:$,error:Q}=await we.from("products").select("stock").eq("id",t).single();!Q&&$&&E($.stock)})()},[t,n]),T.useEffect(()=>{let $=null;return z&&U.current&&($=new O5(U.current.id),$.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},Q=>{_(ne=>ne.trim()?ne+`
`+Q:Q),O(!1),$&&$.stop()},()=>{})),()=>{$&&$.stop().catch(()=>{})}},[z]);const V=async()=>{try{const{data:$,error:Q}=await we.from("serial_numbers").select("*").eq("product_id",t).order("created_at",{ascending:!1});if(Q)throw Q;i($||[])}catch($){console.error("Error fetching serial numbers:",$),y("Failed to load serial numbers")}},te=()=>typeof k=="number"?k:void 0,fe=async()=>{const $=b.split(/\r?\n|,|;/).map(Q=>Q.trim()).filter(Boolean);if($.length!==0){h(!0),y(null);try{const Q=$.map(J=>({id:crypto.randomUUID(),product_id:t,serial_number:J,status:"available"})),{error:ne}=await we.from("serial_numbers").insert(Q);if(ne)throw ne;_(""),await V()}catch{y("Failed to add serial numbers")}finally{h(!1)}}},G=s.filter($=>$.status==="available").length,be=te()??0;return m.jsxs("div",{className:"p-0 max-w-lg w-full bg-white rounded-xl shadow-2xl mx-auto flex flex-col relative",style:{maxHeight:"90vh",overflowY:"auto"},children:[m.jsxs("div",{className:"flex justify-between items-center px-6 pt-6 pb-2 border-b border-gray-100 bg-white rounded-t-xl sticky top-0 z-20",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Manage Serial Numbers"}),m.jsxs("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:[m.jsx("span",{className:"sr-only",children:"Close"}),m.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(x||j)&&m.jsx("div",{className:`mx-6 mt-4 mb-2 px-4 py-2 rounded text-sm font-medium ${x?"bg-red-50 text-red-700 border border-red-200":"bg-blue-50 text-blue-700 border border-blue-100"}`,children:x||j}),m.jsx("div",{className:"mx-6 mt-2 mb-4 text-blue-700 font-semibold text-center text-base bg-blue-50 rounded py-2",children:`Available serials: ${G}. Product stock: ${be}.`}),m.jsxs("div",{className:"mx-6 mb-6 bg-gray-50 rounded-lg shadow-sm p-4 relative",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter or Scan Serial Numbers"}),m.jsxs("div",{className:"relative",children:[m.jsx("textarea",{value:b,onChange:$=>_($.target.value),placeholder:"Paste, type, or scan serial numbers (one per line, or separated by comma/semicolon).",className:"w-full rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10 mb-2 resize-y",rows:3}),m.jsx("button",{type:"button",onClick:()=>O(!0),className:"absolute top-2 right-2 p-2 rounded-full hover:bg-blue-100 focus:outline-none transition-colors",title:"Scan with Camera",style:{zIndex:2},children:m.jsx(qu,{className:"h-5 w-5 text-blue-600"})})]}),m.jsx("button",{onClick:fe,disabled:d||!b.trim(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 mt-2",children:"Add Serial Numbers"})]}),m.jsx("div",{className:"mx-6 border-t border-gray-200 mb-4"}),m.jsxs("div",{className:"mx-6 mb-6 bg-white rounded-lg shadow-sm p-0 overflow-x-auto",style:{maxHeight:"32vh",overflowY:"auto"},children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-sm font-medium",children:"Serial Numbers"}),m.jsxs("label",{className:"flex items-center gap-1 text-xs cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:R,onChange:$=>M($.target.checked)}),"Show all (incl. removed/damaged)"]})]}),m.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Serial Number"}),m.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:X.map($=>m.jsxs("tr",{children:[m.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-gray-900 flex items-center gap-2",children:[$.serial_number,m.jsx(GB,{serialId:$.id,compact:!0})]}),m.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:m.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold ${$.status==="available"?"bg-green-100 text-green-800":$.status==="allocated"?"bg-yellow-100 text-yellow-800":$.status==="sold"?"bg-blue-100 text-blue-800":$.status==="returned"?"bg-purple-100 text-purple-800":$.status==="damaged"?"bg-red-100 text-red-800":""}`,children:$.status.charAt(0).toUpperCase()+$.status.slice(1)})}),m.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:$.order_id?m.jsxs("button",{className:"text-blue-600 underline cursor-pointer bg-transparent border-none p-0 text-xs",onClick:()=>r&&r($.order_id),children:["Order: ",$.order_id]}):null})]},$.id))})]})]}),m.jsx("div",{className:"sticky bottom-0 left-0 w-full bg-white rounded-b-xl px-6 pb-6 pt-2 flex justify-end z-30 border-t border-gray-100",children:(()=>{const $=te()??0,Q=s.filter(ne=>ne.status==="available").length;return m.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",disabled:Q<$,onClick:e,children:"Done"})})()}),z&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 flex flex-col items-center shadow-2xl relative",style:{minWidth:340},children:[m.jsxs("button",{onClick:()=>O(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:[m.jsx("span",{className:"sr-only",children:"Close"}),m.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),m.jsx("div",{className:"flex items-center justify-center",style:{width:320,height:320},children:m.jsx("div",{id:"serial-scan-video",ref:U,style:{width:300,height:300,borderRadius:12,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"}})})]})}),d&&m.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-60 flex items-center justify-center z-50 rounded-xl",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500 border-b-4 border-gray-200"})})]})},GB=({serialId:t,compact:e})=>{const[n,r]=T.useState([]),[s,i]=T.useState(!1);return T.useEffect(()=>{(async()=>{const{data:a}=await we.from("serial_number_history").select("*").eq("serial_id",t).order("timestamp",{ascending:!1});r(a||[])})()},[t]),n.length?e?m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"ml-1 text-gray-400 hover:text-blue-600 focus:outline-none",title:"View serial history",onClick:a=>{a.stopPropagation(),i(!0)},children:m.jsx("svg",{className:"inline h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",onClick:()=>i(!1),children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 max-w-xs w-full relative",onClick:a=>a.stopPropagation(),children:[m.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:()=>i(!1),children:m.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.jsx("div",{className:"font-semibold mb-2 text-gray-700 text-sm",children:"Serial Status History"}),m.jsx("ul",{className:"text-xs text-gray-600 max-h-48 overflow-y-auto pr-2",children:n.map((a,u)=>m.jsxs("li",{className:"mb-1",children:[m.jsx("span",{className:"font-medium text-gray-800",children:a.status})," at ",new Date(a.timestamp).toLocaleString(),a.order_id&&m.jsxs("span",{className:"text-blue-600",children:[" (Order: ",a.order_id,")"]})]},u))})]})})]}):m.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[m.jsx("div",{children:"Status History:"}),m.jsx("ul",{children:n.map((a,u)=>m.jsxs("li",{children:[a.status," at ",new Date(a.timestamp).toLocaleString(),a.order_id&&` (Order: ${a.order_id})`]},u))})]}):null},M5=({productId:t,onDone:e,onClose:n})=>{const[r,s]=T.useState([]),[i,a]=T.useState([]),[u,d]=T.useState(!1),[h,x]=T.useState(null),[y,b]=T.useState(""),[_,C]=T.useState("");T.useEffect(()=>{(async()=>{const{data:O,error:R}=await we.from("serial_numbers").select("*").eq("product_id",t).eq("status","available");R?x("Failed to load serial numbers"):s(O||[])})()},[t]);const N=O=>{a(R=>R.includes(O)?R.filter(M=>M!==O):[...R,O])},k=()=>{I.every(O=>i.includes(O.id))?a(i.filter(O=>!I.some(R=>R.id===O))):a([...i,...I.map(O=>O.id).filter(O=>!i.includes(O))])},E=()=>{const O=_.split(/\r?\n|,|;/).map(M=>M.trim()).filter(Boolean),R=r.filter(M=>O.includes(M.serial_number)).map(M=>M.id);a(M=>Array.from(new Set([...M,...R]))),C("")},A=async()=>{if(i.length===0){x("Please select serial numbers to remove.");return}d(!0),x(null);try{const{error:O}=await we.from("serial_numbers").update({status:"damaged"}).in("id",i);if(O)throw console.error("Supabase error:",O),O;e()}catch(O){console.error("Failed to remove serial numbers:",O),x("Failed to remove serial numbers")}finally{d(!1)}},I=r.filter(O=>O.serial_number.toLowerCase().includes(y.toLowerCase())),j=I.length>0&&I.every(O=>i.includes(O.id)),F=i.length,z=I.length;return m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full my-8 max-h-[90vh] overflow-y-auto",children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Remove Serial Numbers"}),m.jsx("p",{className:"mb-2 text-sm text-gray-600",children:"Select serial number(s) to remove:"}),m.jsxs("div",{className:"mb-2 sticky top-0 z-10 bg-white pb-2 flex flex-col gap-2 border-b border-gray-100",children:[m.jsxs("div",{className:"flex gap-2 items-center",children:[m.jsx("input",{type:"text",value:y,onChange:O=>b(O.target.value),placeholder:"Search serials...",className:"px-2 py-1 border rounded text-sm flex-1","aria-label":"Search serials"}),m.jsx("input",{type:"text",value:_,onChange:O=>C(O.target.value),placeholder:"Paste serials (comma, semicolon, or newline separated)...",className:"px-2 py-1 border rounded text-xs flex-1","aria-label":"Paste serials to select",title:"Paste serial numbers separated by comma, semicolon, or newline."}),m.jsx("button",{type:"button",className:"px-2 py-1 bg-blue-500 text-white rounded text-xs",onClick:E,disabled:!_.trim(),title:"Paste and select serials",children:"Paste & Select"})]}),m.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Separate serials with comma, semicolon, or newline."}),m.jsxs("div",{className:"flex gap-2 items-center justify-between mt-1",children:[m.jsxs("label",{className:"flex items-center space-x-2",title:"Select all filtered serials",children:[m.jsx("input",{type:"checkbox",checked:j,onChange:k,disabled:I.length===0}),m.jsx("span",{children:"Select All"})]}),m.jsxs("span",{className:"text-xs text-gray-600",children:[F," selected / ",z," shown"]})]})]}),h&&m.jsx("div",{className:"mb-2 text-red-600",children:h}),m.jsx("div",{className:"mb-4 max-h-48 overflow-y-auto",children:I.map(O=>m.jsxs("label",{className:"flex items-center space-x-2 mb-1",children:[m.jsx("input",{type:"checkbox",value:O.id,checked:i.includes(O.id),onChange:()=>N(O.id)}),m.jsx("span",{children:O.serial_number})]},O.id))}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:n,className:"px-3 py-1 bg-gray-200 rounded",children:"Cancel"}),m.jsx("button",{onClick:A,className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",disabled:i.length===0||u,children:"Confirm"})]})]})})};function qB({product:t,onClose:e,onSuccess:n}){const r=zs(),s=Xt(U=>U.inventory.categories),i=Xt(U=>U.inventory.locations),[a,u]=T.useState(!1),[d,h]=T.useState(null),[x,y]=T.useState(null),[b,_]=T.useState(!1),[C,N]=T.useState(!1),[k,E]=T.useState({name:t.name,description:t.description||"",sku:t.sku,category:t.category,stock:t.stock,cost_price:t.cost_price!==void 0&&t.cost_price!==null?String(t.cost_price):"",selling_price:t.selling_price!==void 0&&t.selling_price!==null?String(t.selling_price):"",location:t.location,reorder_level:t.reorder_level,is_serialized:t.is_serialized});T.useEffect(()=>{r(o0()),r(a0())},[r]);const A=U=>{const{name:X,value:V}=U.target;E(te=>({...te,[X]:X==="stock"||X==="reorder_level"?Number(V)||0:V})),h(null)},I=U=>{const{name:X,value:V}=U.target;let te=V.replace(/^0+(?!\.)/,"");te=te.replace(/[^\d.]/g,""),E(fe=>({...fe,[X]:te}))},j=U=>{const{name:X,value:V}=U.target;let te=parseFloat(V);isNaN(te)&&(te=0);let fe=te<1&&te>0?te.toFixed(2):String(te);fe.includes(".")?/\.\d$/.test(fe)&&(fe+="0"):fe+=".00",E(G=>({...G,[X]:fe}))},F=()=>{},z=U=>{const{value:X}=U.target;E(V=>({...V,reorder_level:Number(X)}))},O=async U=>{U.preventDefault(),u(!0),h(null),y(null);try{if(k.is_serialized){const V=Number(t.stock),te=Number(k.stock);if(te>V){_(!0);return}else if(te<V){N(!0);return}}const{error:X}=await we.from("products").update({name:k.name,description:k.description,category:k.category,cost_price:k.cost_price===""?null:Number(k.cost_price),selling_price:k.selling_price===""?null:Number(k.selling_price),stock:k.is_serialized?Number(t.stock):Number(k.stock),reorder_level:k.reorder_level,is_serialized:k.is_serialized,updated_at:new Date().toISOString()}).eq("id",t.id);if(X)throw X;y("Product updated successfully"),n()}catch(X){console.error("Error updating product:",X),h("Failed to update product")}finally{u(!1)}},R=async()=>{_(!1);const U=new Event("submit");await O(U)},M=async()=>{N(!1);const U=new Event("submit");await O(U)};return m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Edit Product"}),m.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:m.jsx(Il,{className:"h-6 w-6"})})]}),d&&m.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:d}),x&&m.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-md",children:x}),m.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name"}),m.jsx("input",{type:"text",id:"name",name:"name",value:k.name,onChange:A,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,disabled:a})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU"}),m.jsx("input",{type:"text",id:"sku",name:"sku",value:k.sku,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 bg-gray-50 text-gray-500 sm:text-sm",readOnly:!0,disabled:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),m.jsxs("select",{id:"category",name:"category",value:k.category,onChange:A,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,disabled:a,children:[m.jsx("option",{value:"",children:"Select Category"}),s.map(U=>m.jsx("option",{value:U,children:U},U))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),m.jsxs("select",{id:"location",name:"location",value:k.location,onChange:A,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,disabled:a,children:[m.jsx("option",{value:"",children:"Select Location"}),i.map(U=>m.jsx("option",{value:U,children:U},U))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),m.jsx("input",{type:"number",id:"stock",name:"stock",value:k.stock,onChange:A,min:"0",step:"1",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,disabled:k.is_serialized}),k.is_serialized&&m.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Stock is managed automatically based on serial numbers. To change stock, add or remove serial numbers."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"cost_price",className:"block text-sm font-medium text-gray-700",children:"Cost Price"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),m.jsx("input",{type:"text",id:"cost_price",name:"cost_price",min:"0",step:"0.01",placeholder:"0.00",value:k.cost_price===""?"":String(k.cost_price),onChange:I,onBlur:j,onFocus:F,className:"mt-1 block w-full pl-7 border border-gray-300 rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"The price you pay to acquire the product"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"selling_price",className:"block text-sm font-medium text-gray-700",children:"Selling Price"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),m.jsx("input",{type:"text",id:"selling_price",name:"selling_price",min:"0",step:"0.01",placeholder:"0.00",value:k.selling_price===""?"":String(k.selling_price),onChange:I,onBlur:j,onFocus:F,className:`mt-1 block w-full pl-7 border rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${Number(k.selling_price)<=Number(k.cost_price)?"border-red-300":"border-gray-300"}`,required:!0})]}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"The price customers will pay for the product"}),Number(k.selling_price)<=Number(k.cost_price)&&m.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Selling price should be higher than cost price for profit"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reorder_level",className:"block text-sm font-medium text-gray-700",children:"Reorder Level"}),m.jsx("input",{type:"text",id:"reorder_level",name:"reorder_level",value:Number(k.reorder_level)===0?"":String(k.reorder_level??""),onChange:z,min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-right focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),m.jsx("textarea",{id:"description",name:"description",value:k.description,onChange:A,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:a})]})]}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:a,children:"Cancel"}),m.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",disabled:a,children:a?m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"h-4 w-4 mr-2 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Saving..."]}):"Save Changes"})]})]}),b&&m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:m.jsx(N1,{productId:t.id,initialCount:Number(k.stock),onClose:R})}),C&&m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:m.jsx(M5,{productId:t.id,onDone:M,onClose:()=>N(!1)})})]})})}const j5=({onComplete:t,buttonText:e="Scan Barcode"})=>{var J;const{items:n}=Xt(oe=>oe.inventory),[r,s]=T.useState(!1),[i,a]=T.useState(!1),[u,d]=T.useState(null),[h,x]=T.useState(!1),[y,b]=T.useState("camera"),[_,C]=T.useState(""),[N,k]=T.useState(null),[E,A]=T.useState(null),[I,j]=T.useState([]),[F,z]=T.useState(!1),{enableBarcodeScanning:O,isDarkMode:R}=Tl(),M=T.useRef(null),U=T.useRef(null);T.useEffect(()=>(r&&(async()=>{try{const ae=(await navigator.mediaDevices.enumerateDevices()).filter(q=>q.kind==="videoinput");x(ae.length>0)}catch(re){console.error("Error checking camera:",re),x(!1)}})(),()=>{fe()}),[r]),T.useEffect(()=>{r&&y==="camera"&&h&&!F?te():fe()},[r,y,h,F]);const X=()=>{if(!O){d("Barcode scanning is disabled in settings. Enable it in User Settings to use this feature.");return}s(!0),d(null),k(null),A(null),z(!1),b(h?"camera":"manual")},V=()=>{fe(),s(!1),d(null),z(!1),t&&t()},te=async()=>{if(M.current)try{a(!0),d(null);const oe=new O5("scanner-container");U.current=oe;const re={fps:10,qrbox:{width:250,height:250}};await oe.start({facingMode:"environment"},re,ae=>{G(ae)},ae=>{ae.includes("QR code not found")||console.log(`Code scanning error: ${ae}`)})}catch(oe){console.error("Failed to start scanner:",oe),d("Failed to access camera. Please check camera permissions or try manual entry."),a(!1),b("manual")}},fe=()=>{U.current&&U.current.isScanning&&U.current.stop().catch(oe=>{console.error("Error stopping scanner:",oe)}),a(!1)},G=oe=>{fe(),k(oe);const re=n.find(ae=>ae.sku===oe);j(ae=>[{barcode:oe,product:re||null,timestamp:Date.now()},...ae.slice(0,4)]),A(re||null),z(!0)},be=()=>{if(!_.trim()){d("Please enter a barcode");return}G(_.trim()),C("")},$=()=>{k(null),A(null),z(!1),b(h?"camera":"manual"),h&&y==="camera"&&te()},Q=()=>{E&&(V(),localStorage.setItem("adjustStockProduct",JSON.stringify(E)),window.location.href="/inventory")},ne=()=>{N&&(localStorage.setItem("pendingBarcodeSku",N),V(),window.location.href="/products")};return m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:X,disabled:i,className:`
          inline-flex items-center px-4 py-2 border border-transparent 
          text-sm font-medium rounded-md shadow-sm text-white
          ${R?"bg-blue-700 hover:bg-blue-600":"bg-blue-600 hover:bg-blue-700"}
          ${i?"opacity-75 cursor-not-allowed":""}
          transition-colors duration-150 ease-in-out
          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        `,children:[m.jsx(qu,{className:"-ml-1 mr-2 h-5 w-5"}),e]}),u&&!r&&m.jsx("div",{className:`mt-2 text-sm ${R?"text-red-400":"text-red-600"}`,children:u}),r&&m.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),m.jsx("div",{className:`inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full ${R?"bg-gray-800":"bg-white"}`,children:m.jsx("div",{className:`px-4 pt-5 pb-4 sm:p-6 sm:pb-4 ${R?"bg-gray-800 text-white":"bg-white"}`,children:m.jsx("div",{className:"sm:flex sm:items-start",children:m.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:`text-lg leading-6 font-medium ${R?"text-white":"text-gray-900"}`,id:"modal-title",children:F?E?"Product Found":"Product Not Found":"Scan Product Barcode"}),m.jsxs("button",{type:"button",className:`${R?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-500"}`,onClick:V,children:[m.jsx("span",{className:"sr-only",children:"Close"}),m.jsx(Il,{className:"h-6 w-6","aria-hidden":"true"})]})]}),u&&m.jsx("div",{className:`my-2 text-sm ${R?"text-red-400":"text-red-600"}`,children:u}),F&&m.jsx("div",{className:"mt-4",children:m.jsxs("div",{className:`p-4 rounded-md ${E?R?"bg-green-800 bg-opacity-25":"bg-green-50 border border-green-200":R?"bg-yellow-800 bg-opacity-25":"bg-yellow-50 border border-yellow-200"}`,children:[m.jsxs("p",{className:`font-medium ${E?R?"text-green-200":"text-green-800":R?"text-yellow-200":"text-yellow-800"}`,children:["Barcode scanned: ",N]}),E?m.jsxs("div",{className:"mt-2",children:[m.jsxs("p",{className:`text-sm ${R?"text-gray-300":"text-gray-600"}`,children:[m.jsx("span",{className:"font-medium",children:"Product:"})," ",E.name]}),m.jsxs("p",{className:`text-sm ${R?"text-gray-300":"text-gray-600"}`,children:[m.jsx("span",{className:"font-medium",children:"Current Stock:"})," ",E.stock," units"]}),m.jsxs("p",{className:`text-sm ${R?"text-gray-300":"text-gray-600"}`,children:[m.jsx("span",{className:"font-medium",children:"Price:"})," $",((J=E.selling_price)==null?void 0:J.toFixed(2))||"0.00"]}),m.jsx("p",{className:`text-sm mt-3 ${R?"text-gray-300":"text-gray-600"}`,children:"Would you like to adjust stock for this product?"}),m.jsxs("div",{className:"mt-4 flex space-x-3",children:[m.jsx("button",{type:"button",onClick:Q,className:`
                                    flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white
                                    bg-blue-600 hover:bg-blue-700
                                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                                  `,children:"Yes, Adjust Stock"}),m.jsx("button",{type:"button",onClick:$,className:`
                                    flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium
                                    ${R?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-50"}
                                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                                  `,children:"No, Continue Scanning"})]})]}):m.jsxs("div",{className:"mt-2",children:[m.jsx("p",{className:`text-sm ${R?"text-gray-300":"text-gray-600"}`,children:"No product found with this barcode. Would you like to add it as a new product?"}),m.jsxs("div",{className:"mt-4 flex space-x-3",children:[m.jsx("button",{type:"button",onClick:ne,className:`
                                    flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white
                                    bg-blue-600 hover:bg-blue-700
                                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                                  `,children:"Yes, Add New Product"}),m.jsx("button",{type:"button",onClick:$,className:`
                                    flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium
                                    ${R?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-50"}
                                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                                  `,children:"No, Continue Scanning"})]})]})]})}),!F&&m.jsxs("div",{className:"mt-4 flex space-x-4",children:[m.jsxs("button",{type:"button",onClick:()=>b("camera"),disabled:!h,className:`
                            flex-1 py-2 px-4 rounded-md text-sm font-medium 
                            ${y==="camera"?`${R?"bg-blue-600 text-white":"bg-blue-100 text-blue-800"}`:`${R?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`}
                            ${h?"":"opacity-50 cursor-not-allowed"}
                            transition-colors duration-150 ease-in-out
                          `,children:[m.jsx(CO,{className:"h-5 w-5 inline mr-2"}),"Camera"]}),m.jsxs("button",{type:"button",onClick:()=>b("manual"),className:`
                            flex-1 py-2 px-4 rounded-md text-sm font-medium
                            ${y==="manual"?`${R?"bg-blue-600 text-white":"bg-blue-100 text-blue-800"}`:`${R?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`}
                            transition-colors duration-150 ease-in-out
                          `,children:[m.jsx(gC,{className:"h-5 w-5 inline mr-2"}),"Manual Entry"]})]}),y==="camera"&&!F&&m.jsxs("div",{className:"mt-4",children:[h?m.jsx("div",{id:"scanner-container",ref:M,className:"rounded-lg overflow-hidden bg-gray-900 w-full h-64 flex items-center justify-center",children:m.jsx("div",{className:"text-white text-center",children:i?"Position barcode in the camera view":"Starting camera..."})}):m.jsx("div",{className:`p-4 rounded-md ${R?"bg-gray-700":"bg-gray-100"}`,children:m.jsx("p",{className:`text-sm ${R?"text-gray-300":"text-gray-600"}`,children:"No camera detected. Please use manual entry instead."})}),I.length>0&&m.jsxs("div",{className:`mt-4 p-3 rounded-md ${R?"bg-gray-700":"bg-gray-100"}`,children:[m.jsx("h4",{className:`text-sm font-medium mb-2 ${R?"text-gray-200":"text-gray-700"}`,children:"Recent Scans"}),m.jsx("div",{className:"max-h-32 overflow-y-auto",children:I.map((oe,re)=>m.jsxs("div",{className:`
                                    flex items-center justify-between py-1 text-xs
                                    ${re>0?"border-t border-opacity-25":""}
                                    ${R?"border-gray-600":"border-gray-300"}
                                  `,children:[m.jsx("div",{children:m.jsx("span",{className:`font-medium ${R?"text-gray-200":"text-gray-700"}`,children:oe.barcode})}),m.jsx("div",{children:oe.product?m.jsxs("span",{className:`px-2 py-1 rounded-full ${R?"bg-green-800 text-green-100":"bg-green-100 text-green-800"}`,children:["Found: ",oe.product.name]}):m.jsx("span",{className:`px-2 py-1 rounded-full ${R?"bg-yellow-800 text-yellow-100":"bg-yellow-100 text-yellow-800"}`,children:"Not Found"})})]},re))})]})]}),y==="manual"&&!F&&m.jsx("div",{className:"mt-4",children:m.jsxs("div",{className:`p-4 rounded-md ${R?"bg-gray-700":"bg-gray-100"}`,children:[m.jsx("label",{htmlFor:"manual-barcode",className:`block text-sm font-medium ${R?"text-gray-300":"text-gray-700"} mb-2`,children:"Enter Barcode Manually"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("input",{type:"text",id:"manual-barcode",value:_,onChange:oe=>C(oe.target.value),className:`
                                block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
                                ${R?"bg-gray-600 border-gray-500 text-white":""}
                              `,placeholder:"Enter barcode number",onKeyDown:oe=>{oe.key==="Enter"&&be()}}),m.jsx("button",{type:"button",onClick:be,className:`
                                inline-flex items-center px-4 py-2 border border-transparent 
                                text-sm font-medium rounded-md shadow-sm text-white
                                bg-blue-600 hover:bg-blue-700
                                focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
                              `,children:"Submit"})]})]})})]})})})})]})})]})};function Yc(t,e,n){const r=e>0?e:n;return t===0?"Out of Stock":t<=r?"Low Stock":"In Stock"}const YB=()=>{const t=zs(),{items:e,loading:n,categories:r,locations:s,error:i}=Xt(se=>se.inventory),a=Xt(se=>se.settings),{formatPrice:u,companyName:d}=Tl(),h=Hs(),x=Ws(),[y,b]=T.useState(""),[_,C]=T.useState("all"),[N,k]=T.useState("all"),[E,A]=T.useState(!1),[I,j]=T.useState(null),[F,z]=T.useState(1),[O,R]=T.useState(null),[M,U]=T.useState(null),[X,V]=T.useState(""),[te,fe]=T.useState({}),[G,be]=T.useState(null),[$,Q]=T.useState(null);T.useEffect(()=>{t(ns()),t(o0()),t(a0())},[t]),T.useEffect(()=>{const se=localStorage.getItem("pendingBarcodeSku");if(se){localStorage.removeItem("pendingBarcodeSku");const Y=localStorage.getItem("pendingProductData");localStorage.removeItem("pendingProductData");let ye={};if(Y)try{ye=JSON.parse(Y)}catch(Ee){console.error("Error parsing pending product data:",Ee)}V(se),fe(ye),A(!0)}},[]),T.useEffect(()=>{z(1)},[y,_,N,a.itemsPerPage]);const ne=e.filter(se=>{var Y;if(se.id.startsWith("GHOST-")||se.name.startsWith("[DELETED]")||se.sku.startsWith("DELETED-"))return!1;if(y){const ye=y.toLowerCase(),Ee=se.name.toLowerCase().includes(ye),ze=se.sku.toLowerCase().includes(ye),Oe=(Y=se.description)==null?void 0:Y.toLowerCase().includes(ye);if(!Ee&&!ze&&!Oe)return!1}return!(_!=="all"&&se.category!==_||N!=="all"&&se.location!==N)}).sort((se,Y)=>new Date(Y.created_at).getTime()-new Date(se.created_at).getTime()),J=ne.slice((F-1)*a.itemsPerPage,F*a.itemsPerPage),oe=Math.ceil(ne.length/a.itemsPerPage),re=async se=>{if(window.confirm("Are you sure you want to delete this product? This action cannot be undone."))try{R(se),U(null),await t(ZE(se)).unwrap();const Y=e.filter(Ee=>Ee.id!==se),ye=Math.ceil(Y.length/a.itemsPerPage);F>ye?z(ye||1):Y.length%a.itemsPerPage===0&&F===ye&&F>1&&z(F-1)}catch(Y){console.error("Failed to delete product:",Y),U("Failed to delete product. Please try again.")}finally{R(null)}},ae=async()=>{if(window.confirm("Are you sure you want to clear ALL products? This action cannot be undone and will also remove all related stock adjustments and order items."))try{await t(sx()).unwrap(),z(1),b(""),C("all"),k("all")}catch(se){console.error("Failed to clear products:",se),U("Failed to clear all products. Please try again.")}},q=se=>{t(GP(se)),z(1)},le=se=>{A(!1),se.is_serialized&&se.stock>0&&Q(se)},ue=se=>{be(null),setTimeout(()=>{h(`/orders?orderId=${se}`)},200)};T.useEffect(()=>{const Y=new URLSearchParams(x.search).get("manageSerialsFor");if(Y&&e.length>0){const ye=e.find(Ee=>Ee.id===Y);ye&&be(ye)}},[x.search,e]);const Pe=async()=>{if(G)try{const{data:Y,error:ye}=await we.from("serial_numbers").select("*").eq("product_id",G.id).eq("status","available");if(ye)throw ye;if(Y){const Ee=Y.length;Ee!==G.stock&&await t(sf({id:G.id,stock:Ee,adjustment_reason:`Stock synced to serials (${Ee})`})).unwrap()}}catch(Y){console.error("Failed to update stock after adding serials:",Y)}be(null);const se=new URLSearchParams(x.search);se.delete("manageSerialsFor"),h({search:se.toString()},{replace:!0})};return n?m.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading..."}):i?m.jsxs("div",{className:"text-red-600",children:["Error: ",i]}):m.jsx("div",{className:`${a.darkMode?"bg-[#121212] text-white":"bg-white"}`,children:m.jsxs("div",{className:`px-4 sm:px-6 lg:px-8 py-6 ${a.darkMode?"text-white":"text-gray-900"}`,children:[m.jsxs("div",{className:"sm:flex sm:items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:`text-2xl font-bold tracking-tight ${a.darkMode?"text-white":"text-gray-900"} mb-1`,children:[d," Products"]}),m.jsx("p",{className:`text-sm ${a.darkMode?"text-gray-300":"text-gray-700"}`,children:"A list of all products in your inventory"})]}),m.jsxs("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none flex flex-wrap gap-2",children:[m.jsxs("button",{onClick:()=>A(!0),className:"inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto transition-colors",children:[m.jsx(ox,{className:"h-4 w-4 mr-2"}),"Add Product"]}),m.jsx(j5,{buttonText:"Scan Barcode",onComplete:()=>t(ns())}),m.jsxs("button",{onClick:ae,className:"inline-flex items-center justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:w-auto transition-colors",children:[m.jsx(fl,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})]}),m.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-5",children:[m.jsxs("div",{className:"relative rounded-md shadow",children:[m.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:m.jsx(l0,{className:`h-5 w-5 ${a.darkMode,"text-gray-400"}`})}),m.jsx("input",{type:"text",value:y,onChange:se=>b(se.target.value),className:`block w-full rounded-md pl-10 focus:border-blue-500 focus:ring-blue-500 sm:text-sm ${a.darkMode?"bg-[#2d2d2d] border-[#3d3d3d] text-white placeholder-gray-500":"border-gray-300 text-gray-900"}`,placeholder:"Search products..."})]}),m.jsxs("select",{value:_,onChange:se=>C(se.target.value),className:`block w-full rounded-md focus:border-blue-500 focus:ring-blue-500 sm:text-sm ${a.darkMode?"bg-[#2d2d2d] border-[#3d3d3d] text-white":"border-gray-300 text-gray-900"}`,children:[m.jsx("option",{value:"all",children:"All Categories"}),r.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("select",{value:N,onChange:se=>k(se.target.value),className:`block w-full rounded-md focus:border-blue-500 focus:ring-blue-500 sm:text-sm ${a.darkMode?"bg-[#2d2d2d] border-[#3d3d3d] text-white":"border-gray-300 text-gray-900"}`,children:[m.jsx("option",{value:"all",children:"All Locations"}),s.map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsxs("select",{value:a.itemsPerPage,onChange:se=>q(Number(se.target.value)),className:`block w-full rounded-md focus:border-blue-500 focus:ring-blue-500 sm:text-sm ${a.darkMode?"bg-[#2d2d2d] border-[#3d3d3d] text-white":"border-gray-300 text-gray-900"}`,children:[m.jsx("option",{value:5,children:"5 per page"}),m.jsx("option",{value:10,children:"10 per page"}),m.jsx("option",{value:20,children:"20 per page"}),m.jsx("option",{value:50,children:"50 per page"})]})]}),M&&m.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:M}),m.jsx("div",{className:`mt-8 flex flex-col ${a.darkMode?"bg-[#1e1e1e]":"bg-white"} shadow-xl overflow-hidden sm:rounded-lg border ${a.darkMode?"border-[#3d3d3d]":"border-gray-200"}`,children:m.jsx("div",{className:"overflow-x-auto",children:m.jsx("div",{className:"inline-block min-w-full align-middle",children:m.jsxs("table",{className:`min-w-full divide-y ${a.darkMode?"divide-[#3d3d3d]":"divide-gray-200"}`,children:[m.jsx("thead",{className:`${a.darkMode?"bg-[#272727]":"bg-gray-50"}`,children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",className:`py-3.5 pl-4 pr-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"Product"}),m.jsx("th",{scope:"col",className:`py-3.5 px-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"SKU"}),m.jsx("th",{scope:"col",className:`py-3.5 px-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"Category"}),m.jsx("th",{scope:"col",className:`py-3.5 px-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"Location"}),m.jsx("th",{scope:"col",className:`py-3.5 px-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"Stock"}),m.jsx("th",{scope:"col",className:`py-3.5 px-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"Price"}),m.jsx("th",{scope:"col",className:`py-3.5 px-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"Value"}),m.jsx("th",{scope:"col",className:`py-3.5 px-3 text-left text-sm font-semibold ${a.darkMode?"text-gray-200":"text-gray-900"} uppercase tracking-wider`,children:"Serialized?"}),m.jsx("th",{scope:"col",className:`relative py-3.5 pl-3 pr-4 ${a.darkMode?"text-gray-200":"text-gray-900"}`,children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{className:`divide-y ${a.darkMode?"divide-[#3d3d3d]":"divide-gray-200"}`,children:J.map(se=>m.jsxs("tr",{className:`${a.darkMode?"hover:bg-[#2a2a2a] transition-colors":"hover:bg-gray-50"}`,children:[m.jsx("td",{className:`whitespace-nowrap py-4 pl-4 pr-3 text-sm ${a.darkMode?"text-gray-200":"text-gray-900"}`,children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:`h-10 w-10 flex-shrink-0 rounded-md ${a.darkMode?"bg-blue-900/20":"bg-blue-100"} flex items-center justify-center`,children:m.jsx(dM,{className:`h-6 w-6 ${a.darkMode?"text-blue-400":"text-blue-600"}`})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("div",{className:`font-medium ${a.darkMode?"text-white":"text-gray-900"}`,children:se.name}),m.jsx("div",{className:`text-xs ${a.darkMode?"text-gray-400":"text-gray-500"}`,children:se.description})]})]})}),m.jsx("td",{className:`whitespace-nowrap py-4 px-3 text-sm ${a.darkMode?"text-gray-300":"text-gray-500"}`,children:se.sku}),m.jsx("td",{className:`whitespace-nowrap py-4 px-3 text-sm ${a.darkMode?"text-gray-300":"text-gray-500"}`,children:se.category}),m.jsx("td",{className:`whitespace-nowrap py-4 px-3 text-sm ${a.darkMode?"text-gray-300":"text-gray-500"}`,children:se.location}),m.jsx("td",{className:"whitespace-nowrap py-4 px-3 text-sm",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium leading-5 ${Yc(se.stock,se.reorder_level||0,a.lowStockThreshold||5)==="Out of Stock"?a.darkMode?"bg-red-900/30 text-red-400":"bg-red-100 text-red-800":Yc(se.stock,se.reorder_level||0,a.lowStockThreshold||5)==="Low Stock"?a.darkMode?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800":a.darkMode?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"} mr-2`,children:Yc(se.stock,se.reorder_level||0,a.lowStockThreshold||5)}),m.jsx("span",{className:`${a.darkMode?"text-gray-300":"text-gray-500"}`,children:se.stock})]})}),m.jsx("td",{className:`whitespace-nowrap py-4 px-3 text-sm ${a.darkMode?"text-gray-300":"text-gray-500"}`,children:u(se.selling_price??0)}),m.jsx("td",{className:`whitespace-nowrap py-4 px-3 text-sm ${a.darkMode?"text-gray-300":"text-gray-500"}`,children:u(se.stock*(se.selling_price??0))}),m.jsx("td",{className:`whitespace-nowrap py-4 px-3 text-sm ${a.darkMode?"text-gray-300":"text-gray-500"}`,children:String(se.is_serialized)}),m.jsx("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium",children:m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsxs("button",{onClick:()=>j(se),className:`inline-flex items-center p-1.5 rounded-md transition-colors ${a.darkMode?"text-blue-400 hover:text-blue-300 hover:bg-blue-900/30":"text-blue-600 hover:text-blue-900 hover:bg-blue-50"}`,disabled:O===se.id,title:"Edit product",children:[m.jsx(gC,{className:"h-5 w-5"}),m.jsx("span",{className:"sr-only",children:"Edit"})]}),m.jsxs("button",{onClick:()=>re(se.id),className:`inline-flex items-center p-1.5 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${a.darkMode?"text-red-400 hover:text-red-300 hover:bg-red-900/30":"text-red-600 hover:text-red-900 hover:bg-red-50"}`,disabled:O===se.id,title:"Delete product",children:[O===se.id?m.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-b-2 border-red-600"}):m.jsx(ax,{className:"h-5 w-5"}),m.jsx("span",{className:"sr-only",children:"Delete"})]}),se.is_serialized&&m.jsx("button",{onClick:()=>be(se),className:"text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 rounded-md p-2 transition-colors",title:"View Serials",children:m.jsx(qu,{className:"h-5 w-5"})})]})})]},se.id))})]})})})}),m.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[m.jsxs("div",{className:`flex-1 text-sm ${a.darkMode?"text-gray-300":"text-gray-700"}`,children:["Showing ",m.jsx("span",{className:"font-medium",children:(F-1)*a.itemsPerPage+1})," to"," ",m.jsx("span",{className:"font-medium",children:Math.min(F*a.itemsPerPage,ne.length)})," ","of ",m.jsx("span",{className:"font-medium",children:ne.length})," products"]}),m.jsxs("div",{className:"flex space-x-1",children:[m.jsx("button",{onClick:()=>z(se=>Math.max(1,se-1)),disabled:F===1,className:`relative inline-flex items-center rounded-md px-3 py-2 text-sm font-medium ${a.darkMode?"bg-[#2d2d2d] text-gray-300 border-[#3d3d3d] hover:bg-[#3d3d3d] disabled:opacity-50 disabled:hover:bg-[#2d2d2d]":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50"} border transition-colors`,children:m.jsx(ix,{className:"h-5 w-5","aria-hidden":"true"})}),[...Array(oe)].map((se,Y)=>{const ye=Y+1,Ee=ye===F,ze=Math.abs(ye-F)<=1,Oe=ye===1,$e=ye===oe;return Ee||ze||Oe||$e?m.jsxs(_l.Fragment,{children:[!ze&&!Oe&&ye===F-2&&m.jsx("span",{className:`relative inline-flex items-center px-4 py-2 text-sm font-medium ${a.darkMode?"bg-[#2d2d2d] text-gray-400 border-[#3d3d3d]":"bg-white text-gray-700 border-gray-300"} border`,children:"..."}),m.jsx("button",{onClick:()=>z(ye),className:`relative inline-flex items-center px-4 py-2 text-sm font-medium border transition-colors ${Ee?(a.darkMode,"z-10 bg-blue-600 text-white border-blue-600"):a.darkMode?"bg-[#2d2d2d] text-gray-300 border-[#3d3d3d] hover:bg-[#3d3d3d]":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:ye}),!ze&&!$e&&ye===F+2&&m.jsx("span",{className:`relative inline-flex items-center px-4 py-2 text-sm font-medium ${a.darkMode?"bg-[#2d2d2d] text-gray-400 border-[#3d3d3d]":"bg-white text-gray-700 border-gray-300"} border`,children:"..."})]},ye):null}),m.jsx("button",{onClick:()=>z(se=>Math.min(oe,se+1)),disabled:F===oe,className:`relative inline-flex items-center rounded-md px-3 py-2 text-sm font-medium ${a.darkMode?"bg-[#2d2d2d] text-gray-300 border-[#3d3d3d] hover:bg-[#3d3d3d] disabled:opacity-50 disabled:hover:bg-[#2d2d2d]":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50 disabled:opacity-50"} border transition-colors`,children:m.jsx(mC,{className:"h-5 w-5","aria-hidden":"true"})})]})]}),E&&m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:m.jsx("div",{className:`bg-white rounded-lg p-6 max-w-2xl w-full ${a.darkMode?"bg-gray-800 text-white":"bg-white"}`,children:m.jsx(vB,{onClose:()=>A(!1),initialSku:X,initialProductData:te,onProductCreated:le})})}),I&&m.jsx(qB,{product:I,onClose:()=>j(null),onSuccess:()=>{}}),G&&m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:m.jsx(N1,{productId:G.id,onClose:Pe,onOrderLinkClick:ue})}),$&&m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:m.jsx(N1,{productId:$.id,initialCount:$.stock,onClose:()=>Q(null)})})]})})};class Mx{constructor(e){Object.defineProperty(this,"supabase",{enumerable:!0,configurable:!0,writable:!0,value:we}),Object.defineProperty(this,"table",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.table=e}async getAll(){const{data:e,error:n}=await this.supabase.from(this.table).select("*").order("created_at",{ascending:!1});if(n)throw console.error(`Error fetching ${this.table}:`,n),new Error(`Failed to fetch ${this.table}`);return e}async getById(e){const{data:n,error:r}=await this.supabase.from(this.table).select("*").eq("id",e).single();if(r)throw console.error(`Error fetching ${this.table} by ID:`,r),new Error(`Failed to fetch ${this.table} by ID`);return n}async create(e){const{data:n,error:r}=await this.supabase.from(this.table).insert([e]).select().single();if(r)throw console.error(`Error creating ${this.table}:`,r),new Error(`Failed to create ${this.table}`);return n}async update(e,n){const{data:r,error:s}=await this.supabase.from(this.table).update(n).eq("id",e).select().single();if(s)throw console.error(`Error updating ${this.table}:`,s),new Error(`Failed to update ${this.table}`);return r}async delete(e){const{error:n}=await this.supabase.from(this.table).delete().eq("id",e);if(n)throw console.error(`Error deleting ${this.table}:`,n),new Error(`Failed to delete ${this.table}`)}async getWithRelations(e){const{data:n,error:r}=await this.supabase.from(this.table).select(`*, ${e.join(", ")}`).order("created_at",{ascending:!1});if(r)throw r;return n}}class XB extends Mx{constructor(){super("products")}async create(e){try{const{data:n,error:r}=await we.from("products").insert(e).select().single();if(r)throw console.error("Supabase error:",r),new Error(r.message);if(!n)throw new Error("No data returned from Supabase");return n}catch(n){throw console.error("Create product error:",n),n}}async getLowStock(){const{data:e,error:n}=await we.from(this.table).select("*").lte("stock","reorder_level").order("stock",{ascending:!0});if(n)throw n;return e}async getOutOfStock(){const{data:e,error:n}=await we.from(this.table).select("*").eq("stock",0);if(n)throw n;return e}async search(e){const{data:n,error:r}=await we.from(this.table).select("*").or(`name.ilike.%${e}%,sku.ilike.%${e}%`).order("name",{ascending:!0});if(r)throw r;return n}async updateStock(e,n,r,s){const{data:i}=await this.getById(e);if(!i)throw new Error("Product not found");const a=r==="in"?i.stock+n:i.stock-n;if(a<0)throw new Error("Insufficient stock");const{error:u}=await we.from("stock_adjustments").insert({product_id:e,quantity:n,type:r,reason:s});if(u)throw u;return this.update(e,{stock:a})}async getBySku(e){try{const{data:n,error:r}=await we.from("products").select("*").eq("sku",e).single();if(r)throw console.error("Supabase error:",r),new Error(r.message);return n}catch(n){throw console.error("Get product by SKU error:",n),n}}}new XB;class KB extends Mx{constructor(){super("orders")}async getWithItems(){console.log("Fetching orders with items...");try{const{data:e,error:n}=await this.supabase.from("orders").select(`
          *,
          order_items (
            id,
            product_id,
            quantity,
            price,
            product:products (*)
          )
        `).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching orders:",n),new Error("Failed to fetch orders");return console.log(`Successfully fetched ${(e==null?void 0:e.length)||0} orders`),e||[]}catch(e){throw console.error("Error in getWithItems:",e),e}}async createWithItems(e,n){console.log("Creating new order with items:",{order:e,items:n});try{const r=n.reduce((y,b)=>y+b.quantity,0),s=n.reduce((y,b)=>y+b.quantity*b.price,0),{data:i,error:a}=await this.supabase.from("orders").insert([{...e,total_items:r,total_amount:s}]).select().single();if(a||!i)throw console.error("Error creating order:",a),new Error("Failed to create order");console.log("Order created successfully:",i);const u=n.map(y=>({order_id:i.id,product_id:y.product_id,quantity:y.quantity,price:y.price})),{error:d}=await this.supabase.from("order_items").insert(u);if(d)throw console.error("Error creating order items:",d),await this.supabase.from("orders").delete().eq("id",i.id),new Error("Failed to create order items");console.log("Order items created successfully");const{data:h,error:x}=await this.supabase.from("orders").select(`
          *,
          order_items (
            id,
            product_id,
            quantity,
            price,
            product:products (*)
          )
        `).eq("id",i.id).single();if(x||!h)throw console.error("Error fetching complete order:",x),new Error("Failed to fetch complete order");return console.log("Complete order fetched successfully:",h),h}catch(r){throw console.error("Error in createWithItems:",r),r}}async updateStatus(e,n){console.log("Updating order status:",{id:e,status:n});try{const{error:r}=await this.supabase.from("orders").update({status:n}).eq("id",e);if(r)throw console.error("Error updating order status:",r),new Error("Failed to update order status");console.log("Order status updated successfully");const{data:s,error:i}=await this.supabase.from("orders").select(`
          *,
          order_items (
            id,
            product_id,
            quantity,
            price,
            product:products (*)
          )
        `).eq("id",e).single();if(i)throw console.error("Error fetching updated order:",i),new Error("Failed to fetch updated order");return console.log("Updated order fetched successfully:",s),s}catch(r){throw console.error("Error in updateStatus:",r),r}}async getByDateRange(e,n){console.log("Fetching orders by date range:",{startDate:e,endDate:n});try{const{data:r,error:s}=await this.supabase.from("orders").select("*").gte("created_at",e.toISOString()).lte("created_at",n.toISOString()).order("created_at",{ascending:!1});if(s)throw console.error("Error fetching orders by date range:",s),new Error("Failed to fetch orders by date range");return console.log(`Successfully fetched ${(r==null?void 0:r.length)||0} orders in date range`),r||[]}catch(r){throw console.error("Error in getByDateRange:",r),r}}async getByStatus(e){console.log("Fetching orders by status:",e);try{const{data:n,error:r}=await this.supabase.from("orders").select("*").eq("status",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching orders by status:",r),new Error("Failed to fetch orders by status");return console.log(`Successfully fetched ${(n==null?void 0:n.length)||0} orders with status ${e}`),n||[]}catch(n){throw console.error("Error in getByStatus:",n),n}}}const dv=new KB;class ZB extends Mx{constructor(){super("stock_adjustments")}async getWithProducts(){const{data:e,error:n}=await we.from(this.table).select(`
        *,
        product: products (
          name,
          sku,
          quantity,
          minimum_quantity
        )
      `).order("created_at",{ascending:!1});if(n)throw n;return e}async createAdjustment(e){const{data:n,error:r}=await we.from("products").select("*").eq("id",e.product_id).single();if(r)throw r;if(!n)throw new Error("Product not found");const s=e.adjustment_type==="in"?n.stock+e.quantity:n.stock-e.quantity;if(s<0)throw new Error("Insufficient stock");const{data:i,error:a}=await we.from(this.table).insert({product_id:e.product_id,quantity:e.quantity,adjustment_type:e.adjustment_type,reason:e.reason,previous_quantity:n.stock,new_quantity:s}).select().single();if(a)throw a;const{error:u}=await we.from("products").update({stock:s}).eq("id",e.product_id);if(u)throw await this.delete(i.id),u;return this.getWithProducts().then(d=>d.find(h=>h.id===i.id))}async getByProduct(e){const{data:n,error:r}=await we.from(this.table).select(`
        *,
        product: products (
          name,
          sku,
          quantity,
          minimum_quantity
        )
      `).eq("product_id",e).order("created_at",{ascending:!1});if(r)throw r;return n}async getByDateRange(e,n){const{data:r,error:s}=await we.from(this.table).select(`
        *,
        product: products (
          name,
          sku,
          quantity,
          minimum_quantity
        )
      `).gte("created_at",e).lte("created_at",n).order("created_at",{ascending:!1});if(s)throw s;return r}async getByType(e){const{data:n,error:r}=await we.from(this.table).select(`
        *,
        product: products (
          name,
          sku,
          stock,
          reorder_level
        )
      `).eq("adjustment_type",e).order("created_at",{ascending:!1});if(r)throw r;return n}}new ZB;function QB({onClose:t}){const e=zs(),n=Xt(V=>V.inventory.items),[r,s]=T.useState(""),[i,a]=T.useState([]),[u,d]=T.useState(""),[h,x]=T.useState(1),[y,b]=T.useState(!1),[_,C]=T.useState(null),[N,k]=T.useState(null),[E,A]=T.useState([]),[I,j]=T.useState([]);T.useEffect(()=>{e(ns())},[e]);const F=V=>V.trim()?V.trim().length<2?"Customer name must be at least 2 characters":V.trim().length>50?"Customer name must be less than 50 characters":null:"Customer name is required",z=(V,te)=>{const fe=n.find($=>$.id===V);if(!fe)return"Product not found";const G=i.find($=>$.product_id===V);return((G==null?void 0:G.quantity)||0)+te>fe.stock?`Insufficient stock. Only ${fe.stock} units available.`:te<=0?"Quantity must be greater than 0":null},O=async()=>{if(!u){C("Please select a product");return}const V=n.find(G=>G.id===u);if(!V){C("Selected product not found");return}if(V.is_serialized){const{data:G}=await we.from("serial_numbers").select("id, serial_number").eq("product_id",V.id).eq("status","available");A(G||[]),j([]),k({productId:V.id,quantity:h,onDone:be=>{const $={product_id:V.id,quantity:h,price:typeof V.selling_price=="number"?V.selling_price:0,serial_numbers:be};a(Q=>[...Q,$]),k(null),d(""),x(1),C(null)}});return}const te=z(u,h);if(te){C(te);return}const fe=i.findIndex(G=>G.product_id===u);if(fe!==-1){const G=[...i];G[fe].quantity+=h,a(G)}else{const G={product_id:V.id,quantity:h,price:typeof V.selling_price=="number"?V.selling_price:0};a(be=>[...be,G])}d(""),x(1),C(null)},R=V=>{a(te=>te.filter((fe,G)=>G!==V))},M=()=>i.reduce((V,te)=>{const fe=te.price*te.quantity;return{items:V.items+te.quantity,amount:V.amount+fe}},{items:0,amount:0}),U=async V=>{V.preventDefault();const te=F(r);if(te){C(te);return}if(i.length===0){C("Please add at least one item to the order");return}b(!0),C(null);try{const{items:fe,amount:G}=M(),be=await e(tC({customer:r.trim(),status:"pending",total_items:fe,total_amount:G,items:i})).unwrap();console.log("Order created successfully:",be),t()}catch(fe){console.error("Failed to create order:",fe),C(fe instanceof Error?fe.message:"Failed to create order. Please try again.")}finally{b(!1)}},X=V=>n.find(te=>te.id===V);return m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Add New Order"}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:m.jsx(Il,{className:"h-6 w-6"})})]}),_&&m.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md",children:_}),m.jsxs("form",{onSubmit:U,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer",className:"block text-sm font-medium text-gray-700",children:"Customer Name"}),m.jsx("input",{type:"text",id:"customer",value:r,onChange:V=>{s(V.target.value),C(null)},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Items"}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsxs("select",{value:u,onChange:V=>{d(V.target.value),C(null)},className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[m.jsx("option",{value:"",children:"Select Product"}),n.map(V=>{var G;const te=i.find(be=>be.product_id===V.id),fe=V.stock-((te==null?void 0:te.quantity)||0);return m.jsxs("option",{value:V.id,disabled:fe<=0,children:[V.name," - $",((G=V.selling_price)==null?void 0:G.toFixed(2))||"0.00"," (Stock: ",fe,")"]},V.id)})]}),(()=>{var fe;const V=n.find(G=>G.id===u),te=V?V.stock-(((fe=i.find(G=>G.product_id===u))==null?void 0:fe.quantity)||0):1;return m.jsx("input",{type:"number",min:"1",max:te,value:h,onChange:G=>{x(parseInt(G.target.value)||0),C(null)},className:"block w-32 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Qty"})})(),m.jsx("button",{type:"button",onClick:O,disabled:!u||h<=0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Add"})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Order Items"}),m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),m.jsx("th",{scope:"col",className:"relative px-6 py-3",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[i.map((V,te)=>{const fe=X(V.product_id);return m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:fe==null?void 0:fe.name}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V.quantity}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",V.price.toFixed(2)]}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",(V.quantity*V.price).toFixed(2)]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsx("button",{type:"button",onClick:()=>R(te),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},te)}),i.length===0&&m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items added yet"})})]}),i.length>0&&m.jsx("tfoot",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("td",{colSpan:3,className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"Total:"}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",M().amount.toFixed(2)]}),m.jsx("td",{})]})})]})})]}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:y||i.length===0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:y?"Creating...":"Create Order"})]})]}),N!==null&&m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select Serial Numbers"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-600",children:["Select ",N.quantity," serial number(s):"]}),m.jsx("div",{className:"mb-4 max-h-48 overflow-y-auto",children:E.map(V=>m.jsxs("label",{className:"flex items-center space-x-2 mb-1",children:[m.jsx("input",{type:"checkbox",value:V.id,checked:I.includes(V.id),onChange:te=>{te.target.checked&&I.length<N.quantity?j([...I,V.id]):te.target.checked||j(I.filter(fe=>fe!==V.id))},disabled:!I.includes(V.id)&&I.length>=N.quantity}),m.jsx("span",{children:V.serial_number})]},V.id))}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>k(null),className:"px-3 py-1 bg-gray-200 rounded",children:"Cancel"}),m.jsx("button",{onClick:()=>N.onDone(I),className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",disabled:I.length!==N.quantity,children:"Confirm"})]})]})})]})})}function Um(t){return"items"in t&&Array.isArray(t.items)&&t.items.length>0&&t.items.every(e=>"product_id"in e)}const Yd=["All Status","Pending","Processing","Shipped","Delivered","Cancelled"],Vm=["Last 7 Days","Last 30 Days","Last 90 Days","All Time"];function D5({initialOrderId:t,onClose:e}={}){const n=zs(),r=Xt(q=>q.orders),s=Xt(q=>q.settings),{formatPrice:i}=Tl(),a=Ws(),[u,d]=T.useState(Yd[0]),[h,x]=T.useState(Vm[1]),[y,b]=T.useState(""),[_,C]=T.useState(1),[N,k]=T.useState(s.orderItemsPerPage||5),[E,A]=T.useState(!1),[I,j]=T.useState(!1),[F,z]=T.useState(null),[O,R]=T.useState({}),M=r.items,U=r.loading,X=r.error;T.useEffect(()=>{console.log("Initial load - fetching orders and products"),n(Wo())},[n]),T.useEffect(()=>{I&&F&&(async()=>{var le;const q={};for(const ue of F.items)if((le=ue.product)!=null&&le.is_serialized){const{data:Pe}=await we.from("serial_numbers").select("serial_number").eq("product_id",ue.product_id).eq("order_id",F.id).eq("status","sold");q[ue.product_id]=(Pe||[]).map(se=>se.serial_number)}R(q)})()},[I,F]),T.useEffect(()=>{const le=new URLSearchParams(a.search).get("orderId");if(le){const ue=M.find(Pe=>Pe.id===le);ue&&(z(ue),j(!0))}},[a.search,M]);const V=M.filter(q=>{const le=u===Yd[0]||q.status.toLowerCase()===u.toLowerCase(),ue=G(h),se=new Date(q.created_at)>=ue,Y=q.customer.toLowerCase().includes(y.toLowerCase())||q.id.toLowerCase().includes(y.toLowerCase());return le&&se&&Y}),te=Math.ceil(V.length/N),fe=V.slice((_-1)*N,_*N);function G(q){const le=new Date;switch(q){case"Last 7 Days":return new Date(le.setDate(le.getDate()-7));case"Last 90 Days":return new Date(le.setDate(le.getDate()-90));default:return new Date(le.setDate(le.getDate()-30))}}function be(q){const le=new Date(q),ue=new Date,Pe=new Date(ue);return Pe.setDate(Pe.getDate()-1),le.toDateString()===ue.toDateString()?`Today, ${vh(le,"hh:mm a")}`:le.toDateString()===Pe.toDateString()?`Yesterday, ${vh(le,"hh:mm a")}`:vh(le,"MMM dd, yyyy")}function $(q){const le={pending:"bg-yellow-100 text-yellow-800",processing:"bg-orange-100 text-orange-800",shipped:"bg-green-100 text-green-800",delivered:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"};return m.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${le[q]}`,children:q.charAt(0).toUpperCase()+q.slice(1)})}const Q=async q=>{if(window.confirm("Are you sure you want to delete this order? This action cannot be undone."))try{n(Pd(!0)),await n(rC(q)).unwrap()}catch(le){console.error("Error deleting order:",le),alert("Failed to delete order. Please try again.")}finally{n(Pd(!1))}},ne=async(q,le)=>{try{await n(nC({id:q,status:le})).unwrap()}catch(ue){console.error("Failed to update order status:",ue),alert("Failed to update order status. Please try again.")}},J=q=>{if(q){if(Um(q)){z(q),j(!0);return}dv.getWithItems().then(le=>{const ue=le.find(Pe=>Pe.id===q.id);ue&&(z({...ue,items:ue.order_items||[]}),j(!0))}).catch(le=>{console.error("Error fetching order details:",le),alert("Failed to load order details. Please try again.")})}},oe=async q=>{try{let le;if(Um(q))le=q;else{const Y=(await dv.getWithItems()).find(ye=>ye.id===q.id);if(!Y)throw new Error("Order not found");le=Y}const ue=window.open("","_blank");if(!ue){alert("Please allow popups to print the order.");return}const Pe=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Order ${le.id}</title>
            <style>
              @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
              
              body {
                font-family: 'Inter', sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 40px;
                color: #1f2937;
                background-color: #ffffff;
              }
              
              .container {
                max-width: 800px;
                margin: 0 auto;
              }
              
              .header {
                text-align: center;
                margin-bottom: 40px;
                padding-bottom: 20px;
                border-bottom: 2px solid #e5e7eb;
              }
              
              .header h1 {
                font-size: 28px;
                color: #1f2937;
                margin: 0 0 10px 0;
              }
              
              .header p {
                color: #6b7280;
                font-size: 16px;
                margin: 0;
              }
              
              .company-info {
                text-align: center;
                margin-bottom: 30px;
              }
              
              .company-info h2 {
                font-size: 24px;
                color: #4f46e5;
                margin: 0 0 5px 0;
              }
              
              .order-info {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 30px;
                margin-bottom: 40px;
                padding: 20px;
                background-color: #f9fafb;
                border-radius: 8px;
              }
              
              .order-info-item {
                margin-bottom: 15px;
              }
              
              .order-info-item .label {
                font-size: 14px;
                color: #6b7280;
                margin-bottom: 4px;
              }
              
              .order-info-item .value {
                font-size: 16px;
                color: #1f2937;
                font-weight: 500;
              }
              
              .status-badge {
                display: inline-block;
                padding: 4px 12px;
                border-radius: 9999px;
                font-size: 14px;
                font-weight: 500;
              }
              
              .status-badge.completed {
                background-color: #dcfce7;
                color: #15803d;
              }
              
              .status-badge.pending {
                background-color: #fef9c3;
                color: #854d0e;
              }
              
              .status-badge.cancelled {
                background-color: #fee2e2;
                color: #b91c1c;
              }
              
              table {
                width: 100%;
                border-collapse: collapse;
                margin: 30px 0;
                font-size: 14px;
              }
              
              th {
                background-color: #f3f4f6;
                padding: 12px 16px;
                text-align: left;
                font-weight: 600;
                color: #4b5563;
                text-transform: uppercase;
                font-size: 12px;
                letter-spacing: 0.05em;
              }
              
              td {
                padding: 16px;
                border-bottom: 1px solid #e5e7eb;
              }
              
              .product-name {
                font-weight: 500;
                color: #1f2937;
              }
              
              .product-sku {
                color: #6b7280;
                font-size: 13px;
              }
              
              .total-section {
                margin-top: 30px;
                padding-top: 20px;
                border-top: 2px solid #e5e7eb;
              }
              
              .total-row {
                display: flex;
                justify-content: flex-end;
                align-items: center;
                margin-bottom: 10px;
                font-size: 16px;
              }
              
              .total-label {
                color: #6b7280;
                margin-right: 20px;
              }
              
              .total-value {
                font-weight: 600;
                color: #1f2937;
                min-width: 120px;
                text-align: right;
              }
              
              .grand-total {
                font-size: 20px;
                font-weight: 700;
                color: #4f46e5;
              }
              
              .footer {
                margin-top: 60px;
                text-align: center;
                color: #6b7280;
                font-size: 14px;
                padding-top: 20px;
                border-top: 1px solid #e5e7eb;
              }
              
              @media print {
                body {
                  padding: 20px;
                }
                
                .no-print {
                  display: none;
                }
                
                @page {
                  margin: 20mm;
                }
              }
            </style>
          </head>
          <body>
            <div class="container">
              <div class="header">
                <div class="company-info">
                  <h2>InventoryPro Cloud</h2>
                  <p>Order Details</p>
                </div>
              </div>

              <div class="order-info">
                <div class="order-info-item">
                  <div class="label">Order ID</div>
                  <div class="value">${le.id}</div>
                </div>
                <div class="order-info-item">
                  <div class="label">Date & Time</div>
                  <div class="value">${be(le.created_at)}</div>
                </div>
                <div class="order-info-item">
                  <div class="label">Customer</div>
                  <div class="value">${le.customer}</div>
                </div>
                <div class="order-info-item">
                  <div class="label">Status</div>
                  <div class="value">
                    <span class="status-badge ${le.status}">
                      ${le.status.charAt(0).toUpperCase()+le.status.slice(1)}
                    </span>
                  </div>
                </div>
              </div>

              <table>
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>SKU</th>
                    <th style="text-align: right;">Quantity</th>
                    <th style="text-align: right;">Unit Price</th>
                    <th style="text-align: right;">Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${le.items.map(se=>{const Y=se.product,ye=!Y||Object.keys(Y).length===0||se.product_id===null,Ee=ye?se.product_name||"Product Deleted":Y.name,ze=ye?se.product_sku||"Unknown SKU":Y.sku;return`
                    <tr>
                      <td>
                        <div class="product-name">${Ee}</div>
                        <div class="product-sku">${ze}${ye?" - Product no longer in inventory":""}</div>
                      </td>
                      <td style="text-align: right;">${se.quantity}</td>
                      <td style="text-align: right;">${gh(se.price,s.currency||"USD")}</td>
                      <td style="text-align: right;">${gh(se.quantity*se.price,s.currency||"USD")}</td>
                    </tr>
                  `}).join("")}
                </tbody>
              </table>

              <div class="total-section">
                <div class="total-row">
                  <div class="total-label">Total Items:</div>
                  <div class="total-value">${le.total_items}</div>
                </div>
                <div class="total-row">
                  <div class="total-label">Total Amount:</div>
                  <div class="total-value grand-total">${gh(le.total_amount,s.currency||"USD")}</div>
                </div>
              </div>

              <div class="footer">
                <p>Generated on ${new Date().toLocaleString()}</p>
                <p>Thank you for your business!</p>
              </div>

              <div class="no-print" style="margin-top: 30px; text-align: center;">
                <button onclick="window.print()" style="
                  background-color: #4f46e5;
                  color: white;
                  padding: 8px 16px;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                  margin-right: 10px;
                ">Print Order</button>
                <button onclick="window.close()" style="
                  background-color: #9ca3af;
                  color: white;
                  padding: 8px 16px;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                ">Close</button>
              </div>
            </div>
          </body>
        </html>
      `;ue.document.write(Pe),ue.document.close(),ue.onload=()=>{setTimeout(()=>{ue.print()},250)}}catch(le){console.error("Error printing order:",le),alert("Failed to print order. Please try again.")}},re=async()=>{if(window.confirm("Are you sure you want to clear ALL orders? This action cannot be undone."))try{n(Pd(!0)),await n(sC()).unwrap(),C(1),b(""),d(Yd[0]),x(Vm[1])}catch(q){console.error("Error clearing all orders:",q),alert("Failed to clear all orders. Please try again.")}finally{n(Pd(!1))}},ae=q=>{const le=()=>{switch(q.status){case"pending":return m.jsx("button",{onClick:()=>ne(q.id,"processing"),className:"text-orange-600 hover:text-orange-900",title:"Mark as Processing",children:m.jsx(Cm,{className:"h-5 w-5"})});case"processing":return m.jsx("button",{onClick:()=>ne(q.id,"shipped"),className:"text-blue-600 hover:text-blue-900",title:"Mark as Shipped",children:m.jsx(Cm,{className:"h-5 w-5"})});case"shipped":return m.jsx("button",{onClick:()=>ne(q.id,"delivered"),className:"text-green-600 hover:text-green-900",title:"Mark as Delivered",children:m.jsx(fC,{className:"h-5 w-5"})});default:return null}};return m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{onClick:()=>J(q),className:"text-blue-600 hover:text-blue-900",title:"View Order",children:m.jsx(YO,{className:"h-5 w-5"})}),m.jsx("button",{onClick:()=>oe(q),className:"text-gray-600 hover:text-gray-900",title:"Print Order",children:m.jsx(O2,{className:"h-5 w-5"})}),le(),q.status!=="delivered"&&q.status!=="cancelled"&&m.jsx("button",{onClick:()=>ne(q.id,"cancelled"),className:"text-red-600 hover:text-red-900",title:"Cancel Order",children:m.jsx(f1,{className:"h-5 w-5"})}),m.jsx("button",{onClick:()=>Q(q.id),className:"text-red-600 hover:text-red-900",title:"Delete Order",children:m.jsx(ax,{className:"h-5 w-5"})})]})};return U?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):X?m.jsx("div",{className:"rounded-md bg-red-50 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(fl,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading orders"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:X})}),m.jsx("div",{className:"mt-4",children:m.jsxs("button",{type:"button",onClick:()=>n(Wo()),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[m.jsx(Cm,{className:"-ml-0.5 mr-2 h-4 w-4","aria-hidden":"true"}),"Retry"]})})]})]})}):m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"sm:flex sm:items-center",children:[m.jsxs("div",{className:"sm:flex-auto",children:[m.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Orders"}),m.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all orders including their ID, customer, date, status and total."})]}),m.jsxs("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none space-x-4",children:[m.jsxs("button",{type:"button",onClick:()=>A(!0),className:"inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto",children:[m.jsx(ox,{className:"h-4 w-4 mr-2"}),"Add Order"]}),m.jsxs("button",{type:"button",onClick:re,className:"inline-flex items-center justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:w-auto",children:[m.jsx(fl,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})]}),m.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:m.jsx(l0,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),m.jsx("input",{type:"text",value:y,onChange:q=>b(q.target.value),placeholder:"Search orders...",className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-3 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),m.jsx("select",{value:u,onChange:q=>{d(q.target.value),C(1)},className:"rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:Yd.map(q=>m.jsx("option",{value:q,children:q},q))}),m.jsx("select",{value:h,onChange:q=>{x(q.target.value),C(1)},className:"rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:Vm.map(q=>m.jsx("option",{value:q,children:q},q))}),m.jsxs("select",{value:N,onChange:q=>{const le=parseInt(q.target.value);k(le),n(qP(le)),C(1)},className:"rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[m.jsx("option",{value:"5",children:"5 per page"}),m.jsx("option",{value:"10",children:"10 per page"}),m.jsx("option",{value:"20",children:"20 per page"}),m.jsx("option",{value:"50",children:"50 per page"})]})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Order ID"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Customer"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Date & Time"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Items"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Total Amount"}),m.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:fe.map(q=>m.jsxs("tr",{children:[m.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:q.id}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:q.customer}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:be(q.created_at)}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:$(q.status)}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:Um(q)?q.items.length:0}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:i(q.total_amount)}),m.jsx("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:ae(q)})]},q.id))})]})}),m.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-4",children:m.jsxs("div",{className:"flex-1 text-sm text-gray-700",children:["Showing ",m.jsx("span",{className:"font-medium",children:(_-1)*N+1})," to"," ",m.jsx("span",{className:"font-medium",children:Math.min(_*N,V.length)})," ","of ",m.jsx("span",{className:"font-medium",children:V.length})," orders"]})}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{onClick:()=>C(q=>Math.max(1,q-1)),disabled:_===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[m.jsx("span",{className:"sr-only",children:"Previous"}),m.jsx(ix,{className:"h-5 w-5","aria-hidden":"true"})]}),[...Array(te)].map((q,le)=>{const ue=le+1,Pe=ue===_,se=Math.abs(ue-_)<=1,Y=ue===1,ye=ue===te;return Pe||se||Y||ye?m.jsxs(_l.Fragment,{children:[!se&&!Y&&ue===_-2&&m.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."}),m.jsx("button",{onClick:()=>C(ue),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${Pe?"z-10 bg-blue-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:outline-offset-0"}`,children:ue}),!se&&!ye&&ue===_+2&&m.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300 focus:outline-offset-0",children:"..."})]},ue):null}),m.jsxs("button",{onClick:()=>C(q=>Math.min(te,q+1)),disabled:_===te,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[m.jsx("span",{className:"sr-only",children:"Next"}),m.jsx(mC,{className:"h-5 w-5","aria-hidden":"true"})]})]})]})]}),E&&m.jsx(QB,{onClose:()=>A(!1)}),I&&F&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold",children:"Order Details"}),m.jsx("button",{onClick:()=>{j(!1),z(null),e&&e()},className:"text-gray-400 hover:text-gray-500",children:m.jsx(f1,{className:"h-6 w-6"})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Order ID"}),m.jsx("p",{className:"font-medium",children:F.id})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),m.jsx("p",{className:"font-medium",children:be(F.created_at)})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Customer"}),m.jsx("p",{className:"font-medium",children:F.customer})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),m.jsx("div",{children:$(F.status)})]})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-lg font-medium mb-4",children:"Order Items"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Price"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.items.length>0?F.items.map((q,le)=>{var ye,Ee;const ue=q.product,Pe=!ue||Object.keys(ue).length===0||q.product_id===null,se=Pe?q.product_name||"Product Deleted":ue.name,Y=Pe?q.product_sku||"Unknown SKU":ue.sku;return m.jsxs("tr",{children:[m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[se," ",m.jsxs("span",{className:`text-gray-500 ${Pe?"italic":""}`,children:["(",Y,")",Pe&&" - Product deleted from inventory"]}),((ye=q.product)==null?void 0:ye.is_serialized)&&((Ee=O[q.product_id])==null?void 0:Ee.length)>0&&m.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["Serials: ",O[q.product_id].join(", ")]})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.quantity}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i(q.price)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i(q.quantity*q.price)})]},le)}):m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items in this order"})})})]})}),m.jsx("div",{className:"mt-4 text-right",children:m.jsxs("p",{className:"text-lg font-medium",children:["Total Amount: ",i(F.total_amount)]})})]}),m.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[m.jsxs("button",{type:"button",onClick:()=>oe(F),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[m.jsx(O2,{className:"h-5 w-5 mr-2"}),"Print Order"]}),m.jsx("button",{type:"button",onClick:()=>{j(!1),z(null)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Close"})]})]})})]})}const JB=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),s=Xt(i=>i.inventory.items);return T.useEffect(()=>{(async()=>{try{const{data:a,error:u}=await we.from("stock_adjustments").select("*").order("created_at",{ascending:!1}).limit(10);if(u)throw u;const d=a.map(h=>{var x;return{...h,product_name:((x=s.find(y=>y.id===h.product_id))==null?void 0:x.name)||"Unknown Product"}});e(d)}catch(a){console.error("Error fetching history:",a)}finally{r(!1)}})()},[s]),n?m.jsx("div",{className:"flex items-center justify-center h-32",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m.jsx("div",{className:"bg-white shadow rounded-lg",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Inventory History"}),m.jsx("div",{className:"flow-root",children:m.jsx("ul",{className:"-my-5 divide-y divide-gray-200",children:t.map(i=>m.jsx("li",{className:"py-4",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"flex-shrink-0",children:i.adjustment_type==="in"?m.jsx(h1,{className:"h-6 w-6 text-green-500"}):m.jsx(d1,{className:"h-6 w-6 text-red-500"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.product_name}),m.jsxs("p",{className:"text-sm text-gray-500",children:[i.adjustment_type==="in"?"+":"-",i.quantity," units"]}),m.jsx("p",{className:"text-xs text-gray-400",children:i.reason})]}),m.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[m.jsx(PO,{className:"h-4 w-4 mr-1"}),new Date(i.created_at).toLocaleString()]})]})},i.id))})})]})})},eU=()=>{const t=zs(),{items:e,loading:n,error:r}=Xt(Y=>Y.inventory),s=Xt(Y=>Y.settings),i=Hs(),[a,u]=T.useState(1),[d,h]=T.useState(""),[x,y]=T.useState("All Status"),[b,_]=T.useState("All Warehouses"),[C,N]=T.useState(!1),[k,E]=T.useState(null),[A,I]=T.useState(0),[j,F]=T.useState("in"),[z,O]=T.useState(null),[R,M]=T.useState(""),[U,X]=T.useState(!1),[V,te]=T.useState(!1),[fe,G]=T.useState(null);T.useEffect(()=>{t(ns());const Y=localStorage.getItem("adjustStockProduct");if(Y)try{const ye=JSON.parse(Y);localStorage.removeItem("adjustStockProduct"),E(ye),I(0),F("in"),M(""),O(null),N(!0)}catch(ye){console.error("Error parsing product from localStorage:",ye)}},[t]);const be=()=>{E(null),I(0),F("in"),M(""),O(null),N(!0)},$=()=>{N(!1),E(null),I(0),F("in"),M(""),O(null)},Q=async()=>{if(!k){O("Please select a product");return}if(!R.trim()){O("Please provide a reason for the adjustment");return}const Y=j==="in"?k.stock+A:k.stock-A;if(Y<0){O("Stock cannot be negative");return}if(k.is_serialized){if(Y>k.stock){localStorage.setItem("adjustmentReason",R.trim()),N(!1),i(`/products?manageSerialsFor=${k.id}`);return}if(Y<k.stock){localStorage.setItem("adjustmentReason",R.trim()),te(!0),N(!1);return}}try{X(!0),await t(sf({id:k.id,stock:Y,adjustment_reason:R.trim()})).unwrap(),$()}catch(ye){console.error("Failed to adjust stock:",ye),O(ye instanceof Error?ye.message:"Failed to adjust stock. Please try again.")}finally{X(!1)}},ne=async()=>{if(te(!1),k){X(!0);try{const{data:Y,error:ye}=await we.from("serial_numbers").select("id").eq("product_id",k.id).eq("status","available");if(ye)throw ye;const Ee=Y?Y.length:0;await t(sf({id:k.id,stock:Ee,adjustment_reason:R.trim()||"Stock adjusted after serial removal"})).unwrap(),$()}catch(Y){O(Y instanceof Error?Y.message:"Failed to adjust stock. Please try again.")}finally{X(!1)}}},J=(Y,ye)=>{const Ee=Yc(Y,ye,s.lowStockThreshold||5),ze={"In Stock":"bg-green-100 text-green-800","Low Stock":"bg-yellow-100 text-yellow-800","Out of Stock":"bg-red-100 text-red-800"};return m.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ze[Ee]}`,children:Ee})},oe=["All Warehouses",...new Set(e.filter(Y=>Y.location&&typeof Y.location=="string").map(Y=>Y.location.split(",")[0].trim()).filter(Boolean))],re=["All Status","In Stock","Low Stock","Out of Stock"],ae=e.filter(Y=>{if(Y.id.startsWith("GHOST-")||Y.name.startsWith("[DELETED]")||Y.sku.startsWith("DELETED-"))return!1;const ye=b===""||b==="All Warehouses"||Y.location&&Y.location.startsWith(b),Ee=Yc(Y.stock,Y.reorder_level||0,s.lowStockThreshold||5),ze=x===""||x==="All Status"||Ee===x,Oe=d.toLowerCase(),$e=d===""||Y.name.toLowerCase().includes(Oe)||Y.sku.toLowerCase().includes(Oe)||Y.description&&Y.description.toLowerCase().includes(Oe);return ye&&ze&&$e}),q=s.inventoryItemsPerPage||10,le=Math.ceil(ae.length/q),ue=ae.slice((a-1)*q,a*q),Pe=async Y=>{if(window.confirm(`Are you sure you want to delete ${Y.name}?`))try{console.log("Deleting product:",Y.id)}catch(ye){console.error("Failed to delete product:",ye)}},se=async()=>{if(window.confirm("Are you sure you want to clear all inventory? This action cannot be undone."))try{await t(sx()).unwrap(),h(""),y("All Status"),_("All Warehouses"),u(1)}catch(Y){console.error("Failed to clear inventory:",Y),alert("Failed to clear inventory. Please try again.")}};return n?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):r?m.jsx("div",{className:"rounded-md bg-red-50 p-4",children:m.jsx("div",{className:"flex",children:m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading inventory"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:r})})]})})}):m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"sm:flex sm:items-center",children:[m.jsxs("div",{className:"sm:flex-auto",children:[m.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Inventory"}),m.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all products in your inventory including their location, stock levels, and value."})]}),m.jsxs("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none flex flex-wrap gap-2",children:[m.jsx(j5,{buttonText:"Scan Barcode",onComplete:()=>t(ns())}),m.jsxs("button",{type:"button",onClick:be,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[m.jsx(ox,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Add Stock"]}),m.jsxs("button",{type:"button",onClick:se,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[m.jsx(fl,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Clear All"]})]})]}),C&&m.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-lg font-medium",children:"Adjust Stock"}),m.jsx("button",{onClick:$,className:"text-gray-400 hover:text-gray-500",children:m.jsx(Il,{className:"h-6 w-6"})})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product"}),m.jsxs("select",{value:(k==null?void 0:k.id)||"",onChange:Y=>{const ye=e.find(Ee=>Ee.id===Y.target.value);E(ye||null)},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[m.jsx("option",{value:"",children:"Select a product"}),e.filter(Y=>!Y.id.startsWith("GHOST-")&&!Y.name.startsWith("[DELETED]")&&!Y.sku.startsWith("DELETED-")).map(Y=>m.jsxs("option",{value:Y.id,children:[Y.name," (Current Stock: ",Y.stock,")"]},Y.id))]})]}),!(k!=null&&k.is_serialized)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Adjustment Type"}),m.jsxs("select",{value:j,onChange:Y=>F(Y.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[m.jsx("option",{value:"in",children:"Add Stock"}),m.jsx("option",{value:"out",children:"Remove Stock"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),m.jsx("input",{type:"number",min:"0",value:A,onChange:Y=>I(Math.max(0,parseInt(Y.target.value)||0)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]})]}),(k==null?void 0:k.is_serialized)&&m.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[m.jsxs("div",{className:"mb-2 text-sm font-semibold text-blue-900 flex items-center gap-4",children:[m.jsxs("span",{children:["Current Stock: ",m.jsx("b",{children:k.stock})]}),m.jsxs("span",{className:"text-xs text-blue-700",children:["Available Serials: ",m.jsx("b",{children:k.stock})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-2",children:[m.jsx("button",{type:"button",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm font-medium shadow",onClick:()=>{N(!1),i(`/products?manageSerialsFor=${k.id}`)},children:"+ Add Serial Numbers"}),m.jsx("button",{type:"button",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm font-medium shadow",onClick:()=>{te(!0),N(!1)},children:"– Remove Serial Numbers"})]}),m.jsxs("div",{className:"text-xs text-blue-700",children:[m.jsx("b",{children:"Tip:"})," You can paste, type, or scan multiple serials at once when adding. Use the checkboxes and search to quickly select serials for removal."]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reason"}),m.jsx("textarea",{value:R,onChange:Y=>M(Y.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",rows:3,placeholder:"Enter reason for stock adjustment"})]}),z&&m.jsx("div",{className:"rounded-md bg-red-50 p-3",children:m.jsx("div",{className:"flex",children:m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),m.jsx("div",{className:"mt-1 text-sm text-red-700",children:m.jsx("p",{children:z})})]})})}),m.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[m.jsx("button",{onClick:$,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",disabled:U,children:"Cancel"}),m.jsx("button",{onClick:Q,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md disabled:opacity-50",disabled:U,children:U?"Saving...":"Save"})]})]})]})}),V&&k&&m.jsx(M5,{productId:k.id,onDone:ne,onClose:()=>te(!1)}),fe&&m.jsx(D5,{initialOrderId:fe,onClose:()=>G(null)}),m.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[m.jsx("div",{className:"flex-1 min-w-[200px]",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:m.jsx(l0,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),m.jsx("input",{type:"text",value:d,onChange:Y=>{h(Y.target.value),u(1)},placeholder:"Search by name, SKU, or description...",className:"block w-full rounded-md border border-gray-300 bg-white py-2 pl-10 pr-3 text-sm placeholder-gray-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("select",{value:b,onChange:Y=>{_(Y.target.value),u(1)},className:"rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:oe.map(Y=>m.jsx("option",{value:Y,children:Y},Y))}),m.jsx("select",{value:x,onChange:Y=>{y(Y.target.value),u(1)},className:"rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:re.map(Y=>m.jsx("option",{value:Y,children:Y},Y))}),m.jsxs("select",{value:q,onChange:Y=>{const ye=parseInt(Y.target.value);t(YP(ye)),u(1)},className:"rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[m.jsx("option",{value:"5",children:"5 per page"}),m.jsx("option",{value:"10",children:"10 per page"}),m.jsx("option",{value:"20",children:"20 per page"}),m.jsx("option",{value:"50",children:"50 per page"})]})]})]}),m.jsx("div",{className:"mt-6 overflow-hidden border border-gray-200 rounded-lg",children:m.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"PRODUCT"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"SKU"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"LOCATION"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"CURRENT STOCK"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"REORDER LEVEL"}),m.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"STATUS"}),m.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:ue.map(Y=>m.jsxs("tr",{children:[m.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:m.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:m.jsx("span",{className:"text-gray-500 font-medium",children:Y.name.charAt(0)})})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("div",{className:"font-medium text-gray-900",children:Y.name}),m.jsx("div",{className:"text-gray-500",children:Y.description})]})]})}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:Y.sku}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:Y.location}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:Y.stock}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:Y.reorder_level}),m.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:J(Y.stock,Y.reorder_level)}),m.jsx("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{onClick:()=>{E(Y),N(!0),I(0),F("in"),M("")},className:"text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 rounded-md p-2 transition-colors",title:"Adjust Stock",children:m.jsx(fO,{className:"h-5 w-5"})}),m.jsx("button",{onClick:()=>Pe(Y),className:"text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 rounded-md p-2 transition-colors",title:"Delete Product",children:m.jsx(ax,{className:"h-5 w-5"})})]})})]},Y.id))})]})})}),m.jsx("div",{className:"mt-6",children:m.jsx(JB,{})}),m.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-4",children:m.jsxs("div",{className:"flex-1 text-sm text-gray-700",children:["Showing ",m.jsx("span",{className:"font-medium",children:(a-1)*q+1})," to"," ",m.jsx("span",{className:"font-medium",children:Math.min(a*q,ae.length)})," ","of ",m.jsx("span",{className:"font-medium",children:ae.length})," items"]})}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>u(Y=>Math.max(1,Y-1)),disabled:a===1,className:"px-3 py-1 border rounded-md disabled:opacity-50 hover:bg-gray-50",children:"<"}),Array.from({length:Math.min(4,le)},(Y,ye)=>{const Ee=ye+1;return m.jsx("button",{onClick:()=>u(Ee),className:`px-3 py-1 border rounded-md ${a===Ee?"bg-blue-600 text-white":"hover:bg-gray-50"}`,children:Ee},Ee)}),m.jsx("button",{onClick:()=>u(Y=>Math.min(le,Y+1)),disabled:a===le,className:"px-3 py-1 border rounded-md disabled:opacity-50 hover:bg-gray-50",children:">"})]})]})]})};Pl.register(Ba,Ax,Cx);const tU=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),s=Xt(d=>d.inventory.items);T.useEffect(()=>{i();const d=we.channel("product-changes").on("postgres_changes",{event:"*",schema:"public",table:"products"},()=>{i()}).subscribe();return()=>{d.unsubscribe()}},[s]);const i=()=>{const d=s.filter(y=>!y.id.startsWith("GHOST-")&&!y.name.startsWith("[DELETED]")&&!y.sku.startsWith("DELETED-"));if(d.length===0){e([]),r(!1);return}const h=d.reduce((y,b)=>{const _=b.category||"Other";return y[_]=(y[_]||0)+1,y},{}),x=Object.entries(h).map(([y,b])=>({category:y,count:b}));e(x),r(!1)},a={labels:t.map(d=>d.category),datasets:[{data:t.map(d=>d.count),backgroundColor:["rgba(59, 130, 246, 0.9)","rgba(16, 185, 129, 0.9)","rgba(245, 158, 11, 0.9)","rgba(156, 163, 175, 0.9)"],borderColor:["rgba(59, 130, 246, 1)","rgba(16, 185, 129, 1)","rgba(245, 158, 11, 1)","rgba(156, 163, 175, 1)"],borderWidth:1,hoverOffset:4}]},u={responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"right",align:"center",labels:{usePointStyle:!0,padding:20,font:{size:12,family:"'Inter', sans-serif"},generateLabels:d=>{var x;const h=d.data;return(x=h.labels)!=null&&x.length&&h.datasets.length?h.labels.map((y,b)=>{const _=h.datasets[0].data[b],C=h.datasets[0].data.reduce((A,I)=>A+I,0),N=(_/C*100).toFixed(1),k=Array.isArray(h.datasets[0].backgroundColor)?h.datasets[0].backgroundColor[b]:"",E=Array.isArray(h.datasets[0].borderColor)?h.datasets[0].borderColor[b]:"";return{text:`${y} (${N}%)`,fillStyle:k,strokeStyle:E,lineWidth:1,hidden:!1,index:b}}):[]}}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"white",bodyColor:"white",padding:12,cornerRadius:8,displayColors:!1,callbacks:{label:d=>{const h=d.raw,x=d.dataset.data.reduce((b,_)=>b+_,0),y=(h/x*100).toFixed(1);return`${d.label}: ${h} items (${y}%)`}}}}};return m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Inventory Categories"})}),n?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):m.jsx("div",{className:"h-[300px] p-6 bg-white rounded-xl shadow-sm border border-gray-100",children:m.jsx(j9,{data:a,options:u})})]})};Pl.register(mf,gf,bh,Ba,r5,Ax,Cx);const nU=()=>{const t=zs(),{items:e}=Xt(J=>J.inventory),{items:n}=Xt(J=>J.orders),{formatPrice:r}=Tl(),[s,i]=T.useState(()=>localStorage.getItem("reportDateRange")||"7"),[a,u]=T.useState(""),[d,h]=T.useState(!1);T.useEffect(()=>{localStorage.setItem("reportDateRange",s)},[s]),T.useEffect(()=>{t(ns()),t(Wo())},[t]);const x=e.filter(J=>!J.id.startsWith("GHOST-")&&!J.name.startsWith("[DELETED]")&&!J.sku.startsWith("DELETED-")),y=n.filter(J=>{if(J.status==="cancelled")return!1;const oe=new Date(J.created_at),re=new Date;if(s==="all")return!0;if(s==="today"){const q=new Date;return q.setHours(0,0,0,0),oe>=q}if(s==="yesterday"){const q=new Date;q.setDate(q.getDate()-1),q.setHours(0,0,0,0);const le=new Date;return le.setDate(le.getDate()-1),le.setHours(23,59,59,999),oe>=q&&oe<=le}if(s==="3"){const q=new Date;return q.setDate(q.getDate()-3),oe>=q}const ae=parseInt(s);return(re.getTime()-oe.getTime())/(1e3*60*60*24)<=ae}),b=()=>{const J=new Map;return y.forEach(re=>{var ae;re.status!=="cancelled"&&((ae=re.items)==null||ae.forEach(q=>{const le=J.get(q.product_id)||0;J.set(q.product_id,le+q.quantity)}))}),Array.from(J.entries()).sort(([,re],[,ae])=>ae-re).slice(0,5).map(([re,ae])=>{const q=x.find(le=>le.id===re);return{name:(q==null?void 0:q.name)||"Unknown Product",sales:ae}})},_=()=>{const J=new Date().getMonth();return y.filter(re=>new Date(re.created_at).getMonth()===J&&re.status!=="cancelled").reduce((re,ae)=>re+(ae.total_amount||0),0)},C=()=>{const J=new Array(6).fill(0);return y.forEach(oe=>{if(oe.status==="cancelled")return;const ae=new Date(oe.created_at).getMonth();ae>=0&&ae<6&&(J[ae]+=oe.total_amount||0)}),J},N=()=>{const J=new Map;y.forEach(q=>{var le;(le=q.items)==null||le.forEach(ue=>{const Pe=J.get(ue.product_id)||0;J.set(ue.product_id,Pe+ue.quantity)})});let oe="",re=0;J.forEach((q,le)=>{q>re&&(re=q,oe=le)});const ae=x.find(q=>q.id===oe);return{name:(ae==null?void 0:ae.name)||"No sales",sales:re}},k=()=>{const J=new Date().getMonth(),oe=J-1,re=y.filter(q=>new Date(q.created_at).getMonth()===J&&q.status!=="cancelled").reduce((q,le)=>q+(le.total_amount||0),0),ae=y.filter(q=>new Date(q.created_at).getMonth()===oe&&q.status!=="cancelled").reduce((q,le)=>q+(le.total_amount||0),0);return ae===0?0:(re-ae)/ae*100},E=()=>{const J=y.filter(re=>re.status!=="cancelled");return J.length===0?0:J.reduce((re,ae)=>re+(ae.total_amount||0),0)/J.length},A=()=>{const J=x.reduce((re,ae)=>re+(ae.stock||0),0),oe=y.filter(re=>re.status!=="cancelled").reduce((re,ae)=>{var q;return re+(((q=ae.items)==null?void 0:q.reduce((le,ue)=>le+ue.quantity,0))||0)},0);return J===0?0:oe/J*(365/parseInt(s))},I=20,j=70,F=-30,z=(J,oe)=>{const re=[],ae=y.filter(q=>{const le=new Date(q.created_at);return le>=J&&le<=oe&&q.status!=="cancelled"}).reduce((q,le)=>{var Pe;const ue=((Pe=le.items)==null?void 0:Pe.reduce((se,Y)=>{const ye=x.find(Ee=>Ee.id===Y.product_id);return ye?!ye.cost_price||ye.cost_price<=0?(re.push(`Invalid cost price for product: ${ye.name} (${ye.id})`),se):(Y.price<ye.cost_price&&re.push(`Selling price (${Y.price}) is lower than cost price (${ye.cost_price}) for product: ${ye.name}`),se+ye.cost_price*Y.quantity):(re.push(`Product not found for order item: ${Y.product_id}`),se)},0))||0;return q+ue},0);return re.length>0&&console.warn("COGS Calculation Issues:",re),ae},O=()=>{const J=new Date,oe=new Date(J.getFullYear(),J.getMonth(),1),re=new Date(J.getFullYear(),J.getMonth()+1,0),ae=_();console.log("Revenue Breakdown:",{totalRevenue:ae,orderCount:y.filter(ye=>new Date(ye.created_at).getMonth()===J.getMonth()).length,averageOrderValue:ae/y.length||0});const q=z(oe,re);console.log("COGS Breakdown:",{totalCOGS:q,ordersAnalyzed:y.filter(ye=>{const Ee=new Date(ye.created_at);return Ee>=oe&&Ee<=re}).length,averageCOGSPerOrder:q/y.length||0}),y.slice(0,3).forEach(ye=>{var ze,Oe;const Ee=((ze=ye.items)==null?void 0:ze.reduce(($e,Xe)=>{const Ge=x.find(xt=>xt.id===Xe.product_id);return $e+((Ge==null?void 0:Ge.cost_price)||0)*Xe.quantity},0))||0;console.log("Sample Order:",{orderId:ye.id,date:new Date(ye.created_at).toLocaleDateString(),revenue:ye.total_amount,cogs:Ee,margin:((ye.total_amount-Ee)/ye.total_amount*100).toFixed(2)+"%",items:(Oe=ye.items)==null?void 0:Oe.map($e=>{const Xe=x.find(Ge=>Ge.id===$e.product_id);return{productId:$e.product_id,productName:Xe==null?void 0:Xe.name,quantity:$e.quantity,sellingPrice:$e.price,costPrice:Xe==null?void 0:Xe.cost_price,itemRevenue:$e.price*$e.quantity,itemCost:((Xe==null?void 0:Xe.cost_price)||0)*$e.quantity}})})});const le=ae-q,ue=ae*(I/100),Pe=le-ue,se=ae>0?le/ae*100:0,Y=ae>0?Pe/ae*100:0;return console.log("Final Calculations:",{revenue:ae.toFixed(2),cogs:q.toFixed(2),grossProfit:le.toFixed(2),operatingExpenses:ue.toFixed(2),netProfit:Pe.toFixed(2),grossMargin:se.toFixed(2)+"%",netMargin:Y.toFixed(2)+"%"}),{revenue:ae,cogs:q,grossProfit:le,operatingExpenses:ue,netProfit:Pe,grossMargin:se,netMargin:Y}},R=J=>{const oe=y.reduce((ue,Pe)=>{var Y;const se=(Y=Pe.items)==null?void 0:Y.find(ye=>ye.product_id===J);return se&&(ue.quantity+=se.quantity,ue.revenue+=se.price*se.quantity),ue},{quantity:0,revenue:0}),re=x.find(ue=>ue.id===J);if(!re)return console.warn(`Product not found: ${J}`),{profit:0,margin:0};if(!re.cost_price||re.cost_price<=0)return console.warn(`Invalid cost price for product: ${re.name} (${re.id})`),{profit:0,margin:0};const ae=re.cost_price*oe.quantity,q=oe.revenue-ae,le=oe.revenue>0?q/oe.revenue*100:0;return(le>j||le<F)&&(console.warn(`Suspicious margin for product ${re.name}: ${le.toFixed(2)}%`),console.log("Product margin details:",{product:re.name,revenue:oe.revenue,totalCost:ae,profit:q,margin:`${le.toFixed(2)}%`,costPrice:re.cost_price,quantitySold:oe.quantity})),{profit:q,margin:le}},M=()=>x.map(oe=>{const{profit:re,margin:ae}=R(oe.id);return{id:oe.id,name:oe.name,profit:re,margin:ae}}).sort((oe,re)=>re.profit-oe.profit).slice(0,5),U=async()=>{h(!0);try{const J=n.map(q=>{var le;return{orderId:q.id,date:new Date(q.created_at).toLocaleDateString(),supplier:q.supplier,totalAmount:q.total_amount,status:q.status,items:((le=q.items)==null?void 0:le.map(ue=>{var Pe;return{productId:ue.product_id,quantity:ue.quantity,price:ue.price,productName:(Pe=ue.product)==null?void 0:Pe.name}}))||[]}}),oe=new Blob([JSON.stringify(J,null,2)],{type:"application/json"}),re=window.URL.createObjectURL(oe),ae=document.createElement("a");ae.href=re,ae.download=`sales-report-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(re)}catch(J){console.error("Error generating sales report:",J)}finally{h(!1)}},X=async()=>{h(!0);try{const J=x.map(le=>({id:le.id,name:le.name,sku:le.sku,category:le.category,quantity:le.stock,price:le.selling_price||0,lastUpdated:new Date(le.updated_at).toLocaleDateString()})),oe=[["ID","Name","SKU","Category","Quantity","Price","Last Updated"],...J.map(le=>[le.id,le.name,le.sku,le.category,le.quantity,le.price,le.lastUpdated])].map(le=>le.join(",")).join(`
`),re=new Blob([oe],{type:"text/csv"}),ae=window.URL.createObjectURL(re),q=document.createElement("a");q.href=ae,q.download=`inventory-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(q),q.click(),document.body.removeChild(q),window.URL.revokeObjectURL(ae)}catch(J){console.error("Error generating inventory export:",J)}finally{h(!1)}},V=async()=>{h(!0);try{const J={salesTrends:C(),topProducts:b(),inventoryTurnover:A(),revenueGrowth:k()},oe=new Blob([JSON.stringify(J,null,2)],{type:"application/json"}),re=window.URL.createObjectURL(oe),ae=document.createElement("a");ae.href=re,ae.download=`performance-analysis-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(re)}catch(J){console.error("Error generating performance analysis:",J)}finally{h(!1)}},te=async()=>{h(!0);try{const J=_(),oe=k(),re=E(),ae=A(),q={revenue:{monthly:J,change:oe,trend:C()},inventory:{value:fe(),turnover:ae},orders:{total:n.length,average:re,pending:n.filter(se=>se.status==="pending").length},profitMargin:O().grossMargin},le=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),ue=window.URL.createObjectURL(le),Pe=document.createElement("a");Pe.href=ue,Pe.download=`financial-summary-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),window.URL.revokeObjectURL(ue)}catch(J){console.error("Error generating financial summary:",J)}finally{h(!1)}},fe=()=>x.reduce((J,oe)=>J+(oe.cost_price||0)*(oe.stock||0),0),G=N(),be=_(),$=k(),Q=E(),ne=A();return m.jsxs("div",{className:"p-6 space-y-8",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsxs("select",{value:s,onChange:J=>i(J.target.value),className:"border border-gray-300 rounded-md px-3 py-1.5 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[m.jsx("option",{value:"7",children:"Last 7 Days"}),m.jsx("option",{value:"30",children:"Last 30 Days"}),m.jsx("option",{value:"90",children:"Last 90 Days"}),m.jsx("option",{value:"all",children:"All Time"}),m.jsx("option",{value:"today",children:"Today"}),m.jsx("option",{value:"yesterday",children:"Yesterday"}),m.jsx("option",{value:"3",children:"Last 3 Days"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",placeholder:"Search reports...",value:a,onChange:J=>u(J.target.value),className:"border border-gray-300 rounded-md pl-10 pr-4 py-1.5 text-sm focus:ring-indigo-500 focus:border-indigo-500 w-64"}),m.jsx(l0,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Key Metrics"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Monthly Revenue"}),m.jsx("p",{className:"text-2xl font-bold",children:r(be)}),m.jsxs("div",{className:"flex items-center mt-1",children:[$>=0?m.jsx(h1,{className:"h-4 w-4 text-green-500"}):m.jsx(d1,{className:"h-4 w-4 text-red-500"}),m.jsxs("span",{className:`text-sm ${$>=0?"text-green-500":"text-red-500"}`,children:[Math.abs($).toFixed(1),"% vs last month"]})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Average Order Value"}),m.jsx("p",{className:"text-2xl font-bold",children:r(Q)})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Inventory Turnover Rate"}),m.jsxs("p",{className:"text-2xl font-bold",children:[ne.toFixed(2),"x"]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Top Products"}),m.jsx("div",{className:"space-y-3",children:b().map((J,oe)=>m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600",children:J.name}),m.jsxs("span",{className:"text-sm font-medium",children:[J.sales," units"]})]},oe))})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:m.jsx(tU,{})})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Summary"}),m.jsx("button",{onClick:te,disabled:d,className:"px-4 py-2 text-sm bg-green-50 text-green-700 rounded-md hover:bg-green-100 border border-green-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50",children:"Export Financial Summary"})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(()=>{const J=O();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),m.jsx("p",{className:"text-2xl font-bold",children:r(J.revenue)}),m.jsxs("div",{className:"flex items-center",children:[$>=0?m.jsx(h1,{className:"h-4 w-4 text-green-500"}):m.jsx(d1,{className:"h-4 w-4 text-red-500"}),m.jsxs("span",{className:`text-sm ${$>=0?"text-green-500":"text-red-500"}`,children:[Math.abs($).toFixed(1),"% vs last month"]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Gross Profit"}),m.jsx("p",{className:"text-2xl font-bold",children:r(J.grossProfit)}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Margin: ",J.grossMargin.toFixed(1),"%"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Net Profit"}),m.jsx("p",{className:"text-2xl font-bold",children:r(J.netProfit)}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Margin: ",J.netMargin.toFixed(1),"%"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"COGS"}),m.jsx("p",{className:"text-2xl font-bold",children:r(J.cogs)}),m.jsx("p",{className:"text-sm text-gray-500",children:"Cost of goods sold"})]})]})})()}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h4",{className:"text-md font-semibold text-gray-700 mb-4",children:"Most Profitable Products"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:M().map(J=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsx("p",{className:"font-medium text-gray-900 truncate",children:J.name}),m.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Profit: ",r(J.profit)]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Margin: ",J.margin.toFixed(1),"%"]})]},J.id))})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Analysis"}),m.jsx("button",{onClick:V,disabled:d,className:"px-4 py-2 text-sm bg-purple-50 text-purple-700 rounded-md hover:bg-purple-100 border border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50",children:"Export Performance Report"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Top Product"}),m.jsx("p",{className:"text-2xl font-bold truncate",children:G.name}),m.jsxs("p",{className:"text-sm text-green-600",children:[G.sales," units sold"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Average Order"}),m.jsx("p",{className:"text-2xl font-bold",children:r(Q)}),m.jsx("p",{className:"text-sm text-gray-500",children:"Per transaction"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Inventory Turnover"}),m.jsxs("p",{className:"text-2xl font-bold",children:[ne.toFixed(2),"x"]}),m.jsx("p",{className:"text-sm text-gray-500",children:"Stock rotation rate"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),m.jsx("p",{className:"text-2xl font-bold",children:n.length}),m.jsx("p",{className:"text-sm text-gray-500",children:"All time"})]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sales Trend"}),m.jsx("div",{className:"h-[300px]",children:m.jsx(c5,{data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Sales",data:C(),backgroundColor:"rgba(99, 102, 241, 0.8)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:J=>`$${J.toLocaleString()}`}}}}})})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:U,disabled:d,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50",children:"Export Sales Report"}),m.jsx("button",{onClick:X,disabled:d,className:"px-4 py-2 bg-white text-indigo-600 border border-indigo-600 rounded-md hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50",children:"Export Inventory"})]})]})};var L5={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(Vn,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,i=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,u={},d=0,h={};function x(R){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(M){var U=F(M);U.chunkSize=parseInt(U.chunkSize),M.step||M.chunk||(U.chunkSize=null),this._handle=new N(U),(this._handle.streamer=this)._config=U}).call(this,R),this.parseChunk=function(M,U){var X=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<X){let te=this._config.newline;te||(V=this._config.quoteChar||'"',te=this._handle.guessLineEndings(M,V)),M=[...M.split(te).slice(X)].join(te)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(V=this._config.beforeFirstChunk(M))!==void 0&&(M=V),this.isFirstChunk=!1,this._halted=!1;var X=this._partialLine+M,V=(this._partialLine="",this._handle.parse(X,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(M=V.meta.cursor,X=(this._finished||(this._partialLine=X.substring(M-this._baseIndex),this._baseIndex=M),V&&V.data&&(this._rowCount+=V.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:V,workerId:h.WORKER_ID,finished:X});else if(O(this._config.chunk)&&!U){if(this._config.chunk(V,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=V=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(V.data),this._completeResults.errors=this._completeResults.errors.concat(V.errors),this._completeResults.meta=V.meta),this._completed||!X||!O(this._config.complete)||V&&V.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),X||V&&V.meta.paused||this._nextChunk(),V}this._halted=!0},this._sendError=function(M){O(this._config.error)?this._config.error(M):a&&this._config.error&&r.postMessage({workerId:h.WORKER_ID,error:M,finished:!1})}}function y(R){var M;(R=R||{}).chunkSize||(R.chunkSize=h.RemoteChunkSize),x.call(this,R),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(U){this._input=U,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(M=new XMLHttpRequest,this._config.withCredentials&&(M.withCredentials=this._config.withCredentials),i||(M.onload=z(this._chunkLoaded,this),M.onerror=z(this._chunkError,this)),M.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var U,X=this._config.downloadRequestHeaders;for(U in X)M.setRequestHeader(U,X[U])}var V;this._config.chunkSize&&(V=this._start+this._config.chunkSize-1,M.setRequestHeader("Range","bytes="+this._start+"-"+V));try{M.send(this._config.downloadRequestBody)}catch(te){this._chunkError(te.message)}i&&M.status===0&&this._chunkError()}},this._chunkLoaded=function(){M.readyState===4&&(M.status<200||400<=M.status?this._chunkError():(this._start+=this._config.chunkSize||M.responseText.length,this._finished=!this._config.chunkSize||this._start>=(U=>(U=U.getResponseHeader("Content-Range"))!==null?parseInt(U.substring(U.lastIndexOf("/")+1)):-1)(M),this.parseChunk(M.responseText)))},this._chunkError=function(U){U=M.statusText||U,this._sendError(new Error(U))}}function b(R){(R=R||{}).chunkSize||(R.chunkSize=h.LocalChunkSize),x.call(this,R);var M,U,X=typeof FileReader<"u";this.stream=function(V){this._input=V,U=V.slice||V.webkitSlice||V.mozSlice,X?((M=new FileReader).onload=z(this._chunkLoaded,this),M.onerror=z(this._chunkError,this)):M=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var V=this._input,te=(this._config.chunkSize&&(te=Math.min(this._start+this._config.chunkSize,this._input.size),V=U.call(V,this._start,te)),M.readAsText(V,this._config.encoding));X||this._chunkLoaded({target:{result:te}})},this._chunkLoaded=function(V){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(V.target.result)},this._chunkError=function(){this._sendError(M.error)}}function _(R){var M;x.call(this,R=R||{}),this.stream=function(U){return M=U,this._nextChunk()},this._nextChunk=function(){var U,X;if(!this._finished)return U=this._config.chunkSize,M=U?(X=M.substring(0,U),M.substring(U)):(X=M,""),this._finished=!M,this.parseChunk(X)}}function C(R){x.call(this,R=R||{});var M=[],U=!0,X=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(V){this._input=V,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){X&&M.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),M.length?this.parseChunk(M.shift()):U=!0},this._streamData=z(function(V){try{M.push(typeof V=="string"?V:V.toString(this._config.encoding)),U&&(U=!1,this._checkIsFinished(),this.parseChunk(M.shift()))}catch(te){this._streamError(te)}},this),this._streamError=z(function(V){this._streamCleanUp(),this._sendError(V)},this),this._streamEnd=z(function(){this._streamCleanUp(),X=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function N(R){var M,U,X,V,te=Math.pow(2,53),fe=-te,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,be=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,Q=0,ne=0,J=!1,oe=!1,re=[],ae={data:[],errors:[],meta:{}};function q(se){return R.skipEmptyLines==="greedy"?se.join("").trim()==="":se.length===1&&se[0].length===0}function le(){if(ae&&X&&(Pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),X=!1),R.skipEmptyLines&&(ae.data=ae.data.filter(function(Ee){return!q(Ee)})),ue()){let Ee=function(ze,Oe){O(R.transformHeader)&&(ze=R.transformHeader(ze,Oe)),re.push(ze)};if(ae)if(Array.isArray(ae.data[0])){for(var se=0;ue()&&se<ae.data.length;se++)ae.data[se].forEach(Ee);ae.data.splice(0,1)}else ae.data.forEach(Ee)}function Y(Ee,ze){for(var Oe=R.header?{}:[],$e=0;$e<Ee.length;$e++){var Xe=$e,Ge=Ee[$e],Ge=((xt,je)=>(We=>(R.dynamicTypingFunction&&R.dynamicTyping[We]===void 0&&(R.dynamicTyping[We]=R.dynamicTypingFunction(We)),(R.dynamicTyping[We]||R.dynamicTyping)===!0))(xt)?je==="true"||je==="TRUE"||je!=="false"&&je!=="FALSE"&&((We=>{if(G.test(We)&&(We=parseFloat(We),fe<We&&We<te))return 1})(je)?parseFloat(je):be.test(je)?new Date(je):je===""?null:je):je)(Xe=R.header?$e>=re.length?"__parsed_extra":re[$e]:Xe,Ge=R.transform?R.transform(Ge,Xe):Ge);Xe==="__parsed_extra"?(Oe[Xe]=Oe[Xe]||[],Oe[Xe].push(Ge)):Oe[Xe]=Ge}return R.header&&($e>re.length?Pe("FieldMismatch","TooManyFields","Too many fields: expected "+re.length+" fields but parsed "+$e,ne+ze):$e<re.length&&Pe("FieldMismatch","TooFewFields","Too few fields: expected "+re.length+" fields but parsed "+$e,ne+ze)),Oe}var ye;ae&&(R.header||R.dynamicTyping||R.transform)&&(ye=1,!ae.data.length||Array.isArray(ae.data[0])?(ae.data=ae.data.map(Y),ye=ae.data.length):ae.data=Y(ae.data,0),R.header&&ae.meta&&(ae.meta.fields=re),ne+=ye)}function ue(){return R.header&&re.length===0}function Pe(se,Y,ye,Ee){se={type:se,code:Y,message:ye},Ee!==void 0&&(se.row=Ee),ae.errors.push(se)}O(R.step)&&(V=R.step,R.step=function(se){ae=se,ue()?le():(le(),ae.data.length!==0&&(Q+=se.data.length,R.preview&&Q>R.preview?U.abort():(ae.data=ae.data[0],V(ae,$))))}),this.parse=function(se,Y,ye){var Ee=R.quoteChar||'"',Ee=(R.newline||(R.newline=this.guessLineEndings(se,Ee)),X=!1,R.delimiter?O(R.delimiter)&&(R.delimiter=R.delimiter(se),ae.meta.delimiter=R.delimiter):((Ee=((ze,Oe,$e,Xe,Ge)=>{var xt,je,We,lr;Ge=Ge||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Me=0;Me<Ge.length;Me++){for(var Wn,_s=Ge[Me],gt=0,kn=0,yt=0,yn=(We=void 0,new E({comments:Xe,delimiter:_s,newline:Oe,preview:10}).parse(ze)),jt=0;jt<yn.data.length;jt++)$e&&q(yn.data[jt])?yt++:(Wn=yn.data[jt].length,kn+=Wn,We===void 0?We=Wn:0<Wn&&(gt+=Math.abs(Wn-We),We=Wn));0<yn.data.length&&(kn/=yn.data.length-yt),(je===void 0||gt<=je)&&(lr===void 0||lr<kn)&&1.99<kn&&(je=gt,xt=_s,lr=kn)}return{successful:!!(R.delimiter=xt),bestDelimiter:xt}})(se,R.newline,R.skipEmptyLines,R.comments,R.delimitersToGuess)).successful?R.delimiter=Ee.bestDelimiter:(X=!0,R.delimiter=h.DefaultDelimiter),ae.meta.delimiter=R.delimiter),F(R));return R.preview&&R.header&&Ee.preview++,M=se,U=new E(Ee),ae=U.parse(M,Y,ye),le(),J?{meta:{paused:!0}}:ae||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,U.abort(),M=O(R.chunk)?"":M.substring(U.getCharIndex())},this.resume=function(){$.streamer._halted?(J=!1,$.streamer.parseChunk(M,!0)):setTimeout($.resume,3)},this.aborted=function(){return oe},this.abort=function(){oe=!0,U.abort(),ae.meta.aborted=!0,O(R.complete)&&R.complete(ae),M=""},this.guessLineEndings=function(ze,Ee){ze=ze.substring(0,1048576);var Ee=new RegExp(k(Ee)+"([^]*?)"+k(Ee),"gm"),ye=(ze=ze.replace(Ee,"")).split("\r"),Ee=ze.split(`
`),ze=1<Ee.length&&Ee[0].length<ye[0].length;if(ye.length===1||ze)return`
`;for(var Oe=0,$e=0;$e<ye.length;$e++)ye[$e][0]===`
`&&Oe++;return Oe>=ye.length/2?`\r
`:"\r"}}function k(R){return R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(R){var M=(R=R||{}).delimiter,U=R.newline,X=R.comments,V=R.step,te=R.preview,fe=R.fastMode,G=null,be=!1,$=R.quoteChar==null?'"':R.quoteChar,Q=$;if(R.escapeChar!==void 0&&(Q=R.escapeChar),(typeof M!="string"||-1<h.BAD_DELIMITERS.indexOf(M))&&(M=","),X===M)throw new Error("Comment character same as delimiter");X===!0?X="#":(typeof X!="string"||-1<h.BAD_DELIMITERS.indexOf(X))&&(X=!1),U!==`
`&&U!=="\r"&&U!==`\r
`&&(U=`
`);var ne=0,J=!1;this.parse=function(oe,re,ae){if(typeof oe!="string")throw new Error("Input must be a string");var q=oe.length,le=M.length,ue=U.length,Pe=X.length,se=O(V),Y=[],ye=[],Ee=[],ze=ne=0;if(!oe)return gt();if(fe||fe!==!1&&oe.indexOf($)===-1){for(var Oe=oe.split(U),$e=0;$e<Oe.length;$e++){if(Ee=Oe[$e],ne+=Ee.length,$e!==Oe.length-1)ne+=U.length;else if(ae)return gt();if(!X||Ee.substring(0,Pe)!==X){if(se){if(Y=[],lr(Ee.split(M)),kn(),J)return gt()}else lr(Ee.split(M));if(te&&te<=$e)return Y=Y.slice(0,te),gt(!0)}}return gt()}for(var Xe=oe.indexOf(M,ne),Ge=oe.indexOf(U,ne),xt=new RegExp(k(Q)+k($),"g"),je=oe.indexOf($,ne);;)if(oe[ne]===$)for(je=ne,ne++;;){if((je=oe.indexOf($,je+1))===-1)return ae||ye.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:ne}),Wn();if(je===q-1)return Wn(oe.substring(ne,je).replace(xt,$));if($===Q&&oe[je+1]===Q)je++;else if($===Q||je===0||oe[je-1]!==Q){Xe!==-1&&Xe<je+1&&(Xe=oe.indexOf(M,je+1));var We=Me((Ge=Ge!==-1&&Ge<je+1?oe.indexOf(U,je+1):Ge)===-1?Xe:Math.min(Xe,Ge));if(oe.substr(je+1+We,le)===M){Ee.push(oe.substring(ne,je).replace(xt,$)),oe[ne=je+1+We+le]!==$&&(je=oe.indexOf($,ne)),Xe=oe.indexOf(M,ne),Ge=oe.indexOf(U,ne);break}if(We=Me(Ge),oe.substring(je+1+We,je+1+We+ue)===U){if(Ee.push(oe.substring(ne,je).replace(xt,$)),_s(je+1+We+ue),Xe=oe.indexOf(M,ne),je=oe.indexOf($,ne),se&&(kn(),J))return gt();if(te&&Y.length>=te)return gt(!0);break}ye.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:ne}),je++}}else if(X&&Ee.length===0&&oe.substring(ne,ne+Pe)===X){if(Ge===-1)return gt();ne=Ge+ue,Ge=oe.indexOf(U,ne),Xe=oe.indexOf(M,ne)}else if(Xe!==-1&&(Xe<Ge||Ge===-1))Ee.push(oe.substring(ne,Xe)),ne=Xe+le,Xe=oe.indexOf(M,ne);else{if(Ge===-1)break;if(Ee.push(oe.substring(ne,Ge)),_s(Ge+ue),se&&(kn(),J))return gt();if(te&&Y.length>=te)return gt(!0)}return Wn();function lr(yt){Y.push(yt),ze=ne}function Me(yt){var yn=0;return yn=yt!==-1&&(yt=oe.substring(je+1,yt))&&yt.trim()===""?yt.length:yn}function Wn(yt){return ae||(yt===void 0&&(yt=oe.substring(ne)),Ee.push(yt),ne=q,lr(Ee),se&&kn()),gt()}function _s(yt){ne=yt,lr(Ee),Ee=[],Ge=oe.indexOf(U,ne)}function gt(yt){if(R.header&&!re&&Y.length&&!be){var yn=Y[0],jt={},kt=new Set(yn);let xi=!1;for(let Qn=0;Qn<yn.length;Qn++){let mr=yn[Qn];if(jt[mr=O(R.transformHeader)?R.transformHeader(mr,Qn):mr]){let ft,Te=jt[mr];for(;ft=mr+"_"+Te,Te++,kt.has(ft););kt.add(ft),yn[Qn]=ft,jt[mr]++,xi=!0,(G=G===null?{}:G)[ft]=mr}else jt[mr]=1,yn[Qn]=mr;kt.add(mr)}xi&&console.warn("Duplicate headers found and renamed."),be=!0}return{data:Y,errors:ye,meta:{delimiter:M,linebreak:U,aborted:J,truncated:!!yt,cursor:ze+(re||0),renamedHeaders:G}}}function kn(){V(gt()),Y=[],ye=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return ne}}function A(R){var M=R.data,U=u[M.workerId],X=!1;if(M.error)U.userError(M.error,M.file);else if(M.results&&M.results.data){var V={abort:function(){X=!0,I(M.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(O(U.userStep)){for(var te=0;te<M.results.data.length&&(U.userStep({data:M.results.data[te],errors:M.results.errors,meta:M.results.meta},V),!X);te++);delete M.results}else O(U.userChunk)&&(U.userChunk(M.results,V,M.file),delete M.results)}M.finished&&!X&&I(M.workerId,M.results)}function I(R,M){var U=u[R];O(U.userComplete)&&U.userComplete(M),U.terminate(),delete u[R]}function j(){throw new Error("Not implemented.")}function F(R){if(typeof R!="object"||R===null)return R;var M,U=Array.isArray(R)?[]:{};for(M in R)U[M]=F(R[M]);return U}function z(R,M){return function(){R.apply(M,arguments)}}function O(R){return typeof R=="function"}return h.parse=function(R,M){var U=(M=M||{}).dynamicTyping||!1;if(O(U)&&(M.dynamicTypingFunction=U,U={}),M.dynamicTyping=U,M.transform=!!O(M.transform)&&M.transform,!M.worker||!h.WORKERS_SUPPORTED)return U=null,h.NODE_STREAM_INPUT,typeof R=="string"?(R=(X=>X.charCodeAt(0)!==65279?X:X.slice(1))(R),U=new(M.download?y:_)(M)):R.readable===!0&&O(R.read)&&O(R.on)?U=new C(M):(r.File&&R instanceof File||R instanceof Object)&&(U=new b(M)),U.stream(R);(U=(()=>{var X;return!!h.WORKERS_SUPPORTED&&(X=(()=>{var V=r.URL||r.webkitURL||null,te=n.toString();return h.BLOB_URL||(h.BLOB_URL=V.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",te,")();"],{type:"text/javascript"})))})(),(X=new r.Worker(X)).onmessage=A,X.id=d++,u[X.id]=X)})()).userStep=M.step,U.userChunk=M.chunk,U.userComplete=M.complete,U.userError=M.error,M.step=O(M.step),M.chunk=O(M.chunk),M.complete=O(M.complete),M.error=O(M.error),delete M.worker,U.postMessage({input:R,config:M,workerId:U.id})},h.unparse=function(R,M){var U=!1,X=!0,V=",",te=`\r
`,fe='"',G=fe+fe,be=!1,$=null,Q=!1,ne=((()=>{if(typeof M=="object"){if(typeof M.delimiter!="string"||h.BAD_DELIMITERS.filter(function(re){return M.delimiter.indexOf(re)!==-1}).length||(V=M.delimiter),typeof M.quotes!="boolean"&&typeof M.quotes!="function"&&!Array.isArray(M.quotes)||(U=M.quotes),typeof M.skipEmptyLines!="boolean"&&typeof M.skipEmptyLines!="string"||(be=M.skipEmptyLines),typeof M.newline=="string"&&(te=M.newline),typeof M.quoteChar=="string"&&(fe=M.quoteChar),typeof M.header=="boolean"&&(X=M.header),Array.isArray(M.columns)){if(M.columns.length===0)throw new Error("Option columns is empty");$=M.columns}M.escapeChar!==void 0&&(G=M.escapeChar+fe),M.escapeFormulae instanceof RegExp?Q=M.escapeFormulae:typeof M.escapeFormulae=="boolean"&&M.escapeFormulae&&(Q=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(fe),"g"));if(typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(R)){if(!R.length||Array.isArray(R[0]))return J(null,R,be);if(typeof R[0]=="object")return J($||Object.keys(R[0]),R,be)}else if(typeof R=="object")return typeof R.data=="string"&&(R.data=JSON.parse(R.data)),Array.isArray(R.data)&&(R.fields||(R.fields=R.meta&&R.meta.fields||$),R.fields||(R.fields=Array.isArray(R.data[0])?R.fields:typeof R.data[0]=="object"?Object.keys(R.data[0]):[]),Array.isArray(R.data[0])||typeof R.data[0]=="object"||(R.data=[R.data])),J(R.fields||[],R.data||[],be);throw new Error("Unable to serialize unrecognized input");function J(re,ae,q){var le="",ue=(typeof re=="string"&&(re=JSON.parse(re)),typeof ae=="string"&&(ae=JSON.parse(ae)),Array.isArray(re)&&0<re.length),Pe=!Array.isArray(ae[0]);if(ue&&X){for(var se=0;se<re.length;se++)0<se&&(le+=V),le+=oe(re[se],se);0<ae.length&&(le+=te)}for(var Y=0;Y<ae.length;Y++){var ye=(ue?re:ae[Y]).length,Ee=!1,ze=ue?Object.keys(ae[Y]).length===0:ae[Y].length===0;if(q&&!ue&&(Ee=q==="greedy"?ae[Y].join("").trim()==="":ae[Y].length===1&&ae[Y][0].length===0),q==="greedy"&&ue){for(var Oe=[],$e=0;$e<ye;$e++){var Xe=Pe?re[$e]:$e;Oe.push(ae[Y][Xe])}Ee=Oe.join("").trim()===""}if(!Ee){for(var Ge=0;Ge<ye;Ge++){0<Ge&&!ze&&(le+=V);var xt=ue&&Pe?re[Ge]:Ge;le+=oe(ae[Y][xt],Ge)}Y<ae.length-1&&(!q||0<ye&&!ze)&&(le+=te)}}return le}function oe(re,ae){var q,le;return re==null?"":re.constructor===Date?JSON.stringify(re).slice(1,25):(le=!1,Q&&typeof re=="string"&&Q.test(re)&&(re="'"+re,le=!0),q=re.toString().replace(ne,G),(le=le||U===!0||typeof U=="function"&&U(re,ae)||Array.isArray(U)&&U[ae]||((ue,Pe)=>{for(var se=0;se<Pe.length;se++)if(-1<ue.indexOf(Pe[se]))return!0;return!1})(q,h.BAD_DELIMITERS)||-1<q.indexOf(V)||q.charAt(0)===" "||q.charAt(q.length-1)===" ")?fe+q+fe:q)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!i&&!!r.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=E,h.ParserHandle=N,h.NetworkStreamer=y,h.FileStreamer=b,h.StringStreamer=_,h.ReadableStreamStreamer=C,r.jQuery&&((s=r.jQuery).fn.parse=function(R){var M=R.config||{},U=[];return this.each(function(te){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var fe=0;fe<this.files.length;fe++)U.push({file:this.files[fe],inputElem:this,instanceConfig:s.extend({},M)})}),X(),this;function X(){if(U.length===0)O(R.complete)&&R.complete();else{var te,fe,G,be,$=U[0];if(O(R.before)){var Q=R.before($.file,$.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return te="AbortError",fe=$.file,G=$.inputElem,be=Q.reason,void(O(R.error)&&R.error({name:te},fe,G,be));if(Q.action==="skip")return void V();typeof Q.config=="object"&&($.instanceConfig=s.extend($.instanceConfig,Q.config))}else if(Q==="skip")return void V()}var ne=$.instanceConfig.complete;$.instanceConfig.complete=function(J){O(ne)&&ne(J,$.file,$.inputElem),V()},h.parse($.file,$.instanceConfig)}}function V(){U.splice(0,1),X()}}),a&&(r.onmessage=function(R){R=R.data,h.WORKER_ID===void 0&&R&&(h.WORKER_ID=R.workerId),typeof R.input=="string"?r.postMessage({workerId:h.WORKER_ID,results:h.parse(R.input,R.config),finished:!0}):(r.File&&R.input instanceof File||R.input instanceof Object)&&(R=h.parse(R.input,R.config))&&r.postMessage({workerId:h.WORKER_ID,results:R,finished:!0})}),(y.prototype=Object.create(x.prototype)).constructor=y,(b.prototype=Object.create(x.prototype)).constructor=b,(_.prototype=Object.create(_.prototype)).constructor=_,(C.prototype=Object.create(x.prototype)).constructor=C,h})})(L5);var rU=L5.exports;const sU=Tf(rU),iU=()=>{const t=Hs(),e=zs(),n=T.useRef(null),[r,s]=T.useState(!1),[i,a]=T.useState(0),[u,d]=T.useState([]),h=y=>{var _,C;const b=[];if((_=y.name)!=null&&_.trim()||b.push("Product name is required"),(C=y.sku)!=null&&C.trim()||b.push("SKU is required"),!y.price)b.push("Price is required");else{const N=parseFloat(y.price);isNaN(N)?b.push("Price must be a valid number"):N<0?b.push("Price cannot be negative"):N>1e6&&b.push("Price exceeds maximum allowed value")}if(!y.quantity)b.push("Quantity is required");else{const N=parseInt(y.quantity);isNaN(N)?b.push("Quantity must be a valid number"):N<0?b.push("Quantity cannot be negative"):N>1e6&&b.push("Quantity exceeds maximum allowed value")}if(!y.minimum_quantity)b.push("Minimum quantity is required");else{const N=parseInt(y.minimum_quantity);isNaN(N)?b.push("Minimum quantity must be a valid number"):N<0?b.push("Minimum quantity cannot be negative"):N>parseInt(y.quantity||"0")&&b.push("Minimum quantity cannot be greater than current quantity")}return b},x=y=>{var _;const b=(_=y.target.files)==null?void 0:_[0];if(b){if(!b.name.toLowerCase().endsWith(".csv")){d(["Please upload a valid CSV file"]),n.current&&(n.current.value="");return}if(b.size>5*1024*1024){d(["File size exceeds 5MB limit"]),n.current&&(n.current.value="");return}s(!0),a(0),d([]),sU.parse(b,{header:!0,skipEmptyLines:!0,complete:async C=>{const N=C.data,E=["name","sku","price","quantity","minimum_quantity"].filter(z=>{var O;return!((O=C.meta.fields)!=null&&O.includes(z))});if(E.length>0){d([`Missing required columns: ${E.join(", ")}`]),s(!1);return}if(N.length===0){d(["CSV file is empty"]),s(!1);return}if(N.length>1e3){d(["CSV file contains too many rows (maximum 1000)"]),s(!1);return}const A=N.length,I=[];let j=0,F=0;for(const[z,O]of N.entries()){const R=h(O);if(R.length>0){I.push(`Row ${z+1}: ${R.join(", ")}`);continue}try{const M={name:O.name.trim(),sku:O.sku.trim(),selling_price:parseFloat(O.price),stock:parseInt(O.quantity),reorder_level:parseInt(O.minimum_quantity),category:"Imported",cost_price:parseFloat(O.price)*.7,location:"Main Warehouse"};await e(rx(M)).unwrap(),j++,F++,a(Math.round(j/A*100))}catch(M){const U=M instanceof Error?M.message:"Unknown error";I.push(`Row ${z+1}: Failed to import - ${U}`),j++,a(Math.round(j/A*100))}}d(I),s(!1),I.length===0?(alert(`Successfully imported ${F} products!`),t("/products")):F>0&&alert(`Imported ${F} out of ${A} products. Check the error list for details.`)},error:C=>{d([`Failed to parse CSV file: ${C.message}`]),s(!1),n.current&&(n.current.value="")}})}};return m.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[m.jsx("div",{className:"md:flex md:items-center md:justify-between mb-6",children:m.jsx("div",{className:"min-w-0 flex-1",children:m.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:"Import Products from CSV"})})}),m.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:m.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[m.jsxs("div",{className:"mt-2 max-w-xl text-sm text-gray-500",children:[m.jsx("p",{children:"Upload a CSV file with the following columns:"}),m.jsxs("ul",{className:"list-disc pl-5 mt-2",children:[m.jsx("li",{children:"name (required)"}),m.jsx("li",{children:"sku (required)"}),m.jsx("li",{children:"price (required, positive number)"}),m.jsx("li",{children:"quantity (required, non-negative number)"}),m.jsx("li",{children:"minimum_quantity (required, non-negative number)"})]})]}),m.jsxs("div",{className:"mt-5",children:[m.jsx("input",{type:"file",ref:n,accept:".csv",onChange:x,className:"hidden"}),m.jsx("button",{type:"button",onClick:()=>{var y;return(y=n.current)==null?void 0:y.click()},disabled:r,className:`inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Uploading...":"Select CSV File"})]}),r&&m.jsx("div",{className:"mt-4",children:m.jsxs("div",{className:"relative pt-1",children:[m.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[m.jsx("div",{children:m.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200",children:"Progress"})}),m.jsx("div",{className:"text-right",children:m.jsxs("span",{className:"text-xs font-semibold inline-block text-indigo-600",children:[i,"%"]})})]}),m.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-200",children:m.jsx("div",{style:{width:`${i}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-indigo-500 transition-all duration-500"})})]})}),u.length>0&&m.jsx("div",{className:"mt-4",children:m.jsx("div",{className:"rounded-md bg-red-50 p-4",children:m.jsx("div",{className:"flex",children:m.jsxs("div",{className:"ml-3",children:[m.jsxs("h3",{className:"text-sm font-medium text-red-800",children:["Import Errors (",u.length,")"]}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("ul",{className:"list-disc pl-5 space-y-1",children:u.map((y,b)=>m.jsx("li",{children:y},b))})})]})})})}),m.jsx("div",{className:"mt-5",children:m.jsx("button",{type:"button",onClick:()=>t("/products"),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back to Products"})})]})})]})},oU=()=>{const{addNotification:t}=dC(),e=Xt(r=>r.settings);return{showNotificationDemos:()=>{if(!e.notifications){t({type:"warning",title:"Notifications Disabled",message:"Enable notifications in settings to see system alerts",autoClose:!0,duration:5e3});return}t({type:"info",title:"Welcome to InventoryPro",message:"Notification settings are now active",autoClose:!0,duration:5e3,sendEmail:!0,emailType:"user_settings",emailDetails:{userName:e.userName,darkMode:e.darkMode,currency:e.currency,notifications:e.notifications}}),setTimeout(()=>{t({type:"success",title:"Settings Saved",message:"Your profile settings were saved successfully",autoClose:!0,duration:5e3})},1500),setTimeout(()=>{t({type:"warning",title:"Low Stock Alert",message:"5 products are below minimum stock level",autoClose:!0,duration:5e3,sendEmail:!0,emailType:"low_stock",emailDetails:{products:[{name:"Wireless Headphones",stock:3,reorder_level:5},{name:"USB-C Cable",stock:2,reorder_level:10},{name:"Power Bank 10000mAh",stock:1,reorder_level:5},{name:"Bluetooth Speaker",stock:4,reorder_level:8},{name:"Keyboard",stock:2,reorder_level:5}]}})},3e3),setTimeout(()=>{t({type:"info",title:"Order Status Updated",message:"Order #ORD-2025-0123 has been shipped",autoClose:!0,duration:5e3,sendEmail:!0,emailType:"order_update",emailDetails:{orderId:"ORD-2025-0123",status:"shipped",customer:"John Smith",amount:156.75,currency:e.currency||"USD"}})},4500)}}},aU=()=>{var Pe,se;const t=zs(),e=Xt(Y=>Y.settings),n=Hs(),{showNotificationDemos:r}=oU(),[s,i]=T.useState(e.userName||"Demo User"),[a,u]=T.useState(e.userEmail||"demo@example.com"),[d,h]=T.useState(e.darkMode||!1),[x,y]=T.useState(e.currency||"USD"),[b,_]=T.useState(e.notifications||!1),[C,N]=T.useState(!1),[k,E]=T.useState(!1),[A,I]=T.useState(e.profileImage||""),[j,F]=T.useState(!1),[z,O]=T.useState(e.companyName||"InventoryPro"),[R,M]=T.useState(e.lowStockThreshold||5),[U,X]=T.useState(e.defaultCategory||"General"),[V,te]=T.useState(e.autoGenerateSKU!==!1),[fe,G]=T.useState(e.enableBarcodeScanning!==!1),[be,$]=T.useState(e.valuationMethod||"FIFO"),Q=[{value:"FIFO",name:"FIFO (First In, First Out)",description:"Assumes that items purchased first are sold first. Cost of inventory reflects most recent purchases."},{value:"LIFO",name:"LIFO (Last In, First Out)",description:"Assumes that items purchased most recently are sold first. Cost of inventory reflects oldest purchases."},{value:"Average Cost",name:"Average Cost (Weighted Average)",description:"Uses the weighted average of all units available for sale to assign cost to both COGS and ending inventory."},{value:"Specific Identification",name:"Specific Identification",description:"Tracks the cost of each individual item in inventory. Most precise method, but requires detailed tracking."}],ne=["General","Electronics","Clothing","Office Supplies","Furniture","Food & Beverages","Books","Tools","Health & Beauty","Toys & Games","Sports Equipment","Raw Materials","Automotive","Pet Supplies"],J=T.useRef(null),oe=[{code:"USD",name:"US Dollar ($)"},{code:"EUR",name:"Euro (€)"},{code:"GBP",name:"British Pound (£)"},{code:"JPY",name:"Japanese Yen (¥)"},{code:"CAD",name:"Canadian Dollar (C$)"},{code:"AUD",name:"Australian Dollar (A$)"},{code:"GHS",name:"Ghana Cedis (₵)"},{code:"AED",name:"UAE Dirham (د.إ)"},{code:"AFN",name:"Afghan Afghani (؋)"},{code:"ALL",name:"Albanian Lek (L)"},{code:"AMD",name:"Armenian Dram (֏)"},{code:"ANG",name:"Netherlands Antillean Guilder (ƒ)"},{code:"AOA",name:"Angolan Kwanza (Kz)"},{code:"ARS",name:"Argentine Peso ($)"},{code:"AWG",name:"Aruban Florin (ƒ)"},{code:"AZN",name:"Azerbaijani Manat (₼)"},{code:"BAM",name:"Bosnia-Herzegovina Convertible Mark (KM)"},{code:"BBD",name:"Barbadian Dollar ($)"},{code:"BDT",name:"Bangladeshi Taka (৳)"},{code:"BGN",name:"Bulgarian Lev (лв)"},{code:"BHD",name:"Bahraini Dinar (.د.ب)"},{code:"BIF",name:"Burundian Franc (FBu)"},{code:"BMD",name:"Bermudan Dollar ($)"},{code:"BND",name:"Brunei Dollar ($)"},{code:"BOB",name:"Bolivian Boliviano (Bs.)"},{code:"BRL",name:"Brazilian Real (R$)"},{code:"BSD",name:"Bahamian Dollar ($)"},{code:"BTN",name:"Bhutanese Ngultrum (Nu.)"},{code:"BWP",name:"Botswanan Pula (P)"},{code:"BYN",name:"Belarusian Ruble (Br)"},{code:"BZD",name:"Belize Dollar (BZ$)"},{code:"CNY",name:"Chinese Yuan (¥)"},{code:"INR",name:"Indian Rupee (₹)"},{code:"NGN",name:"Nigerian Naira (₦)"},{code:"ZAR",name:"South African Rand (R)"}],re=()=>{n(-1)},ae=Y=>{var ze;const ye=(ze=Y.target.files)==null?void 0:ze[0];if(!ye)return;if(!ye.type.startsWith("image/")){alert("Please upload an image file");return}if(ye.size>5*1024*1024){alert("File size should be less than 5MB");return}const Ee=new FileReader;Ee.onload=Oe=>{var $e;($e=Oe.target)!=null&&$e.result&&I(Oe.target.result)},Ee.readAsDataURL(ye)},q=()=>{var Y;(Y=J.current)==null||Y.click()},le=()=>{I("")},ue=async Y=>{Y.preventDefault(),N(!0),t(XP({userName:s,userEmail:a,darkMode:d,currency:x,notifications:b,profileImage:A,companyName:z,lowStockThreshold:R,defaultCategory:U,autoGenerateSKU:V,enableBarcodeScanning:fe,valuationMethod:be})),await new Promise(ye=>setTimeout(ye,800)),N(!1),E(!0),b&&r(),setTimeout(()=>{E(!1)},3e3)};return m.jsxs("div",{className:`max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8 ${e.darkMode?"text-gray-100":""}`,children:[m.jsxs("div",{className:"mb-8 flex items-center",children:[m.jsx("button",{onClick:re,className:`mr-3 p-1 rounded-full ${e.darkMode?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:m.jsx(ix,{className:"h-6 w-6"})}),m.jsx("h1",{className:"text-2xl font-bold",children:"User Profile Settings"})]}),k&&m.jsx("div",{className:"mb-6 bg-green-50 dark:bg-green-900/30 border dark:border-green-900 border-green-200 text-green-800 dark:text-green-300 px-4 py-3 rounded-md",children:"Settings saved successfully!"}),m.jsxs("form",{onSubmit:ue,className:"space-y-8",children:[m.jsxs("div",{className:`p-6 rounded-xl border ${e.darkMode?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-white"} settings-card`,children:[m.jsx("h2",{className:"text-lg font-medium mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Company Information"}),m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center mr-3 ${e.darkMode?"bg-blue-900/20":"bg-blue-100"}`,children:m.jsx(wO,{className:"h-6 w-6 text-blue-500"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium",children:"Company Name"}),m.jsx("input",{id:"companyName",type:"text",value:z,onChange:Y=>O(Y.target.value),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${e.darkMode?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Enter your company name"}),m.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This name will be displayed throughout the application and on generated reports."})]})]})]}),m.jsxs("div",{className:`p-6 rounded-xl border ${e.darkMode?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-white"} settings-card`,children:[m.jsx("h2",{className:"text-lg font-medium mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"User Information"}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[m.jsx("div",{className:"flex justify-center sm:block",children:m.jsxs("div",{className:"relative",onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),children:[A?m.jsxs("div",{className:"w-24 h-24 rounded-full overflow-hidden relative",children:[m.jsx("img",{src:A,alt:"Profile",className:"w-full h-full object-cover"}),j&&m.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center text-white",children:[m.jsxs("button",{type:"button",className:"text-xs font-medium mb-1",onClick:q,children:[m.jsx(hC,{className:"h-4 w-4 mx-auto mb-1"}),"Change"]}),m.jsx("button",{type:"button",className:"text-xs font-medium text-red-300 hover:text-red-200",onClick:le,children:"Remove"})]})]}):m.jsxs("div",{onClick:q,className:`w-24 h-24 rounded-full flex flex-col items-center justify-center cursor-pointer transition-all duration-200 ${e.darkMode?"bg-blue-900/20 hover:bg-blue-800/30":"bg-blue-100 hover:bg-blue-200"}`,children:[m.jsx(oM,{className:"h-10 w-10 text-blue-500 mb-1"}),m.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Add Photo"})]}),m.jsx("input",{ref:J,type:"file",accept:"image/*",onChange:ae,className:"hidden"})]})}),m.jsxs("div",{className:"flex-1 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Name"}),m.jsx("input",{id:"name",type:"text",value:s,onChange:Y=>i(Y.target.value),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${e.darkMode?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),m.jsx("input",{id:"email",type:"email",value:a,onChange:Y=>u(Y.target.value),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${e.darkMode?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`})]})]})]})]}),m.jsxs("div",{className:`p-6 rounded-xl border ${e.darkMode?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-white"} settings-card`,children:[m.jsx("h2",{className:"text-lg font-medium mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Inventory Settings"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center mr-3 mt-1 ${e.darkMode?"bg-indigo-900/20":"bg-indigo-100"}`,children:m.jsx(SO,{className:"h-6 w-6 text-indigo-500"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{htmlFor:"valuationMethod",className:"block text-sm font-medium",children:"Inventory Valuation Method"}),m.jsx("select",{id:"valuationMethod",value:be,onChange:Y=>$(Y.target.value),className:`mt-1 block w-full max-w-lg rounded-md shadow-sm sm:text-sm ${e.darkMode?"bg-gray-700 border-gray-600 text-white focus:ring-indigo-500 focus:border-indigo-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,children:Q.map(Y=>m.jsx("option",{value:Y.value,children:Y.name},Y.value))}),be&&m.jsxs("div",{className:`mt-2 p-3 rounded-md text-xs ${e.darkMode?"bg-gray-700/50 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[m.jsxs("p",{className:"font-medium mb-1",children:[(Pe=Q.find(Y=>Y.value===be))==null?void 0:Pe.name,":"]}),m.jsx("p",{children:(se=Q.find(Y=>Y.value===be))==null?void 0:se.description})]}),m.jsx("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:"This method determines how inventory costs are calculated for accounting and reporting."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center mr-3 mt-1 ${e.darkMode?"bg-amber-900/20":"bg-amber-100"}`,children:m.jsx(fl,{className:"h-6 w-6 text-amber-500"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium",children:"Low Stock Threshold"}),m.jsx("input",{id:"lowStockThreshold",type:"number",min:"0",value:R,onChange:Y=>M(Number(Y.target.value)),className:`mt-1 block w-full max-w-xs rounded-md shadow-sm sm:text-sm ${e.darkMode?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),m.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Items with quantity less than this value will trigger low stock warnings."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center mr-3 mt-1 ${e.darkMode?"bg-blue-900/20":"bg-blue-100"}`,children:m.jsx(KO,{className:"h-6 w-6 text-blue-500"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{htmlFor:"defaultCategory",className:"block text-sm font-medium",children:"Default Category"}),m.jsx("select",{id:"defaultCategory",value:U,onChange:Y=>X(Y.target.value),className:`mt-1 block w-full max-w-xs rounded-md shadow-sm sm:text-sm ${e.darkMode?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,children:ne.map(Y=>m.jsx("option",{value:Y,children:Y},Y))}),m.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"The default category assigned to new inventory items."})]})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center mr-3 mt-1 ${e.darkMode?"bg-purple-900/20":"bg-purple-100"}`,children:m.jsx(mM,{className:"h-6 w-6 text-purple-500"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"autoGenerateSKU",className:"text-sm font-medium",children:"Auto-Generate SKU"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically generate SKU codes for new products"})]}),m.jsxs("div",{className:"relative inline-block w-12 h-6 ml-2",children:[m.jsx("input",{type:"checkbox",id:"autoGenerateSKU",checked:V,onChange:Y=>te(Y.target.checked),className:"sr-only"}),m.jsx("label",{htmlFor:"autoGenerateSKU",className:`absolute cursor-pointer inset-0 rounded-full transition-colors duration-200 ease-in-out toggle-bg ${V?"bg-purple-600 toggle-active":"bg-gray-200"}`,children:m.jsx("span",{className:`absolute left-1 bottom-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 ease-in-out ${V?"transform translate-x-6":""}`})})]})]})})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center mr-3 mt-1 ${e.darkMode?"bg-green-900/20":"bg-green-100"}`,children:m.jsx(qu,{className:"h-6 w-6 text-green-500"})}),m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"enableBarcodeScanning",className:"text-sm font-medium",children:"Barcode Scanning"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable barcode/QR code scanning for faster inventory management"})]}),m.jsxs("div",{className:"relative inline-block w-12 h-6 ml-2",children:[m.jsx("input",{type:"checkbox",id:"enableBarcodeScanning",checked:fe,onChange:Y=>G(Y.target.checked),className:"sr-only"}),m.jsx("label",{htmlFor:"enableBarcodeScanning",className:`absolute cursor-pointer inset-0 rounded-full transition-colors duration-200 ease-in-out toggle-bg ${fe?"bg-green-600 toggle-active":"bg-gray-200"}`,children:m.jsx("span",{className:`absolute left-1 bottom-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 ease-in-out ${fe?"transform translate-x-6":""}`})})]})]})})]})]})]}),m.jsxs("div",{className:`p-6 rounded-xl border ${e.darkMode?"border-gray-700 bg-gray-800/50":"border-gray-200 bg-white"} settings-card`,children:[m.jsx("h2",{className:"text-lg font-medium mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Preferences"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"darkMode",className:"text-sm font-medium",children:"Dark Mode"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable dark mode for the application"})]}),m.jsxs("div",{className:"relative inline-block w-12 h-6 ml-2",children:[m.jsx("input",{type:"checkbox",id:"darkMode",checked:d,onChange:Y=>h(Y.target.checked),className:"sr-only"}),m.jsx("label",{htmlFor:"darkMode",className:`absolute cursor-pointer inset-0 rounded-full transition-colors duration-200 ease-in-out toggle-bg ${d?"bg-blue-600 toggle-active":"bg-gray-200"}`,children:m.jsx("span",{className:`absolute left-1 bottom-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 ease-in-out ${d?"transform translate-x-6":""}`})})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium",children:"Currency"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select your preferred currency for displaying monetary values"}),m.jsx("select",{id:"currency",value:x,onChange:Y=>y(Y.target.value),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${e.darkMode?"bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,children:oe.map(Y=>m.jsx("option",{value:Y.code,children:Y.name},Y.code))})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"notifications",className:"text-sm font-medium",children:"Email Notifications"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive email notifications about low stock, order updates, and important changes"}),b&&a&&m.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Notifications will be sent to: ",a]})]}),m.jsxs("div",{className:"relative inline-block w-12 h-6 ml-2",children:[m.jsx("input",{type:"checkbox",id:"notifications",checked:b,onChange:Y=>_(Y.target.checked),className:"sr-only"}),m.jsx("label",{htmlFor:"notifications",className:`absolute cursor-pointer inset-0 rounded-full transition-colors duration-200 ease-in-out toggle-bg ${b?"bg-blue-600 toggle-active":"bg-gray-200"}`,children:m.jsx("span",{className:`absolute left-1 bottom-1 bg-white w-4 h-4 rounded-full transition-transform duration-200 ease-in-out ${b?"transform translate-x-6":""}`})})]})]})]})]}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:re,className:`px-4 py-2 border shadow-sm text-sm font-medium rounded-md ${e.darkMode?"border-gray-600 text-gray-300 bg-gray-700 hover:bg-gray-600":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:C,className:"inline-flex justify-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:C?"Saving...":"Save Settings"})]}),d&&m.jsxs("div",{className:"mt-6 p-6 rounded-xl bg-gray-800 border border-gray-700 text-white shadow-lg",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-900/30 flex items-center justify-center",children:m.jsx(rM,{className:"h-6 w-6 text-blue-400"})}),m.jsx("h3",{className:"text-lg font-medium",children:"Dark Mode Preview"})]}),m.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"This is how elements will appear in dark mode. The full effect will be applied when you save settings."}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-3 rounded-lg bg-gray-700 border border-gray-600",children:[m.jsx("div",{className:"text-sm font-medium mb-2",children:"Sample Card"}),m.jsx("div",{className:"h-2 bg-gray-600 rounded-full w-3/4 mb-2"}),m.jsx("div",{className:"h-2 bg-gray-600 rounded-full w-1/2"})]}),m.jsxs("div",{className:"p-3 rounded-lg bg-gray-700 border border-gray-600",children:[m.jsx("div",{className:"text-sm font-medium mb-2",children:"Sample Button"}),m.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-xs rounded-md",children:"Button"})]})]})]})]})]})},jx=T.createContext({});function Dx(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const Lx=typeof window<"u",F5=Lx?T.useLayoutEffect:T.useEffect,f0=T.createContext(null),Fx=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class lU extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function cU({children:t,isPresent:e,anchorX:n}){const r=T.useId(),s=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=T.useContext(Fx);return T.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:x,right:y}=i.current;if(e||!s.current||!u||!d)return;const b=n==="left"?`left: ${x}`:`right: ${y}`;s.current.dataset.motionPopId=r;const _=document.createElement("style");return a&&(_.nonce=a),document.head.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(_)}},[e]),m.jsx(lU,{isPresent:e,childRef:s,sizeRef:i,children:T.cloneElement(t,{ref:s})})}const uU=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:u})=>{const d=Dx(dU),h=T.useId(),x=T.useCallback(b=>{d.set(b,!0);for(const _ of d.values())if(!_)return;r&&r()},[d,r]),y=T.useMemo(()=>({id:h,initial:e,isPresent:n,custom:s,onExitComplete:x,register:b=>(d.set(b,!1),()=>d.delete(b))}),i?[Math.random(),x]:[n,x]);return T.useMemo(()=>{d.forEach((b,_)=>d.set(_,!1))},[n]),T.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),a==="popLayout"&&(t=m.jsx(cU,{isPresent:n,anchorX:u,children:t})),m.jsx(f0.Provider,{value:y,children:t})};function dU(){return new Map}function B5(t=!0){const e=T.useContext(f0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=T.useId();T.useEffect(()=>{if(t)return s(i)},[t]);const a=T.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,a]:[!0]}const Xd=t=>t.key||"";function hv(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const xl=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:u="left"})=>{const[d,h]=B5(a),x=T.useMemo(()=>hv(t),[t]),y=a&&!d?[]:x.map(Xd),b=T.useRef(!0),_=T.useRef(x),C=Dx(()=>new Map),[N,k]=T.useState(x),[E,A]=T.useState(x);F5(()=>{b.current=!1,_.current=x;for(let F=0;F<E.length;F++){const z=Xd(E[F]);y.includes(z)?C.delete(z):C.get(z)!==!0&&C.set(z,!1)}},[E,y.length,y.join("-")]);const I=[];if(x!==N){let F=[...x];for(let z=0;z<E.length;z++){const O=E[z],R=Xd(O);y.includes(R)||(F.splice(z,0,O),I.push(O))}return i==="wait"&&I.length&&(F=I),A(hv(F)),k(x),null}const{forceRender:j}=T.useContext(jx);return m.jsx(m.Fragment,{children:E.map(F=>{const z=Xd(F),O=a&&!d?!1:x===E||y.includes(z),R=()=>{if(C.has(z))C.set(z,!0);else return;let M=!0;C.forEach(U=>{U||(M=!1)}),M&&(j==null||j(),A(_.current),a&&(h==null||h()),r&&r())};return m.jsx(uU,{isPresent:O,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,onExitComplete:O?void 0:R,anchorX:u,children:F},z)})})};function Bx(t,e){t.indexOf(e)===-1&&t.push(e)}function Ux(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Lr=t=>t;let U5=Lr;const hU={useManualTiming:!1};function Vx(t){let e;return()=>(e===void 0&&(e=t()),e)}const yl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class zx{constructor(){this.subscriptions=[]}add(e){return Bx(this.subscriptions,e),()=>Ux(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const oi=t=>t*1e3,ai=t=>t/1e3;function V5(t,e){return e?t*(1e3/e):0}const fU=Vx(()=>window.ScrollTimeline!==void 0);class mU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(fU()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class gU extends mU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Wx(t,e){return t?t[e]||t.default||t:void 0}const T1=2e4;function z5(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<T1;)e+=n,r=t.next(e);return e>=T1?1/0:e}function Hx(t){return typeof t=="function"}function fv(t,e){t.timeline=e,t.onfinish=null}const $x=t=>Array.isArray(t)&&typeof t[0]=="number",pU={linearEasing:void 0};function xU(t,e){const n=Vx(t);return()=>{var r;return(r=pU[e])!==null&&r!==void 0?r:n()}}const vf=xU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),W5=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(yl(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function H5(t){return!!(typeof t=="function"&&vf()||!t||typeof t=="string"&&(t in I1||vf())||$x(t)||Array.isArray(t)&&t.every(H5))}const Nc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,I1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nc([0,.65,.55,1]),circOut:Nc([.55,0,1,.45]),backIn:Nc([.31,.01,.66,-.59]),backOut:Nc([.33,1.53,.69,.99])};function $5(t,e){if(t)return typeof t=="function"&&vf()?W5(t,e):$x(t)?Nc(t):Array.isArray(t)?t.map(n=>$5(n,e)||I1.easeOut):I1[t]}const Kd=["read","resolveKeyframes","update","preRender","render","postRender"],mv={value:null};function yU(t,e){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function h(y){a.has(y)&&(x.schedule(y),t()),d++,y(u)}const x={schedule:(y,b=!1,_=!1)=>{const N=_&&s?n:r;return b&&a.add(y),N.has(y)||N.add(y),y},cancel:y=>{r.delete(y),a.delete(y)},process:y=>{if(u=y,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(h),e&&mv.value&&mv.value.frameloop[e].push(d),d=0,n.clear(),s=!1,i&&(i=!1,x.process(y))}};return x}const wU=40;function G5(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Kd.reduce((E,A)=>(E[A]=yU(i,e?A:void 0),E),{}),{read:u,resolveKeyframes:d,update:h,preRender:x,render:y,postRender:b}=a,_=()=>{const E=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,wU),1),s.timestamp=E,s.isProcessing=!0,u.process(s),d.process(s),h.process(s),x.process(s),y.process(s),b.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(_))},C=()=>{n=!0,r=!0,s.isProcessing||t(_)};return{schedule:Kd.reduce((E,A)=>{const I=a[A];return E[A]=(j,F=!1,z=!1)=>(n||C(),I.schedule(j,F,z)),E},{}),cancel:E=>{for(let A=0;A<Kd.length;A++)a[Kd[A]].cancel(E)},state:s,steps:a}}const{schedule:Wt,cancel:so,state:Xn,steps:zm}=G5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Lr,!0),{schedule:Gx}=G5(queueMicrotask,!1);let _h;function bU(){_h=void 0}const Bs={now:()=>(_h===void 0&&Bs.set(Xn.isProcessing||hU.useManualTiming?Xn.timestamp:performance.now()),_h),set:t=>{_h=t,queueMicrotask(bU)}},hs={x:!1,y:!1};function q5(){return hs.x||hs.y}function vU(t){return t==="x"||t==="y"?hs[t]?null:(hs[t]=!0,()=>{hs[t]=!1}):hs.x||hs.y?null:(hs.x=hs.y=!0,()=>{hs.x=hs.y=!1})}function _U(t,e,n){var r;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Y5(t,e){const n=_U(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function gv(t){return!(t.pointerType==="touch"||q5())}function SU(t,e,n={}){const[r,s,i]=Y5(t,n),a=u=>{if(!gv(u))return;const{target:d}=u,h=e(d,u);if(typeof h!="function"||!d)return;const x=y=>{gv(y)&&(h(y),d.removeEventListener("pointerleave",x))};d.addEventListener("pointerleave",x,s)};return r.forEach(u=>{u.addEventListener("pointerenter",a,s)}),i}const X5=(t,e)=>e?t===e?!0:X5(t,e.parentElement):!1,qx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,EU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CU(t){return EU.has(t.tagName)||t.tabIndex!==-1}const Tc=new WeakSet;function pv(t){return e=>{e.key==="Enter"&&t(e)}}function Wm(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const AU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=pv(()=>{if(Tc.has(n))return;Wm(n,"down");const s=pv(()=>{Wm(n,"up")}),i=()=>Wm(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function xv(t){return qx(t)&&!q5()}function kU(t,e,n={}){const[r,s,i]=Y5(t,n),a=u=>{const d=u.currentTarget;if(!xv(u)||Tc.has(d))return;Tc.add(d);const h=e(d,u),x=(_,C)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",b),!(!xv(_)||!Tc.has(d))&&(Tc.delete(d),typeof h=="function"&&h(_,{success:C}))},y=_=>{x(_,d===window||d===document||n.useGlobalTarget||X5(d,_.target))},b=_=>{x(_,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",b,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",a,s),u instanceof HTMLElement&&(u.addEventListener("focus",h=>AU(h,s)),!CU(u)&&u.tabIndex===null&&(u.tabIndex=0))}),i}const yv=30,NU=t=>!isNaN(parseFloat(t));class TU{constructor(e,n={}){this.version="12.6.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Bs.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Bs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new zx);const r=this.events[e].add(n);return e==="change"?()=>{r(),Wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>yv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,yv);return V5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Iu(t,e){return new TU(t,e)}const K5=T.createContext({strict:!1}),wv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wl={};for(const t in wv)wl[t]={isEnabled:e=>wv[t].some(n=>!!e[n])};function IU(t){for(const e in t)wl[e]={...wl[e],...t[e]}}const RU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _f(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||RU.has(t)}let Z5=t=>!_f(t);function PU(t){t&&(Z5=e=>e.startsWith("on")?!_f(e):t(e))}try{PU(require("@emotion/is-prop-valid").default)}catch{}function OU(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Z5(s)||n===!0&&_f(s)||!e&&!_f(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function MU(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const m0=T.createContext({});function g0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ru(t){return typeof t=="string"||Array.isArray(t)}const Yx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xx=["initial",...Yx];function p0(t){return g0(t.animate)||Xx.some(e=>Ru(t[e]))}function Q5(t){return!!(p0(t)||t.variants)}function jU(t,e){if(p0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ru(n)?n:void 0,animate:Ru(r)?r:void 0}}return t.inherit!==!1?e:{}}function DU(t){const{initial:e,animate:n}=jU(t,T.useContext(m0));return T.useMemo(()=>({initial:e,animate:n}),[bv(e),bv(n)])}function bv(t){return Array.isArray(t)?t.join(" "):t}const LU=Symbol.for("motionComponentSymbol");function Va(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function FU(t,e,n){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Va(n)&&(n.current=r))},[e])}const Kx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BU="framerAppearId",J5="data-"+Kx(BU),e4=T.createContext({});function UU(t,e,n,r,s){var i,a;const{visualElement:u}=T.useContext(m0),d=T.useContext(K5),h=T.useContext(f0),x=T.useContext(Fx).reducedMotion,y=T.useRef(null);r=r||d.renderer,!y.current&&r&&(y.current=r(t,{visualState:e,parent:u,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:x}));const b=y.current,_=T.useContext(e4);b&&!b.projection&&s&&(b.type==="html"||b.type==="svg")&&VU(y.current,n,s,_);const C=T.useRef(!1);T.useInsertionEffect(()=>{b&&C.current&&b.update(n,h)});const N=n[J5],k=T.useRef(!!N&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,N))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,N)));return F5(()=>{b&&(C.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),Gx.render(b.render),k.current&&b.animationState&&b.animationState.animateChanges())}),T.useEffect(()=>{b&&(!k.current&&b.animationState&&b.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)===null||E===void 0||E.call(window,N)}),k.current=!1))}),b}function VU(t,e,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:u,layoutScroll:d,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:t4(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||u&&Va(u),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:h})}function t4(t){if(t)return t.options.allowProjection!==!1?t.projection:t4(t.parent)}function zU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,a;t&&IU(t);function u(h,x){let y;const b={...T.useContext(Fx),...h,layoutId:WU(h)},{isStatic:_}=b,C=DU(h),N=r(h,_);if(!_&&Lx){HU();const k=$U(b);y=k.MeasureLayout,C.visualElement=UU(s,N,b,e,k.ProjectionNode)}return m.jsxs(m0.Provider,{value:C,children:[y&&C.visualElement?m.jsx(y,{visualElement:C.visualElement,...b}):null,n(s,h,FU(N,C.visualElement,x),N,_,C.visualElement)]})}u.displayName=`motion.${typeof s=="string"?s:`create(${(a=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&a!==void 0?a:""})`}`;const d=T.forwardRef(u);return d[LU]=s,d}function WU({layoutId:t}){const e=T.useContext(jx).id;return e&&t!==void 0?e+"-"+t:t}function HU(t,e){T.useContext(K5).strict}function $U(t){const{drag:e,layout:n}=wl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const n4=t=>e=>typeof e=="string"&&e.startsWith(t),Zx=n4("--"),GU=n4("var(--"),Qx=t=>GU(t)?qU.test(t.split("/*")[0].trim()):!1,qU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pu={};function YU(t){for(const e in t)Pu[e]=t[e],Zx(e)&&(Pu[e].isCSSVariable=!0)}const Ol=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ca=new Set(Ol);function r4(t,{layout:e,layoutId:n}){return ca.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Pu[t]||t==="opacity")}const or=t=>!!(t&&t.getVelocity),s4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,fi=(t,e,n)=>n>e?e:n<t?t:n,Ml={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ou={...Ml,transform:t=>fi(0,1,t)},Zd={...Ml,default:1},Qu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pi=Qu("deg"),Us=Qu("%"),Ze=Qu("px"),XU=Qu("vh"),KU=Qu("vw"),vv={...Us,parse:t=>Us.parse(t)/100,transform:t=>Us.transform(t*100)},ZU={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze},QU={rotate:Pi,rotateX:Pi,rotateY:Pi,rotateZ:Pi,scale:Zd,scaleX:Zd,scaleY:Zd,scaleZ:Zd,skew:Pi,skewX:Pi,skewY:Pi,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:Ou,originX:vv,originY:vv,originZ:Ze},_v={...Ml,transform:Math.round},Jx={...ZU,...QU,zIndex:_v,size:Ze,fillOpacity:Ou,strokeOpacity:Ou,numOctaves:_v},JU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eV=Ol.length;function tV(t,e,n){let r="",s=!0;for(let i=0;i<eV;i++){const a=Ol[i],u=t[a];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(a.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const h=s4(u,Jx[a]);if(!d){s=!1;const x=JU[a]||a;r+=`${x}(${h}) `}n&&(e[a]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function ey(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let a=!1,u=!1;for(const d in e){const h=e[d];if(ca.has(d)){a=!0;continue}else if(Zx(d)){s[d]=h;continue}else{const x=s4(h,Jx[d]);d.startsWith("origin")?(u=!0,i[d]=x):r[d]=x}}if(e.transform||(a||n?r.transform=tV(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:x=0}=i;r.transformOrigin=`${d} ${h} ${x}`}}const ty=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function i4(t,e,n){for(const r in e)!or(e[r])&&!r4(r,n)&&(t[r]=e[r])}function nV({transformTemplate:t},e){return T.useMemo(()=>{const n=ty();return ey(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rV(t,e){const n=t.style||{},r={};return i4(r,n,t),Object.assign(r,nV(t,e)),r}function sV(t,e){const n={},r=rV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const iV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ny(t){return typeof t!="string"||t.includes("-")?!1:!!(iV.indexOf(t)>-1||/[A-Z]/u.test(t))}const oV={offset:"stroke-dashoffset",array:"stroke-dasharray"},aV={offset:"strokeDashoffset",array:"strokeDasharray"};function lV(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?oV:aV;t[i.offset]=Ze.transform(-r);const a=Ze.transform(e),u=Ze.transform(n);t[i.array]=`${a} ${u}`}function Sv(t,e,n){return typeof t=="string"?t:Ze.transform(e+n*t)}function cV(t,e,n){const r=Sv(e,t.x,t.width),s=Sv(n,t.y,t.height);return`${r} ${s}`}function ry(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...h},x,y){if(ey(t,h,y),x){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:_,dimensions:C}=t;b.transform&&(C&&(_.transform=b.transform),delete b.transform),C&&(s!==void 0||i!==void 0||_.transform)&&(_.transformOrigin=cV(C,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),r!==void 0&&(b.scale=r),a!==void 0&&lV(b,a,u,d,!1)}const o4=()=>({...ty(),attrs:{}}),sy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uV(t,e,n,r){const s=T.useMemo(()=>{const i=o4();return ry(i,e,sy(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};i4(i,t.style,t),s.style={...i,...s.style}}return s}function dV(t=!1){return(n,r,s,{latestValues:i},a)=>{const d=(ny(n)?uV:sV)(r,i,a,n),h=OU(r,typeof n=="string",t),x=n!==T.Fragment?{...h,...d,ref:s}:{},{children:y}=r,b=T.useMemo(()=>or(y)?y.get():y,[y]);return T.createElement(n,{...x,children:b})}}function Ev(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function iy(t,e,n,r){if(typeof e=="function"){const[s,i]=Ev(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Ev(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const R1=t=>Array.isArray(t),hV=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),fV=t=>R1(t)?t[t.length-1]||0:t;function Sh(t){const e=or(t)?t.get():t;return hV(e)?e.toValue():e}function mV({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const a={latestValues:gV(r,s,i,t),renderState:e()};return n&&(a.onMount=u=>n({props:r,current:u,...a}),a.onUpdate=u=>n(u)),a}const a4=t=>(e,n)=>{const r=T.useContext(m0),s=T.useContext(f0),i=()=>mV(t,e,r,s);return n?i():Dx(i)};function gV(t,e,n,r){const s={},i=r(t,{});for(const b in i)s[b]=Sh(i[b]);let{initial:a,animate:u}=t;const d=p0(t),h=Q5(t);e&&h&&!d&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let x=n?n.initial===!1:!1;x=x||a===!1;const y=x?u:a;if(y&&typeof y!="boolean"&&!g0(y)){const b=Array.isArray(y)?y:[y];for(let _=0;_<b.length;_++){const C=iy(t,b[_]);if(C){const{transitionEnd:N,transition:k,...E}=C;for(const A in E){let I=E[A];if(Array.isArray(I)){const j=x?I.length-1:0;I=I[j]}I!==null&&(s[A]=I)}for(const A in N)s[A]=N[A]}}}return s}function oy(t,e,n){var r;const{style:s}=t,i={};for(const a in s)(or(s[a])||e.style&&or(e.style[a])||r4(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[a]=s[a]);return i}const pV={useVisualState:a4({scrapeMotionValuesFromProps:oy,createRenderState:ty})};function l4(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function c4(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const u4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function d4(t,e,n,r){c4(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(u4.has(s)?s:Kx(s),e.attrs[s])}function h4(t,e,n){const r=oy(t,e,n);for(const s in t)if(or(t[s])||or(e[s])){const i=Ol.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const Cv=["x","y","width","height","cx","cy","r"],xV={useVisualState:a4({scrapeMotionValuesFromProps:h4,createRenderState:o4,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const u in s)if(ca.has(u)){i=!0;break}}if(!i)return;let a=!e;if(e)for(let u=0;u<Cv.length;u++){const d=Cv[u];t[d]!==e[d]&&(a=!0)}a&&Wt.read(()=>{l4(n,r),Wt.render(()=>{ry(r,s,sy(n.tagName),t.transformTemplate),d4(n,r)})})}})};function yV(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...ny(r)?xV:pV,preloadedFeatures:t,useRender:dV(s),createVisualElement:e,Component:r};return zU(a)}}function Mu(t,e,n){const r=t.getProps();return iy(r,e,n!==void 0?n:r.custom,t)}const f4=new Set(["width","height","top","left","right","bottom",...Ol]);function wV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Iu(n))}function bV(t,e){const n=Mu(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const u=fV(i[a]);wV(t,a,u)}}function vV(t){return!!(or(t)&&t.add)}function P1(t,e){const n=t.getValue("willChange");if(vV(n))return n.add(e)}function m4(t){return t.props[J5]}const g4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_V=1e-7,SV=12;function EV(t,e,n,r,s){let i,a,u=0;do a=e+(n-e)/2,i=g4(a,r,s)-t,i>0?n=a:e=a;while(Math.abs(i)>_V&&++u<SV);return a}function Ju(t,e,n,r){if(t===e&&n===r)return Lr;const s=i=>EV(i,0,1,t,n);return i=>i===0||i===1?i:g4(s(i),e,r)}const p4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,x4=t=>e=>1-t(1-e),y4=Ju(.33,1.53,.69,.99),ay=x4(y4),w4=p4(ay),b4=t=>(t*=2)<1?.5*ay(t):.5*(2-Math.pow(2,-10*(t-1))),ly=t=>1-Math.sin(Math.acos(t)),v4=x4(ly),_4=p4(ly),S4=t=>/^0[^.\s]+$/u.test(t);function CV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||S4(t):!0}const Xc=t=>Math.round(t*1e5)/1e5,cy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AV(t){return t==null}const kV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uy=(t,e)=>n=>!!(typeof n=="string"&&kV.test(n)&&n.startsWith(t)||e&&!AV(n)&&Object.prototype.hasOwnProperty.call(n,e)),E4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,u]=r.match(cy);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},NV=t=>fi(0,255,t),Hm={...Ml,transform:t=>Math.round(NV(t))},Bo={test:uy("rgb","red"),parse:E4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Hm.transform(t)+", "+Hm.transform(e)+", "+Hm.transform(n)+", "+Xc(Ou.transform(r))+")"};function TV(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const O1={test:uy("#"),parse:TV,transform:Bo.transform},za={test:uy("hsl","hue"),parse:E4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Us.transform(Xc(e))+", "+Us.transform(Xc(n))+", "+Xc(Ou.transform(r))+")"},rr={test:t=>Bo.test(t)||O1.test(t)||za.test(t),parse:t=>Bo.test(t)?Bo.parse(t):za.test(t)?za.parse(t):O1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bo.transform(t):za.transform(t)},IV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(cy))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(IV))===null||n===void 0?void 0:n.length)||0)>0}const C4="number",A4="color",PV="var",OV="var(",Av="${}",MV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ju(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const u=e.replace(MV,d=>(rr.test(d)?(r.color.push(i),s.push(A4),n.push(rr.parse(d))):d.startsWith(OV)?(r.var.push(i),s.push(PV),n.push(d)):(r.number.push(i),s.push(C4),n.push(parseFloat(d))),++i,Av)).split(Av);return{values:n,split:u,indexes:r,types:s}}function k4(t){return ju(t).values}function N4(t){const{split:e,types:n}=ju(t),r=e.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],s[a]!==void 0){const u=n[a];u===C4?i+=Xc(s[a]):u===A4?i+=rr.transform(s[a]):i+=s[a]}return i}}const jV=t=>typeof t=="number"?0:t;function DV(t){const e=k4(t);return N4(t)(e.map(jV))}const io={test:RV,parse:k4,createTransformer:N4,getAnimatableNone:DV},LV=new Set(["brightness","contrast","saturate","opacity"]);function FV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(cy)||[];if(!r)return t;const s=n.replace(r,"");let i=LV.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const BV=/\b([a-z-]*)\(.*?\)/gu,M1={...io,getAnimatableNone:t=>{const e=t.match(BV);return e?e.map(FV).join(" "):t}},UV={...Jx,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:M1,WebkitFilter:M1},T4=t=>UV[t];function I4(t,e){let n=T4(t);return n!==M1&&(n=io),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const VV=new Set(["auto","none","0"]);function zV(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!VV.has(i)&&ju(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=I4(n,s)}const Uo=t=>t*180/Math.PI,j1=t=>{const e=Uo(Math.atan2(t[1],t[0]));return D1(e)},WV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:j1,rotateZ:j1,skewX:t=>Uo(Math.atan(t[1])),skewY:t=>Uo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},D1=t=>(t=t%360,t<0&&(t+=360),t),kv=j1,Nv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Tv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),HV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Nv,scaleY:Tv,scale:t=>(Nv(t)+Tv(t))/2,rotateX:t=>D1(Uo(Math.atan2(t[6],t[5]))),rotateY:t=>D1(Uo(Math.atan2(-t[2],t[0]))),rotateZ:kv,rotate:kv,skewX:t=>Uo(Math.atan(t[4])),skewY:t=>Uo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Iv(t){return t.includes("scale")?1:0}function L1(t,e){if(!t||t==="none")return Iv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=HV,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=WV,s=u}if(!s)return Iv(e);const i=r[e],a=s[1].split(",").map(GV);return typeof i=="function"?i(a):a[i]}const $V=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return L1(n,e)};function GV(t){return parseFloat(t.trim())}const Rv=t=>t===Ml||t===Ze,qV=new Set(["x","y","z"]),YV=Ol.filter(t=>!qV.has(t));function XV(t){const e=[];return YV.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const bl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>L1(e,"x"),y:(t,{transform:e})=>L1(e,"y")};bl.translateX=bl.x;bl.translateY=bl.y;const $o=new Set;let F1=!1,B1=!1;function R4(){if(B1){const t=Array.from($o).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=XV(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var u;(u=r.getValue(i))===null||u===void 0||u.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}B1=!1,F1=!1,$o.forEach(t=>t.complete()),$o.clear()}function P4(){$o.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(B1=!0)})}function KV(){P4(),R4()}class dy{constructor(e,n,r,s,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?($o.add(this),F1||(F1=!0,Wt.read(P4),Wt.resolveKeyframes(R4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const a=s==null?void 0:s.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const d=r.readValue(n,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),s&&a===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),$o.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$o.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const O4=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ZV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function QV(t){const e=ZV.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function M4(t,e,n=1){const[r,s]=QV(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return O4(a)?parseFloat(a):a}return Qx(s)?M4(s,e,n+1):s}const j4=t=>e=>e.test(t),JV={test:t=>t==="auto",parse:t=>t},D4=[Ml,Ze,Us,Pi,KU,XU,JV],Pv=t=>D4.find(j4(t));class L4 extends dy{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),Qx(h))){const x=M4(h,n.current);x!==void 0&&(e[d]=x),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!f4.has(r)||e.length!==2)return;const[s,i]=e,a=Pv(s),u=Pv(i);if(a!==u)if(Rv(a)&&Rv(u))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)CV(e[s])&&r.push(s);r.length&&zV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,u=s[a];s[a]=bl[r](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,h])=>{n.getValue(d).set(h)}),this.resolveNoneKeyframes()}}const Ov=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(io.test(t)||t==="0")&&!t.startsWith("url("));function ez(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tz(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=Ov(s,e),u=Ov(i,e);return!a||!u?!1:ez(t)||(n==="spring"||Hx(n))&&r}const nz=t=>t!==null;function x0(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(nz),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const rz=40;class F4{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Bs.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>rz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&KV(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Bs.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:a,onComplete:u,onUpdate:d,isGenerator:h}=this.options;if(!h&&!tz(e,r,s,i))if(a)this.options.duration=0;else{d&&d(x0(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const x=this.initPlayback(e,n);x!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...x},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const rn=(t,e,n)=>t+(e-t)*n;function $m(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function sz({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,a=0;if(!e)s=i=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;s=$m(d,u,t+1/3),i=$m(d,u,t),a=$m(d,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Sf(t,e){return n=>n>0?e:t}const Gm=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},iz=[O1,Bo,za],oz=t=>iz.find(e=>e.test(t));function Mv(t){const e=oz(t);if(!e)return!1;let n=e.parse(t);return e===za&&(n=sz(n)),n}const jv=(t,e)=>{const n=Mv(t),r=Mv(e);if(!n||!r)return Sf(t,e);const s={...n};return i=>(s.red=Gm(n.red,r.red,i),s.green=Gm(n.green,r.green,i),s.blue=Gm(n.blue,r.blue,i),s.alpha=rn(n.alpha,r.alpha,i),Bo.transform(s))},az=(t,e)=>n=>e(t(n)),ed=(...t)=>t.reduce(az),U1=new Set(["none","hidden"]);function lz(t,e){return U1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function cz(t,e){return n=>rn(t,e,n)}function hy(t){return typeof t=="number"?cz:typeof t=="string"?Qx(t)?Sf:rr.test(t)?jv:hz:Array.isArray(t)?B4:typeof t=="object"?rr.test(t)?jv:uz:Sf}function B4(t,e){const n=[...t],r=n.length,s=t.map((i,a)=>hy(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function uz(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=hy(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function dz(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],u=t.indexes[a][s[a]],d=(n=t.values[u])!==null&&n!==void 0?n:0;r[i]=d,s[a]++}return r}const hz=(t,e)=>{const n=io.createTransformer(e),r=ju(t),s=ju(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?U1.has(t)&&!s.values.length||U1.has(e)&&!r.values.length?lz(t,e):ed(B4(dz(r,s),s.values),n):Sf(t,e)};function U4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rn(t,e,n):hy(t)(t,e)}const fz=5;function V4(t,e,n){const r=Math.max(e-fz,0);return V5(n-t(r),e-r)}const hn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dv=.001;function mz({duration:t=hn.duration,bounce:e=hn.bounce,velocity:n=hn.velocity,mass:r=hn.mass}){let s,i,a=1-e;a=fi(hn.minDamping,hn.maxDamping,a),t=fi(hn.minDuration,hn.maxDuration,ai(t)),a<1?(s=h=>{const x=h*a,y=x*t,b=x-n,_=V1(h,a),C=Math.exp(-y);return Dv-b/_*C},i=h=>{const y=h*a*t,b=y*n+n,_=Math.pow(a,2)*Math.pow(h,2)*t,C=Math.exp(-y),N=V1(Math.pow(h,2),a);return(-s(h)+Dv>0?-1:1)*((b-_)*C)/N}):(s=h=>{const x=Math.exp(-h*t),y=(h-n)*t+1;return-.001+x*y},i=h=>{const x=Math.exp(-h*t),y=(n-h)*(t*t);return x*y});const u=5/t,d=pz(s,i,u);if(t=oi(t),isNaN(d))return{stiffness:hn.stiffness,damping:hn.damping,duration:t};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:t}}}const gz=12;function pz(t,e,n){let r=n;for(let s=1;s<gz;s++)r=r-t(r)/e(r);return r}function V1(t,e){return t*Math.sqrt(1-e*e)}const xz=["duration","bounce"],yz=["stiffness","damping","mass"];function Lv(t,e){return e.some(n=>t[n]!==void 0)}function wz(t){let e={velocity:hn.velocity,stiffness:hn.stiffness,damping:hn.damping,mass:hn.mass,isResolvedFromDuration:!1,...t};if(!Lv(t,yz)&&Lv(t,xz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*fi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:hn.mass,stiffness:s,damping:i}}else{const n=mz(t);e={...e,...n,mass:hn.mass},e.isResolvedFromDuration=!0}return e}function z4(t=hn.visualDuration,e=hn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:i},{stiffness:d,damping:h,mass:x,duration:y,velocity:b,isResolvedFromDuration:_}=wz({...n,velocity:-ai(n.velocity||0)}),C=b||0,N=h/(2*Math.sqrt(d*x)),k=a-i,E=ai(Math.sqrt(d/x)),A=Math.abs(k)<5;r||(r=A?hn.restSpeed.granular:hn.restSpeed.default),s||(s=A?hn.restDelta.granular:hn.restDelta.default);let I;if(N<1){const F=V1(E,N);I=z=>{const O=Math.exp(-N*E*z);return a-O*((C+N*E*k)/F*Math.sin(F*z)+k*Math.cos(F*z))}}else if(N===1)I=F=>a-Math.exp(-E*F)*(k+(C+E*k)*F);else{const F=E*Math.sqrt(N*N-1);I=z=>{const O=Math.exp(-N*E*z),R=Math.min(F*z,300);return a-O*((C+N*E*k)*Math.sinh(R)+F*k*Math.cosh(R))/F}}const j={calculatedDuration:_&&y||null,next:F=>{const z=I(F);if(_)u.done=F>=y;else{let O=0;N<1&&(O=F===0?oi(C):V4(I,F,z));const R=Math.abs(O)<=r,M=Math.abs(a-z)<=s;u.done=R&&M}return u.value=u.done?a:z,u},toString:()=>{const F=Math.min(z5(j),T1),z=W5(O=>j.next(F*O).value,F,30);return F+"ms "+z}};return j}function Fv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:u,max:d,restDelta:h=.5,restSpeed:x}){const y=t[0],b={done:!1,value:y},_=R=>u!==void 0&&R<u||d!==void 0&&R>d,C=R=>u===void 0?d:d===void 0||Math.abs(u-R)<Math.abs(d-R)?u:d;let N=n*e;const k=y+N,E=a===void 0?k:a(k);E!==k&&(N=E-y);const A=R=>-N*Math.exp(-R/r),I=R=>E+A(R),j=R=>{const M=A(R),U=I(R);b.done=Math.abs(M)<=h,b.value=b.done?E:U};let F,z;const O=R=>{_(b.value)&&(F=R,z=z4({keyframes:[b.value,C(b.value)],velocity:V4(I,R,b.value),damping:s,stiffness:i,restDelta:h,restSpeed:x}))};return O(0),{calculatedDuration:null,next:R=>{let M=!1;return!z&&F===void 0&&(M=!0,j(R),O(R)),F!==void 0&&R>=F?z.next(R-F):(!M&&j(R),b)}}}const bz=Ju(.42,0,1,1),vz=Ju(0,0,.58,1),W4=Ju(.42,0,.58,1),_z=t=>Array.isArray(t)&&typeof t[0]!="number",Sz={linear:Lr,easeIn:bz,easeInOut:W4,easeOut:vz,circIn:ly,circInOut:_4,circOut:v4,backIn:ay,backInOut:w4,backOut:y4,anticipate:b4},Bv=t=>{if($x(t)){U5(t.length===4);const[e,n,r,s]=t;return Ju(e,n,r,s)}else if(typeof t=="string")return Sz[t];return t};function Ez(t,e,n){const r=[],s=n||U4,i=t.length-1;for(let a=0;a<i;a++){let u=s(t[a],t[a+1]);if(e){const d=Array.isArray(e)?e[a]||Lr:e;u=ed(d,u)}r.push(u)}return r}function Cz(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(U5(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=Ez(e,r,s),d=u.length,h=x=>{if(a&&x<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(x<t[y+1]);y++);const b=yl(t[y],t[y+1],x);return u[y](b)};return n?x=>h(fi(t[0],t[i-1],x)):h}function Az(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=yl(0,e,r);t.push(rn(n,1,s))}}function kz(t){const e=[0];return Az(e,t.length-1),e}function Nz(t,e){return t.map(n=>n*e)}function Tz(t,e){return t.map(()=>e||W4).splice(0,t.length-1)}function Ef({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=_z(r)?r.map(Bv):Bv(r),i={done:!1,value:e[0]},a=Nz(n&&n.length===e.length?n:kz(e),t),u=Cz(a,e,{ease:Array.isArray(s)?s:Tz(e,s)});return{calculatedDuration:t,next:d=>(i.value=u(d),i.done=d>=t,i)}}const Iz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Wt.update(e,!0),stop:()=>so(e),now:()=>Xn.isProcessing?Xn.timestamp:Bs.now()}},Rz={decay:Fv,inertia:Fv,tween:Ef,keyframes:Ef,spring:z4},Pz=t=>t/100;class fy extends F4{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,a=(s==null?void 0:s.KeyframeResolver)||dy,u=(d,h)=>this.onKeyframesResolved(d,h);this.resolver=new a(i,u,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=this.options,u=Hx(n)?n:Rz[n]||Ef;let d,h;u!==Ef&&typeof e[0]!="number"&&(d=ed(Pz,U4(e[0],e[1])),e=[0,100]);const x=u({...this.options,keyframes:e});i==="mirror"&&(h=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),x.calculatedDuration===null&&(x.calculatedDuration=z5(x));const{calculatedDuration:y}=x,b=y+s,_=b*(r+1)-s;return{generator:x,mirroredGenerator:h,mapPercentToKeyframes:d,calculatedDuration:y,resolvedDuration:b,totalDuration:_}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:d,calculatedDuration:h,totalDuration:x,resolvedDuration:y}=r;if(this.startTime===null)return i.next(0);const{delay:b,repeat:_,repeatType:C,repeatDelay:N,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-x/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const E=this.currentTime-b*(this.speed>=0?1:-1),A=this.speed>=0?E<0:E>x;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=x);let I=this.currentTime,j=i;if(_){const R=Math.min(this.currentTime,x)/y;let M=Math.floor(R),U=R%1;!U&&R>=1&&(U=1),U===1&&M--,M=Math.min(M,_+1),!!(M%2)&&(C==="reverse"?(U=1-U,N&&(U-=N/y)):C==="mirror"&&(j=a)),I=fi(0,1,U)*y}const F=A?{done:!1,value:d[0]}:j.next(I);u&&(F.value=u(F.value));let{done:z}=F;!A&&h!==null&&(z=this.speed>=0?this.currentTime>=x:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return O&&s!==void 0&&(F.value=x0(d,this.options,s)),k&&k(F.value),O&&this.finish(),F}get duration(){const{resolved:e}=this;return e?ai(e.calculatedDuration):0}get time(){return ai(this.currentTime)}set time(e){e=oi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ai(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Iz,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Oz=new Set(["opacity","clipPath","filter","transform"]);function Mz(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:u="easeInOut",times:d}={}){const h={[e]:n};d&&(h.offset=d);const x=$5(u,s);return Array.isArray(x)&&(h.easing=x),t.animate(h,{delay:r,duration:s,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}const jz=Vx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cf=10,Dz=2e4;function Lz(t){return Hx(t.type)||t.type==="spring"||!H5(t.ease)}function Fz(t,e){const n=new fy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<Dz;)r=n.sample(i),s.push(r.value),i+=Cf;return{times:void 0,keyframes:s,duration:i-Cf,ease:"linear"}}const H4={anticipate:b4,backInOut:w4,circInOut:_4};function Bz(t){return t in H4}class Uv extends F4{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new L4(i,(a,u)=>this.onKeyframesResolved(a,u),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:a,motionValue:u,name:d,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof i=="string"&&vf()&&Bz(i)&&(i=H4[i]),Lz(this.options)){const{onComplete:y,onUpdate:b,motionValue:_,element:C,...N}=this.options,k=Fz(e,N);e=k.keyframes,e.length===1&&(e[1]=e[0]),r=k.duration,s=k.times,i=k.ease,a="keyframes"}const x=Mz(u.owner.current,d,e,{...this.options,duration:r,times:s,ease:i});return x.startTime=h??this.calcStartTime(),this.pendingTimeline?(fv(x,this.pendingTimeline),this.pendingTimeline=void 0):x.onfinish=()=>{const{onComplete:y}=this.options;u.set(x0(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:x,duration:r,times:s,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ai(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ai(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=oi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Lr;const{animation:r}=n;fv(r,e)}return Lr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:x,onComplete:y,element:b,..._}=this.options,C=new fy({..._,keyframes:r,duration:s,type:i,ease:a,times:u,isGenerator:!0}),N=oi(this.time);h.setWithVelocity(C.sample(N-Cf).value,C.sample(N).value,Cf)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:a,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=n.owner.getProps();return jz()&&r&&Oz.has(r)&&(r!=="transform"||!h)&&!d&&!s&&i!=="mirror"&&a!==0&&u!=="inertia"}}const Uz={type:"spring",stiffness:500,damping:25,restSpeed:10},Vz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),zz={type:"keyframes",duration:.8},Wz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Hz=(t,{keyframes:e})=>e.length>2?zz:ca.has(t)?t.startsWith("scale")?Vz(e[1]):Uz:Wz;function $z({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:u,from:d,elapsed:h,...x}){return!!Object.keys(x).length}const my=(t,e,n,r={},s,i)=>a=>{const u=Wx(r,t)||{},d=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-oi(d);let x={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:b=>{e.set(b),u.onUpdate&&u.onUpdate(b)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:i?void 0:s};$z(u)||(x={...x,...Hz(t,x)}),x.duration&&(x.duration=oi(x.duration)),x.repeatDelay&&(x.repeatDelay=oi(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let y=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(x.duration=0,x.delay===0&&(y=!0)),x.allowFlatten=!u.type&&!u.ease,y&&!i&&e.get()!==void 0){const b=x0(x.keyframes,u);if(b!==void 0)return Wt.update(()=>{x.onUpdate(b),x.onComplete()}),new gU([])}return!i&&Uv.supports(x)?new Uv(x):new fy(x)};function Gz({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function $4(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...d}=e;r&&(a=r);const h=[],x=s&&t.animationState&&t.animationState.getState()[s];for(const y in d){const b=t.getValue(y,(i=t.latestValues[y])!==null&&i!==void 0?i:null),_=d[y];if(_===void 0||x&&Gz(x,y))continue;const C={delay:n,...Wx(a||{},y)};let N=!1;if(window.MotionHandoffAnimation){const E=m4(t);if(E){const A=window.MotionHandoffAnimation(E,y,Wt);A!==null&&(C.startTime=A,N=!0)}}P1(t,y),b.start(my(y,b,_,t.shouldReduceMotion&&f4.has(y)?{type:!1}:C,t,N));const k=b.animation;k&&h.push(k)}return u&&Promise.all(h).then(()=>{Wt.update(()=>{u&&bV(t,u)})}),h}function z1(t,e,n={}){var r;const s=Mu(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const a=s?()=>Promise.all($4(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:x=0,staggerChildren:y,staggerDirection:b}=i;return qz(t,e,x+h,y,b,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[h,x]=d==="beforeChildren"?[a,u]:[u,a];return h().then(()=>x())}else return Promise.all([a(),u(n.delay)])}function qz(t,e,n=0,r=0,s=1,i){const a=[],u=(t.variantChildren.size-1)*r,d=s===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(t.variantChildren).sort(Yz).forEach((h,x)=>{h.notify("AnimationStart",e),a.push(z1(h,e,{...i,delay:n+d(x)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function Yz(t,e){return t.sortNodePosition(e)}function Xz(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>z1(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=z1(t,e,n);else{const s=typeof e=="function"?Mu(t,e,n.custom):e;r=Promise.all($4(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function G4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Kz=Xx.length;function q4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?q4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Kz;n++){const r=Xx[n],s=t.props[r];(Ru(s)||s===!1)&&(e[r]=s)}return e}const Zz=[...Yx].reverse(),Qz=Yx.length;function Jz(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Xz(t,n,r)))}function eW(t){let e=Jz(t),n=Vv(),r=!0;const s=d=>(h,x)=>{var y;const b=Mu(t,x,d==="exit"?(y=t.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(b){const{transition:_,transitionEnd:C,...N}=b;h={...h,...N,...C}}return h};function i(d){e=d(t)}function a(d){const{props:h}=t,x=q4(t.parent)||{},y=[],b=new Set;let _={},C=1/0;for(let k=0;k<Qz;k++){const E=Zz[k],A=n[E],I=h[E]!==void 0?h[E]:x[E],j=Ru(I),F=E===d?A.isActive:null;F===!1&&(C=k);let z=I===x[E]&&I!==h[E]&&j;if(z&&r&&t.manuallyAnimateOnMount&&(z=!1),A.protectedKeys={..._},!A.isActive&&F===null||!I&&!A.prevProp||g0(I)||typeof I=="boolean")continue;const O=tW(A.prevProp,I);let R=O||E===d&&A.isActive&&!z&&j||k>C&&j,M=!1;const U=Array.isArray(I)?I:[I];let X=U.reduce(s(E),{});F===!1&&(X={});const{prevResolvedValues:V={}}=A,te={...V,...X},fe=$=>{R=!0,b.has($)&&(M=!0,b.delete($)),A.needsAnimating[$]=!0;const Q=t.getValue($);Q&&(Q.liveStyle=!1)};for(const $ in te){const Q=X[$],ne=V[$];if(_.hasOwnProperty($))continue;let J=!1;R1(Q)&&R1(ne)?J=!G4(Q,ne):J=Q!==ne,J?Q!=null?fe($):b.add($):Q!==void 0&&b.has($)?fe($):A.protectedKeys[$]=!0}A.prevProp=I,A.prevResolvedValues=X,A.isActive&&(_={..._,...X}),r&&t.blockInitialAnimation&&(R=!1),R&&(!(z&&O)||M)&&y.push(...U.map($=>({animation:$,options:{type:E}})))}if(b.size){const k={};if(typeof h.initial!="boolean"){const E=Mu(t,Array.isArray(h.initial)?h.initial[0]:h.initial);E&&E.transition&&(k.transition=E.transition)}b.forEach(E=>{const A=t.getBaseTarget(E),I=t.getValue(E);I&&(I.liveStyle=!0),k[E]=A??null}),y.push({animation:k})}let N=!!y.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(y):Promise.resolve()}function u(d,h){var x;if(n[d].isActive===h)return Promise.resolve();(x=t.variantChildren)===null||x===void 0||x.forEach(b=>{var _;return(_=b.animationState)===null||_===void 0?void 0:_.setActive(d,h)}),n[d].isActive=h;const y=a(d);for(const b in n)n[b].protectedKeys={};return y}return{animateChanges:a,setActive:u,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Vv(),r=!0}}}function tW(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!G4(e,t):!1}function _o(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vv(){return{animate:_o(!0),whileInView:_o(),whileHover:_o(),whileTap:_o(),whileDrag:_o(),whileFocus:_o(),exit:_o()}}class fo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nW extends fo{constructor(e){super(e),e.animationState||(e.animationState=eW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();g0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let rW=0;class sW extends fo{constructor(){super(...arguments),this.id=rW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const iW={animation:{Feature:nW},exit:{Feature:sW}};function Du(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function td(t){return{point:{x:t.pageX,y:t.pageY}}}const oW=t=>e=>qx(e)&&t(e,td(e));function Kc(t,e,n,r){return Du(t,e,oW(n),r)}function Y4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function aW({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function lW(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const X4=1e-4,cW=1-X4,uW=1+X4,K4=.01,dW=0-K4,hW=0+K4;function ur(t){return t.max-t.min}function fW(t,e,n){return Math.abs(t-e)<=n}function zv(t,e,n,r=.5){t.origin=r,t.originPoint=rn(e.min,e.max,t.origin),t.scale=ur(n)/ur(e),t.translate=rn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cW&&t.scale<=uW||isNaN(t.scale))&&(t.scale=1),(t.translate>=dW&&t.translate<=hW||isNaN(t.translate))&&(t.translate=0)}function Zc(t,e,n,r){zv(t.x,e.x,n.x,r?r.originX:void 0),zv(t.y,e.y,n.y,r?r.originY:void 0)}function Wv(t,e,n){t.min=n.min+e.min,t.max=t.min+ur(e)}function mW(t,e,n){Wv(t.x,e.x,n.x),Wv(t.y,e.y,n.y)}function Hv(t,e,n){t.min=e.min-n.min,t.max=t.min+ur(e)}function Qc(t,e,n){Hv(t.x,e.x,n.x),Hv(t.y,e.y,n.y)}const $v=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wa=()=>({x:$v(),y:$v()}),Gv=()=>({min:0,max:0}),_n=()=>({x:Gv(),y:Gv()});function Kr(t){return[t("x"),t("y")]}function qm(t){return t===void 0||t===1}function W1({scale:t,scaleX:e,scaleY:n}){return!qm(t)||!qm(e)||!qm(n)}function Ro(t){return W1(t)||Z4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Z4(t){return qv(t.x)||qv(t.y)}function qv(t){return t&&t!=="0%"}function Af(t,e,n){const r=t-n,s=e*r;return n+s}function Yv(t,e,n,r,s){return s!==void 0&&(t=Af(t,s,r)),Af(t,n,r)+e}function H1(t,e=0,n=1,r,s){t.min=Yv(t.min,e,n,r,s),t.max=Yv(t.max,e,n,r,s)}function Q4(t,{x:e,y:n}){H1(t.x,e.translate,e.scale,e.originPoint),H1(t.y,n.translate,n.scale,n.originPoint)}const Xv=.999999999999,Kv=1.0000000000001;function gW(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,a;for(let u=0;u<s;u++){i=n[u],a=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&$a(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Q4(t,a)),r&&Ro(i.latestValues)&&$a(t,i.latestValues))}e.x<Kv&&e.x>Xv&&(e.x=1),e.y<Kv&&e.y>Xv&&(e.y=1)}function Ha(t,e){t.min=t.min+e,t.max=t.max+e}function Zv(t,e,n,r,s=.5){const i=rn(t.min,t.max,s);H1(t,e,n,i,r)}function $a(t,e){Zv(t.x,e.x,e.scaleX,e.scale,e.originX),Zv(t.y,e.y,e.scaleY,e.scale,e.originY)}function J4(t,e){return Y4(lW(t.getBoundingClientRect(),e))}function pW(t,e,n){const r=J4(t,n),{scroll:s}=e;return s&&(Ha(r.x,s.offset.x),Ha(r.y,s.offset.y)),r}const eA=({current:t})=>t?t.ownerDocument.defaultView:null,Qv=(t,e)=>Math.abs(t-e);function xW(t,e){const n=Qv(t.x,e.x),r=Qv(t.y,e.y);return Math.sqrt(n**2+r**2)}class tA{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Xm(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=xW(y.offset,{x:0,y:0})>=3;if(!b&&!_)return;const{point:C}=y,{timestamp:N}=Xn;this.history.push({...C,timestamp:N});const{onStart:k,onMove:E}=this.handlers;b||(k&&k(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Ym(b,this.transformPagePoint),Wt.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:_,onSessionEnd:C,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Xm(y.type==="pointercancel"?this.lastMoveEventInfo:Ym(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(y,k),C&&C(y,k)},!qx(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const a=td(e),u=Ym(a,this.transformPagePoint),{point:d}=u,{timestamp:h}=Xn;this.history=[{...d,timestamp:h}];const{onSessionStart:x}=n;x&&x(e,Xm(u,this.history)),this.removeListeners=ed(Kc(this.contextWindow,"pointermove",this.handlePointerMove),Kc(this.contextWindow,"pointerup",this.handlePointerUp),Kc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),so(this.updatePoint)}}function Ym(t,e){return e?{point:e(t.point)}:t}function Jv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xm({point:t},e){return{point:t,delta:Jv(t,nA(e)),offset:Jv(t,yW(e)),velocity:wW(e,.1)}}function yW(t){return t[0]}function nA(t){return t[t.length-1]}function wW(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=nA(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>oi(e)));)n--;if(!r)return{x:0,y:0};const i=ai(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function bW(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?rn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?rn(n,t,r.max):Math.min(t,n)),t}function e_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vW(t,{top:e,left:n,bottom:r,right:s}){return{x:e_(t.x,n,s),y:e_(t.y,e,r)}}function t_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function _W(t,e){return{x:t_(t.x,e.x),y:t_(t.y,e.y)}}function SW(t,e){let n=.5;const r=ur(t),s=ur(e);return s>r?n=yl(e.min,e.max-r,t.min):r>s&&(n=yl(t.min,t.max-s,e.min)),fi(0,1,n)}function EW(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $1=.35;function CW(t=$1){return t===!1?t=0:t===!0&&(t=$1),{x:n_(t,"left","right"),y:n_(t,"top","bottom")}}function n_(t,e,n){return{min:r_(t,e),max:r_(t,n)}}function r_(t,e){return typeof t=="number"?t:t[e]||0}const AW=new WeakMap;class kW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_n(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=x=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(td(x).point)},i=(x,y)=>{const{drag:b,dragPropagation:_,onDragStart:C}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vU(b),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kr(k=>{let E=this.getAxisMotionValue(k).get()||0;if(Us.test(E)){const{projection:A}=this.visualElement;if(A&&A.layout){const I=A.layout.layoutBox[k];I&&(E=ur(I)*(parseFloat(E)/100))}}this.originPoint[k]=E}),C&&Wt.postRender(()=>C(x,y)),P1(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},a=(x,y)=>{const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:C,onDrag:N}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:k}=y;if(_&&this.currentDirection===null){this.currentDirection=NW(k),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,k),this.updateAxis("y",y.point,k),this.visualElement.render(),N&&N(x,y)},u=(x,y)=>this.stop(x,y),d=()=>Kr(x=>{var y;return this.getAnimationState(x)==="paused"&&((y=this.getAxisMotionValue(x).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new tA(e,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:eA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Wt.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Qd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=bW(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Va(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=vW(s.layoutBox,n):this.constraints=!1,this.elastic=CW(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Kr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=EW(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Va(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=pW(r,s.root,this.visualElement.getTransformPagePoint());let a=_W(s.layout.layoutBox,i);if(n){const u=n(aW(a));this.hasMutatedConstraints=!!u,u&&(a=Y4(u))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=Kr(x=>{if(!Qd(x,n,this.currentDirection))return;let y=d&&d[x]||{};a&&(y={min:0,max:0});const b=s?200:1e6,_=s?40:1e7,C={type:"inertia",velocity:r?e[x]:0,bounceStiffness:b,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...i,...y};return this.startAxisValueAnimation(x,C)});return Promise.all(h).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return P1(this.visualElement,e),r.start(my(e,r,0,n,this.visualElement,!1))}stopAnimation(){Kr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Kr(n=>{const{drag:r}=this.getProps();if(!Qd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:u}=s.layout.layoutBox[n];i.set(e[n]-rn(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Va(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Kr(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const d=u.get();s[a]=SW({min:d,max:d},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Kr(a=>{if(!Qd(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];u.set(rn(d,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;AW.set(this.visualElement,this);const e=this.visualElement.current,n=Kc(e,"pointerdown",d=>{const{drag:h,dragListener:x=!0}=this.getProps();h&&x&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Va(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Wt.read(r);const a=Du(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Kr(x=>{const y=this.getAxisMotionValue(x);y&&(this.originPoint[x]+=d[x].translate,y.set(y.get()+d[x].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=$1,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:u}}}function Qd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function NW(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class TW extends fo{constructor(e){super(e),this.removeGroupControls=Lr,this.removeListeners=Lr,this.controls=new kW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const s_=t=>(e,n)=>{t&&Wt.postRender(()=>t(e,n))};class IW extends fo{constructor(){super(...arguments),this.removePointerDownListener=Lr}onPointerDown(e){this.session=new tA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:s_(e),onStart:s_(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Wt.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=Kc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Eh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function i_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const dc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ze.test(t))t=parseFloat(t);else return t;const n=i_(t,e.target.x),r=i_(t,e.target.y);return`${n}% ${r}%`}},RW={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=io.parse(t);if(s.length>5)return r;const i=io.createTransformer(t),a=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;s[0+a]/=u,s[1+a]/=d;const h=rn(u,d,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),i(s)}};class PW extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;YU(OW),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Eh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Wt.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rA(t){const[e,n]=B5(),r=T.useContext(jx);return m.jsx(PW,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(e4),isPresent:e,safeToRemove:n})}const OW={borderRadius:{...dc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dc,borderTopRightRadius:dc,borderBottomLeftRadius:dc,borderBottomRightRadius:dc,boxShadow:RW};function MW(t,e,n){const r=or(t)?t:Iu(t);return r.start(my("",r,e,n)),r.animation}function jW(t){return t instanceof SVGElement&&t.tagName!=="svg"}const DW=(t,e)=>t.depth-e.depth;class LW{constructor(){this.children=[],this.isDirty=!1}add(e){Bx(this.children,e),this.isDirty=!0}remove(e){Ux(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DW),this.isDirty=!1,this.children.forEach(e)}}function FW(t,e){const n=Bs.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(so(r),t(i-e))};return Wt.read(r,!0),()=>so(r)}const sA=["TopLeft","TopRight","BottomLeft","BottomRight"],BW=sA.length,o_=t=>typeof t=="string"?parseFloat(t):t,a_=t=>typeof t=="number"||Ze.test(t);function UW(t,e,n,r,s,i){s?(t.opacity=rn(0,n.opacity!==void 0?n.opacity:1,VW(r)),t.opacityExit=rn(e.opacity!==void 0?e.opacity:1,0,zW(r))):i&&(t.opacity=rn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<BW;a++){const u=`border${sA[a]}Radius`;let d=l_(e,u),h=l_(n,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||a_(d)===a_(h)?(t[u]=Math.max(rn(o_(d),o_(h),r),0),(Us.test(h)||Us.test(d))&&(t[u]+="%")):t[u]=h}(e.rotate||n.rotate)&&(t.rotate=rn(e.rotate||0,n.rotate||0,r))}function l_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const VW=iA(0,.5,v4),zW=iA(.5,.95,Lr);function iA(t,e,n){return r=>r<t?0:r>e?1:n(yl(t,e,r))}function c_(t,e){t.min=e.min,t.max=e.max}function Xr(t,e){c_(t.x,e.x),c_(t.y,e.y)}function u_(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function d_(t,e,n,r,s){return t-=e,t=Af(t,1/n,r),s!==void 0&&(t=Af(t,1/s,r)),t}function WW(t,e=0,n=1,r=.5,s,i=t,a=t){if(Us.test(e)&&(e=parseFloat(e),e=rn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=rn(i.min,i.max,r);t===i&&(u-=e),t.min=d_(t.min,e,n,u,s),t.max=d_(t.max,e,n,u,s)}function h_(t,e,[n,r,s],i,a){WW(t,e[n],e[r],e[s],e.scale,i,a)}const HW=["x","scaleX","originX"],$W=["y","scaleY","originY"];function f_(t,e,n,r){h_(t.x,e,HW,n?n.x:void 0,r?r.x:void 0),h_(t.y,e,$W,n?n.y:void 0,r?r.y:void 0)}function m_(t){return t.translate===0&&t.scale===1}function oA(t){return m_(t.x)&&m_(t.y)}function g_(t,e){return t.min===e.min&&t.max===e.max}function GW(t,e){return g_(t.x,e.x)&&g_(t.y,e.y)}function p_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function aA(t,e){return p_(t.x,e.x)&&p_(t.y,e.y)}function x_(t){return ur(t.x)/ur(t.y)}function y_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class qW{constructor(){this.members=[]}add(e){Bx(this.members,e),e.scheduleRender()}remove(e){if(Ux(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YW(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:x,rotateX:y,rotateY:b,skewX:_,skewY:C}=n;h&&(r=`perspective(${h}px) ${r}`),x&&(r+=`rotate(${x}deg) `),y&&(r+=`rotateX(${y}deg) `),b&&(r+=`rotateY(${b}deg) `),_&&(r+=`skewX(${_}deg) `),C&&(r+=`skewY(${C}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const Km=["","X","Y","Z"],XW={visibility:"hidden"},w_=1e3;let KW=0;function Zm(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function lA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=m4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Wt,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&lA(r)}function cA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},u=e==null?void 0:e()){this.id=KW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JW),this.nodes.forEach(sH),this.nodes.forEach(iH),this.nodes.forEach(eH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new LW)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new zx),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jW(a),this.instance=a;const{layoutId:d,layout:h,visualElement:x}=this.options;if(x&&!x.current&&x.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),t){let y;const b=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=FW(b,250),Eh.hasAnimatedSinceResize&&(Eh.hasAnimatedSinceResize=!1,this.nodes.forEach(v_))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&x&&(d||h)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeLayoutChanged:_,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||x.getDefaultTransition()||uH,{onLayoutAnimationStart:k,onLayoutAnimationComplete:E}=x.getProps(),A=!this.targetLayout||!aA(this.targetLayout,C),I=!b&&_;if(this.options.layoutRoot||this.resumeFrom||I||b&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,I);const j={...Wx(N,"layout"),onPlay:k,onComplete:E};(x.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else b||v_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,so(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oH),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const y=this.path[x];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(b_);return}this.isUpdating||this.nodes.forEach(nH),this.isUpdating=!1,this.nodes.forEach(rH),this.nodes.forEach(ZW),this.nodes.forEach(QW),this.clearAllSnapshots();const u=Bs.now();Xn.delta=fi(0,1e3/60,u-Xn.timestamp),Xn.timestamp=u,Xn.isProcessing=!0,zm.update.process(Xn),zm.preRender.process(Xn),zm.render.process(Xn),Xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tH),this.sharedNodes.forEach(aH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ur(this.snapshot.measuredBox.x)&&!ur(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_n(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!oA(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,x=h!==this.prevTransformTemplateValue;a&&(u||Ro(this.latestValues)||x)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),dH(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return _n();const d=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(hH))){const{scroll:x}=this.root;x&&(Ha(d.x,x.offset.x),Ha(d.y,x.offset.y))}return d}removeElementScroll(a){var u;const d=_n();if(Xr(d,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return d;for(let h=0;h<this.path.length;h++){const x=this.path[h],{scroll:y,options:b}=x;x!==this.root&&y&&b.layoutScroll&&(y.wasRoot&&Xr(d,a),Ha(d.x,y.offset.x),Ha(d.y,y.offset.y))}return d}applyTransform(a,u=!1){const d=_n();Xr(d,a);for(let h=0;h<this.path.length;h++){const x=this.path[h];!u&&x.options.layoutScroll&&x.scroll&&x!==x.root&&$a(d,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),Ro(x.latestValues)&&$a(d,x.latestValues)}return Ro(this.latestValues)&&$a(d,this.latestValues),d}removeTransform(a){const u=_n();Xr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Ro(h.latestValues))continue;W1(h.latestValues)&&h.updateSnapshot();const x=_n(),y=h.measurePageBox();Xr(x,y),f_(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,x)}return Ro(this.latestValues)&&f_(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!(!this.layout||!(y||b))){if(this.resolvedRelativeTargetAt=Xn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_n(),this.relativeTargetOrigin=_n(),Qc(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=_n(),this.targetWithTransforms=_n()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xr(this.target,this.layout.layoutBox),Q4(this.target,this.targetDelta)):Xr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_n(),this.relativeTargetOrigin=_n(),Qc(this.relativeTargetOrigin,this.target,_.target),Xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||W1(this.parent.latestValues)||Z4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Xn.timestamp&&(h=!1),h)return;const{layout:x,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||y))return;Xr(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,_=this.treeScale.y;gW(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=_n());const{target:C}=u;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(u_(this.prevProjectionDelta.x,this.projectionDelta.x),u_(this.prevProjectionDelta.y,this.projectionDelta.y)),Zc(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==_||!y_(this.projectionDelta.x,this.prevProjectionDelta.x)||!y_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wa(),this.projectionDelta=Wa(),this.projectionDeltaWithTransform=Wa()}setAnimationOrigin(a,u=!1){const d=this.snapshot,h=d?d.latestValues:{},x={...this.latestValues},y=Wa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const b=_n(),_=d?d.source:void 0,C=this.layout?this.layout.source:void 0,N=_!==C,k=this.getStack(),E=!k||k.members.length<=1,A=!!(N&&!E&&this.options.crossfade===!0&&!this.path.some(cH));this.animationProgress=0;let I;this.mixTargetDelta=j=>{const F=j/1e3;__(y.x,a.x,F),__(y.y,a.y,F),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qc(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lH(this.relativeTarget,this.relativeTargetOrigin,b,F),I&&GW(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=_n()),Xr(I,this.relativeTarget)),N&&(this.animationValues=x,UW(x,h,this.latestValues,F,A,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(so(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wt.update(()=>{Eh.hasAnimatedSinceResize=!0,this.currentAnimation=MW(0,w_,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(w_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:x}=a;if(!(!u||!d||!h)){if(this!==a&&this.layout&&h&&uA(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||_n();const y=ur(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+y;const b=ur(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+b}Xr(u,d),$a(u,x),Zc(this.projectionDeltaWithTransform,this.layoutCorrected,u,x)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new qW),this.sharedNodes.get(a).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const h={};d.z&&Zm("z",a,h,this.animationValues);for(let x=0;x<Km.length;x++)Zm(`rotate${Km[x]}`,a,h,this.animationValues),Zm(`skew${Km[x]}`,a,h,this.animationValues);a.render();for(const x in h)a.setStaticValue(x,h[x]),this.animationValues&&(this.animationValues[x]=h[x]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return XW;const h={visibility:""},x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Sh(a==null?void 0:a.pointerEvents)||"",h.transform=x?x(this.latestValues,""):"none",h;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Sh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ro(this.latestValues)&&(N.transform=x?x({},""):"none",this.hasProjected=!1),N}const b=y.animationValues||y.latestValues;this.applyTransformsToTarget(),h.transform=YW(this.projectionDeltaWithTransform,this.treeScale,b),x&&(h.transform=x(b,h.transform));const{x:_,y:C}=this.projectionDelta;h.transformOrigin=`${_.origin*100}% ${C.origin*100}% 0`,y.animationValues?h.opacity=y===this?(d=(u=b.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:b.opacityExit:h.opacity=y===this?b.opacity!==void 0?b.opacity:"":b.opacityExit!==void 0?b.opacityExit:0;for(const N in Pu){if(b[N]===void 0)continue;const{correct:k,applyTo:E,isCSSVariable:A}=Pu[N],I=h.transform==="none"?b[N]:k(b[N],y);if(E){const j=E.length;for(let F=0;F<j;F++)h[E[F]]=I}else A?this.options.visualElement.renderState.vars[N]=I:h[N]=I}return this.options.layoutId&&(h.pointerEvents=y===this?Sh(a==null?void 0:a.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(b_),this.root.sharedNodes.clear()}}}function ZW(t){t.updateLayout()}function QW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,a=n.source!==t.layout.source;i==="size"?Kr(y=>{const b=a?n.measuredBox[y]:n.layoutBox[y],_=ur(b);b.min=r[y].min,b.max=b.min+_}):uA(i,n.layoutBox,r)&&Kr(y=>{const b=a?n.measuredBox[y]:n.layoutBox[y],_=ur(r[y]);b.max=b.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+_)});const u=Wa();Zc(u,r,n.layoutBox);const d=Wa();a?Zc(d,t.applyTransform(s,!0),n.measuredBox):Zc(d,r,n.layoutBox);const h=!oA(u);let x=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:b,layout:_}=y;if(b&&_){const C=_n();Qc(C,n.layoutBox,b.layoutBox);const N=_n();Qc(N,r,_.layoutBox),aA(C,N)||(x=!0),y.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=C,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:x})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function JW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tH(t){t.clearSnapshot()}function b_(t){t.clearMeasurements()}function nH(t){t.isLayoutDirty=!1}function rH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function v_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function sH(t){t.resolveTargetDelta()}function iH(t){t.calcProjection()}function oH(t){t.resetSkewAndRotation()}function aH(t){t.removeLeadSnapshot()}function __(t,e,n){t.translate=rn(e.translate,0,n),t.scale=rn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function S_(t,e,n,r){t.min=rn(e.min,n.min,r),t.max=rn(e.max,n.max,r)}function lH(t,e,n,r){S_(t.x,e.x,n.x,r),S_(t.y,e.y,n.y,r)}function cH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uH={duration:.45,ease:[.4,0,.1,1]},E_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),C_=E_("applewebkit/")&&!E_("chrome/")?Math.round:Lr;function A_(t){t.min=C_(t.min),t.max=C_(t.max)}function dH(t){A_(t.x),A_(t.y)}function uA(t,e,n){return t==="position"||t==="preserve-aspect"&&!fW(x_(e),x_(n),.2)}function hH(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const fH=cA({attachResizeListener:(t,e)=>Du(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qm={current:void 0},dA=cA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qm.current){const t=new fH({});t.mount(window),t.setOptions({layoutScroll:!0}),Qm.current=t}return Qm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mH={pan:{Feature:IW},drag:{Feature:TW,ProjectionNode:dA,MeasureLayout:rA}};function k_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Wt.postRender(()=>i(e,td(e)))}class gH extends fo{mount(){const{current:e}=this.node;e&&(this.unmount=SU(e,(n,r)=>(k_(this.node,r,"Start"),s=>k_(this.node,s,"End"))))}unmount(){}}class pH extends fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ed(Du(this.node.current,"focus",()=>this.onFocus()),Du(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function N_(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Wt.postRender(()=>i(e,td(e)))}class xH extends fo{mount(){const{current:e}=this.node;e&&(this.unmount=kU(e,(n,r)=>(N_(this.node,r,"Start"),(s,{success:i})=>N_(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const G1=new WeakMap,Jm=new WeakMap,yH=t=>{const e=G1.get(t.target);e&&e(t)},wH=t=>{t.forEach(yH)};function bH({root:t,...e}){const n=t||document;Jm.has(n)||Jm.set(n,{});const r=Jm.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(wH,{root:t,...e})),r[s]}function vH(t,e,n){const r=bH(e);return G1.set(t,n),r.observe(t),()=>{G1.delete(t),r.unobserve(t)}}const _H={some:0,all:1};class SH extends fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:_H[s]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:x,onViewportLeave:y}=this.node.getProps(),b=h?x:y;b&&b(d)};return vH(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(EH(e,n))&&this.startObserver()}unmount(){}}function EH({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const CH={inView:{Feature:SH},tap:{Feature:xH},focus:{Feature:pH},hover:{Feature:gH}},AH={layout:{ProjectionNode:dA,MeasureLayout:rA}},kf={current:null},gy={current:!1};function hA(){if(gy.current=!0,!!Lx)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kf.current=t.matches;t.addListener(e),e()}else kf.current=!1}const kH=[...D4,rr,io],NH=t=>kH.find(j4(t)),TH=new WeakMap;function IH(t,e,n){for(const r in e){const s=e[r],i=n[r];if(or(s))t.addValue(r,s);else if(or(i))t.addValue(r,Iu(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,Iu(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const T_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class RH{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Bs.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Wt.render(this.render,!1,!0))};const{latestValues:d,renderState:h,onUpdate:x}=a;this.onUpdate=x,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!i,this.isControllingVariants=p0(n),this.isVariantNode=Q5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in b){const C=b[_];d[_]!==void 0&&or(C)&&C.set(d[_],!1)}}mount(e){this.current=e,TH.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),gy.current||hA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),so(this.notifyUpdate),so(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ca.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Wt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wl){const n=wl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_n()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<T_.length;r++){const s=T_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=IH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Iu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(O4(s)||S4(s))?s=parseFloat(s):!NH(s)&&io.test(n)&&(s=I4(e,n)),this.setBaseTarget(e,or(s)?s.get():s)),or(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const a=iy(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(s=a[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!or(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new zx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class fA extends RH{constructor(){super(...arguments),this.KeyframeResolver=L4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;or(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function PH(t){return window.getComputedStyle(t)}class OH extends fA{constructor(){super(...arguments),this.type="html",this.renderInstance=c4}readValueFromInstance(e,n){if(ca.has(n))return $V(e,n);{const r=PH(e),s=(Zx(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return J4(e,n)}build(e,n,r){ey(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return oy(e,n,r)}}class MH extends fA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_n,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&l4(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ca.has(n)){const r=T4(n);return r&&r.default||0}return n=u4.has(n)?n:Kx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return h4(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&Wt.postRender(this.updateDimensions)}build(e,n,r){ry(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){d4(e,n,r,s)}mount(e){this.isSVGTag=sy(e.tagName),super.mount(e)}}const jH=(t,e)=>ny(t)?new MH(e):new OH(e,{allowProjection:t!==T.Fragment}),DH=yV({...iW,...CH,...mH,...AH},jH),ce=MU(DH);function y0(){!gy.current&&hA();const[t]=T.useState(kf.current);return t}const LH={initial:{opacity:0,y:20},animate:{opacity:1,y:0},hover:{scale:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:.98,transition:{duration:.1,ease:"easeInOut"}}},Nf=({provider:t,onClick:e,loading:n})=>{const r=()=>{switch(t){case"google":return m.jsxs(ce.svg,{className:"h-[18px] w-[18px]",viewBox:"0 0 24 24",initial:{scale:1},whileHover:{scale:1.1},transition:{duration:.2},children:[m.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),m.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),m.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),m.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]});case"github":return m.jsx(ce.svg,{className:"h-[18px] w-[18px]",viewBox:"0 0 24 24",fill:"currentColor",initial:{scale:1},whileHover:{scale:1.1},transition:{duration:.2},children:m.jsx("path",{d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z"})})}},i=(()=>{switch(t){case"google":return{className:"w-full flex items-center justify-center gap-3 px-4 h-[50px] border border-[#747775] rounded-md shadow-sm bg-white text-[#1f1f1f] hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4285F4] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",text:"Sign in with Google"};case"github":return{className:"w-full flex items-center justify-center gap-3 px-4 h-[50px] border border-[#1b1f23] rounded-md shadow-sm bg-[#24292e] text-white hover:bg-[#1b1f23] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1b1f23] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",text:"Sign in with GitHub"};default:return{className:"w-full flex items-center justify-center gap-3 px-4 h-[50px] border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",text:`Sign in with ${t.charAt(0).toUpperCase()+t.slice(1)}`}}})(),a=()=>{sessionStorage.setItem("authProvider",t),sessionStorage.setItem("isSocialLogin","true"),e()};return m.jsx(ce.button,{type:"button",onClick:a,disabled:n,className:i.className,style:{fontFamily:'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},variants:LH,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",children:n?m.jsx(ce.div,{className:"h-5 w-5",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsxs("svg",{className:"animate-spin",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):m.jsxs(m.Fragment,{children:[r(),m.jsx("span",{className:"text-[14px] font-medium",children:i.text})]})})},FH=async()=>{try{const{data:t,error:e}=await we.auth.signInWithOAuth({provider:"apple",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e;return t}catch(t){throw console.error("Error signing in with Apple:",t),t}},BH={initial:{opacity:0,y:20},animate:{opacity:1,y:0},hover:{scale:1.02,transition:{duration:.2,ease:"easeInOut"}},tap:{scale:.98,transition:{duration:.1,ease:"easeInOut"}}},mA=()=>{const t=async()=>{try{await FH()}catch(e){console.error("Apple sign in failed:",e)}};return m.jsxs(ce.button,{onClick:t,className:"w-full flex items-center justify-center h-[50px] border-0 rounded-md shadow-sm text-[14px] font-medium text-white bg-black hover:bg-[#1d1d1d] active:bg-black focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black transition-all duration-300",style:{fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif'},variants:BH,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",children:[m.jsx(ce.svg,{className:"h-[18px] w-[18px] mr-3",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",initial:{scale:1},whileHover:{scale:1.1},transition:{duration:.2},children:m.jsx("path",{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"})}),"Sign in with Apple"]})},UH={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5,ease:[.22,1,.36,1]}},exit:{opacity:0,y:-20,transition:{duration:.3}}},hc={animate:{transition:{staggerChildren:.08,delayChildren:.1}}},I_={initial:{y:0},animate:{y:[-8,0,-8],transition:{duration:6,repeat:1/0,ease:"easeInOut",times:[0,.5,1]}}},VH={initial:{scale:.8,opacity:0,rotateY:90},animate:{scale:1,opacity:1,rotateY:0,transition:{duration:.7,ease:[.22,1,.36,1]}}};function zH(){const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,i]=T.useState(!1),[a,u]=T.useState(null),[d,h]=T.useState(""),[x,y]=T.useState(null),b=Hs(),{login:_,forceGlobalSignOut:C}=ia(),N=y0();T.useEffect(()=>{const j=new URLSearchParams(window.location.search),F=j.get("verified"),z=j.get("email"),O=localStorage.getItem("verification_email");if(F==="true"||sessionStorage.getItem("showing_verification_success")==="true"){(async()=>{try{await C(),console.log("[Login] Force signed out after verification redirect"),sessionStorage.removeItem("showing_verification_success")}catch(X){console.error("[Login] Error ensuring logout:",X)}})();const M=z||O||"";y(`Your account has been verified${M?` for ${M}`:""}. Please sign in to continue.`),z?e(z):O&&(e(O),localStorage.removeItem("verification_email"));const U=window.location.pathname;window.history.replaceState({},document.title,U)}},[C]),T.useEffect(()=>{(()=>{const F=window.location.href;return F.includes("code=")&&!F.includes("verified=true")?(console.log("[Login] Detected potential verification code, redirecting to callback handler"),window.location.href=`/auth/callback${window.location.search}${window.location.hash}`,!0):!1})()},[]),T.useEffect(()=>{const j=sessionStorage.getItem("verification_email_pending")==="true",F=localStorage.getItem("verification_email");j&&F&&!x&&(console.log("[Login] Found pending verification, showing success message"),y(`We've sent a verification email to ${F}. Please check your inbox and spam folder.`),e(F),sessionStorage.removeItem("verification_email_pending"))},[x]);const E=N?{fadeIn:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0}},float:{}}:{fadeIn:UH,float:I_},A=async j=>{j.preventDefault();try{h(""),i(!0),await _(t,n),b("/")}catch(F){h(F instanceof Error?F.message:"Failed to sign in")}finally{i(!1)}},I=async j=>{try{u(j),sessionStorage.setItem("authProvider",j),sessionStorage.setItem("isSocialLogin","true");const{data:F,error:z}=await we.auth.signInWithOAuth({provider:j,options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent",provider_type:"social"}}});if(z)throw z;if(F!=null&&F.url){const O=new URL(F.url);O.searchParams.append("social_auth","true"),window.location.href=O.toString()}}catch(F){h(F instanceof Error?F.message:"Failed to sign in")}finally{u(null)}};return m.jsxs(ce.div,{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:hc,children:[m.jsxs(ce.div,{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-indigo-600 via-blue-500 to-purple-600 relative overflow-hidden",variants:E.fadeIn,children:[!N&&m.jsxs(m.Fragment,{children:[m.jsx(ce.div,{className:"absolute h-40 w-40 rounded-full bg-white/5 blur-xl",initial:{x:"10%",y:"10%"},animate:{x:["10%","15%","10%"],y:["10%","15%","10%"]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),m.jsx(ce.div,{className:"absolute h-64 w-64 rounded-full bg-indigo-400/10 blur-xl right-[-5%] bottom-[10%]",initial:{x:"0%",y:"0%"},animate:{x:["0%","-5%","0%"],y:["0%","5%","0%"]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]}),m.jsx("div",{className:"w-full flex flex-col items-center justify-center px-12 relative z-10",children:m.jsxs(ce.div,{className:"backdrop-blur-lg bg-white/10 p-8 rounded-3xl shadow-2xl w-full max-w-md border border-white/10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{variants:I_,className:"flex justify-center",children:m.jsx(ce.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{duration:.8},children:m.jsx(Gu,{className:"h-16 w-16 text-white mb-6"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-white mb-4 text-center",variants:E.fadeIn,children:"InventoryPro Cloud"}),m.jsx(ce.p,{className:"text-white/90 text-lg mb-6 text-center",variants:E.fadeIn,children:"Streamline your inventory management with our powerful cloud-based solution."}),m.jsx(ce.div,{className:"space-y-5",variants:hc,children:[{icon:"M5 13l4 4L19 7",text:"Real-time inventory tracking"},{icon:"M13 10V3L4 14h7v7l9-11h-7z",text:"Automated stock alerts"},{icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",text:"Advanced analytics"}].map((j,F)=>m.jsxs(ce.div,{className:"flex items-center",variants:E.fadeIn,custom:F,whileHover:{x:5},transition:{type:"spring",stiffness:400},children:[m.jsx(ce.div,{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center mr-4 shadow-lg",whileHover:{scale:1.1,backgroundColor:"rgba(255,255,255,0.3)"},whileTap:{scale:.95},transition:{type:"spring",stiffness:400},children:m.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:j.icon})})}),m.jsx("span",{className:"text-white font-medium",children:j.text})]},F))})]})})]}),m.jsx(ce.div,{className:"flex-1 flex items-center justify-center p-8 bg-gray-50",variants:E.fadeIn,children:m.jsxs(ce.div,{className:"w-full max-w-md",variants:hc,children:[m.jsxs(ce.div,{className:"text-center mb-8",variants:E.fadeIn,children:[m.jsx(ce.div,{className:"flex justify-center mb-5",variants:VH,children:m.jsx("svg",{className:"h-16 w-16 text-indigo-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:m.jsx("path",{d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-gray-900 mb-2",variants:E.fadeIn,children:"Welcome back"}),m.jsx(ce.p,{className:"text-gray-600",variants:E.fadeIn,children:"Please sign in to your account"})]}),m.jsxs(xl,{mode:"wait",children:[d&&m.jsx(ce.div,{className:"mb-5 p-4 rounded-lg bg-red-50 border border-red-200",initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-20,height:0},transition:{type:"spring",stiffness:500,damping:30,opacity:{duration:.2}},children:m.jsx("p",{className:"text-sm text-red-600",children:d})}),x&&m.jsx(ce.div,{className:"mb-5 p-4 rounded-lg bg-green-50 border border-green-200",initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-20,height:0},transition:{type:"spring",stiffness:500,damping:30,opacity:{duration:.2}},children:m.jsxs("div",{className:"flex",children:[m.jsx("svg",{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),m.jsx("p",{className:"text-sm text-green-700",children:x})]})})]}),m.jsxs(ce.div,{className:"space-y-3 mb-6",variants:hc,children:[m.jsx(ce.div,{variants:E.fadeIn,children:m.jsx(Nf,{provider:"google",onClick:()=>I("google"),loading:a==="google"})}),m.jsx(ce.div,{variants:E.fadeIn,children:m.jsx(mA,{})}),m.jsx(ce.div,{variants:E.fadeIn,children:m.jsx(Nf,{provider:"github",onClick:()=>I("github"),loading:a==="github"})})]}),m.jsxs(ce.div,{className:"relative mb-6",variants:E.fadeIn,children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-300"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-4 bg-gray-50 text-gray-500",children:"Or continue with"})})]}),m.jsxs(ce.form,{onSubmit:A,className:"space-y-5",variants:hc,children:[m.jsxs(ce.div,{variants:E.fadeIn,children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),m.jsx(ce.input,{id:"email",type:"email",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",value:t,onChange:j=>e(j.target.value),whileFocus:{scale:1.005,boxShadow:"0 0 0 2px rgba(99, 102, 241, 0.2)"},transition:{type:"spring",stiffness:300,damping:20}})]}),m.jsxs(ce.div,{variants:E.fadeIn,children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),m.jsx(ce.input,{id:"password",type:"password",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password",value:n,onChange:j=>r(j.target.value),whileFocus:{scale:1.005,boxShadow:"0 0 0 2px rgba(99, 102, 241, 0.2)"},transition:{type:"spring",stiffness:300,damping:20}})]}),m.jsxs(ce.div,{className:"flex items-center justify-between",variants:E.fadeIn,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(ce.input,{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded cursor-pointer",whileHover:{scale:1.1},whileTap:{scale:.9}}),m.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Remember me"})]}),m.jsx(ce.div,{whileHover:{scale:1.05},whileTap:{scale:.98},children:m.jsx(In,{to:"/forgot-password",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Forgot password?"})})]}),m.jsx(ce.button,{type:"submit",disabled:s,className:"w-full h-[50px] flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",variants:E.fadeIn,whileHover:{scale:1.02,boxShadow:"0 4px 12px rgba(79, 70, 229, 0.2)"},whileTap:{scale:.98},children:s?m.jsxs(ce.svg,{className:"h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Sign in"}),m.jsxs(ce.div,{className:"text-center mt-4",variants:E.fadeIn,children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Don't have an account? "}),m.jsx(ce.span,{whileHover:{scale:1.05},whileTap:{scale:.98},children:m.jsx(In,{to:"/signup",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Sign up"})})]})]})]})})]})}const gA=()=>{const t={supabaseUrl:!0,supabaseAnonKey:!0,siteUrl:!!window.location.origin,origin:window.location.origin};console.log("[Email Config] Status:",t);const e=Object.entries(t).filter(([n,r])=>r===!1).map(([n])=>n);return e.length>0?(console.error("[Email Config] Missing required settings:",e),{success:!1,message:`Missing configuration: ${e.join(", ")}`}):{success:!0,message:"Configuration appears to be valid"}},WH=async t=>(console.error("[Email Test] This utility should not be used in production"),{success:!1,message:"Email testing disabled in production"}),HH=async t=>{if(!t||!t.includes("@"))throw new Error("Please enter a valid email address");const e=`${window.location.origin}/reset-password`;return console.log("Reset password redirect URL:",e),we.auth.resetPasswordForEmail(t.trim(),{redirectTo:e})},$H=async()=>{try{const t=new URLSearchParams(window.location.search),e=new URLSearchParams(window.location.hash.substring(1));if(t.has("error")){const r=t.get("error_code"),s=t.get("error_description");throw r==="otp_expired"?new Error("The password reset link has expired. Please request a new one."):new Error(s||"Invalid reset link. Please request a new one.")}if(e.has("error")){const r=e.get("error_code"),s=e.get("error_description");throw r==="otp_expired"?new Error("The password reset link has expired. Please request a new one."):new Error(s||"Invalid reset link. Please request a new one.")}if(t.has("code")){const r=t.get("code");if(!r)throw new Error("Invalid reset code");const{data:s,error:i}=await we.auth.exchangeCodeForSession(r);if(i)throw i;return console.log("Code exchange successful:",s),{success:!0,session:s.session}}if(e.has("access_token")){const r=e.get("access_token");if(!r)throw new Error("Invalid access token");const s=e.get("refresh_token")||"",{data:i,error:a}=await we.auth.setSession({access_token:r,refresh_token:s});if(a)throw a;return console.log("Session set from hash successful:",i),{success:!0,session:i.session}}const{data:{session:n}}=await we.auth.getSession();if(n)return{success:!0,session:n};throw new Error("No reset token found. Please use the link from your email.")}catch(t){return console.error("Token verification error:",t),{success:!1,error:t instanceof Error?t.message:"Invalid reset link"}}},GH=async t=>{if(!t||t.length<8)throw new Error("Password must be at least 8 characters");try{const{error:e}=await we.auth.updateUser({password:t});if(e)throw e;return await we.auth.signOut(),localStorage.clear(),sessionStorage.clear(),{success:!0}}catch(e){return console.error("Password update error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to update password"}}},pA=async t=>{try{if(!t||!t.includes("@"))return{success:!1,error:"Please provide a valid email address"};const n=`${window.location.origin}/auth/callback`;console.log(`[Auth] Resending verification email to ${t}`),console.log(`[Auth] Using redirect URL: ${n}`),localStorage.setItem("verification_email",t);const{error:r,data:s}=await we.auth.signInWithOtp({email:t,options:{emailRedirectTo:n}});if(r)if(console.error("[Auth] Error sending verification email:",r),r.message.includes("already registered")||r.message.includes("already taken")){console.log("[Auth] User exists but OTP failed, trying alternate method");const{error:i}=await we.auth.signUp({email:t,password:qH(),options:{emailRedirectTo:n,data:{resend_attempt:!0}}});if(i)return console.error("[Auth] All verification methods failed:",i),{success:!1,error:"Could not send verification email. Please contact support."}}else return{success:!1,error:r.message};return localStorage.setItem("verification_email",t),sessionStorage.setItem("verification_email_pending","true"),{success:!0,message:"Verification email sent successfully. Please check your inbox and spam folder for an email from noreply@mail.app.supabase.io or no-reply@supabase.co."}}catch(e){return console.error("[Auth] Error in resendVerificationEmail:",e),{success:!1,error:e instanceof Error?e.message:"An unexpected error occurred"}}};function qH(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+";let n="";n+="A",n+="a",n+="1",n+="!";for(let r=n.length;r<14;r++){const s=Math.floor(Math.random()*e.length);n+=e[s]}return n.split("").sort(()=>Math.random()-.5).join("")}const YH=async t=>{try{const{error:e,data:n}=await we.auth.signInWithOtp({email:t,options:{shouldCreateUser:!1}});return e?e.message.includes("not confirmed")?{verified:!1,message:"Email not verified yet"}:{verified:!1,message:e.message}:{verified:!0,message:"Email appears to be verified"}}catch(e){return console.error("[Auth] Error checking email verification:",e),{verified:!1,message:e instanceof Error?e.message:"Unknown error"}}},XH={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5,ease:[.22,1,.36,1],staggerChildren:.1}},exit:{opacity:0,y:-20,transition:{duration:.3}}},So={animate:{transition:{staggerChildren:.08,delayChildren:.1}}},R_={initial:{y:0},animate:{y:[-8,0,-8],transition:{duration:6,repeat:1/0,ease:"easeInOut",times:[0,.5,1]}}},KH={initial:{scale:.8,opacity:0,rotateY:90},animate:{scale:1,opacity:1,rotateY:0,transition:{duration:.7,ease:[.22,1,.36,1],delay:.2}}},Jd={initial:{opacity:0,x:-20},animate:{opacity:1,x:0,transition:{duration:.5,ease:[.22,1,.36,1]}}},P_={weak:"bg-red-500",medium:"bg-yellow-500",strong:"bg-green-500"},fc=[{regex:/.{8,}/,label:"At least 8 characters long"},{regex:/[A-Z]/,label:"Contains uppercase letter"},{regex:/[a-z]/,label:"Contains lowercase letter"},{regex:/[0-9]/,label:"Contains number"},{regex:/[^A-Za-z0-9]/,label:"Contains special character"}],ZH=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,i]=T.useState(""),[a,u]=T.useState(!1),[d,h]=T.useState(null),[x,y]=T.useState(""),[b,_]=T.useState(!1),[C,N]=T.useState(!1),[k,E]=T.useState(!1),{signup:A}=ia(),I=y0(),[j,F]=T.useState("weak"),[z,O]=T.useState(new Array(fc.length).fill(!1)),M=I?{fadeIn:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0}},float:{}}:{fadeIn:XH,float:R_};T.useEffect(()=>{(()=>{const te=fc.map(G=>G.regex.test(n));O(te);const fe=te.filter(Boolean).length;fe<=2?F("weak"):fe<=4?F("medium"):F("strong")})()},[n]),T.useEffect(()=>{const V=localStorage.getItem("verification_email"),te=sessionStorage.getItem("verification_email_pending")==="true";V&&te&&(e(V),_(!0))},[]);const U=async V=>{if(V.preventDefault(),n!==s)return y("Passwords do not match");if(j==="weak")return y("Please create a stronger password");const te=fc.filter((fe,G)=>!z[G]).map(fe=>fe.label);if(te.length>0)return y(`Password must: ${te.join(", ")}`);try{y(""),u(!0),localStorage.setItem("verification_email",t),sessionStorage.setItem("verification_email_pending","true"),await A(t,n),_(!0)}catch(fe){y(fe instanceof Error?fe.message:"Failed to create an account")}finally{u(!1)}},X=async V=>{var te;try{h(V),y(""),sessionStorage.setItem("isSocialLogin","true"),sessionStorage.setItem("authProvider",V);const fe={google:{queryParams:{access_type:"offline",prompt:"consent select_account"},scopes:"email profile"},github:{queryParams:{scope:"read:user user:email"},redirectTo:`${window.location.origin}/auth/callback`},apple:{redirectTo:`${window.location.origin}/auth/callback`}},{data:G,error:be}=await we.auth.signInWithOAuth({provider:V,options:{redirectTo:((te=fe[V])==null?void 0:te.redirectTo)||`${window.location.origin}/auth/callback`,...fe[V]||{}}});if(be)throw be;if(!(G!=null&&G.url))throw new Error("No redirect URL received from authentication provider");sessionStorage.setItem("authRedirectTime",Date.now().toString()),console.log(`Initiating ${V} authentication...`),window.location.href=G.url}catch(fe){console.error("Social signup error:",fe),y(fe instanceof Error?fe.message:`Failed to sign up with ${V}. Please try again.`),fe instanceof Error&&console.error("Detailed error:",{message:fe.message,stack:fe.stack,provider:V})}finally{h(null)}};return m.jsxs(ce.div,{className:"min-h-screen flex flex-col md:flex-row overflow-hidden bg-gray-50",initial:"initial",animate:"animate",exit:"exit",variants:So,children:[m.jsxs(ce.div,{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-indigo-600 via-blue-500 to-purple-600 relative overflow-hidden",variants:M.fadeIn,children:[!I&&m.jsxs(m.Fragment,{children:[m.jsx(ce.div,{className:"absolute h-40 w-40 rounded-full bg-white/5 blur-xl",initial:{x:"10%",y:"10%"},animate:{x:["10%","15%","10%"],y:["10%","15%","10%"]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),m.jsx(ce.div,{className:"absolute h-64 w-64 rounded-full bg-indigo-400/10 blur-xl right-[-5%] bottom-[10%]",initial:{x:"0%",y:"0%"},animate:{x:["0%","-5%","0%"],y:["0%","5%","0%"]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]}),m.jsx("div",{className:"w-full flex flex-col items-center justify-center px-12 relative z-10",children:m.jsxs(ce.div,{className:"backdrop-blur-lg bg-white/10 p-8 rounded-3xl shadow-2xl w-full max-w-md border border-white/10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{variants:R_,className:"flex justify-center",children:m.jsx(ce.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{duration:.8},children:m.jsx(Gu,{className:"h-16 w-16 text-white mb-6"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-white mb-4 text-center",variants:M.fadeIn,children:"Join InventoryPro Cloud"}),m.jsx(ce.p,{className:"text-white/90 text-lg mb-6 text-center",variants:M.fadeIn,children:"Start managing your inventory smarter with our powerful cloud-based solution."}),m.jsx(ce.div,{className:"space-y-5",variants:So,children:[{icon:"M5 13l4 4L19 7",text:"Free trial available"},{icon:"M13 10V3L4 14h7v7l9-11h-7z",text:"No credit card required"},{icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",text:"Secure & reliable"}].map((V,te)=>m.jsxs(ce.div,{className:"flex items-center group",variants:M.fadeIn,custom:te,whileHover:{x:5},transition:{type:"spring",stiffness:400},children:[m.jsx(ce.div,{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center mr-4 shadow-lg group-hover:bg-white/30 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400},children:m.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:V.icon})})}),m.jsx("span",{className:"text-white font-medium group-hover:text-white/90 transition-colors duration-200",children:V.text})]},te))})]})})]}),m.jsx(ce.div,{className:"flex-1 flex items-center justify-center p-8",variants:M.fadeIn,children:m.jsxs(ce.div,{className:"w-full max-w-md space-y-8",variants:So,children:[m.jsxs(ce.div,{className:"text-center",variants:M.fadeIn,children:[m.jsx(ce.div,{className:"flex justify-center mb-5",variants:KH,children:m.jsx("svg",{className:"h-16 w-16 text-indigo-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:m.jsx("path",{d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-gray-900 mb-2",variants:M.fadeIn,children:"Create your account"}),m.jsx(ce.p,{className:"text-gray-600",variants:M.fadeIn,children:"Start your free trial today"})]}),m.jsx(xl,{mode:"wait",children:x&&m.jsx(ce.div,{className:"mb-5 p-4 rounded-lg bg-red-50 border border-red-200",initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-20,height:0},transition:{type:"spring",stiffness:500,damping:30,opacity:{duration:.2}},children:m.jsx("p",{className:"text-sm text-red-600",children:x})})}),b?m.jsxs(ce.div,{className:"text-center p-6 bg-white rounded-2xl shadow-sm border border-gray-100",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{className:"mb-6 flex justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5,delay:.2},children:m.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:m.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),m.jsx(ce.h3,{className:"text-xl font-semibold text-gray-900 mb-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:"Verify your email"}),m.jsxs(ce.p,{className:"text-gray-600 mb-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:["We've sent a verification link to ",m.jsx("strong",{children:t}),".",m.jsx("br",{}),"Please check your email and verify your account to continue."]}),m.jsx(ce.div,{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-100",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:m.jsxs("p",{className:"text-sm text-blue-800",children:[m.jsx("strong",{children:"Important:"})," If you don't see the email, please check your spam or junk folder. The email will be from ",m.jsx("strong",{children:"noreply@mail.app.supabase.io"})," or ",m.jsx("strong",{children:"no-reply@supabase.co"}),"."]})}),m.jsx(ce.div,{className:"mb-4 p-4 bg-yellow-50 rounded-lg border border-yellow-100",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.55},children:m.jsxs("p",{className:"text-sm text-yellow-800",children:[m.jsx("strong",{children:"Note:"})," Verification emails can take up to 5 minutes to arrive. If you still don't receive it, try clicking the button below."]})}),m.jsx(ce.div,{className:"mb-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:m.jsx("button",{onClick:async()=>{try{u(!0),y("");const V=await pA(t);if(!V.success)throw new Error(V.error);alert(V.message||"Verification email resent. Please check your inbox and spam folder.")}catch(V){y(V instanceof Error?V.message:"Failed to resend verification email")}finally{u(!1)}},disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:a?"Sending...":"Resend Verification Email"})}),m.jsx(ce.div,{className:"mb-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.65},children:m.jsx("button",{onClick:()=>window.location.href="/email-test",className:"w-full py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Go to Email Test Page"})}),m.jsx(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},children:m.jsx(In,{to:"/login",className:"text-indigo-600 hover:text-indigo-500 font-medium transition-colors duration-200",children:"Return to login"})})]}):m.jsxs(m.Fragment,{children:[m.jsxs(ce.div,{className:"space-y-3 mb-6",variants:So,children:[m.jsx(ce.div,{variants:M.fadeIn,children:m.jsx(Nf,{provider:"google",onClick:()=>X("google"),loading:d==="google"})}),m.jsx(ce.div,{variants:M.fadeIn,children:m.jsx(mA,{})}),m.jsx(ce.div,{variants:M.fadeIn,children:m.jsx(Nf,{provider:"github",onClick:()=>X("github"),loading:d==="github"})})]}),m.jsxs(ce.div,{className:"relative mb-6",variants:M.fadeIn,children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-300"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-4 bg-gray-50 text-gray-500",children:"Or sign up with email"})})]}),m.jsxs(ce.form,{onSubmit:U,className:"space-y-5",variants:So,children:[m.jsxs(ce.div,{variants:Jd,children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),m.jsx(ce.input,{id:"email",type:"email",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",value:t,onChange:V=>e(V.target.value),whileFocus:{scale:1.005,boxShadow:"0 0 0 2px rgba(99, 102, 241, 0.2)"},transition:{type:"spring",stiffness:300,damping:20}})]}),m.jsxs(ce.div,{className:"space-y-2",variants:So,children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(ce.input,{id:"password",variants:Jd,type:C?"text":"password",value:n,onChange:V=>r(V.target.value),className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password",required:!0}),m.jsx("button",{type:"button",onClick:()=>N(!C),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 hover:text-gray-800",children:C?m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),m.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),m.jsx("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]})})]}),m.jsxs(ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2 mt-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"h-2 flex-1 bg-gray-200 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ${P_[j]}`,style:{width:`${z.filter(Boolean).length/fc.length*100}%`}})}),m.jsx("span",{className:`text-sm font-medium capitalize text-${P_[j].replace("bg-","")}`,children:j})]}),m.jsx(ce.div,{variants:So,className:"text-sm space-y-1 bg-gray-50 p-3 rounded-lg border border-gray-200",children:fc.map((V,te)=>m.jsxs(ce.div,{variants:Jd,className:"flex items-center space-x-2",children:[m.jsx("svg",{className:`h-4 w-4 ${z[te]?"text-green-500":"text-gray-400"}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:z[te]?m.jsx("path",{d:"M5 13l4 4L19 7"}):m.jsx("path",{d:"M6 18L18 6M6 6l12 12"})}),m.jsx("span",{className:z[te]?"text-green-700":"text-gray-600",children:V.label})]},V.label))})]})]}),m.jsxs(ce.div,{variants:Jd,children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm password"}),m.jsxs("div",{className:"relative",children:[m.jsx(ce.input,{id:"confirm-password",type:k?"text":"password",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 pr-10",placeholder:"Confirm your password",value:s,onChange:V=>i(V.target.value),whileFocus:{scale:1.005,boxShadow:"0 0 0 2px rgba(99, 102, 241, 0.2)"},transition:{type:"spring",stiffness:300,damping:20}}),m.jsx(ce.button,{type:"button",onClick:()=>E(!k),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",whileHover:{scale:1.1},whileTap:{scale:.9},children:k?m.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):m.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})]}),m.jsxs(ce.div,{className:"flex items-center",variants:M.fadeIn,children:[m.jsx(ce.input,{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded cursor-pointer",whileHover:{scale:1.1},whileTap:{scale:.9}}),m.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:["I agree to the"," ",m.jsx(In,{to:"/terms-of-service",className:"text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Terms of Service"})," ","and"," ",m.jsx(In,{to:"/privacy-policy",className:"text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Privacy Policy"})]})]}),m.jsx(ce.button,{type:"submit",disabled:a,className:"w-full h-[50px] flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",variants:M.fadeIn,whileHover:{scale:1.02,boxShadow:"0 4px 12px rgba(79, 70, 229, 0.2)"},whileTap:{scale:.98},children:a?m.jsx(ce.div,{className:"h-5 w-5",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsxs("svg",{className:"animate-spin",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):"Create account"})]})]}),m.jsxs(ce.div,{className:"text-center",variants:M.fadeIn,children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Already have an account? "}),m.jsx(ce.span,{whileHover:{scale:1.05},whileTap:{scale:.98},className:"inline-block",children:m.jsx(In,{to:"/login",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Sign in"})})]})]})})]})},QH={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5,ease:[.22,1,.36,1]}},exit:{opacity:0,y:-20,transition:{duration:.3}}},eh={animate:{transition:{staggerChildren:.08,delayChildren:.1}}},O_={initial:{y:0},animate:{y:[-8,0,-8],transition:{duration:6,repeat:1/0,ease:"easeInOut",times:[0,.5,1]}}},JH={initial:{scale:.8,opacity:0,rotateY:90},animate:{scale:1,opacity:1,rotateY:0,transition:{duration:.7,ease:[.22,1,.36,1]}}},e$=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(!1),[s,i]=T.useState(""),[a,u]=T.useState(!1),{resetPassword:d}=ia(),h=y0(),y=h?{fadeIn:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0}},float:{}}:{fadeIn:QH,float:O_},b=async _=>{if(_.preventDefault(),!t){i("Please enter your email address");return}try{i(""),r(!0),await d(t),u(!0)}catch(C){i(C instanceof Error?C.message:"Failed to send reset link"),u(!1)}finally{r(!1)}};return m.jsxs(ce.div,{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:eh,children:[m.jsxs(ce.div,{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-indigo-600 via-blue-500 to-purple-600 relative overflow-hidden",variants:y.fadeIn,children:[!h&&m.jsxs(m.Fragment,{children:[m.jsx(ce.div,{className:"absolute h-40 w-40 rounded-full bg-white/5 blur-xl",initial:{x:"10%",y:"10%"},animate:{x:["10%","15%","10%"],y:["10%","15%","10%"]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),m.jsx(ce.div,{className:"absolute h-64 w-64 rounded-full bg-indigo-400/10 blur-xl right-[-5%] bottom-[10%]",initial:{x:"0%",y:"0%"},animate:{x:["0%","-5%","0%"],y:["0%","5%","0%"]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]}),m.jsx("div",{className:"w-full flex flex-col items-center justify-center px-12 relative z-10",children:m.jsxs(ce.div,{className:"backdrop-blur-lg bg-white/10 p-8 rounded-3xl shadow-2xl w-full max-w-md border border-white/10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{variants:O_,className:"flex justify-center",children:m.jsx(ce.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{duration:.8},children:m.jsx(Gu,{className:"h-16 w-16 text-white mb-6"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-white mb-4 text-center",variants:y.fadeIn,children:"Reset Your Password"}),m.jsx(ce.p,{className:"text-white/90 text-lg mb-6 text-center",variants:y.fadeIn,children:"Enter your email and we'll send you a link to reset your password"}),m.jsx(ce.div,{className:"space-y-5",variants:eh,children:[{icon:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207",text:"Secure password reset"},{icon:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",text:"Check your email"},{icon:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4",text:"Create a new password"}].map((_,C)=>m.jsxs(ce.div,{className:"flex items-center group",variants:y.fadeIn,custom:C,whileHover:{x:5},transition:{type:"spring",stiffness:400},children:[m.jsx(ce.div,{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center mr-4 shadow-lg group-hover:bg-white/30 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400},children:m.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:_.icon})})}),m.jsx("span",{className:"text-white font-medium group-hover:text-white/90 transition-colors duration-200",children:_.text})]},C))})]})})]}),m.jsx(ce.div,{className:"flex-1 flex items-center justify-center p-8",variants:y.fadeIn,children:m.jsxs(ce.div,{className:"w-full max-w-md space-y-8",variants:eh,children:[m.jsxs(ce.div,{className:"text-center",variants:y.fadeIn,children:[m.jsx(ce.div,{className:"flex justify-center mb-5",variants:JH,children:m.jsx("svg",{className:"h-16 w-16 text-indigo-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:m.jsx("path",{d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-gray-900 mb-2",variants:y.fadeIn,children:"Reset Your Password"}),m.jsx(ce.p,{className:"text-gray-600",variants:y.fadeIn,children:"Enter your email and we'll send you a link to reset your password"})]}),m.jsx(xl,{mode:"wait",children:s&&m.jsx(ce.div,{className:"mb-5 p-4 rounded-lg bg-red-50 border border-red-200",initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-20,height:0},transition:{type:"spring",stiffness:500,damping:30,opacity:{duration:.2}},children:m.jsx("p",{className:"text-sm text-red-600",children:s})})}),m.jsx(xl,{mode:"wait",children:a?m.jsxs(ce.div,{className:"text-center p-6 bg-white rounded-2xl shadow-sm border border-gray-100",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{className:"mb-6 flex justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5,delay:.2},children:m.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:m.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),m.jsx(ce.h3,{className:"text-xl font-semibold text-gray-900 mb-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:"Reset Link Sent"}),m.jsxs(ce.p,{className:"text-gray-600 mb-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:["We've sent a password reset link to ",m.jsx("strong",{children:t}),".",m.jsx("br",{}),"Please check your email and click the link to reset your password."]}),m.jsx(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:m.jsx(In,{to:"/login",className:"text-indigo-600 hover:text-indigo-500 font-medium transition-colors duration-200",children:"Return to login"})})]}):m.jsxs(ce.form,{onSubmit:b,className:"space-y-6",variants:eh,initial:"initial",animate:"animate",exit:"exit",children:[m.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,ease:[.22,1,.36,1]},children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),m.jsx("input",{id:"email",type:"email",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",value:t,onChange:_=>e(_.target.value)})]}),m.jsx(ce.button,{type:"submit",disabled:n,className:"w-full h-[50px] flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",variants:y.fadeIn,whileHover:{scale:1.02,boxShadow:"0 4px 12px rgba(79, 70, 229, 0.2)"},whileTap:{scale:.98},children:n?m.jsx(ce.div,{className:"h-5 w-5",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsxs("svg",{className:"animate-spin",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):"Send Reset Link"}),m.jsx(ce.div,{className:"flex justify-center",variants:y.fadeIn,children:m.jsx(In,{to:"/login",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Return to login"})})]})})]})})]})},t$={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5,ease:[.22,1,.36,1]}},exit:{opacity:0,y:-20,transition:{duration:.3}}},mc={animate:{transition:{staggerChildren:.08,delayChildren:.1}}},M_={initial:{y:0},animate:{y:[-8,0,-8],transition:{duration:6,repeat:1/0,ease:"easeInOut",times:[0,.5,1]}}},n$={initial:{scale:.8,opacity:0,rotateY:90},animate:{scale:1,opacity:1,rotateY:0,transition:{duration:.7,ease:[.22,1,.36,1]}}},j_={weak:"bg-red-500",medium:"bg-yellow-500",strong:"bg-green-500"},gc=[{regex:/.{8,}/,label:"At least 8 characters long"},{regex:/[A-Z]/,label:"Contains uppercase letter"},{regex:/[a-z]/,label:"Contains lowercase letter"},{regex:/[0-9]/,label:"Contains number"},{regex:/[^A-Za-z0-9]/,label:"Contains special character"}],D_=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(""),[s,i]=T.useState(!1),[a,u]=T.useState(!0),[d,h]=T.useState(!1),[x,y]=T.useState(""),[b,_]=T.useState(!1),C=Hs(),[N,k]=T.useState(!1),[E,A]=T.useState(""),[I,j]=T.useState(!1),F=y0(),[z,O]=T.useState(!1),[R,M]=T.useState(!1),[U,X]=T.useState("weak"),[V,te]=T.useState(new Array(gc.length).fill(!1)),fe=async Q=>{Q.preventDefault();try{k(!0);const{error:ne}=await HH(E);if(ne)throw ne;j(!0)}catch(ne){console.error("Error requesting new link:",ne),y(ne instanceof Error?ne.message:"Failed to send reset link")}finally{k(!1)}};if(T.useEffect(()=>{(async()=>{try{u(!0),y("");const ne=await $H();if(!ne.success)throw new Error(ne.error);console.log("Token is valid, user can reset password"),h(!0)}catch(ne){console.error("Token verification failed:",ne),y(ne instanceof Error?ne.message:"Invalid reset link"),h(!1)}finally{u(!1)}})()},[]),T.useEffect(()=>{(()=>{const ne=gc.map(oe=>oe.regex.test(t));te(ne);const J=ne.filter(Boolean).length;J<=2?X("weak"):J<=4?X("medium"):X("strong")})()},[t]),a)return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:m.jsxs("div",{className:"text-center p-6 rounded-lg shadow-md bg-white max-w-md",children:[m.jsx("div",{className:"inline-block animate-spin h-10 w-10 border-4 border-indigo-500 border-t-transparent rounded-full mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Verifying Reset Link"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"We're validating your password reset link. Please wait a moment..."})]})});const be=F?{fadeIn:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0}},float:{}}:{fadeIn:t$,float:M_},$=async Q=>{if(Q.preventDefault(),t!==n){y("Passwords do not match");return}if(U==="weak"){y("Please create a stronger password");return}const ne=gc.filter((J,oe)=>!V[oe]).map(J=>J.label);if(ne.length>0){y(`Password must: ${ne.join(", ")}`);return}try{y(""),i(!0);const J=await GH(t);if(!J.success)throw new Error(J.error);_(!0),setTimeout(()=>{C("/login")},3e3)}catch(J){console.error("Password reset error:",J),y(J instanceof Error?J.message:"Failed to reset password. Please try again.")}finally{i(!1)}};return m.jsxs(ce.div,{className:"min-h-screen flex flex-col md:flex-row overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:mc,children:[m.jsxs(ce.div,{className:"hidden md:flex md:w-1/2 bg-gradient-to-br from-indigo-600 via-blue-500 to-purple-600 relative overflow-hidden",variants:be.fadeIn,children:[!F&&m.jsxs(m.Fragment,{children:[m.jsx(ce.div,{className:"absolute h-40 w-40 rounded-full bg-white/5 blur-xl",initial:{x:"10%",y:"10%"},animate:{x:["10%","15%","10%"],y:["10%","15%","10%"]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),m.jsx(ce.div,{className:"absolute h-64 w-64 rounded-full bg-indigo-400/10 blur-xl right-[-5%] bottom-[10%]",initial:{x:"0%",y:"0%"},animate:{x:["0%","-5%","0%"],y:["0%","5%","0%"]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]}),m.jsx("div",{className:"w-full flex flex-col items-center justify-center px-12 relative z-10",children:m.jsxs(ce.div,{className:"backdrop-blur-lg bg-white/10 p-8 rounded-3xl shadow-2xl w-full max-w-md border border-white/10",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{variants:M_,className:"flex justify-center",children:m.jsx(ce.div,{initial:{rotate:-180,opacity:0},animate:{rotate:0,opacity:1},transition:{duration:.8},children:m.jsx(Gu,{className:"h-16 w-16 text-white mb-6"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-white mb-4 text-center",variants:be.fadeIn,children:"Reset Your Password"}),m.jsx(ce.p,{className:"text-white/90 text-lg mb-6 text-center",variants:be.fadeIn,children:"Create a new secure password for your InventoryPro Cloud account."}),m.jsx(ce.div,{className:"space-y-5",variants:mc,children:[{icon:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",text:"Use a strong password"},{icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",text:"At least 8 characters"},{icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",text:"Secure your account"}].map((Q,ne)=>m.jsxs(ce.div,{className:"flex items-center group",variants:be.fadeIn,custom:ne,whileHover:{x:5},transition:{type:"spring",stiffness:400},children:[m.jsx(ce.div,{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center mr-4 shadow-lg group-hover:bg-white/30 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400},children:m.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:Q.icon})})}),m.jsx("span",{className:"text-white font-medium group-hover:text-white/90 transition-colors duration-200",children:Q.text})]},ne))})]})})]}),m.jsx(ce.div,{className:"flex-1 flex items-center justify-center p-8",variants:be.fadeIn,children:m.jsxs(ce.div,{className:"w-full max-w-md space-y-8",variants:mc,children:[m.jsxs(ce.div,{className:"text-center",variants:be.fadeIn,children:[m.jsx(ce.div,{className:"flex justify-center mb-5",variants:n$,children:m.jsx("svg",{className:"h-16 w-16 text-indigo-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:m.jsx("path",{d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-gray-900 mb-2",variants:be.fadeIn,children:d?b?"Password Reset Complete":"Reset Your Password":"Reset Link Invalid"}),m.jsx(ce.p,{className:"text-gray-600",variants:be.fadeIn,children:d?b?"Your password has been updated successfully":"Create a new secure password for your account":"Your reset link appears to be invalid or expired"})]}),m.jsx(xl,{mode:"wait",children:x&&m.jsx(ce.div,{className:"mb-5 p-4 rounded-lg bg-red-50 border border-red-200",initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-20,height:0},transition:{type:"spring",stiffness:500,damping:30,opacity:{duration:.2}},children:m.jsx("p",{className:"text-sm text-red-600",children:x})})}),m.jsx(xl,{mode:"wait",children:d?b?m.jsxs(ce.div,{className:"text-center p-6 bg-white rounded-2xl shadow-sm border border-gray-100",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{className:"mb-6 flex justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5,delay:.2},children:m.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:m.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),m.jsx(ce.h3,{className:"text-xl font-semibold text-gray-900 mb-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:"Password Reset Complete"}),m.jsxs(ce.p,{className:"text-gray-600 mb-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:["Your password has been successfully updated.",m.jsx("br",{}),"You will be redirected to the login page in a moment."]}),m.jsx(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:m.jsx(In,{to:"/login",className:"text-indigo-600 hover:text-indigo-500 font-medium transition-colors duration-200",children:"Return to login now"})})]}):m.jsxs(ce.form,{onSubmit:$,className:"space-y-6",variants:mc,initial:"initial",animate:"animate",exit:"exit",children:[m.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,ease:[.22,1,.36,1]},className:"space-y-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:z?"text":"password",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 pr-10",placeholder:"Create a new password",value:t,onChange:Q=>e(Q.target.value)}),m.jsx("button",{type:"button",onClick:()=>O(!z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:z?m.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):m.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]}),m.jsxs(ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2 mt-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"h-2 flex-1 bg-gray-200 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ${j_[U]}`,style:{width:`${V.filter(Boolean).length/gc.length*100}%`}})}),m.jsx("span",{className:`text-sm font-medium capitalize text-${j_[U].replace("bg-","")}`,children:U})]}),m.jsx(ce.div,{variants:mc,className:"text-sm space-y-1 bg-gray-50 p-3 rounded-lg border border-gray-200",children:gc.map((Q,ne)=>m.jsxs(ce.div,{className:"flex items-center space-x-2",children:[m.jsx("svg",{className:`h-4 w-4 ${V[ne]?"text-green-500":"text-gray-400"}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:V[ne]?m.jsx("path",{d:"M5 13l4 4L19 7"}):m.jsx("path",{d:"M6 18L18 6M6 6l12 12"})}),m.jsx("span",{className:V[ne]?"text-green-700":"text-gray-600",children:Q.label})]},Q.label))})]})]}),m.jsxs(ce.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,ease:[.22,1,.36,1],delay:.1},children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"confirm-password",type:R?"text":"password",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 pr-10",placeholder:"Confirm your new password",value:n,onChange:Q=>r(Q.target.value)}),m.jsx("button",{type:"button",onClick:()=>M(!R),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",children:R?m.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):m.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]})]}),m.jsx(ce.button,{type:"submit",disabled:s,className:"w-full h-[50px] flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",variants:be.fadeIn,whileHover:{scale:1.02,boxShadow:"0 4px 12px rgba(79, 70, 229, 0.2)"},whileTap:{scale:.98},children:s?m.jsx("div",{className:"h-5 w-5 animate-spin",children:m.jsxs("svg",{viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):"Reset Password"}),m.jsx(ce.div,{className:"flex justify-center",variants:be.fadeIn,children:m.jsx(In,{to:"/login",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Return to login"})})]}):m.jsxs(ce.div,{className:"text-center p-6 bg-white rounded-2xl shadow-sm border border-gray-100",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",duration:.8},children:[m.jsx(ce.div,{className:"mb-6 flex justify-center",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.5,delay:.2},children:m.jsx("div",{className:"h-16 w-16 rounded-full bg-red-100 flex items-center justify-center",children:m.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),m.jsx(ce.h3,{className:"text-xl font-semibold text-gray-900 mb-2",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:x.includes("expired")?"Reset Link Expired":x.includes("No reset token")?"Missing Reset Link":"Invalid Reset Link"}),m.jsx(ce.p,{className:"text-gray-600 mb-6",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:x.includes("expired")?"Your password reset link has expired. Please request a new link below.":x.includes("No reset token")?"Please use the link sent to your email to reset your password.":"The password reset link is invalid. Please request a new password reset link."}),I?m.jsxs(ce.div,{className:"mb-4 p-4 bg-green-50 rounded-lg text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[m.jsx("svg",{className:"h-6 w-6 text-green-500 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),m.jsx("p",{className:"text-sm text-green-800 mb-1",children:"Reset link sent!"}),m.jsx("p",{className:"text-xs text-green-700",children:"Check your email for instructions to reset your password."})]}):m.jsxs(ce.form,{onSubmit:fe,className:"mb-4 space-y-4",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1 text-left",children:"Email address"}),m.jsx("input",{id:"email",type:"email",required:!0,className:"appearance-none block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",value:E,onChange:Q=>A(Q.target.value)})]}),m.jsx("button",{type:"submit",disabled:N,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:N?m.jsx("div",{className:"h-5 w-5 animate-spin",children:m.jsxs("svg",{viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):"Send New Reset Link"})]}),m.jsx(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:m.jsx(In,{to:"/login",className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:"Return to login"})})]})})]})})]})},r$=({message:t="Loading..."})=>m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:m.jsxs("div",{className:"text-center",children:[m.jsx(ce.div,{className:"mb-4 inline-flex items-center justify-center w-12 h-12 rounded-full bg-indigo-100",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:m.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:t}),m.jsx("p",{className:"text-gray-600",children:"Please wait a moment..."})]})});(function(){try{if(typeof window<"u"){const e=new URL(window.location.href),n=e.searchParams.has("code"),r=e.searchParams.has("type")&&e.searchParams.get("type")==="signup",s=e.searchParams.has("email_confirm")||e.hash.includes("email_confirm"),i=sessionStorage.getItem("authProvider")||e.searchParams.has("provider")||e.hash.includes("provider=");if((n||r||s||e.hash.includes("type=signup"))&&!i){console.log("[Auth] Early verification detection, setting storage flag"),sessionStorage.setItem("showing_verification_success","true");const u=e.searchParams.get("email")||e.hash.includes("email=")&&decodeURIComponent(e.hash.split("email=")[1].split("&")[0])||localStorage.getItem("verification_email");u&&localStorage.setItem("verification_email",u)}}}catch(e){console.error("[Auth] Error in early detection:",e)}})();const s$=()=>{const{user:t,setUser:e}=ia(),n=Hs(),r=Ws(),[s,i]=T.useState(!0),[a,u]=T.useState(null),[d,h]=T.useState(null);return T.useEffect(()=>{(async()=>{try{const y=new URL(window.location.href),b=new URLSearchParams(y.search),_=new URLSearchParams(y.hash.substring(1)),C=b.get("email")||_.get("email")||localStorage.getItem("verification_email");if(C&&(h(C),localStorage.setItem("verification_email",C)),(b.has("code")||_.has("code"))&&!sessionStorage.getItem("isSocialLogin")){console.log("[AuthCallback] Code parameter detected, treating as verification"),await we.auth.signOut(),i(!1);return}if(sessionStorage.getItem("isSocialLogin")==="true"){const{data:{session:N}}=await we.auth.getSession();if(N)e(N.user),sessionStorage.removeItem("isSocialLogin"),sessionStorage.removeItem("authProvider"),n("/",{replace:!0});else if(b.has("code")||_.has("code")){const k=b.get("code")||_.get("code");await we.auth.exchangeCodeForSession(k||"");const{data:{session:E}}=await we.auth.getSession();if(E)e(E.user),sessionStorage.removeItem("isSocialLogin"),sessionStorage.removeItem("authProvider"),n("/",{replace:!0});else throw new Error("Failed to establish session")}else throw new Error("No code found for social login")}else n("/login",{replace:!0})}catch(y){console.error("[AuthCallback] Error:",y),u(y instanceof Error?y.message:"Authentication failed"),i(!1)}})()},[n,r,e]),!s&&!a?m.jsx(ce.div,{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:m.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[m.jsx(ce.div,{className:"mb-6 inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",duration:.8,bounce:.5},children:m.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M5 13l4 4L19 7"})})}),m.jsx(ce.h2,{className:"text-3xl font-bold text-gray-900 mb-3",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:"Email Verified Successfully!"}),m.jsxs(ce.p,{className:"text-gray-600 mb-6 text-lg",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[d?`Your email (${d}) has been verified.`:"Your email has been verified.",m.jsx("br",{}),"You can now log in to your account."]}),m.jsx(ce.div,{className:"bg-blue-50 border border-blue-100 rounded-lg p-5 mb-8 text-base text-blue-700",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},children:m.jsxs("p",{children:[m.jsx("strong",{children:"Important:"})," Your account is now verified and ready to use. Click the button below to sign in."]})}),m.jsx(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:m.jsx("button",{onClick:()=>n(`/login?verified=true${d?`&email=${encodeURIComponent(d)}`:""}`),className:"w-full inline-flex justify-center items-center px-6 py-3 border border-transparent text-lg font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200",children:"Sign In Now"})})]})}):a?m.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:m.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded max-w-md w-full",children:[m.jsx("h3",{className:"text-lg font-medium mb-2",children:"Authentication Error"}),m.jsx("p",{children:a}),m.jsx("button",{onClick:()=>n("/login"),className:"mt-4 bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Back to Login"})]})}):m.jsx(r$,{message:"Processing your authentication..."})},i$=({children:t})=>{const{user:e,loading:n}=ia();return n?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}):e?m.jsx(m.Fragment,{children:t}):m.jsx(Yp,{to:"/login",replace:!0})},eg=({children:t})=>{const{user:e,forceGlobalSignOut:n}=ia(),r=Ws(),s=sessionStorage.getItem("showing_verification_success")==="true"&&r.pathname.includes("/auth/callback"),i=s||r.search.includes("verified=true")||r.pathname.includes("/auth/callback")&&!sessionStorage.getItem("isSocialLogin"),a=sessionStorage.getItem("isSocialLogin")==="true";return T.useEffect(()=>{i&&e&&!s&&(async()=>(console.log("[PublicOnlyRoute] Verification flow detected with user, forcing logout"),await n()))(),a&&e&&(console.log("[PublicOnlyRoute] Social login flow detected with user, redirecting to dashboard"),window.location.href="/")},[i,a,e,n,s]),s?(console.log("[PublicOnlyRoute] Showing verification success page, bypassing redirect"),m.jsx(m.Fragment,{children:t})):e&&!i?m.jsx(Yp,{to:"/",replace:!0}):m.jsx(m.Fragment,{children:t})},L_=({children:t})=>m.jsx(m.Fragment,{children:t});class o$ extends T.Component{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{hasError:!1}})}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"We're sorry, but there was an error loading this page."}),m.jsx("button",{onClick:()=>{this.setState({hasError:!1}),window.location.reload()},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Page"})]})}):this.props.children}}const a$=()=>m.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"max-w-3xl mx-auto",children:m.jsxs("div",{className:"bg-white shadow-lg rounded-lg px-8 py-10",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Terms of Service"}),m.jsxs("div",{className:"space-y-6 text-gray-600",children:[m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"1. Acceptance of Terms"}),m.jsx("p",{children:'By accessing and using InventoryPro Cloud ("the Service"), you agree to be bound by these Terms of Service and all applicable laws and regulations.'})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2. Description of Service"}),m.jsx("p",{children:"InventoryPro Cloud is a cloud-based inventory management system that provides tools for tracking, managing, and analyzing inventory data."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"3. User Accounts"}),m.jsx("p",{children:"You must create an account to use the Service. You are responsible for maintaining the security of your account and password."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"4. Data Usage"}),m.jsx("p",{children:"We collect and store the data you input into the Service. By using the Service, you grant us the right to use this data to provide and improve our services."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"5. Service Availability"}),m.jsx("p",{children:"We strive to provide uninterrupted service but cannot guarantee the Service will be available at all times."})]})]}),m.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:m.jsx(In,{to:"/signup",className:"text-indigo-600 hover:text-indigo-500 font-medium",children:"← Back to Sign Up"})})]})})}),l$=()=>m.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"max-w-3xl mx-auto",children:m.jsxs("div",{className:"bg-white shadow-lg rounded-lg px-8 py-10",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Privacy Policy"}),m.jsxs("div",{className:"space-y-6 text-gray-600",children:[m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"1. Information We Collect"}),m.jsx("p",{children:"We collect information that you provide directly to us, including:"}),m.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[m.jsx("li",{children:"Account information (name, email, password)"}),m.jsx("li",{children:"Business information"}),m.jsx("li",{children:"Inventory and transaction data"}),m.jsx("li",{children:"Usage data and analytics"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2. How We Use Your Information"}),m.jsx("p",{children:"We use the collected information to:"}),m.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[m.jsx("li",{children:"Provide and maintain the Service"}),m.jsx("li",{children:"Improve and personalize user experience"}),m.jsx("li",{children:"Send important notifications and updates"}),m.jsx("li",{children:"Analyze usage patterns and optimize performance"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"3. Data Security"}),m.jsx("p",{children:"We implement appropriate security measures to protect your personal information."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-3",children:"4. Your Rights"}),m.jsx("p",{children:"You have the right to:"}),m.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[m.jsx("li",{children:"Access your personal information"}),m.jsx("li",{children:"Correct inaccurate data"}),m.jsx("li",{children:"Request deletion of your data"}),m.jsx("li",{children:"Opt-out of marketing communications"})]})]})]}),m.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:m.jsx(In,{to:"/signup",className:"text-indigo-600 hover:text-indigo-500 font-medium",children:"← Back to Sign Up"})})]})})}),c$=()=>{const[t,e]=T.useState(""),[n,r]=T.useState(!1),[s,i]=T.useState(null),[a,u]=T.useState(null);T.useEffect(()=>{const y=gA();u(y)},[]);const d=async()=>{if(!t||!t.includes("@")){i({success:!1,message:"Please enter a valid email address"});return}try{r(!0),i(null);const y=await WH(t);i(y)}catch(y){i({success:!1,message:y instanceof Error?y.message:"Unknown error"})}finally{r(!1)}},h=async()=>{if(!t||!t.includes("@")){i({success:!1,message:"Please enter a valid email address"});return}try{r(!0),i(null);const y=await pA(t);i(y)}catch(y){i({success:!1,message:y instanceof Error?y.message:"Unknown error"})}finally{r(!1)}},x=async()=>{if(!t||!t.includes("@")){i({success:!1,message:"Please enter a valid email address"});return}try{r(!0),i(null);const y=await YH(t);i(y)}catch(y){i({success:!1,message:y instanceof Error?y.message:"Unknown error"})}finally{r(!1)}};return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Email Configuration Test"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Use this page to test email delivery and configuration"})]}),a&&m.jsx("div",{className:`p-4 rounded-md ${a.success?"bg-green-50":"bg-red-50"}`,children:m.jsxs("p",{className:`text-sm ${a.success?"text-green-700":"text-red-700"}`,children:[m.jsx("strong",{children:a.success?"Configuration OK:":"Configuration Error:"})," ",a.message]})}),m.jsxs("div",{className:"mt-8 space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email address"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"email-address",type:"email",required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"your@email.com",value:t,onChange:y=>e(y.target.value)})})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[m.jsx("button",{onClick:d,disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:n?"Sending...":"Test New Account"}),m.jsx("button",{onClick:h,disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:n?"Sending...":"Resend Verification"}),m.jsx("button",{onClick:x,disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 col-span-1 sm:col-span-2",children:n?"Checking...":"Check if Verified"})]}),s&&m.jsxs("div",{className:`mt-4 p-4 rounded-md ${s.success||s.verified?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[m.jsxs("p",{className:`text-sm font-medium ${s.success||s.verified?"text-green-800":"text-red-800"}`,children:[s.success||s.verified?"Success:":"Error:"," ",s.message]}),s.details&&m.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s.details})]})]}),m.jsx("div",{className:"mt-6",children:m.jsx(In,{to:"/",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back to Home"})})]})})},u$=[{path:"/auth/callback",element:m.jsx(s$,{})},{path:"/",element:m.jsx(o$,{children:m.jsx(i$,{children:m.jsx(bM,{})})}),children:[{index:!0,element:m.jsx(bB,{})},{path:"products",element:m.jsx(YB,{})},{path:"import",element:m.jsx(iU,{})},{path:"orders",element:m.jsx(D5,{})},{path:"inventory",element:m.jsx(eU,{})},{path:"reports",element:m.jsx(nU,{})},{path:"settings",element:m.jsx(aU,{})},{path:"*",element:m.jsx(Yp,{to:"/",replace:!0})}]},{path:"/login",element:m.jsx(eg,{children:m.jsx(zH,{})})},{path:"/signup",element:m.jsx(eg,{children:m.jsx(ZH,{})})},{path:"/forgot-password",element:m.jsx(eg,{children:m.jsx(e$,{})})},{path:"/reset-password",element:m.jsx(L_,{children:m.jsx(D_,{})})},{path:"/auth/reset-password",element:m.jsx(L_,{children:m.jsx(D_,{})})},{path:"/terms-of-service",element:m.jsx(a$,{})},{path:"/privacy-policy",element:m.jsx(l$,{})},{path:"/email-test",element:m.jsx(c$,{})}],d$=u6(u$);try{const t=localStorage.getItem("inventorySettings");if(t){const{darkMode:e}=JSON.parse(t);lC(e||!1)}}catch(t){console.error("Error initializing theme:",t)}const h$=gA();console.log("[App] Supabase configuration status:",h$.message);console.log("[App] Using Supabase email service for verification and password reset");console.log("[App] Environment:","production");console.log("[App] Supabase URL configured:",!0);console.log("[App] Site URL:",window.location.origin);console.log("[App] Auth redirect URL:",`${window.location.origin}/auth/callback`);tg.createRoot(document.getElementById("root")).render(m.jsx(_l.StrictMode,{children:m.jsx(F8,{store:ZP,children:m.jsx(QP,{children:m.jsx(tO,{children:m.jsx(w6,{router:d$})})})})}));export{Tf as g};
